(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-770bd4dd"],{c2f62:function(a,e,t){"use strict";t.r(e);var i=function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",{staticClass:"app-container"},[t("el-tabs",{attrs:{type:"card"},on:{"tab-click":function(e){return a.switchTab()}},model:{value:a.activeName,callback:function(e){a.activeName=e},expression:"activeName"}},a._l(a.groupTypeEnum,(function(a,e){return t("el-tab-pane",{key:e,attrs:{label:a.name,name:a.key}})})),1),t("el-form",[t("el-form-item",[a.hasPermission("BTN_GROUP_SET_ADD")?t("el-button",{staticClass:"operator-item",attrs:{icon:"el-icon-plus",type:"primary",size:"small"},on:{click:function(e){return a.groupAction("add")}}},[a._v("添加小组\n            ")]):a._e()],1)],1),t("div",{staticClass:"main-content-wrapper"},[t("el-table",{attrs:{border:"",height:"100%",data:a.dataList}},[t("el-table-column",{attrs:{type:"index",width:"50"}}),t("el-table-column",{attrs:{prop:"groupName",label:"小组名称"}}),t("el-table-column",{attrs:{label:"成员数",align:"center"},scopedSlots:a._u([{key:"default",fn:function(e){return[a._v(a._s(e.row.managerUsers.length))]}}])}),t("el-table-column",{attrs:{label:"状态"},scopedSlots:a._u([{key:"default",fn:function(e){return[0==e.row.status?t("div",[t("span",{staticClass:"mar-r-10"},[a._v("失效")]),t("i",{staticClass:"el-icon-warning warning"})]):t("div",[t("span",{staticClass:"mar-r-10"},[a._v("生效")]),t("i",{staticClass:"el-icon-success security"})])]}}])}),t("el-table-column",{attrs:{label:"操作",align:"center","min-width":"100px"},scopedSlots:a._u([{key:"default",fn:function(e){return[a.hasPermission("BTN_GROUP_SET_EDIT")?t("el-button",{attrs:{plain:"",type:"primary",size:"small"},on:{click:function(t){return a.groupAction("edit",e.row)}}},[a._v("编辑\n                    ")]):a._e()]}}])}),2==a.activeName?t("el-table-column",{attrs:{label:"处理标签","min-width":"400px"},scopedSlots:a._u([{key:"default",fn:function(e){return a._l(e.row.tags,(function(e,i){return t("el-tag",{key:i},[a._v(a._s(e.tagName))])}))}}],null,!1,303658683)}):a._e()],1)],1),t("div",{staticClass:"pagination-box"},[t("el-pagination",{attrs:{"current-page":a.param.page.pageNum,"page-sizes":[5,10,20,50],"page-size":a.param.page.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:a.totals},on:{"size-change":a.handleSizeChange,"current-change":a.getList}})],1),t("el-dialog",{attrs:{title:a.addDialog.title,width:"500px",visible:a.addDialog.show},on:{close:function(e){a.addDialog.show=!1}}},[t("div",[t("el-form",{ref:"addDialog",attrs:{"label-position":"right","label-width":"110px","label-suffix":"：",rules:a.addDialog.rules,model:a.addDialog.param}},[t("el-form-item",{attrs:{label:"小组名称",prop:"groupName"}},[t("el-input",{attrs:{size:"medium",placeholder:"请输入小组名称"},model:{value:a.addDialog.param.groupName,callback:function(e){a.$set(a.addDialog.param,"groupName",e)},expression:"addDialog.param.groupName"}})],1),t("el-form-item",{attrs:{label:"配置成员",prop:"managerIds"}},[t("el-select",{attrs:{multiple:"",filterable:"",placeholder:"请选择",size:"medium"},model:{value:a.addDialog.param.managerIds,callback:function(e){a.$set(a.addDialog.param,"managerIds",e)},expression:"addDialog.param.managerIds"}},a._l(a.adminUserList,(function(a,e){return t("el-option",{key:a.id+"_"+e,attrs:{label:a.nickName,value:a.id}})})),1)],1),t("el-form-item",{attrs:{label:"状态",prop:"status"}},[t("el-radio-group",{model:{value:a.addDialog.param.status,callback:function(e){a.$set(a.addDialog.param,"status",e)},expression:"addDialog.param.status"}},a._l(a.statusList,(function(e,i){return t("el-radio",{key:i,attrs:{label:e.key}},[a._v(a._s(e.name))])})),1)],1)],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{size:"small"},on:{click:function(e){a.addDialog.show=!1}}},[a._v("取 消")]),t("el-button",{attrs:{size:"small",type:"primary"},on:{click:a.confirm}},[a._v("确 定")])],1)])],1)},s=[],l=t("e7c2"),r=t("6d47"),n={data:function(){return{activeName:"1",totals:0,dataList:[],param:{page:{pageSize:10,pageNum:1,pagingSwitch:!0}},groupTypeEnum:[{name:"创建小组",key:"1"},{name:"处理小组",key:"2"}],statusList:[{name:"生效",key:1},{name:"失效",key:0}],addDialog:{title:"",show:!1,param:{id:null,groupName:null,status:1,groupType:0,managerIds:[]},rules:{groupName:[{required:!0,message:"不能为空",trigger:"change"}],managerIds:[{required:!0,message:"请选择",trigger:"change"}],status:[{required:!0,message:"请勾选",trigger:"change"}]}},adminUserList:[]}},created:function(){this.getList()},methods:{handleSizeChange:function(a){this.param.page.pageSize=a,this.getList()},getAdminUserList:function(){var a=this;Object(l["l"])({groupId:-1,page:{pageNum:1,pageSize:1e3}}).then((function(e){1===e.ret.errcode&&(a.adminUserList=e.sysUserPb)}))},getList:function(a){var e=this;this.param.page.pageNum=a||this.param.page.pageNum,Object(r["l"])(Object.assign(this.param,{groupType:this.activeName})).then((function(a){1===a.ret.errcode&&(e.dataList=a.data,e.totals=a.total),console.log(a)}))},switchTab:function(){this.param.page.pageNum=1,this.totals=0,this.getList()},groupAction:function(a,e){if(0==this.adminUserList.length&&this.getAdminUserList(),"add"==a)this.addDialog.title=1==this.activeName?"添加创建小组":"添加处理小组",Object.assign(this.addDialog.param,{id:null,groupName:null,groupType:this.activeName,status:1,managerIds:[]});else{this.addDialog.title=1==this.activeName?"编辑创建小组":"编辑处理小组",Object.assign(this.addDialog.param,e),this.addDialog.param.managerIds=[];for(var t=0;t<e.managerUsers.length;t++)this.addDialog.param.managerIds.push(parseInt(e.managerUsers[t].managerId))}this.addDialog.show=!0},confirm:function(){var a=this;this.$refs["addDialog"].validate((function(e){e&&(console.log(a.addDialog.param),a.addDialog.param.id?Object(r["i"])(a.filterData(a.addDialog.param)).then((function(e){console.log(e),1===e.ret.errcode&&(a.getList(),a.addDialog.show=!1)})):Object(r["b"])(a.filterData(a.addDialog.param)).then((function(e){console.log(e),1===e.ret.errcode&&(a.getList(),a.addDialog.show=!1)})))}))}}},o=n,d=t("2877"),c=Object(d["a"])(o,i,s,!1,null,null,null);e["default"]=c.exports}}]);