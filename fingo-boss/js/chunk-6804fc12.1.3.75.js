(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6804fc12"],{"1f35":function(e,t,r){"use strict";var s=r("a640"),a=r.n(s);a.a},"383d":function(e,t,r){"use strict";var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-dialog",{attrs:{title:"用户信息","close-on-click-modal":!1,width:"800px","append-to-body":"",visible:e.propShowDialog},on:{close:e.close}},[r("div",[[r("div",{staticClass:"flex align-center mar-t-10"},[r("span",[e._v("姓名：")]),r("el-input",{staticClass:"flex1",attrs:{placeholder:"请输入姓名"},model:{value:e.param.receiverName,callback:function(t){e.$set(e.param,"receiverName",t)},expression:"param.receiverName"}})],1),r("div",{staticClass:"flex align-center mar-t-10"},[r("span",[e._v("手机号：")]),r("el-input",{staticClass:"flex1",attrs:{placeholder:"请输入手机号"},model:{value:e.param.receiverPhone,callback:function(t){e.$set(e.param,"receiverPhone",t)},expression:"param.receiverPhone"}})],1)],"SG"==e.countryCode?[r("div",{staticClass:"flex align-center mar-t-10"},[r("span",[e._v("收货邮编：")]),r("el-input",{staticClass:"flex1",attrs:{placeholder:"请输入邮编"},model:{value:e.param.postcode,callback:function(t){e.$set(e.param,"postcode",t)},expression:"param.postcode"}})],1),r("div",{staticClass:"flex align-center mar-t-10"},[r("span",[e._v("详细地址：")]),r("el-input",{staticClass:"flex1",attrs:{placeholder:"请输入详细地址"},model:{value:e.param.detail,callback:function(t){e.$set(e.param,"detail",t)},expression:"param.detail"}})],1)]:[r("div",{staticClass:"flex align-center mar-t-10"},[r("span",{staticClass:"mar-l-10"},[e._v("省：")]),r("el-select",{attrs:{placeholder:"省"},on:{change:function(t){return e.getCityData()}},model:{value:e.param.stateName,callback:function(t){e.$set(e.param,"stateName",t)},expression:"param.stateName"}},e._l(e.stateList,(function(e){return r("el-option",{key:e.stateName,attrs:{label:e.stateName,value:e.stateName}})})),1),r("span",{staticClass:"mar-l-10"},[e._v("市：")]),r("el-select",{attrs:{placeholder:"市"},on:{change:function(t){return e.getPostCode()}},model:{value:e.param.cityName,callback:function(t){e.$set(e.param,"cityName",t)},expression:"param.cityName"}},e._l(e.cityList,(function(e){return r("el-option",{key:e.cityName,attrs:{label:e.cityName,value:e.cityName}})})),1),r("span",{staticClass:"mar-l-10"},[e._v("邮编：")]),r("el-select",{attrs:{placeholder:"邮编"},model:{value:e.param.postcode,callback:function(t){e.$set(e.param,"postcode",t)},expression:"param.postcode"}},e._l(e.postcodeList,(function(e){return r("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),r("div",{staticClass:"flex align-center mar-t-10"},[r("span",[e._v("详细地址：")]),r("el-input",{staticClass:"flex1",attrs:{placeholder:"请输入详细地址"},model:{value:e.param.detail,callback:function(t){e.$set(e.param,"detail",t)},expression:"param.detail"}})],1)]],2),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{size:"small"},on:{click:e.close}},[e._v("取 消")]),r("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.confirm()}}},[e._v("确 定")])],1)])},a=[],o=(r("ac6a"),r("456d"),r("7514"),r("d6eb")),n={props:{countryCode:String,propShowDialog:Boolean,countryList:{type:Array,default:function(){return[]}},propParam:{type:Object,default:function(){return{}}}},data:function(){return{stateList:[],cityList:[],postcodeList:[],param:{receiverName:"",receiverPhone:"",cityName:"",cityCode:"",stateName:"",stateCode:"",postcode:"",detail:""}}},created:function(){var e=this;for(var t in this.getAddressData({resolve:function(t){e.stateList=t}}),this.param)this.propParam[t]&&(this.param[t]=this.propParam[t]);this.propParam["receiverAddress"]&&(this.param.detail=this.propParam["receiverAddress"]),this.propParam["cityCode"]&&(this.param.cityCode=this.propParam.cityCode,this.param.cityName=this.propParam.cityCode),this.propParam["stateCode"]&&(this.param.stateCode=this.propParam.stateCode,this.param.stateName=this.propParam.stateCode)},methods:{getAddressData:function(e){var t=e.resolve;Object(o["d"])({countryCode:this.countryCode,stateName:this.param.stateName}).then((function(e){t&&t(e.stat)}))},reset:function(e){switch(e){case"country":this.param.stateName="",this.param.stateCode="",this.param.cityCode="",this.param.cityName="",this.param.postcode="";break;case"state":this.param.cityCode="",this.param.cityName="",this.param.postcode="";break;case"city":this.param.postcode="";break}},getCityData:function(){var e=this;this.getAddressData({resolve:function(t){e.reset("state"),console.log(t),e.cityList=t[0].city,e.postcodeList=[]}})},getPostCode:function(){var e=this;this.reset("city");var t=this.cityList.find((function(t){return t.cityName==e.param.cityName}));this.postcodeList=t.postcode},close:function(){this.$emit("close")},confirm:function(){var e=this,t=this.countryList.find((function(t){return t.shortCode==e.countryCode}));if("SG"==this.countryCode)this.param.stateName=t?t.nameEn:"Singapore",this.param.stateCode=t?t.nameEn:"Singapore",this.param.cityCode=t?t.nameEn:"Singapore",this.param.cityName=t?t.nameEn:"Singapore";else{var r=this.stateList.find((function(t){return t.stateName==e.param.stateName}));this.param.stateCode=r?r.stateCode:this.param.stateName;var s=this.cityList.find((function(t){return t.cityName==e.param.cityName}));this.param.cityCode=s?s.cityCode:this.param.cityName}var a=this.filterData(this.param);if(console.log(a),Object.keys(a).length!=Object.keys(this.param).length)return this.$message.warning("请填写完整");this.$emit("confirm",a),console.log(this.countryList)}}},i=n,l=r("2877"),c=Object(l["a"])(i,s,a,!1,null,null,null);t["a"]=c.exports},"3ce8":function(e,t,r){},a640:function(e,t,r){},a66b:function(e,t,r){},c0fb:function(e,t,r){"use strict";var s=r("a66b"),a=r.n(s);a.a},c2b8:function(e,t,r){"use strict";var s=r("3ce8"),a=r.n(s);a.a},c747:function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container"},[r("div",[r("el-card",{staticClass:"info-card"},[r("c-order-progress",{attrs:{orderNo:e.orderNo}})],1),r("el-card",{staticClass:"info-card"},[r("div",{staticClass:"info-title mar-b-10"},[e._v("订单信息")]),r("c-order-info",{attrs:{orderInfo:e.orderInfo,orderNo:e.orderNo,userLevel:e.userLevel},on:{refresh:e.getOrderDetail}})],1),r("el-card",{staticClass:"info-card"},[r("div",{staticClass:"info-title mar-b-10"},[e._v("商品信息")]),r("c-product-info",{attrs:{productInfo:e.productInfo,orderInfo:e.orderInfo}})],1),r("el-card",{staticClass:"info-card"},[r("div",{staticClass:"info-title mar-b-10"},[e._v("子单信息")]),r("c-order-sub",{attrs:{orderNo:e.orderNo}})],1),r("el-card",{staticClass:"info-card"},[r("div",{staticClass:"info-title mar-b-10"},[e._v("收货信息")]),r("c-receiver-info",{attrs:{receiverInfo:e.receiverInfo,orderInfo:e.orderInfo,orderNo:e.orderNo},on:{refresh:e.getOrderDetail}})],1),r("el-card",{staticClass:"info-card"},[r("div",{staticClass:"info-title mar-b-10"},[e._v("积分信息")]),r("c-points-info",{attrs:{pointsInfo:e.pointsInfo,userLevel:e.userLevel}})],1)],1)])},a=[],o=r("98a9"),n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"order-info-wrapper"},[r("div",[r("div",[r("span",[e._v("订单编号：")]),e._v(e._s(e.orderNo))]),r("div",[r("span",[e._v("订单国家：")]),e._v(e._s(e._f("countryFilter")(e.orderInfo.countryCode)))]),r("div",[r("span",[e._v("订单状态：")]),e._v(e._s(e._f("statusFilter")(e.orderInfo.orderStatus)))]),r("div",[r("span",[e._v("订单类型：")]),e._v(e._s(e._f("orderTypeFilter")(e.orderInfo.orderType)))]),r("div",[r("span",[e._v("配送方式：")]),e._v("快递 "),1==e.orderInfo.orderStatus&&e.hasPermission("BTN_ORDER_LIST_CHANGE_DELIVERY")?r("el-button",{staticClass:"mar-l-10",attrs:{plain:"",type:"primary",size:"mini"},on:{click:function(t){return e.changeDelivery()}}},[e._v("改为自提")]):e._e()],1),r("div",[r("span",[e._v("下单时间：")]),e._v(e._s(e._f("formatTime")(e.orderInfo.createTime)))]),r("div",[r("span",[e._v("支付时间：")]),e._v(e._s(e._f("formatTime")(e.orderInfo.payTime)))]),r("div",[r("span",[e._v("收货时间：")]),e._v(e._s(e._f("formatTime")(e.orderInfo.receiveTime)))])]),r("div",[r("div",[r("span",[e._v("订单总价：")]),e._v(e._s(e.orderInfo.currency+" "+e.orderInfo.totalAmount))]),r("div",[r("span",[e._v("积分抵扣：")]),e._v(e._s(e.orderInfo.currency+" "+e.orderInfo.usePoints))]),r("div",[r("span",[e._v("实付金额：")]),e._v(e._s(e.orderInfo.paied?e.orderInfo.paiedCurrency+" "+e.orderInfo.paied:"-"))]),r("div",[r("span",[e._v("支付交易号：")]),e._v(e._s(e.orderInfo.transCode||"-"))]),r("div",[r("span",[e._v("支付方式：")]),e._v(e._s(e.payWay[e.orderInfo.payWay]||"-"))]),r("div",[r("span",[e._v("支付商户：")]),e._v(e._s(e.orderInfo.paySupplier||"-"))])]),r("div",[r("div",[r("span",[e._v("买家账号：")]),e._v(e._s(e.orderInfo.nickname)+"("+e._s(e.orderInfo.userId)+")")]),r("div",[r("span",[e._v("买家等级：")]),e._v(e._s(e.userLevel[e.orderInfo.userLevel]))]),r("div",[r("span",[e._v("上级账号：")]),e._v(e._s(e.orderInfo.parentId?e.orderInfo.parentNick+"("+e.orderInfo.parentId+") ":"-"))]),r("div",[r("span",[e._v("上级等级：")]),e._v(e._s(e.orderInfo.parentLevel?e.userLevel[e.orderInfo.parentLevel]:"-"))])])])},i=[],l=(r("c5f6"),{props:{orderInfo:Object,orderNo:[String,Number],userLevel:Object},data:function(){return{payWay:{1:"molpay",2:"积分支付",3:"信用卡支付",4:"omise",5:"OnlineBanking",6:"COD",7:"组合支付"}}},methods:{changeDelivery:function(){var e=this;Object(o["g"])({orderId:this.orderNo}).then((function(t){1===t.ret.errcode&&(e.$message.success("自提成功"),e.$emit("refresh"))}))}}}),c=l,d=(r("f2c4"),r("2877")),u=Object(d["a"])(c,n,i,!1,null,"f2ec94a4",null),p=u.exports,f=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-table",{attrs:{"header-cell-style":{background:"#f2f2f2",color:"#606266"},border:"",data:e.productInfo.productItem}},[r("el-table-column",{attrs:{label:"商品信息","min-width":"320px","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",{staticClass:"product-info"},[r("div",{staticClass:"flex"},[r("el-popover",{attrs:{placement:"top-start",trigger:"hover"}},[r("img",{staticClass:"previewImage",attrs:{src:e.dealShowFileSrc(t.row.productSnap.skuCover)}}),r("img",{staticClass:"thumbnail",attrs:{slot:"reference",src:e.dealShowFileSrc(t.row.productSnap.skuCover)},slot:"reference"})])],1),r("div",{staticClass:"product-detail"},[r("div",{staticClass:"product-id"},[r("span",[e._v("商品ID："+e._s(t.row.productSnap.productId))]),e._l(t.row.productSnap.activity,(function(s,a){return r("img",{key:t.$index+"-activity"+a,attrs:{src:e.dealShowFileSrc(s.icon)}})}))],2),r("div",{staticClass:"product-name"},[e._v(e._s(t.row.productSnap.productName))]),t.row.productSnap.afterPledge.length>0||t.row.productSnap.arrivalPledge.length>0?r("el-tooltip",{attrs:{placement:"top"}},[r("div",{attrs:{slot:"content"},slot:"content"},[r("div",{staticClass:"service-wrapper"},[e._l(t.row.productSnap.afterPledge,(function(s,a){return r("span",{key:t.$index+"-afterPledge"+a,staticClass:"mar-r-10"},[e._v(e._s(s.label))])})),e._l(t.row.productSnap.arrivalPledge,(function(s,a){return r("span",{key:t.$index+"-arrivalPledge"+a,staticClass:"mar-r-10"},[e._v(e._s(s.label))])}))],2)]),r("div",{staticClass:"service-wrapper"},[e._l(t.row.productSnap.afterPledge,(function(s,a){return r("span",{key:t.$index+"-afterPledge"+a},[e._v(e._s(s.label))])})),e._l(t.row.productSnap.arrivalPledge,(function(s,a){return r("span",{key:t.$index+"-arrivalPledge"+a},[e._v(e._s(s.label))])}))],2)]):e._e(),t.row.productSnap.promotion.length>0||t.row.productSnap.coupon.length>0?r("el-tooltip",{attrs:{placement:"top"}},[r("div",{attrs:{slot:"content"},slot:"content"},[r("div",{staticClass:"promotion-coupon-wrapper"},[t.row.productSnap.promotion.length>0?r("div",{staticClass:"promotion"},[r("em",[e._v("促销")]),r("div",e._l(t.row.productSnap.promotion,(function(s,a){return r("span",{key:t.$index+"-promotion"+a,staticClass:"mar-r-10"},[e._v(e._s(s.label))])})),0)]):e._e(),t.row.productSnap.coupon.length>0?r("div",{staticClass:"coupon"},[r("em",[e._v("用劵")]),r("div",e._l(t.row.productSnap.coupon,(function(s,a){return r("span",{key:t.$index+"-coupon"+a,staticClass:"mar-r-10"},[e._v(e._s(s.label))])})),0)]):e._e()])]),r("div",{staticClass:"promotion-coupon-wrapper"},[t.row.productSnap.promotion.length>0?r("div",{staticClass:"promotion"},[r("em",[e._v("促销")]),r("div",e._l(t.row.productSnap.promotion,(function(s,a){return r("span",{key:t.$index+"-promotion"+a},[e._v(e._s(s.label))])})),0)]):e._e(),t.row.productSnap.coupon.length>0?r("div",{staticClass:"coupon"},[r("em",[e._v("用劵")]),r("div",e._l(t.row.productSnap.coupon,(function(s,a){return r("span",{key:t.$index+"-coupon"+a},[e._v(e._s(s.label))])})),0)]):e._e()])]):e._e()],1)])]}}])}),r("el-table-column",{attrs:{label:"规格","min-width":"100px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",[e._v(e._s(t.row.productSnap.skuId))]),r("div",e._l(t.row.productSnap.attr,(function(t,s){return r("span",{key:s},[e._v(e._s(t.attrLabel+"："+t.valueLabel))])})),0)]}}])}),r("el-table-column",{attrs:{label:"数量",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",[e._v(e._s(t.row.productSnap.num))])]}}])}),r("el-table-column",{attrs:{label:"销售单价"+e.orderInfo.currency,align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",[e._v(e._s(t.row.productSnap.price))])]}}])}),r("el-table-column",{attrs:{label:"用劵优惠"+e.orderInfo.currency,align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",[e._v(e._s(t.row.productSnap.couponDiscount))])]}}])}),r("el-table-column",{attrs:{label:"促销优惠"+e.orderInfo.currency,align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",[e._v(e._s(t.row.productSnap.promotionDiscount))])]}}])}),r("el-table-column",{attrs:{label:"实付单价"+e.orderInfo.currency,width:"100px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",[e._v(e._s(t.row.productSnap.payable))])]}}])}),r("el-table-column",{attrs:{label:"子单编号",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.suborderItem,(function(t,s){return r("div",{key:s,staticClass:"sub-order-wrapper"},[r("div",[e._v(e._s(t.suborderId))]),r("div",[e._v(e._s(t.warehouseName))])])}))}}])}),r("el-table-column",{attrs:{label:"子单状态","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.suborderItem,(function(t,s){return r("div",{key:s,staticClass:"sub-order-wrapper"},[e._v(e._s(e._f("statusFilter")(t.status)))])}))}}])}),r("el-table-column",{attrs:{label:"售后状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",[e._v(e._s(e._f("afterStatusFilter")(t.row.productSnap.afterStatus)))])]}}])}),r("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",{staticClass:"table-action-btn-box"},[r("el-button",{attrs:{plain:"",type:"primary",size:"mini"},on:{click:function(t){return e.triggerToLogistics()}}},[e._v("查看物流")])],1)]}}])})],1),r("div",{staticClass:"product-footer"},[r("div",[e._v("商品总价："+e._s(e.orderInfo.currency+" "+e.productInfo.totalPrice))]),r("div",[e._v("总用券优惠："+e._s(e.productInfo.coupon))]),r("div",[e._v("总促销优惠："+e._s(e.orderInfo.currency+" "+e.productInfo.promotion))]),r("div",[e._v("实付金额："+e._s(e.orderInfo.paiedCurrency+" "+e.orderInfo.paied)+"(含运费)")]),r("div",[e._v(e._s(e._f("statusFilter")(e.orderInfo.orderStatus)))])])],1)},m=[],v={props:{productInfo:Object,orderInfo:Object},methods:{triggerToLogistics:function(){}}},_=v,h=(r("1f35"),Object(d["a"])(_,f,m,!1,null,"0e7d4240",null)),g=h.exports,b=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-form",{attrs:{"label-width":"120px"}},[r("el-form-item",{attrs:{label:"收货人姓名："}},[e._v(e._s(e.receiverInfo.receiverName))]),r("el-form-item",{attrs:{label:"收货人电话："}},[e._v(e._s(e.receiverInfo.receiverPhone))]),r("el-form-item",{attrs:{label:"收货地址："}},[e._v(e._s(e.receiverInfo.receiverAddress+", "+e.receiverInfo.cityCode+", "+e.receiverInfo.stateCode+", "+e.receiverInfo.postcode))]),r("el-form-item",{attrs:{label:"用户备注："}},[e._v(e._s(e.receiverInfo.remark))]),r("el-form-item",[1!=e.orderInfo.orderStatus&&2!=e.orderInfo.orderStatus||!e.hasPermission("BTN_ORDER_LIST_CHANGE_ADDRESS")?e._e():r("el-button",{attrs:{plain:"",type:"primary",size:"mini"},on:{click:function(t){e.address.show=!0}}},[e._v("修改收货信息")])],1)],1),e.address.show?r("app-address",{attrs:{propParam:e.receiverInfo,propShowDialog:e.address.show,countryCode:e.orderInfo.countryCode,orderNo:e.orderNo},on:{close:function(t){e.address.show=!1},confirm:e.updateAddress}}):e._e()],1)},y=[],C=r("383d"),S={props:{receiverInfo:Object,orderInfo:Object,orderNo:[String,Number]},components:{appAddress:C["a"]},data:function(){return{countryCode:"MY",address:{show:!1}}},methods:{updateAddress:function(e){var t=this;Object(o["s"])(Object.assign(e,{orderId:this.orderNo})).then((function(e){1===e.ret.errcode&&(t.address.show=!1,t.$emit("refresh"))}))}}},I=S,w=Object(d["a"])(I,b,y,!1,null,null,null),k=w.exports,L=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-table",{attrs:{"header-cell-style":{background:"#f2f2f2",color:"#606266"},border:"","summary-method":e.getSummaries,"show-summary":"",data:e.pointsInfo.skuPointsInfo}},[r("el-table-column",{attrs:{label:"商品信息","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",{staticClass:"flex"},[r("el-popover",{attrs:{placement:"top-start",trigger:"hover"}},[r("img",{staticClass:"previewImage",attrs:{src:e.dealShowFileSrc(t.row.skuCover)}}),r("img",{staticClass:"thumbnail",attrs:{slot:"reference",src:e.dealShowFileSrc(t.row.skuCover)},slot:"reference"})])],1)]}}])}),r("el-table-column",{attrs:{label:"规格ID",prop:"skuId",align:"center"}}),e._l(e.pointsInfo.title,(function(t,s){return r("el-table-column",{key:s,scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(t.row.points[s])+"\n        ")]}}],null,!0)},[r("template",{slot:"header"},[r("div",[e._v(e._s(t.nickname)+"("+e._s(t.userId)+")("+e._s(t.currency||"-")+")")]),r("div",[e._v(e._s(e.userLevel[t.userLevel])+e._s(t.pointType))])])],2)}))],2)},N=[],x=(r("ac6a"),{props:{pointsInfo:Object,userLevel:Object},methods:{getSummaries:function(e){var t=this,r=e.columns,s=[];return r.forEach((function(e,r){s[r]=0===r?"":1===r?"小计：":t.pointsInfo.pointsVerticalSum[r-2]?t.pointsInfo.pointsVerticalSum[r-2]:0})),s}}}),O=x,P=Object(d["a"])(O,L,N,!1,null,null,null),T=P.exports,$=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"order-progress"},[r("div",{staticClass:"progress-box"},[r("div",{staticClass:"progress-line"},[r("div",{staticClass:"progress-title"},[e._v("提交订单")]),r("div",{staticClass:"progress-time"},[e._v(e._s(e._f("formatTime")(0==e.timeList.length?"-":e.timeList[0]&&e.timeList[0].time[0])))]),r("div",{staticClass:"progress-show"},[0!=e.timeList.length?r("div",{staticClass:"push-b"}):e._e(),0==e.timeList.length?r("div",{staticClass:"push-g"}):e._e(),r("el-progress",{attrs:{percentage:0==e.timeList.length?0:1==e.timeList.length?50:100}})],1),r("div",{staticClass:"progress-continue"},[e._v(e._s(0==e.timeList.length?"":1==e.timeList.length?e.formatSecondsTo(e.nowTime,e.timeList[0].time[0]):e.formatSecondsTo(e.timeList[1].time[0],e.timeList[0].time[0])))])]),r("div",{staticClass:"progress-line"},[r("div",{staticClass:"progress-title"},[e._v("确认支付")]),r("div",{staticClass:"progress-time"},[e._v(e._s(e._f("formatTime")(1==e.timeList.length?"-":e.timeList[1]&&e.timeList[1].time[0])))]),r("div",{staticClass:"progress-show"},[e.timeList.length<=1?e._e():r("div",{staticClass:"push-b"}),e.timeList.length<=1?r("div",{staticClass:"push-g"}):e._e(),r("el-progress",{attrs:{percentage:e.timeList.length<=1?0:2==e.timeList.length?50:100}})],1),1==e.timeList.length?r("div",{staticClass:"progress-continue"},[e._v(e._s(""))]):2==e.timeList.length?r("div",{staticClass:"progress-continue"},[e._v(e._s(e.formatSecondsTo(e.nowTime,e.timeList[1].time[0])))]):e.timeList.length>2?r("div",{staticClass:"progress-continue"},[e._v(e._s(e.formatSecondsTo(e.timeList[2].time[0],e.timeList[1].time[0])))]):e._e()]),r("div",{staticClass:"progress-line"},[r("div",{staticClass:"progress-title"},[e._v("发货")]),r("div",{staticClass:"progress-time"},[e._v(e._s(e._f("formatTime")(2==e.timeList.length?"-":e.timeList[2]&&e.timeList[2].time[0])))]),r("div",{staticClass:"progress-show"},[e.timeList.length<=2?e._e():r("div",{staticClass:"push-b"}),e.timeList.length<=2?r("div",{staticClass:"push-g"}):e._e(),e.timeList.length<=2?r("el-progress",{attrs:{percentage:0}}):3==e.timeList.length?r("el-progress",{attrs:{percentage:50}}):r("el-progress",{attrs:{percentage:100}})],1),2==e.timeList.length?r("div",{staticClass:"progress-continue"},[e._v(e._s(""))]):3==e.timeList.length?r("div",{staticClass:"progress-continue"},[e._v(e._s(e.formatSecondsTo(e.nowTime,e.timeList[2].time[0])))]):e.timeList.length>3?r("div",{staticClass:"progress-continue"},[e._v(e._s(e.formatSecondsTo(e.timeList[3].time[0],e.timeList[2].time[0])))]):e._e()]),r("div",{staticClass:"progress-line"},[r("div",{staticClass:"progress-title"},[e._v("收货")]),r("div",{staticClass:"progress-time"},[e._v(e._s(e._f("formatTime")(3==e.timeList.length?"-":e.timeList[3]&&e.timeList[3].time[0])))]),r("div",{staticClass:"progress-show"},[e.timeList.length<=3?e._e():r("div",{staticClass:"push-b",staticStyle:{width:"10px"}}),e.timeList.length<=3?r("div",{staticClass:"push-g",staticStyle:{width:"10px"}}):e._e()])])])])},D=[],j={data:function(){return{timeList:[],nowTime:(new Date).valueOf()}},props:{orderNo:String},mounted:function(){this.getOrderStatusFlow()},computed:{},methods:{getOrderStatusFlow:function(){var e=this,t={orderId:this.orderNo};Object(o["b"])(t).then((function(t){1===t.ret.errcode&&(console.log(t),e.timeList=t.flowInfo,console.log(e.timeList))}))},formatSecondsTo:function(e,t){console.log(e,t);var r,s=Number(e)-t;console.log(s);var a=parseInt(s/864e5),o=parseInt(s%864e5/36e5),n=parseInt(s%36e5/6e4),i=parseInt(s%6e4/1e3);return a>0?r=a+"天"+o+"小时"+n+"分"+i+"秒":o>0?r=o+"小时"+n+"分"+i+"秒":n>0?r=n+"分"+i+"秒":i>0&&(r=i+"秒"),r}}},E=j,A=(r("c2b8"),r("c0fb"),Object(d["a"])(E,$,D,!1,null,"599a3d98",null)),F=A.exports,R=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-table",{ref:"table",staticClass:"order-sub",staticStyle:{width:"100%","font-size":"12px"},attrs:{data:e.dataList,border:"","row-key":e.getRowKeys,"default-expand-all":!0,"header-cell-style":{background:"#F9FAFD"}}},[r("el-table-column",{staticStyle:{width:"100%"},attrs:{fixed:"left",prop:"skuInfo",type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-table",{staticStyle:{width:"100%","font-size":"10px"},attrs:{data:t.row.skuInfo,"header-cell-style":{background:"#F9FAFD"}}},[r("el-table-column",{attrs:{label:"skuCode",align:"center",prop:"skuCode",width:"120px"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",[e._v(e._s(t.row.skuCode))])]}}],null,!0)}),r("el-table-column",{attrs:{label:"商品",align:"center","min-width":"300px"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",{staticClass:"product"},[r("img",{staticClass:"image-box",attrs:{slot:"reference",src:e.dealShowFileSrc(t.row.skuCover)},slot:"reference"}),r("div",{staticClass:"product-desc"},[r("div",{staticClass:"product-content"},[e._v(e._s(t.row.skuName))]),r("div",{staticClass:"product-id"},[e._v("商品Id："+e._s(t.row.skuId))])])])]}}],null,!0)}),r("el-table-column",{attrs:{label:"规格",prop:"attr",align:"center","min-width":"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",[e._v(e._s(t.row.attr))])]}}],null,!0)}),r("el-table-column",{attrs:{label:"购买数量",align:"center","min-width":"80px"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",[e._v(e._s(t.row.num))])]}}],null,!0)}),r("el-table-column",{attrs:{label:"已发货数量",align:"center","min-width":"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",[e._v(e._s(t.row.shipNum))])]}}],null,!0)}),r("el-table-column",{attrs:{label:"确认采购数量",align:"center","min-width":"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",[e._v(e._s(t.row.purchasedNum))])]}}],null,!0)}),r("el-table-column",{attrs:{label:"关联出库单",align:"center","min-width":"400px"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",[0===t.row.outOrder.length?r("div",{staticClass:"status-none"},[e._v("无")]):e._l(t.row.outOrder,(function(t,s){return r("div",{key:s,staticClass:"out-info"},[r("div",{staticClass:"out-id"},[e._v(e._s(t.oon))]),r("div",{staticClass:"out-status"},[e._v(e._s(e.outOrderStatus[t.outStatus]))]),r("div",[e._v(e._s(e.formatSecondsTo(t.time)))]),""!==t.label?r("div",{staticClass:"aging-out"},[e._v(e._s(t.label))]):e._e()])}))],2)]}}],null,!0)}),r("el-table-column",{attrs:{label:"关联采购单",align:"center","min-width":"400px"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",[0===t.row.purOrder.length?r("div",{staticClass:"status-none"},[e._v("无")]):e._l(t.row.purOrder,(function(t,s){return r("div",{key:s,staticClass:"out-info"},[r("div",{staticClass:"out-id"},[e._v(e._s(t.pon))]),r("div",{staticClass:"out-status"},[e._v(e._s(e.ponStatus[t.ponStatus]))]),r("div",[e._v(e._s(e.formatSecondsTo(t.time)))]),""!==t.label?r("div",{staticClass:"aging-out"},[e._v(e._s(t.label))]):e._e()])}))],2)]}}],null,!0)})],1)]}}])}),r("el-table-column",{attrs:{fixed:"left",label:"子订单号",align:"center",prop:"suborderId","min-width":"180px"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",[e._v(e._s(t.row.suborderId))])]}}])}),r("el-table-column",{attrs:{label:"发货仓库",align:"center","min-width":"80px",prop:"warehouseName"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",[e._v(e._s(t.row.warehouseName))])]}}])}),r("el-table-column",{attrs:{label:"订单状态",align:"center","min-width":"80px",prop:"deliveWay"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",[e._v(e._s(e.orderStatus[t.row.subStatus]))])]}}])}),r("el-table-column",{attrs:{label:"订单状态",align:"center","min-width":"80px",prop:"deliveWay"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",{staticClass:"order-aging"},[r("div",[e._v(e._s(e.formatSecondsTo(t.row.time)))]),""!==t.row.label?r("div",{staticClass:"aging-out"},[e._v(e._s(t.row.label))]):e._e()])]}}])})],1)},z=[],W={data:function(){return{dataList:[],orderStatus:{0:"待支付",1:"待发货",2:"待收货",3:"交易成功",4:"交易关闭",5:"部分发货"},outOrderStatus:{0:"-",1:"已出库",2:"未出库",3:"已取消"},ponStatus:{WAIT_PURCHASE:"未采购",PURCHASED:"待发货",SHIPPED:"待入库",STORAGED:"已入库",CANCELED:"已取消",NULL:""}}},props:{orderNo:String},mounted:function(){this.getSubOrders()},methods:{getRowKeys:function(e){return e.suborderId},getSubOrders:function(){var e=this,t={orderId:this.orderNo};Object(o["c"])(t).then((function(t){1===t.ret.errcode&&(console.log(t),e.dataList=t.subOrder,console.log(e.dataList))}))},formatSecondsTo:function(e){var t,r=parseInt(e/864e5),s=parseInt(e%864e5/36e5),a=parseInt(e%36e5/6e4),o=parseInt(e%6e4/1e3);return r>0?t=r+"天"+s+"小时"+a+"分"+o+"秒":s>0?t=s+"小时"+a+"分"+o+"秒":a>0?t=a+"分"+o+"秒":o>0&&(t=o+"秒"),t}}},H=W,G=(r("f2a8"),r("eba6"),Object(d["a"])(H,R,z,!1,null,"67a6dc9a",null)),V=G.exports;Vue.filter("orderTypeFilter",(function(e){switch(e){case 0:return"普通商品订单";case 1:return"小礼包商品订单";case 2:return"大礼包商品订单";case 4:return"拼团订单";case 5:return"直播订单";case 8:return"虚拟商品订单";case 9:return"批发商品订单";case 10:return"微商商品订单"}return""}));var B={components:{cOrderInfo:p,cProductInfo:g,cReceiverInfo:k,cPointsInfo:T,cOrderProgress:F,cOrderSub:V},data:function(){return{orderInfo:{totalAmount:"",usePoints:"",nickname:"",userId:"",orderStatus:"",paied:"",userLevel:"",orderType:"",transCode:"",parentNick:"",parentId:"",parentLevel:"",payWay:"",createTime:"",paySupplier:"",payTime:"",receiveTime:"",paiedCurrency:"",currency:""},productInfo:{productItem:[],totalPrice:"",coupon:"",promotion:"",payable:""},receiverInfo:{receiverName:"",receiverPhone:"",receiverAddress:"",remark:"",cityCode:"",stateCode:"",postcode:""},pointsInfo:{title:[],skuPointsInfo:[],pointsVerticalSum:[],pointsHorizontalSum:[]},orderNo:""}},computed:{countryList:function(){return this.$store.state.dict.countryList},userLevel:function(){return this.$store.state.user.userLevel}},created:function(){this.orderNo=this.$route.query.orderNo?this.$route.query.orderNo:"",this.getOrderDetail()},methods:{getOrderDetail:function(){var e=this;Object(o["v"])({orderId:this.orderNo}).then((function(t){1===t.ret.errcode&&(Object.assign(e.orderInfo,t.orderInfo),Object.assign(e.productInfo,t.productInfo),Object.assign(e.receiverInfo,t.receiverInfo),Object.assign(e.pointsInfo,t.pointsInfo))}))}}},U=B,q=Object(d["a"])(U,s,a,!1,null,null,null);t["default"]=q.exports},e02a:function(e,t,r){},eba6:function(e,t,r){"use strict";var s=r("f1c8"),a=r.n(s);a.a},ec6e:function(e,t,r){},f1c8:function(e,t,r){},f2a8:function(e,t,r){"use strict";var s=r("ec6e"),a=r.n(s);a.a},f2c4:function(e,t,r){"use strict";var s=r("e02a"),a=r.n(s);a.a}}]);