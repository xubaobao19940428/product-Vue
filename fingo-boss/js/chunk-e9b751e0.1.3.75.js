(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e9b751e0"],{"6aca":function(e,a,t){"use strict";t.r(a);var r=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"app-container translate-wrapper"},[t("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeSystem,callback:function(a){e.activeSystem=a},expression:"activeSystem"}},e._l(e.systemList,(function(e,a){return t("el-tab-pane",{key:a,attrs:{label:e.label,name:e.val}})})),1),t("el-form",{attrs:{inline:"","label-width":"80px"}},[t("el-form-item",{attrs:{label:"变量名："}},[t("el-input",{attrs:{placeholder:"请输入",size:"medium"},on:{keyup:function(a){return!a.type.indexOf("key")&&e._k(a.keyCode,"enter",13,a.key,"Enter")?null:e.getList(1,e.activeSystem)}},model:{value:e.searchParam.variableCodeKey,callback:function(a){e.$set(e.searchParam,"variableCodeKey",a)},expression:"searchParam.variableCodeKey"}})],1),t("el-form-item",{attrs:{label:"中文："}},[t("el-input",{attrs:{placeholder:"请输入",size:"medium"},on:{keyup:function(a){return!a.type.indexOf("key")&&e._k(a.keyCode,"enter",13,a.key,"Enter")?null:e.getList(1,e.activeSystem)}},model:{value:e.searchParam.nameCnKey,callback:function(a){e.$set(e.searchParam,"nameCnKey",a)},expression:"searchParam.nameCnKey"}})],1),t("el-form-item",{attrs:{label:"英文："}},[t("el-input",{attrs:{placeholder:"请输入",size:"medium"},on:{keyup:function(a){return!a.type.indexOf("key")&&e._k(a.keyCode,"enter",13,a.key,"Enter")?null:e.getList(1,e.activeSystem)}},model:{value:e.searchParam.nameEnKey,callback:function(a){e.$set(e.searchParam,"nameEnKey",a)},expression:"searchParam.nameEnKey"}})],1),t("el-form-item",{attrs:{label:"翻译项："}},[t("el-input",{attrs:{placeholder:"请输入",size:"medium"},on:{keyup:function(a){return!a.type.indexOf("key")&&e._k(a.keyCode,"enter",13,a.key,"Enter")?null:e.getList(1,e.activeSystem)}},model:{value:e.searchParam.translationKey,callback:function(a){e.$set(e.searchParam,"translationKey",a)},expression:"searchParam.translationKey"}})],1),t("el-form-item",{staticClass:"filter-item",attrs:{label:"语言："}},[t("el-select",{attrs:{clearable:"",size:"medium"},on:{change:function(a){return e.getList(1,e.activeSystem)}},model:{value:e.searchParam.languageCode,callback:function(a){e.$set(e.searchParam,"languageCode",a)},expression:"searchParam.languageCode"}},e._l(e.languageList,(function(e,a){return t("el-option",{key:a,attrs:{label:e.name,value:e.code}})})),1)],1),t("el-form-item",{staticClass:"filter-item",staticStyle:{"margin-left":"20px"}},[t("el-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick",value:1e3,expression:"1000"}],attrs:{icon:"el-icon-search",type:"primary",size:"medium"},on:{click:function(a){return e.getList(1,e.activeSystem)}}},[e._v("搜索")]),t("el-button",{attrs:{icon:"el-icon-refresh-left",size:"medium"},on:{click:e.resetSearch}},[e._v("重置")])],1)],1),t("el-form",[t("el-form-item",{staticClass:"filter-item"},[e.hasPermission("BTN_LANG_MANAGE_TO_MODULE_PAGE")?t("el-button",{attrs:{icon:"el-icon-edit",plain:"",type:"primary",size:"medium"},on:{click:e.triggerToModulePage}},[e._v("编辑语言模板")]):e._e(),e.hasPermission("BTN_LANG_MANAGE_TO_DEL_PAGE")?t("el-button",{attrs:{icon:"el-icon-delete",plain:"",type:"primary",size:"medium"},on:{click:e.triggerToDelPage}},[e._v("已删除项")]):e._e(),e.hasPermission("BTN_LANG_MANAGE_EXPORT_SELECT")?t("el-button",{attrs:{icon:"el-icon-download",plain:"",type:"primary",size:"medium"},on:{click:e.exportSelectedTemplate}},[e._v("导出所选")]):e._e(),e.hasPermission("BTN_LANG_MANAGE_EXPORT_ALL")?t("el-button",{attrs:{icon:"el-icon-download",plain:"",type:"primary",size:"medium"},on:{click:e.exportAllTemplate}},[e._v("导出全部")]):e._e()],1)],1),t("div",{staticClass:"content-wrapper main-content-wrapper"},[t("div",{staticClass:"content-header"},[t("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":e.switchModuleTab},model:{value:e.moduleTabActive,callback:function(a){e.moduleTabActive=a},expression:"moduleTabActive"}},[t("el-tab-pane",{attrs:{label:"总览",name:"all"}}),e._l(e.moduleList,(function(e,a){return t("el-tab-pane",{key:a,attrs:{label:e.moduleName,name:String(a)}})}))],2)],1),t("div",{staticClass:"content"},["all"!=e.moduleTabActive?[t("el-tabs",{attrs:{type:"card"},on:{"tab-click":e.switchPageTab},model:{value:e.pageTabActive,callback:function(a){e.pageTabActive=a},expression:"pageTabActive"}},e._l(e.moduleList[parseInt(e.moduleTabActive)].pageInfo,(function(e,a){return t("el-tab-pane",{key:a,attrs:{label:e.pageName,name:String(a)}})})),1),e.moduleList[parseInt(e.moduleTabActive)].pageInfo.length>0?t("el-form",{attrs:{inline:""}},[t("el-form-item",{staticClass:"filter-item"},[e.hasPermission("I18nModulePageService.PageVariableAdd")?t("el-button",{attrs:{plain:"",size:"mini",type:"primary"},on:{click:function(a){return e.translateModuleAction("add")}}},[e._v("新增翻译项")]):e._e()],1)],1):e._e()]:e._e(),t("div",{staticClass:"table-wrapper"},[t("el-table",{ref:"multipleTable",attrs:{data:e.pageTranslateList,height:"100%",border:""},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{fixed:"left",type:"selection",width:"40"}}),t("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),"all"==e.moduleTabActive?[t("el-table-column",{attrs:{prop:"moduleName",label:"模板名","min-width":"120px",align:"center"}}),t("el-table-column",{attrs:{prop:"pageName",label:"页面名","min-width":"120px",align:"center"}})]:e._e(),t("el-table-column",{attrs:{prop:"variableCode",label:"变量名","min-width":"120px"}}),t("el-table-column",{attrs:{label:"字符限制",align:"center",prop:"variableLength"}}),t("el-table-column",{attrs:{label:"中文","show-overflow-tooltip":!0,prop:"nameCn"}}),t("el-table-column",{attrs:{label:"英文","min-width":"200"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",{staticClass:"translate-box pointer",on:{click:function(t){return e.translateModuleAction("edit",a.row,a.$index,"English")}}},[t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:a.row.nameEn,placement:"top-start"}},[t("span",[e._v(e._s(a.row.nameEn))])]),e.hasPermission("BTN_LANG_MANAGE_EDIT_TRANSLATE_ITEM")?t("i",{staticClass:"el-icon-edit"}):e._e()],1)]}}])}),e.getSelectLangInfo().name&&"cn"!=e.getSelectLangInfo().code&&"en"!=e.getSelectLangInfo().code?t("el-table-column",{attrs:{"min-width":"200",label:e.getSelectLangInfo().name},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",{staticClass:"translate-box pointer",on:{click:function(t){return e.translateItemAction("edit",a.row,a.$index)}}},[t("el-tooltip",{directives:[{name:"show",rawName:"v-show",value:a.row.translation,expression:"scope.row.translation"}],staticClass:"item",attrs:{effect:"dark",placement:"top-start",content:a.row.translation}},[t("span",[e._v(e._s(a.row.translation))])]),e.hasPermission("BTN_LANG_MANAGE_EDIT_TRANSLATE_ITEM")?t("i",{staticClass:"el-icon-edit"}):e._e(),e.hasPermission("I18nTranslationService.DisableTranslation")&&a.row.translation?t("i",{staticClass:"el-icon-delete mar-l-10",on:{click:function(t){return t.stopPropagation(),e.translateModuleAction("delete",a.row,a.$index)}}}):e._e()],1)]}}],null,!1,3816394734)}):e._e(),t("el-table-column",{attrs:{width:"160",label:"添加时间",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v("\n                            "+e._s(e._f("formatTime")(a.row.createTime))+"\n                        ")]}}])}),t("el-table-column",{attrs:{width:"160",label:"修改时间",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v("\n                            "+e._s(e._f("formatTime")(a.row.updateTime))+"\n                        ")]}}])}),t("el-table-column",{attrs:{fixed:"right",label:"操作",align:"center",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",{staticClass:"table-action-btn-box"},[e.hasPermission("I18nModulePageService.PageVariableUpdate")?t("el-button",{attrs:{plain:"",type:"primary",size:"mini"},on:{click:function(t){return e.translateModuleAction("edit",a.row,a.$index)}}},[e._v("编辑\n                                ")]):e._e()],1)]}}])})],2)],1),t("div",{staticClass:"pagination-box"},[t("el-pagination",{attrs:{"current-page":e.searchParam.page.pageNum,"page-sizes":[5,10,20,50],"page-size":e.searchParam.page.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.totals},on:{"size-change":e.handleSizeChange,"current-change":e.getList}})],1)],2)]),t("page-variable-edit",{attrs:{propShowAlert:e.translateModuleAlert.show,source:e.translateModuleAlert.source,title:e.translateModuleAlert.title,propParam:e.translateModuleAlert.param,platform:e.activeSystem},on:{close:e.closeTranslateModuleAlert}}),t("translate-item",{attrs:{propShowAlert:e.translateItemAlert.show,title:e.translateItemAlert.title,propParam:e.translateItemAlert.param,platform:e.activeSystem},on:{close:e.closeTranslateAlert}})],1)},l=[],n=(t("96cf"),t("3b8d")),i=(t("7f7f"),t("d6eb")),s=t("c8c2"),o=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("el-dialog",{attrs:{title:e.title,visible:e.propShowAlert,width:"500px"},on:{close:e.close}},[t("div",[t("el-form",{ref:"translateModuleAlert",staticClass:"demo-ruleForm",attrs:{rules:e.rules,model:e.param,"label-position":"right","label-width":"110px"}},[t("el-form-item",{attrs:{label:"变量名：",prop:"variableCode"}},[t("el-input",{attrs:{disabled:!!e.param.variableId,size:"medium",placeholder:"请输入"},model:{value:e.param.variableCode,callback:function(a){e.$set(e.param,"variableCode",a)},expression:"param.variableCode"}})],1),t("el-form-item",{attrs:{label:"中文：",prop:"nameCn"}},[t("el-input",{attrs:{disabled:"English"==e.source,size:"medium",placeholder:"请输入"},model:{value:e.param.nameCn,callback:function(a){e.$set(e.param,"nameCn",a)},expression:"param.nameCn"}})],1),t("el-form-item",{attrs:{label:"英文：",prop:"nameEn"}},[t("el-input",{attrs:{size:"medium",placeholder:"请输入"},model:{value:e.param.nameEn,callback:function(a){e.$set(e.param,"nameEn",a)},expression:"param.nameEn"}})],1),t("el-form-item",{attrs:{label:"字符限制：",prop:"variableLength"}},[t("el-input-number",{attrs:{min:10,disabled:"English"==e.source,max:999999999,size:"medium",precision:0},model:{value:e.param.variableLength,callback:function(a){e.$set(e.param,"variableLength",a)},expression:"param.variableLength"}})],1)],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{size:"small"},on:{click:e.close}},[e._v("取 消")]),t("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(a){return e.updateTranslateModule()}}},[e._v("确 定")])],1)])},c=[],m={props:{propShowAlert:Boolean,title:String,source:String,platform:String,propParam:{type:Object,default:function(){return{}}}},data:function(){return{param:{variableId:"",pageId:"",variableCode:"",nameCn:"",nameEn:"",translate:"",languageCode:"",variableLength:500},rules:{nameCn:{required:!0,trigger:"blur",message:"请输入"},nameEn:{required:!0,trigger:"blur",message:"请输入"},variableCode:{required:!0,trigger:"blur",message:"请输入"}}}},watch:{propParam:function(e){e&&Object.assign(this.param,this.propParam)},propShowAlert:function(e){e&&Object.assign(this.param,this.propParam)}},methods:{close:function(){this.$emit("close")},updateTranslateModule:function(){var e=this;this.$refs.translateModuleAlert.validate((function(a){if(a){var t=i["r"];e.param.variableId&&(t=i["s"]),e.param=Object.assign(e.param,{platform:e.platform}),console.log(e.param),t(e.filterData(e.param)).then((function(a){1===a.ret.errcode&&e.$emit("close")}))}}))}}},u=m,p=t("2877"),d=Object(p["a"])(u,o,c,!1,null,null,null),h=d.exports,g=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("el-dialog",{attrs:{title:e.title,visible:e.propShowAlert,width:"500px"},on:{close:e.close}},[t("div",[t("el-form",{ref:"translateItemAlert",attrs:{rules:e.rules,model:e.param}},[t("el-form-item",{attrs:{label:"中文："}},[t("span",[e._v(e._s(e.param.nameCn))])]),t("el-form-item",{attrs:{label:"英文："}},[t("span",[e._v(e._s(e.param.nameEn))])]),t("el-form-item",{attrs:{label:"字符限制："+e.param.variableLength,prop:"translation"}},[t("el-input",{attrs:{maxlength:e.param.variableLength,size:"medium",placeholder:"请输入"},model:{value:e.param.translation,callback:function(a){e.$set(e.param,"translation",a)},expression:"param.translation"}})],1)],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{size:"small"},on:{click:e.close}},[e._v("取 消")]),t("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(a){return e.updateTranslateItem()}}},[e._v("确 定")])],1)])},f=[],b={props:{propShowAlert:Boolean,title:String,source:String,platform:String,propParam:{type:Object,default:function(){return{}}}},data:function(){return{param:{nameCn:"",nameEn:"",variableId:"",translation:"",languageCode:"",variableRefId:"",variableLength:500},rules:{translation:{required:!0,trigger:"blur",message:"请输入"}}}},watch:{propParam:function(e){e&&Object.assign(this.param,this.propParam)},propShowAlert:function(e){e&&Object.assign(this.param,this.propParam)}},methods:{close:function(){this.$emit("close")},updateTranslateItem:function(){var e=this;this.$refs.translateItemAlert.validate((function(a){a&&(e.param=Object.assign(e.param,{platform:e.platform}),Object(i["m"])(e.filterData(e.param)).then((function(a){1===a.ret.errcode&&(e.$message.success("操作成功"),e.close())})))}))}}},v=b,y=Object(p["a"])(v,g,f,!1,null,null,null),A=y.exports,P={data:function(){return{activeSystem:"APP",systemList:[{val:"APP",label:"APP"},{val:"SCS",label:"商家系统"},{val:"WMS",label:"WMS"}],drop:!1,dropDownContent:"展开",dropDownIcon:"el-icon-arrow-down",moduleTabActive:"all",pageTabActive:"0",multipleSelection:[],translateModuleAlert:{title:"新增翻译模板",show:!1,source:"",param:{}},translateItemAlert:{title:"翻译",show:!1,param:{}}}},mixins:[s["a"]],components:{pageVariableEdit:h,translateItem:A},created:function(){this.getModuleList(),this.getList()},methods:{handleClick:function(e){this.activeSystem=e.name,this.getList(this.searchParam.page.pageNum,this.activeSystem),this.getModuleList(this.activeSystem)},dropDown:function(){this.drop?(this.dropDownContent="展开",this.dropDownIcon="el-icon-arrow-down"):(this.dropDownContent="收起",this.dropDownIcon="el-icon-arrow-up"),this.drop=!this.drop},exportSelectedTemplate:function(){var e=this;Object(i["b"])({variableTranslation:this.multipleSelection}).then((function(a){if(1===a.ret.errcode){var t=document.createElement("a");t.href=e.dealShowFileSrc(a.fileUrl),t.click()}}))},handleSelectionChange:function(e){this.multipleSelection=e},exportAllTemplate:function(){var e=this;if(!this.searchParam.languageCode)return this.$message.warning("请选择语言");Object(i["c"])({languageCode:this.searchParam.languageCode,platform:this.activeSystem}).then((function(a){if(1===a.ret.errcode){var t=document.createElement("a");t.href=e.dealShowFileSrc(a.fileUrl),t.click()}}))},triggerToModulePage:function(){this.$router.push({name:"langModule",query:{platform:this.activeSystem}})},triggerToDelPage:function(){this.$router.push({name:"deletedItemList",query:{platform:this.activeSystem}})},resetSearch:function(){Object.assign(this.searchParam,{languageCode:"",variableCodeKey:"",nameCnKey:"",nameEnKey:"",translationKey:"",pageId:"0",page:{pageNum:1,pageSize:10,pagingSwitch:!0}})},translateModuleAction:function(e,a,t,r){var l=this;switch(e){case"add":this.translateModuleAlert.title="新增翻译模块";var s=this.moduleList[this.moduleTabActive].pageInfo[this.pageTabActive];Object.assign(this.translateModuleAlert.param,{variableId:"",pageId:s.pageId,variableCode:"",nameCn:"",nameEn:"",translate:"",languageCode:this.searchParam.languageCode,variableLength:500}),this.translateModuleAlert.show=!0;break;case"edit":this.translateModuleAlert.title="编辑翻译模块",Object.assign(this.translateModuleAlert.param,{variableId:a.variableId,pageId:a.pageId,variableCode:a.variableCode,nameCn:a.nameCn,nameEn:a.nameEn,translate:a.translate,languageCode:this.searchParam.languageCode,variableLength:a.variableLength}),this.translateModuleAlert.source=r,this.translateModuleAlert.show=!0;break;case"delete":this.$confirm("确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:Object(i["a"])({variableRefId:a.variableRefId,platform:l.activeSystem}).then((function(e){1===e.ret.errcode&&(l.$message.success("删除成功"),l.getList())}));case 1:case"end":return e.stop()}}),e)}))));break}},closeTranslateModuleAlert:function(){this.translateModuleAlert.show=!1,this.getList()},translateItemAction:function(e,a,t){this.hasPermission("BTN_LANG_MANAGE_EDIT_TRANSLATE_ITEM")&&(Object.assign(this.translateItemAlert.param,{nameCn:a.nameCn,nameEn:a.nameEn,variableId:a.variableId,translation:a.translate,languageCode:this.searchParam.languageCode,variableRefId:"",variableLength:a.variableLength}),this.translateItemAlert.show=!0)},closeTranslateAlert:function(){this.translateItemAlert.show=!1,this.getList()},switchModuleTab:function(){if(this.searchParam.pageId=null,this.page=1,this.total=0,this.pageTranslateList=[],this.pageTabActive="0","all"==this.moduleTabActive)this.searchParam.pageId="0";else{var e=this.moduleList[this.moduleTabActive].pageInfo[this.pageTabActive];e&&(this.searchParam.pageId=e.pageId)}(this.searchParam.pageId||0==this.searchParam.pageId)&&this.getList()},switchPageTab:function(){this.searchParam.pageId=null,this.page=1,this.total=0,this.pageTranslateList=[];var e=this.moduleList[this.moduleTabActive].pageInfo[this.pageTabActive];e&&(this.searchParam.pageId=e.pageId),(this.searchParam.pageId||0==this.searchParam.pageId)&&this.getList()}}},_=P,w=(t("af5a"),Object(p["a"])(_,r,l,!1,null,null,null));a["default"]=w.exports},af5a:function(e,a,t){"use strict";var r=t("f512"),l=t.n(r);l.a},c8c2:function(e,a,t){"use strict";t("7514");var r=t("d6eb");a["a"]={data:function(){return{searchParam:{languageCode:"",variableCodeKey:"",nameCnKey:"",nameEnKey:"",translationKey:"",pageId:"0",platform:"APP",page:{pageNum:1,pageSize:10,pagingSwitch:!0}},totals:0,moduleList:[],langList:[],pageTranslateList:[]}},computed:{languageList:function(){return this.$store.state.dict.languageList}},methods:{getSelectLangInfo:function(){var e=this,a=this.languageList.find((function(a){return a.code==e.searchParam.languageCode}));return a||{name:""}},getModuleList:function(e){var a=this;console.log(this.searchParam.platform),this.searchParam.platform=e||this.searchParam.platform,Object(r["i"])({platform:this.searchParam.platform}).then((function(e){1===e.ret.errcode&&(a.moduleList=e.moduleInfo)}))},handleSizeChange:function(e){this.searchParam.page.pageSize=e,this.getList()},getList:function(e,a){var t=this;setTimeout((function(){t.$refs.multipleTable&&t.$refs.multipleTable.doLayout()}),200),(this.searchParam.pageId||0==this.searchParam.pageId)&&(this.searchParam.page.pageNum=e||this.searchParam.page.pageNum,this.searchParam.platform=a||this.searchParam.platform,console.log(this.searchParam.platform),Object(r["k"])(this.filterData(this.searchParam)).then((function(e){1===e.ret.errcode&&(t.pageTranslateList=e.variableTranslation,t.totals=e.total)})))}}}},f512:function(e,a,t){}}]);