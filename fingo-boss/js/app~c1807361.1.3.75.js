(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["app~c1807361"],{"284c":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return paramValid}));var core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("a481"),core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_es6_string_iterator__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("5df3"),core_js_modules_es6_string_iterator__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es6_string_iterator__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es6_array_from__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("1c4c"),core_js_modules_es6_array_from__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es6_array_from__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("7f7f"),core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("6b54"),core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_4__),paramValid={regName:/^[a-zA-Z\d_]{1,100}$/,regPassword:/^[a-zA-Z\d`~!@#$%^&*()-=_+\[\]{}\|\\;:\'\",.\/<>?]{6,100}$/,regAppkey:/^[0-9]{6}[a-z]{2}$/,regAppkeyPassword:/^([0-9a-z]{32})|(123456)$/,regPhone:/^(1[0-9]{10})$/,regNick:/^[a-zA-Z\d_\u4E00-\u9FFF\s\S]{1,100}$/,regFriendDisplay:/^[a-zA-Z\d_\u4E00-\u9FFF\s\S]+$/,regGroupNick:/^[a-zA-Z\d_\u4E00-\u9FFF\s\S]{1,50}$/,regGuid:/(^[1-9][0-9]*$)/,regGroupID:/(^[1-9][0-9]*$)/,regInitGuid:/^0$|^[1-9][0-9]*$/,regStart:/^[1-9]\d*|0$/,regLimit:/^[1-9]\d*$/,regDuration:/^([1-9]\d*){1,3}$/,regSilent:/^0|1$/,regGroupName:/^[\s\S]{1,50}$/,regCustomEntity:/^[\s\S]+$/,regReason:/^[\s\S]{1,20}$/,regEmojiReason:/^[\s\S]+$/,regRemark:/^[\s\S]{1,20}$/,regGroupDesc:/^[\s\S]{1,200}$/,regMsgType:/^0|1$/,regDirection:/^0|1$/,regFloat:/^\d+(\.\d+)?$/,regModified:/^0$|^[1-9][0-9]{12}$/,regRequireApprove:/^0|1$/,regBoolean:/^0|1$/,regRelayType:/^0|1$/,regFileName:/^\S+\.{1}[a-zA-Z0-9]+$/,regPicFileLink:/^(\/upload){1}\S+_(\d+)x(\d+){1}\.{1}[a-zA-Z0-9]+$/,regAudFileLink:/^(\/upload){1}\S+\.{1}[a-zA-Z0-9]+$/,regVdoFileLink:/^(\/upload){1}\S+\.{1}[a-zA-Z0-9]+$/,regFileLink:/^(\/upload){1}\S+\.{1}[a-zA-Z0-9]+$/,validUserName:function(e,t){return"undefined"!==typeof t&&null!=t&&"string"===typeof t&&paramValid.regName.test(t.toString().trim())?"":e+"不合法;"},validPassword:function(e,t){return"undefined"!==typeof t&&null!=t&&"string"===typeof t&&paramValid.regPassword.test(t)?"":e+"不合法;"},validAppkey:function(e,t){return"undefined"!==typeof t&&null!=t&&"string"===typeof t&&paramValid.regAppkey.test(t.toString().trim())?"":e+"不合法;"},validAppkeyPassword:function(e,t){return"undefined"!==typeof t&&null!=t&&"string"===typeof t&&paramValid.regAppkeyPassword.test(t.toString().trim())?"":e+"不合法;"},validPhone:function(e,t){return"undefined"===typeof t||null==t||"string"===typeof t&&""==t.toString().trim()||"undefined"!==typeof t&&null!=t&&"string"===typeof t&&paramValid.regPhone.test(t.toString().trim())?"":e+"不合法;"},validUpdatePhone:function(e,t){return"undefined"!==typeof t&&null!=t&&"string"===typeof t&&paramValid.regPhone.test(t.toString().trim())?"":e+"不合法;"},validNick:function(e,t){return"undefined"===typeof t||null==t||""==t.toString().trim()||"undefined"!==typeof t&&null!=t&&"string"===typeof t&&paramValid.regNick.test(t.toString().trim())?"":e+"不合法;"},validGroupNick:function(e,t){return"undefined"===typeof t||""!=t.toString().trim()||"undefined"!==typeof t&&null!=t&&"string"===typeof t&&paramValid.regGroupNick.test(t.toString().trim())?"":e+"不合法;"},validUpdateNick:function(e,t){return"undefined"!==typeof t&&null!=t&&"string"===typeof t&&paramValid.regNick.test(t.toString().trim())?"":e+"不合法;"},validStart:function(e,t){return"undefined"!==typeof t&&null!=t&&paramValid.regStart.test(t.toString().trim())?"":e+"不合法;"},validLimit:function(e,t){return"undefined"!==typeof t&&null!=t&&paramValid.regLimit.test(t.toString().trim())?"":e+"不合法;"},validDuration:function(e,t){return"undefined"!==typeof t&&null!=t&&paramValid.regDuration.test(t.toString().trim())&&t.toString().trim()<181?"":e+"不合法;"},validSilent:function(e,t){return"undefined"!==typeof t&&null!=t&&paramValid.regSilent.test(t.toString().trim())?"":e+"不合法;"},validGuid:function(e,t){return"initGuid"==e?"undefined"!==typeof t&&null!=t&&"string"===typeof t&&paramValid.regInitGuid.test(t.toString().trim())?"":e+"不合法;":"undefined"!==typeof t&&null!=t&&"string"===typeof t&&paramValid.regGuid.test(t.toString().trim())?"":e+"不合法;"},validGroupID:function(e,t){return"undefined"!==typeof t&&null!=t&&"string"===typeof t&&paramValid.regGroupID.test(t.toString().trim())?"":e+"不合法;"},validText:function(e,t){return"undefined"!==typeof t&&null!=t&&"string"===typeof t&&0!=t.toString().trim().length?"":e+"不合法;"},validNotification:function(e,t){return"undefined"===typeof t||null==t||""==t.toString().trim()||"undefined"!==typeof t&&null!=t&&"string"===typeof t&&0!=t.toString().trim().length?"":e+"不合法;"},validFile:function(e,t){if(t&&t instanceof File){if("file"==e){if(!/\.(bmp|gif|jpeg|jpeg2000|tiff|psd|png|svg|pcx|dxf|wmf|emf|lic|fli|flc|eps|tga|jpg|wma|mp3|wav|mid|mp1|mp2|amr|m4a|aac|rmvb|avi|rm|mpg|mpeg|mov|wmv|asf|dat|asx|wvx|mpe|mpa|mp4|3gp|apk|ipa|doc|docx|ppt|pptx|xls|xlsx|txt|plist|vcf)$/.test(t.name.toLowerCase()))return"文件类型必须是bmp,gif,jpeg,jpeg2000,tiff,psd,png,svg,pcx,dxf,wmf,emf,lic,fli,flc,eps,tga,jpg,wma,mp3,wav,mid,mp1,mp2,amr,m4a,aac,rmvb,avi,rm,mpg,mpeg,mov,wmv,asf,dat,asx,wvx,mpe,mpa,mp4,3gp,apk,ipa,doc,docx,ppt,pptx,xls,xlsx,txt,plist,vcf中的一种";if(0==parseFloat(t.size)||parseFloat(t.size/1048576)>10)return"大小需大于0b,最大为10MB"}if("picFile"==e){if(!/\.(gif|jpg|jpeg|png|bmp)$/.test(t.name.toLowerCase()))return"图片类型必须是gif,jpg,jpeg,png,bmp中的一种";if(0==parseFloat(t.size)||parseFloat(t.size/1048576)>10)return"图片大小需大于0b,最大为10MB"}if("audFile"==e){if(!/\.(mp3|amr)$/.test(t.name.toLowerCase()))return"语音类型必须是mp3,amr中的一种";if(0==parseFloat(t.size)||parseFloat(t.size/1048576)>10)return"语音大小需大于0b,最大为10MB"}if("vdoFile"==e){if(!/\.(rmvb|avi|rm|mpg|mpeg|mov|wmv|asf|mp4|3gp)$/.test(t.name.toLowerCase()))return"视频类型必须是rmvb,avi,rm,mpg,mpeg,mov,wmv,asf,mp4,3gp中的一种";if(0==parseFloat(t.size)||parseFloat(t.size/1048576)>10)return"视频大小需大于0b,最大为10MB"}if("locFile"==e){if(!/\.(jpg|jpeg|png|bmp)$/.test(t.name.toLowerCase()))return"位置图片类型必须是jpg,jpeg,png,bmp中的一种";if(0==parseFloat(t.size)||parseFloat(t.size/1048576)>10)return"位置图片大小需大于0b,最大为10MB"}return""}return e+"不合法;"},validGroupName:function(e,t){return"undefined"!==typeof t&&null!=t&&"string"===typeof t&&paramValid.regGroupName.test(t.toString().trim())?"":e+"不合法;"},validUserNameList:function(e,t,n){if(n){if(!("undefined"!==typeof t&&null!=t&&t instanceof Array&&t.length))return e+"不合法;";for(var i=0;i<t.length;i++)if(paramValid.validUserName("key",t[i]))return e+"不合法;"}else if(t){if(!(t instanceof Array&&t.length))return e+"不合法;";for(i=0;i<t.length;i++)if(paramValid.validUserName("key",t[i]))return e+"不合法;"}return""},validGuidList:function(e,t){if(!("undefined"!==typeof t&&null!=t&&t instanceof Array&&t.length))return e+"不合法;";for(var n=0;n<t.length;n++)if(paramValid.validGuid("guid",t[n]))return e+"不合法;";return""},validCustomKV:function(e,t){return"undefined"!==typeof t&&null!=t&&"string"===typeof t&&paramValid.regCustomEntity.test(t.toString().trim())?"":e+"不合法;"},validCustomEntityList:function(e,t){if(!("undefined"!==typeof t&&t instanceof Array&&t.length))return e+"不合法;";for(var n=0;n<t.length;n++)if(paramValid.validCustomEntity("customEntity",t[n]))return e+"不合法;";return""},validCustomEntity:function validCustomEntity(key,customEntity){return"undefined"!==typeof customEntity&&null!=customEntity&&eval(customEntity).hasOwnProperty("key")&&eval(customEntity).hasOwnProperty("value")?paramValid.validCustomKV("key",customEntity.key)||paramValid.validCustomKV("value",customEntity.value)?key+"不合法;":"":key+"不合法;"},validReason:function(e,t){return"undefined"===typeof t||null==t||""==t.toString().trim()||"undefined"!==typeof t&&null!=t&&"string"===typeof t&&paramValid.regReason.test(t.toString().trim())?"":e+"不合法;"},validEmojiReason:function(e,t){return"undefined"===typeof t||null==t||""==t.toString().trim()||"undefined"!==typeof t&&null!=t&&"string"===typeof t&&paramValid.regEmojiReason.test(t.toString().trim())&&Array.from(t.toString().trim()).length<=20&&Array.from(t.toString().trim()).length>0?"":e+"不合法;"},validRemark:function(e,t){return"undefined"===typeof t||null==t||""==t.toString().trim()||"undefined"!==typeof t&&null!=t&&"string"===typeof t&&paramValid.regRemark.test(t.toString().trim())?"":e+"不合法;"},validFriendDisplay:function(e,t){return"undefined"===typeof t||null==t||""==t.toString().trim()||"undefined"!==typeof t&&null!=t&&"string"===typeof t&&paramValid.regFriendDisplay.test(t.toString().trim())&&Array.from(t.toString().trim()).length<=100&&Array.from(t.toString().trim()).length>0?"":e+"不合法;"},validAtText:function(e,t){return"undefined"===typeof t||null==t||""==t.toString().trim()||"undefined"!==typeof t&&null!=t&&"string"===typeof t&&0!=t.toString().trim().length?"":e+"不合法;"},validGroupDesc:function(e,t){return"undefined"===typeof t||null==t||""==t.toString().trim()||"undefined"!==typeof t&&null!=t&&"string"===typeof t&&paramValid.regGroupDesc.test(t.toString().trim())?"":e+"不合法;"},validMsgType:function(e,t){return"undefined"!==typeof t&&null!=t&&paramValid.regMsgType.test(t.toString().trim())?"":e+"不合法;"},validDirection:function(e,t){return"undefined"!==typeof t&&null!=t&&paramValid.regDirection.test(t.toString().trim())?"":e+"不合法;"},validFloat:function(e,t){return"undefined"!==typeof t&&null!=t&&paramValid.regFloat.test(t.toString().trim())?"":e+"不合法;"},validModified:function(e,t){return"undefined"!==typeof t&&null!=t&&paramValid.regModified.test(t.toString().trim())?"":e+"不合法;"},validBoolean:function(e,t){return"undefined"!==typeof t&&null!=t&&"boolean"===typeof t||"undefined"!==typeof t&&null!=t&&paramValid.regBoolean.test(t)?"":e+"不合法;"},validRelay:function(e,t){return"undefined"!==typeof t&&null!=t&&paramValid.regRelayType.test(t.toString().trim())?"":e+"不合法;"},validFileName:function(e,t){return"undefined"!==typeof t&&null!=t&&"string"===typeof t&&paramValid.regFileName.test(t.toString().trim())?"picFileName"!=e||/\.(gif|jpg|jpeg|png|bmp|GIF|JPG|JPEG|PNG|BMP)$/.test(t.toString().trim().toLowerCase().substr(t.toString().trim().lastIndexOf(".")))?"audFileName"!=e||/\.(mp3|amr|MP3|AMR)$/.test(t.toString().trim().toLowerCase().substr(t.toString().trim().lastIndexOf(".")))?"vdoFileName"!=e||/\.(rmvb|avi|rm|mpg|mpeg|mov|wmv|asf|mp4|3gp|RMVB|AVI|RM|MPG|MPEG|MOV|WMV|ASF|MP4|3GP)$/.test(t.toString().trim().toLowerCase().substr(t.toString().trim().lastIndexOf(".")))?"locFileName"!=e||/\.(jpg|jpeg|png|bmp|JPG|JPEG|PNG|BMP)$/.test(t.toString().trim().toLowerCase().substr(t.toString().trim().lastIndexOf(".")))?"":"位置图片类型必须是jpg,jpeg,png,bmp中的一种":"视频类型必须是rmvb,avi,rm,mpg,mpeg,mov,wmv,asf,mp4,3gp中的一种":"语音类型必须是mp3,amr中的一种":"图片类型必须是gif,jpg,jpeg,png,bmp中的一种":e+"不合法;"},validPicFileLink:function(e,t){if("undefined"!==typeof t&&null!=t&&"string"===typeof t&&paramValid.regPicFileLink.test(t.toString().trim())){if("bigLink"==e||"middleLink"==e||"smallLink"==e||"locOriginLink"==e){if(!/\.(jpg|jpeg|png|bmp|GIF|JPG|JPEG|PNG|BMP)$/.test(t.toString().trim().toLowerCase().substr(t.toString().trim().lastIndexOf("."))))return"图片类型必须是jpg,jpeg,png,bmp中的一种"}else if(!/\.(gif|jpg|jpeg|png|bmp|GIF|JPG|JPEG|PNG|BMP)$/.test(t.toString().trim().toLowerCase().substr(t.toString().trim().lastIndexOf("."))))return"图片类型必须是gif,jpg,jpeg,png,bmp中的一种";return""}return e+"不合法;"},validAudFileLink:function(e,t){return"undefined"!==typeof t&&null!=t&&"string"===typeof t&&paramValid.regAudFileLink.test(t.toString().trim())?/\.(mp3|amr|MP3|AMR)$/.test(t.toString().trim().toLowerCase().substr(t.toString().trim().lastIndexOf(".")))?"":"语音类型必须是mp3,amr中的一种":e+"不合法;"},validVdoFileLink:function(e,t){return"undefined"!==typeof t&&null!=t&&"string"===typeof t&&paramValid.regVdoFileLink.test(t.toString().trim())?/\.(rmvb|avi|rm|mpg|mpeg|mov|wmv|asf|mp4|3gp|RMVB|AVI|RM|MPG|MPEG|MOV|WMV|ASF|MP4|3GP)$/.test(t.toString().trim().toLowerCase().substr(t.toString().trim().lastIndexOf(".")))?"":"视频类型必须是rmvb,avi,rm,mpg,mpeg,mov,wmv,asf,mp4,3gp中的一种":e+"不合法;"},validFileLink:function(e,t){return"undefined"!==typeof t&&null!=t&&"string"===typeof t&&paramValid.regFileLink.test(t.toString().trim())?"":e+"不合法;"},strTrim:function(e){if(!e||0==e.length)return"";e=e.toString(),e=e.replace(/^(\s|\u00A0)+/,"");for(var t=e.length-1;t>=0;t--)if(/\S/.test(e.charAt(t))){e=e.substring(0,t+1);break}return e}}},"56d7":function(e,t,n){"use strict";n.r(t);n("456d"),n("ac6a"),n("cadf"),n("551c"),n("f751"),n("097d");var i=n("5c96"),s=n.n(i),r=(n("0fae"),n("caf9")),o=n("4eb5"),a=n.n(o),u=(n("b20f"),n("3dfd")),l=n("a18c"),d=n("4360");n("8866"),n("a481");Vue.directive("filterSpecial",{update:function(e,t,n){t.value;var i=t.modifiers;try{var s=e.children[0];if(!s.value)return!1;s.value=s.value.replace(/[\n\r\t]/g," "),console.log(s.value),s.dispatchEvent(new Event(i.lazy?"change":"input"))}catch(r){}}}),Vue.directive("delDoubleQuo",{update:function(e){try{var t=e.children[0];if(!t.value)return"";t.value=t.value.replace(/\"/g,""),t.dispatchEvent(new Event("input"))}catch(n){}}}),Vue.directive("preventReClick",{inserted:function(e,t){e.addEventListener("click",(function(){e.disabled||(e.disabled=!0,setTimeout((function(){e.disabled=!1}),t.value||2e3))}))}}),Vue.directive("el-select-loadmore",{bind:function(e,t){var n=e.querySelector(".el-select-dropdown .el-select-dropdown__wrap");n.addEventListener("scroll",(function(){var e=this.scrollHeight-this.scrollTop<=this.clientHeight;e&&t.value()}))}});var c=n("dc1b"),g=n("5d2d");localStorage.getItem("adminToken")&&(Vue.prototype.$headers={token:localStorage.getItem("adminToken"),deviceId:(new DeviceUUID).get(),version:"2.4.0"}),Vue.use(s.a),Vue.use(r["a"],{lazyComponent:!0}),Vue.use(a.a),Object.keys(c["a"]).forEach((function(e){Vue.prototype[e]=c["a"][e]})),Vue.config.productionTip=!1,Vue.prototype.setStore=g["c"],Vue.prototype.getStore=g["a"],Vue.prototype.removeStore=g["b"],Vue.prototype.$EventBus=new Vue,new Vue({router:l["a"],store:d["a"],render:function(e){return e(u["a"])}}).$mount("#app")},"5a58":function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));n("ac6a"),n("456d"),n("3b2b"),n("7f7f"),n("6b54"),n("a481"),n("938c"),n("c251"),n("ada3"),n("5907"),n("0e9e"),n("ca5b"),n("29cf"),n("012d"),n("7c60"),n("781c");var i=n("e7ab"),s=n("76ea"),r=n("284c"),o="wss://",a="/file/rest/uploadservices/uploadfile",u="/file/rest/uploadservices/geturlbymd5",l={pcDomain:"webconn.fingo.shop",pafsDomain:"https://file.fingo.shop"},d="image",c="gif",g="audio",f="video",p="location",m="other",h=null;function _(e){e=e||[];for(var t={},n=0;n<e.length;n++){var i=e[n];"undefined"===typeof t[i]&&(t[i]=1)}for(var n in e.length=0,t)e[e.length]=n;return e}String.prototype.trim=function(){return this.replace(/(^\s*)|(\s*$)/g,"")};var y=function(e){h=this,this._fromNick="",this._sendGuid=e.sendGuid?e.sendGuid:0,this._recvGuid=e.recvGuid?e.recvGuid:0,this._log=e.log,this._onError=e.onError||i["a"].Util.emptyFn,this._onConnected=e.onConnected||i["a"].Util.emptyFn,this._onDisconnected=e.onDisconnected||i["a"].Util.emptyFn,this._onMessageRecivied=e.onMessageRecivied||i["a"].Util.emptyFn,this._onMessageSent=e.onMessageSent||i["a"].Util.emptyFn,this._onFriendUpdated=e.onFriendUpdated||i["a"].Util.emptyFn,this._onGroupUpdated=e.onGroupUpdated||i["a"].Util.emptyFn,this._onKicked=e.onKicked||i["a"].Util.emptyFn,this._appkey=e.appkey.trim(),this._appkeyPassword=e.appkeyPassword.trim(),this._doInitConfig(l)};y.prototype._doInitConfig=function(e){var t=this;this._service=o+e.pcDomain,this._pafsDomain=e.pafsDomain,this._connection=new i["a"].Connection(this._service,this._log),this._connection.onError=this._onError||i["a"].Util.emptyFn,this._connection.onConnected=this._onWebConnected||i["a"].Util.emptyFn,this._connection.onDisconnected=this._onWebDisconnected||i["a"].Util.emptyFn,this._onMessageRecivied=this._onMessageRecivied||i["a"].Util.emptyFn,this._wsInstance=new i["a"].Websocket(this._connection,this._log);var n=function(e){t._onError({ret:"50001",msg:s["a"]["50001"]})},r=function(){};this._wsInstance.connect(r,n),this._connection.addNotifyHandler(t._handleLoginResphonse,proto.css.ntf.ENtfType.LOGIN_RESPONSE),this._connection.addNotifyHandler(t._handleLogoutResphonse,proto.css.ntf.ENtfType.LOGOUT_RESPONSE),this._connection.addNotifyHandler(t._handleKickNotification,proto.css.ntf.ENtfType.KICK_NOTIFICATION),this._connection.addNotifyHandler(t._handleStreanInit,proto.css.ntf.ENtfType.STREAM_INIT_RESPONSE),this._connection.addNotifyHandler(t._handleNewMessageNotify,proto.css.ntf.ENtfType.NEW_MSG),this._connection.addNotifyHandler(t._handleFriendUpdateNotify,proto.css.ntf.ENtfType.FRIEND_UPDATE_NOTIFICATION),this._connection.addNotifyHandler(t._handleGroupUpdateNotify,proto.css.ntf.ENtfType.GROUP_LIST_UPDATE_NOTIFICATION),this._connection.addNotifyHandler(t._handleRetractNotify,proto.css.ntf.ENtfType.RETRACT_NOTIFICATION),this._connection.addNotifyHandler(t._handleCarbonMsgNotify,proto.css.ntf.ENtfType.CARBON_MSG)},y.prototype._onWebConnected=function(){h._kicked||(h._onConnected(),"undefined"!==typeof h._userName&&"undefined"!==typeof h._password&&(this.status==i["a"].Connection.Status.LOGOUTING&&h.logout({success:function(e){},error:function(e){}}),h.login({userName:h._userName,password:h._password,isDigest:"true",success:function(e){},error:function(e){}})))},y.prototype._onWebDisconnected=function(e){var t=this;t.status=i["a"].Connection.Status.DISCONNECTED,h._onDisconnected()},y.prototype.login=function(e){var t=this,n=null,r="";t.getConnStatus()===i["a"].Connection.Status.LOGINING&&(r+="用户正在登录中"),t.getConnStatus()===i["a"].Connection.Status.LOGINED&&(r+="用户已登录");var o=e.error||i["a"].Util.emptyFn,a=e.success||i["a"].Util.emptyFn;if(r)o({ret:5e4,msg:r});else if(this._wsInstance&&this.isConnected()){t._log&&t._log instanceof y.Log&&t._log.debug("开始登录...");var u=new proto.css.websocket.LoginRequest;u.setAppkey(t._appkey),u.setUsername(e.userName.toString().trim().toLowerCase()),u.setPhone(e.userName.toString().trim().toLowerCase());var l=i["a"].Util.buildProxyRequest(i["a"].Services.SERVICE_WEBSOCKET,i["a"].Methods.METHOD_LOGIN,u.serializeBinary());t._connection.addRequestHandler((function(r){r=r.toObject(),0==r.ret?(h._kicked=!1,t._connection.status=i["a"].Connection.Status.LOGINED,t._userName=e.userName,t._fromNick=r.userInfo.nick,t._phone=r.userInfo.phone,t._password=n,a(r)):(r.msg=s["a"][r.ret],t._connection.status=i["a"].Connection.Status.CONNECTED,o(r))}),i["a"].Services.SERVICE_WEBSOCKET,i["a"].Methods.METHOD_LOGIN,l.getRequestId(),proto.css.websocket.LoginResponse.deserializeBinary),t._connection.status=i["a"].Connection.Status.LOGINING,t._wsInstance.send(l.serializeBinary()),t._log&&t._log instanceof y.Log&&t._log.debug("登录请求发送, 请求 id:"+l.getRequestId())}else o({ret:50002,msg:s["a"][50002]})},y.prototype.customerLogin=function(e){var t=new proto.css.chat.CustomerServiceSignInReq;t.setCsName(e.userName),t.setCsId(e.csId),t.setCsMobile(e.phone);var n=i["a"].Services.SERVICE_CHAT,s=i["a"].Methods.METHOD_CUSTOMER_LOGIN,r=proto.css.chat.CustomerServiceSignInResp.deserializeBinary,o=i["a"].Util.buildProxyRequest(n,s,t.serializeBinary());function a(t){t=t.toObject(),console.log(t),1==t.ret&&e.success&&e.success(t)}this._connection.addRequestHandler(a,n,s,o.getRequestId(),r),this._wsInstance.send(o.serializeBinary())},y.prototype.submitWorkOrder=function(e){var t=new proto.css.chat.SetSessionTypeAfterSubmittedWorkOrderReq;t.setCsId(e.csId),t.setUserId(e.userId);var n=i["a"].Services.SERVICE_CHAT,s=i["a"].Methods.METHOD_SUBMIT_WORK_ORDER,r=proto.css.chat.SetSessionTypeAfterSubmittedWorkOrderResp.deserializeBinary,o=i["a"].Util.buildProxyRequest(n,s,t.serializeBinary());function a(t){t=t.toObject(),1==t.ret?e.success&&e.success(t):e.error&&e.error(t)}this._connection.addRequestHandler(a,n,s,o.getRequestId(),r),this._wsInstance.send(o.serializeBinary())},y.prototype.checkBindWithUser=function(e){var t=new proto.css.chat.CheckBundleOverdueReq;t.setCsId(e.csId),t.setUserId(e.userId);var n=i["a"].Services.SERVICE_CHAT,s=i["a"].Methods.METHOD_CHECK_BUNDLE_OVERDUE,r=proto.css.chat.CheckBundleOverdueResp.deserializeBinary,o=i["a"].Util.buildProxyRequest(n,s,t.serializeBinary());function a(t){t=t.toObject(),1==t.ret?e.success&&e.success(t):e.error&&e.error(t)}this._connection.addRequestHandler(a,n,s,o.getRequestId(),r),this._wsInstance.send(o.serializeBinary())},y.prototype.logout=function(e){var t=this,n=e.error||i["a"].Util.emptyFn,r=e.success||i["a"].Util.emptyFn;if(this._wsInstance&&this.isLogined()){t._log&&t._log instanceof y.Log&&t._log.debug("开始登出...");var o=new proto.css.websocket.LogoutRequest;o.setAppkey(this._appkey),o.setUsername(this._userName);var a=i["a"].Util.buildProxyRequest(i["a"].Services.SERVICE_WEBSOCKET,i["a"].Methods.METHOD_LOGOUT,o.serializeBinary());this._connection.addRequestHandler((function(e){e=e.toObject(),0==e.ret?(t._connection.status=i["a"].Connection.Status.CONNECTED,r(e)):(e.msg=s["a"][e.ret],n(e))}),i["a"].Services.SERVICE_WEBSOCKET,i["a"].Methods.METHOD_LOGOUT,a.getRequestId(),proto.css.websocket.LogoutResponse.deserializeBinary),this._connection.status=i["a"].Connection.Status.LOGOUTING,this._wsInstance.manualCloseSocket(),this._wsInstance.send(a.serializeBinary()),t._log&&t._log instanceof y.Log&&t._log.debug("登出请求发送, 请求 id:"+a.getRequestId())}else n({ret:50002,msg:s["a"][50002]})},y.prototype.stopServer=function(e){var t=new proto.css.chat.CSStopServiceReq;t.setCsId(e.csId),t.setUserId(e.userId);var n=i["a"].Services.SERVICE_CHAT,s=i["a"].Methods.METHOD_STOP_SERVICE,r=proto.css.chat.CSStopServiceResp.deserializeBinary,o=i["a"].Util.buildProxyRequest(n,s,t.serializeBinary());function a(t){t=t.toObject(),1==t.ret&&e.success&&e.success(t)}this._connection.addRequestHandler(a,n,s,o.getRequestId(),r),this._wsInstance.send(o.serializeBinary())},y.prototype.customerLogout=function(e){var t=new proto.css.chat.CustomerServiceSignOutReq;t.setCsId(e.csId);var n=i["a"].Services.SERVICE_CHAT,s=i["a"].Methods.METHOD_CUSTOMER_LOGOUT,r=proto.css.chat.CustomerServiceSingOutResp.deserializeBinary,o=i["a"].Util.buildProxyRequest(n,s,t.serializeBinary());function a(e){e=e.toObject(),console.log(e)}this._connection.addRequestHandler(a,n,s,o.getRequestId(),r),this._wsInstance.send(o.serializeBinary())},y.prototype.setServiceStatus=function(e){var t=new proto.css.chat.SetServiceStatusReq;t.setCsId(e.csId),t.setStatus(e.status);var n=i["a"].Services.SERVICE_CHAT,s=i["a"].Methods.METHOD_SET_STATUS,r=proto.css.chat.SetServiceStatusResp.deserializeBinary,o=i["a"].Util.buildProxyRequest(n,s,t.serializeBinary());function a(t){t=t.toObject(),1==t.ret&&e.success&&e.success(t)}this._connection.addRequestHandler(a,n,s,o.getRequestId(),r),this._wsInstance.send(o.serializeBinary())},y.prototype.getNoticeHistory=function(e){var t=new proto.css.chat.GetSessionWithPageReq;t.setCsId(e.csId);var n=new proto.css.base.Pagination;n.setPageNum(e.page.pageNum),n.setPageSize(e.page.pageSize),n.setPagingSwitch(e.page.pagingSwitch),t.setPage(n);var s=i["a"].Services.SERVICE_CHAT,r=i["a"].Methods.METHOD_GET_SESSION,o=proto.css.chat.GetSessionWithPageResp.deserializeBinary,a=i["a"].Util.buildProxyRequest(s,r,t.serializeBinary());function u(t){t=t.toObject(),console.log(t),1==t.ret&&e.success&&e.success(t)}this._connection.addRequestHandler(u,s,r,a.getRequestId(),o),this._wsInstance.send(a.serializeBinary())},y.prototype.sendCustomMessage=function(e){var t=this,n=e.error||i["a"].Util.emptyFn,o=e.success||i["a"].Util.emptyFn;if(t._wsInstance&&t.isLogined()){var a,u,l,d,c=function(e){console.log(e),e=e.toObject(),0==e.ret?(t._sendGuid=Long.fromValue(e.guid).toString()?Long.fromValue(e.guid).toString():t._sendGuid,e.guid=Long.fromValue(e.guid).toString(),o(e)):(e.msg=s["a"][e.ret],n(e))};t._log&&t._log instanceof y.Log&&t._log.debug("开始发送自定义消息..."),e.msgContentType=proto.css.msg.EMsgContentType.CUSTOM,a=new proto.css.chat.ChatMessageRequest,a.setToUsername(e.toUsername),a.setFromNick(e.fromNick),a.setBurnAfterRead(!!r["a"].strTrim(e.burnAfterRead)),a.setFromClientType(proto.css.enum.EClientType.WEB),u=i["a"].Services.SERVICE_CHAT,l=i["a"].Methods.METHOD_SENDCHAT,d=proto.css.chat.ChatMessageResponse.deserializeBinary,a.setFromUsername(e.fromUsername),a.setAppkey(t._appkey),a.setMsgId(i["a"].Util.getUniqueId()),a.setMsgContentType(e.msgContentType),a.setData(t._createConcreteMessage(e.msgContentType,e));var g=i["a"].Util.buildProxyRequest(u,l,a.serializeBinary());t._connection.addRequestHandler(c,u,l,g.getRequestId(),d),t._wsInstance.send(g.serializeBinary()),t._log&&t._log instanceof y.Log&&t._log.debug("自定义消息已经发送 <br>请求 id:"+g.getRequestId()+"<br>消息 id:"+a.getMsgId())}else n({ret:50002,msg:s["a"][50002]})},y.prototype.sendTextMessage=function(e){var t=this,n=r["a"].validText("text",e.text);n+=r["a"].validBoolean("burnAfterRead",e.burnAfterRead);var o=e.error||i["a"].Util.emptyFn,a=e.success||i["a"].Util.emptyFn;if(n)o({ret:5e4,msg:n});else if(t._wsInstance&&t.isLogined()){var u,l,d,c,g=function(e){e=e.toObject(),console.log(e),0==e.ret?(t._sendGuid=Long.fromValue(e.guid).toString()?Long.fromValue(e.guid).toString():t._sendGuid,e.guid=Long.fromValue(e.guid).toString(),a(e)):(e.msg=s["a"][e.ret],o(e))};t._log&&t._log instanceof y.Log&&t._log.debug("开始发送文本消息..."),e.msgContentType=proto.css.msg.EMsgContentType.TEXT,u=new proto.css.chat.ChatMessageRequest,u.setToUsername(e.toUsername),u.setFromNick(e.fromNick),u.setBurnAfterRead(!!r["a"].strTrim(e.burnAfterRead)),u.setFromClientType(proto.css.enum.EClientType.WEB),u.setFromUsername(e.fromUsername),u.setAppkey(t._appkey),u.setMsgId(i["a"].Util.getUniqueId()),u.setMsgContentType(r["a"].strTrim(e.msgContentType)),u.setData(t._createConcreteMessage(e.msgContentType,e)),l=i["a"].Services.SERVICE_CHAT,d=i["a"].Methods.METHOD_SENDCHAT,c=proto.css.chat.ChatMessageResponse.deserializeBinary;var f=i["a"].Util.buildProxyRequest(l,d,u.serializeBinary());t._connection.addRequestHandler(g,l,d,f.getRequestId(),c),t._wsInstance.send(f.serializeBinary()),t._log&&t._log instanceof y.Log&&t._log.debug("文本消息已经发送 <br>请求 id:"+f.getRequestId()+"<br>消息 id:"+u.getMsgId()+"<br>消息内容："+e.text)}else o({ret:50002,msg:s["a"][50002]})},y.prototype.sendFileMessage=function(e){var t=this,n=r["a"].validUserName("toUserName",e.toUserName);n+=r["a"].validRelay("relay",e.relay),""==r["a"].validRelay("relay",e.relay)&&1==r["a"].strTrim(e.relay)?(n+=r["a"].validFileName("fileName",e.fileName),n+=r["a"].validFileLink("fileLink",e.fileLink),n+=r["a"].validLimit("fileLength",e.fileLength)):n+=r["a"].validFile("file",e.file),n+=r["a"].validBoolean("burnAfterRead",e.burnAfterRead);var o=e.error||i["a"].Util.emptyFn,l=e.success||i["a"].Util.emptyFn;if(n)o({ret:5e4,msg:n});else if(t._wsInstance&&t.isLogined())if(e.msgContentType=proto.css.msg.EMsgContentType.FILE,1==r["a"].strTrim(e.relay)){var d,c,g,f,p=function(e){e=e.toObject(),0==e.ret?(t._sendGuid=Long.fromValue(e.guid).toString()?Long.fromValue(e.guid).toString():t._sendGuid,e.guid=Long.fromValue(e.guid).toString(),l(e)):(e.msg=s["a"][e.ret],o(e))};t._log&&t._log instanceof y.Log&&t._log.debug("开始发送文件消息..."),d=new proto.css.chat.ChatMessageRequest,d.setToUsername(e.toUserName.toString().trim().toLowerCase()),d.setFromNick(t._fromNick),d.setBurnAfterRead(!!r["a"].strTrim(e.burnAfterRead)),d.setFromClientType(proto.css.enum.EClientType.WEB),c=i["a"].Services.SERVICE_CHAT,g=i["a"].Methods.METHOD_SENDCHAT,f=proto.css.chat.ChatMessageResponse.deserializeBinary,d.setFromUsername(t._userName),d.setAppkey(t._appkey),d.setMsgId(i["a"].Util.getUniqueId()),d.setMsgContentType(e.msgContentType),d.setData(t._createConcreteMessage(e.msgContentType,e));var h=i["a"].Util.buildProxyRequest(c,g,d.serializeBinary());t._connection.addRequestHandler(p,c,g,h.getRequestId(),f),t._wsInstance.send(h.serializeBinary()),t._log&&t._log instanceof y.Log&&t._log.debug("文件消息已经发送 <br>请求 id:"+h.getRequestId()+"<br>消息 id:"+d.getMsgId()+"<br>消息内容："+e.fileName)}else browserMD5File(e.file,(function(n,d){i["a"].Util.doHttpRequest({type:"POST",url:t._pafsDomain+u+"?md5="+d.toString(),success:function(n){if(t._log&&t._log instanceof y.Log&&t._log.debug("成功匹配MD5："+n),n=JSON.parse(n),600==n.status){var u,d,c,g,f=function(e){e=e.toObject(),0==e.ret?(t._sendGuid=Long.fromValue(e.guid).toString()?Long.fromValue(e.guid).toString():t._sendGuid,e.guid=Long.fromValue(e.guid).toString(),l(e)):(e.msg=s["a"][e.ret],o(e))};t._log&&t._log instanceof y.Log&&t._log.debug("开始发送文件消息..."),u=new proto.css.chat.ChatMessageRequest,u.setToUsername(e.toUserName.toString().trim().toLowerCase()),u.setFromNick(t._fromNick),u.setBurnAfterRead(!!r["a"].strTrim(e.burnAfterRead)),u.setFromClientType(proto.css.enum.EClientType.WEB),d=i["a"].Services.SERVICE_CHAT,c=i["a"].Methods.METHOD_SENDCHAT,g=proto.css.chat.ChatMessageResponse.deserializeBinary,u.setFromUsername(t._userName),u.setAppkey(t._appkey),u.setMsgId(i["a"].Util.getUniqueId()),u.setMsgContentType(e.msgContentType),e.fileName=e.file.name,e.fileLink=n.original_link,e.fileLength=e.file.size,u.setData(t._createConcreteMessage(e.msgContentType,e));var p=i["a"].Util.buildProxyRequest(d,c,u.serializeBinary());t._connection.addRequestHandler(f,d,c,p.getRequestId(),g),t._wsInstance.send(p.serializeBinary()),t._log&&t._log instanceof y.Log&&t._log.debug("文件消息已经发送 <br>请求 id:"+p.getRequestId()+"<br>消息 id:"+u.getMsgId()+"<br>消息内容："+e.file.name)}else{var h=function(n){if("600"!=n.status)return n.msg=s["a"]["50"+n.status],void o(n);var a,u,d,c;t._log&&t._log instanceof y.Log&&t._log.debug("开始发送文件消息..."),a=new proto.css.chat.ChatMessageRequest,a.setToUsername(e.toUserName.toString().trim().toLowerCase()),a.setFromNick(t._fromNick),a.setBurnAfterRead(!!r["a"].strTrim(e.burnAfterRead)),a.setFromClientType(proto.css.enum.EClientType.WEB),u=i["a"].Services.SERVICE_CHAT,d=i["a"].Methods.METHOD_SENDCHAT,c=proto.css.chat.ChatMessageResponse.deserializeBinary,a.setFromUsername(t._userName),a.setAppkey(t._appkey),a.setMsgId(i["a"].Util.getUniqueId()),a.setMsgContentType(e.msgContentType),e.fileName=e.file.name,e.fileLink=n.original_link,e.fileLength=e.file.size,a.setData(t._createConcreteMessage(e.msgContentType,e));var g=i["a"].Util.buildProxyRequest(u,d,a.serializeBinary());function f(e){e=e.toObject(),0==e.ret?(t._sendGuid=Long.fromValue(e.guid).toString()?Long.fromValue(e.guid).toString():t._sendGuid,e.guid=Long.fromValue(e.guid).toString(),l(e)):(e.msg=s["a"][e.ret],o(e))}t._connection.addRequestHandler(f,u,d,g.getRequestId(),c),t._wsInstance.send(g.serializeBinary()),t._log&&t._log instanceof y.Log&&t._log.debug("文件消息已经发送 <br>请求 id:"+g.getRequestId()+"<br>消息 id:"+a.getMsgId()+"<br>消息内容："+e.file.name)},_=e.onFileUploadProgress||i["a"].Util.emptyFn,v=e.onFileUploadCanceled||i["a"].Util.emptyFn,S={fileInfo:{file:e.file,param:JSON.stringify({type:m,fileName:e.file.name})},url:t._pafsDomain+a,onFileUploadProgress:function(e){_(e)},onFileUploadComplete:function(e){h(e)},onFileUploadError:function(e){o(e)},onFileUploadCanceled:function(){v()}};t._log&&t._log instanceof y.Log&&t._log.debug("开始上传文件..."),i["a"].Util.uploadFn(S)}},error:function(e){t._log&&t._log instanceof y.Log&&t._log.error("匹配MD5失败："+JSON.stringify(e))}})}));else o({ret:50002,msg:s["a"][50002]})},y.prototype.sendPicMessage=function(e){var t=this,n=r["a"].validRelay("relay",e.relay);if(""==r["a"].validRelay("relay",e.relay)&&1==r["a"].strTrim(e.relay)){if(n+=r["a"].validFileName("picFileName",e.fileName),!n){var o=e.fileName.toLowerCase().substr(e.fileName.lastIndexOf("."));".gif"!=o&&(n+=r["a"].validPicFileLink("bigLink",e.fileName),n+=r["a"].validPicFileLink("middleLink",e.fileName))}n+=r["a"].validPicFileLink("originLink",e.fileName),n+=r["a"].validPicFileLink("smallLink",e.fileName),n+=r["a"].validLimit("fileLength",e.fileName)}else n+=r["a"].validFile("picFile",e.file);n+=r["a"].validBoolean("burnAfterRead",e.burnAfterRead);var l=e.error||i["a"].Util.emptyFn,g=e.success||i["a"].Util.emptyFn;if(n)l({ret:5e4,msg:n});else if(t._wsInstance&&t.isLogined())if(e.msgContentType=proto.css.msg.EMsgContentType.IMAGE,1==r["a"].strTrim(e.relay)){var f,p,m,h,_=function(e){e=e.toObject(),0==e.ret?(t._sendGuid=Long.fromValue(e.guid).toString()?Long.fromValue(e.guid).toString():t._sendGuid,e.guid=Long.fromValue(e.guid).toString(),g(e)):(e.msg=s["a"][e.ret],l(e))};t._log&&t._log instanceof y.Log&&t._log.debug("开始发送图片消息..."),f=new proto.css.chat.ChatMessageRequest,f.setToUsername(e.toUsername),f.setFromNick(e.fromNick),f.setBurnAfterRead(e.burnAfterRead),f.setFromClientType(proto.css.enum.EClientType.WEB),p=i["a"].Services.SERVICE_CHAT,m=i["a"].Methods.METHOD_SENDCHAT,h=proto.css.chat.ChatMessageResponse.deserializeBinary,f.setFromUsername(e.fromUsername),f.setAppkey(t._appkey),f.setMsgId(i["a"].Util.getUniqueId()),f.setMsgContentType(e.msgContentType);var v,S=new RegExp("(\\d+)x(\\d+)","g");o=e.fileName.toLowerCase().substr(e.fileName.lastIndexOf("."));if(e.mime=o,".gif"!=o)while(v=S.exec(e.middleLink))e.middleWidth=v[1],e.middleHeight=v[2];while(v=S.exec(e.smallLink))e.smallWidth=v[1],e.smallHeight=v[2];f.setData(t._createConcreteMessage(e.msgContentType,e));var T=i["a"].Util.buildProxyRequest(p,m,f.serializeBinary());t._connection.addRequestHandler(_,p,m,T.getRequestId(),h),t._wsInstance.send(T.serializeBinary()),t._log&&t._log instanceof y.Log&&t._log.debug("图片消息已经发送 <br>请求 id:"+T.getRequestId()+"<br>消息 id:"+f.getMsgId()+"<br>消息内容："+e.fileName)}else browserMD5File(e.file,(function(n,o){i["a"].Util.doHttpRequest({type:"POST",url:t._pafsDomain+u+"?md5="+o.toString(),success:function(n){if(t._log&&t._log instanceof y.Log&&t._log.debug("成功匹配MD5："+n),n=JSON.parse(n),600==n.status){var o,u,f,p,m=function(e){e=e.toObject(),console.log(e),console.log("22222222"),0==e.ret?(t._sendGuid=Long.fromValue(e.guid).toString()?Long.fromValue(e.guid).toString():t._sendGuid,e.guid=Long.fromValue(e.guid).toString(),g(e)):(e.msg=s["a"][e.ret],l(e))};t._log&&t._log instanceof y.Log&&t._log.debug("开始发送图片消息..."),o=new proto.css.chat.ChatMessageRequest,o.setToUsername(e.toUsername),o.setFromNick(e.fromNick),o.setBurnAfterRead(e.burnAfterRead),o.setFromClientType(proto.css.enum.EClientType.WEB),u=i["a"].Services.SERVICE_CHAT,f=i["a"].Methods.METHOD_SENDCHAT,p=proto.css.chat.ChatMessageResponse.deserializeBinary,o.setFromUsername(e.fromUsername),o.setAppkey(t._appkey),o.setMsgId(i["a"].Util.getUniqueId()),o.setMsgContentType(e.msgContentType),e.fileName=e.file.name,e.originLink=n.original_link,e.smallLink=n.small_link,e.fileLength=e.file.size;var h,_=new RegExp("(\\d+)x(\\d+)","g"),v=e.file.name.toLowerCase().substr(e.file.name.lastIndexOf("."));if(e.mime=v,".gif"!=v){e.bigLink=n.large_link,e.middleLink=n.middle_link;while(h=_.exec(n.middle_link))e.middleWidth=h[1],e.middleHeight=h[2]}while(h=_.exec(n.small_link))e.smallWidth=h[1],e.smallHeight=h[2];o.setData(t._createConcreteMessage(e.msgContentType,e));var S=i["a"].Util.buildProxyRequest(u,f,o.serializeBinary());t._connection.addRequestHandler(m,u,f,S.getRequestId(),p),t._wsInstance.send(S.serializeBinary()),t._log&&t._log instanceof y.Log&&t._log.debug("图片消息已经发送 <br>请求 id:"+S.getRequestId()+"<br>消息 id:"+o.getMsgId()+"<br>消息内容："+e.file.name)}else{var T=function(n){if("600"!=n.status)return n.msg=s["a"]["50"+n.status],void l(n);var o,a,u,d;t._log&&t._log instanceof y.Log&&t._log.debug("开始发送图片消息..."),o=new proto.css.chat.ChatMessageRequest,o.setToUsername(e.toUsername),o.setFromNick(e.fromNick),o.setBurnAfterRead(!!r["a"].strTrim(e.burnAfterRead)),o.setFromClientType(proto.css.enum.EClientType.WEB),a=i["a"].Services.SERVICE_CHAT,u=i["a"].Methods.METHOD_SENDCHAT,d=proto.css.chat.ChatMessageResponse.deserializeBinary,o.setFromUsername(e.fromUsername),o.setAppkey(t._appkey),o.setMsgId(i["a"].Util.getUniqueId()),o.setMsgContentType(e.msgContentType),e.fileName=e.file.name,e.originLink=n.original_link,e.smallLink=n.small_link,e.fileLength=e.file.size;var c,f=new RegExp("(\\d+)x(\\d+)","g");if(".gif"!=v){e.bigLink=n.large_link,e.middleLink=n.middle_link;while(c=f.exec(n.middle_link))e.middleWidth=c[1],e.middleHeight=c[2]}while(c=f.exec(n.small_link))e.smallWidth=c[1],e.smallHeight=c[2];o.setData(t._createConcreteMessage(e.msgContentType,e));var p=i["a"].Util.buildProxyRequest(a,u,o.serializeBinary());function m(e){e=e.toObject(),0==e.ret?(t._sendGuid=Long.fromValue(e.guid).toString()?Long.fromValue(e.guid).toString():t._sendGuid,e.guid=Long.fromValue(e.guid).toString(),g(e)):(e.msg=s["a"][e.ret],l(e))}t._connection.addRequestHandler(m,a,u,p.getRequestId(),d),t._wsInstance.send(p.serializeBinary()),t._log&&t._log instanceof y.Log&&t._log.debug("图片消息已经发送 <br>请求 id:"+p.getRequestId()+"<br>消息 id:"+o.getMsgId()+"<br>消息内容："+e.file.name)},E=e.onFileUploadProgress||i["a"].Util.emptyFn,C=e.onFileUploadCanceled||i["a"].Util.emptyFn;v=e.file.name.toLowerCase().substr(e.file.name.lastIndexOf("."));e.mime=v;var b={fileInfo:{file:e.file,param:JSON.stringify({type:".gif"==v?c:d,fileName:e.file.name})},url:t._pafsDomain+a,onFileUploadProgress:function(e){E(e)},onFileUploadComplete:function(e){T(e)},onFileUploadError:function(e){l(e)},onFileUploadCanceled:function(){C()}};t._log&&t._log instanceof y.Log&&t._log.debug("开始上传图片..."),i["a"].Util.uploadFn(b)}},error:function(e){t._log&&t._log instanceof y.Log&&t._log.error("匹配MD5失败："+JSON.stringify(e))}})}));else l({ret:50002,msg:s["a"][50002]})},y.prototype.sendAudMessage=function(e){var t=this,n=r["a"].validUserName("toUserName",e.toUserName);n+=r["a"].validRelay("relay",e.relay),""==r["a"].validRelay("relay",e.relay)&&1==r["a"].strTrim(e.relay)?(n+=r["a"].validFileName("audFileName",e.fileName),n+=r["a"].validAudFileLink("audioLink",e.audioLink),n+=r["a"].validDuration("duration",e.duration),n+=r["a"].validLimit("fileLength",e.fileLength)):n+=r["a"].validFile("audFile",e.file),n+=r["a"].validBoolean("burnAfterRead",e.burnAfterRead);var o=e.error||i["a"].Util.emptyFn,l=e.success||i["a"].Util.emptyFn;if(n)o({ret:5e4,msg:n});else if(t._wsInstance&&t.isLogined())if(e.msgContentType=proto.css.msg.EMsgContentType.AUDIO,1==r["a"].strTrim(e.relay)){var d,c,f,p,m=function(e){e=e.toObject(),0==e.ret?(t._sendGuid=Long.fromValue(e.guid).toString()?Long.fromValue(e.guid).toString():t._sendGuid,e.guid=Long.fromValue(e.guid).toString(),l(e)):(e.msg=s["a"][e.ret],o(e))};t._log&&t._log instanceof y.Log&&t._log.debug("开始发送语音消息..."),d=new proto.css.chat.ChatMessageRequest,d.setToUsername(e.toUserName.toString().trim().toLowerCase()),d.setFromNick(t._fromNick),d.setBurnAfterRead(!!r["a"].strTrim(e.burnAfterRead)),d.setFromClientType(proto.css.enum.EClientType.WEB),c=i["a"].Services.SERVICE_CHAT,f=i["a"].Methods.METHOD_SENDCHAT,p=proto.css.chat.ChatMessageResponse.deserializeBinary,d.setFromUsername(t._userName),d.setAppkey(t._appkey),d.setMsgId(i["a"].Util.getUniqueId()),d.setMsgContentType(e.msgContentType),d.setData(t._createConcreteMessage(e.msgContentType,e));var h=i["a"].Util.buildProxyRequest(c,f,d.serializeBinary());t._connection.addRequestHandler(m,c,f,h.getRequestId(),p),t._wsInstance.send(h.serializeBinary()),t._log&&t._log instanceof y.Log&&t._log.debug("语音消息已经发送 <br>请求 id:"+h.getRequestId()+"<br>消息 id:"+d.getMsgId()+"<br>消息内容："+e.fileName)}else browserMD5File(e.file,(function(n,d){i["a"].Util.doHttpRequest({type:"POST",url:t._pafsDomain+u+"?md5="+d.toString(),success:function(n){if(t._log&&t._log instanceof y.Log&&t._log.debug("成功匹配MD5："+n),n=JSON.parse(n),600==n.status){var u,d,c,f,p=function(e){e=e.toObject(),0==e.ret?(t._sendGuid=Long.fromValue(e.guid).toString()?Long.fromValue(e.guid).toString():t._sendGuid,e.guid=Long.fromValue(e.guid).toString(),l(e)):(e.msg=s["a"][e.ret],o(e))};if(t._log&&t._log instanceof y.Log&&t._log.debug("开始发送语音消息..."),u=new proto.css.chat.ChatMessageRequest,u.setToUsername(e.toUserName.toString().trim().toLowerCase()),u.setFromNick(t._fromNick),u.setBurnAfterRead(!!r["a"].strTrim(e.burnAfterRead)),u.setFromClientType(proto.css.enum.EClientType.WEB),d=i["a"].Services.SERVICE_CHAT,c=i["a"].Methods.METHOD_SENDCHAT,f=proto.css.chat.ChatMessageResponse.deserializeBinary,u.setFromUsername(t._userName),u.setAppkey(t._appkey),u.setMsgId(i["a"].Util.getUniqueId()),u.setMsgContentType(e.msgContentType),e.audioLink=n.original_link,e.duration=n.duration,e.duration>180)return void o({ret:5e4,msg:"语音时长超过180s"});e.fileName=e.file.name,e.fileLength=e.file.size,u.setData(t._createConcreteMessage(e.msgContentType,e));var m=i["a"].Util.buildProxyRequest(d,c,u.serializeBinary());t._connection.addRequestHandler(p,d,c,m.getRequestId(),f),t._wsInstance.send(m.serializeBinary()),t._log&&t._log instanceof y.Log&&t._log.debug("语音消息已经发送 <br>请求 id:"+m.getRequestId()+"<br>消息 id:"+u.getMsgId()+"<br>消息内容："+e.file.name)}else{var h=function(n){if("600"!=n.status)return n.msg=s["a"]["50"+n.status],void o(n);var a,u,d,c;if(t._log&&t._log instanceof y.Log&&t._log.debug("开始发送语音消息..."),a=new proto.css.chat.ChatMessageRequest,a.setToUsername(e.toUserName.toString().trim().toLowerCase()),a.setFromNick(t._fromNick),a.setBurnAfterRead(!!r["a"].strTrim(e.burnAfterRead)),a.setFromClientType(proto.css.enum.EClientType.WEB),u=i["a"].Services.SERVICE_CHAT,d=i["a"].Methods.METHOD_SENDCHAT,c=proto.css.chat.ChatMessageResponse.deserializeBinary,a.setFromUsername(t._userName),a.setAppkey(t._appkey),a.setMsgId(i["a"].Util.getUniqueId()),a.setMsgContentType(e.msgContentType),e.fileName=e.file.name,e.audioLink=n.original_link,e.duration=n.duration,e.fileLength=e.file.size,e.duration>180)o({ret:5e4,msg:"语音时长超过180s"});else{a.setData(t._createConcreteMessage(e.msgContentType,e));var g=i["a"].Util.buildProxyRequest(u,d,a.serializeBinary());t._connection.addRequestHandler(f,u,d,g.getRequestId(),c),t._wsInstance.send(g.serializeBinary()),t._log&&t._log instanceof y.Log&&t._log.debug("语音消息已经发送 <br>请求 id:"+g.getRequestId()+"<br>消息 id:"+a.getMsgId()+"<br>消息内容："+e.file.name)}function f(e){e=e.toObject(),0==e.ret?(t._sendGuid=Long.fromValue(e.guid).toString()?Long.fromValue(e.guid).toString():t._sendGuid,e.guid=Long.fromValue(e.guid).toString(),l(e)):(e.msg=s["a"][e.ret],o(e))}},_=e.onFileUploadProgress||i["a"].Util.emptyFn,v=e.onFileUploadCanceled||i["a"].Util.emptyFn,S={fileInfo:{file:e.file,param:JSON.stringify({type:g,fileName:e.file.name,needDur:!0})},url:t._pafsDomain+a,onFileUploadProgress:function(e){_(e)},onFileUploadComplete:function(e){h(e)},onFileUploadError:function(e){o(e)},onFileUploadCanceled:function(){v()}};t._log&&t._log instanceof y.Log&&t._log.debug("开始上传语音..."),i["a"].Util.uploadFn(S)}},error:function(e){t._log&&t._log instanceof y.Log&&t._log.error("匹配MD5失败："+JSON.stringify(e))}})}));else o({ret:50002,msg:s["a"][50002]})},y.prototype.sendVdoMessage=function(e){var t=this,n=r["a"].validRelay("relay",e.relay);""==r["a"].validRelay("relay",e.relay)&&1==r["a"].strTrim(e.relay)?(n+=r["a"].validFileName("vdoFileName",e.fileName),n+=r["a"].validVdoFileLink("videoLink",e.fileName),n+=r["a"].validPicFileLink("videoScreenShortLink",e.fileName),n+=r["a"].validLimit("fileLength",e.fileName),n+=r["a"].validLimit("duration",e.duration)):n+=r["a"].validFile("vdoFile",e.file),n+=r["a"].validBoolean("burnAfterRead",e.burnAfterRead);var o=e.error||i["a"].Util.emptyFn,l=e.success||i["a"].Util.emptyFn;if(n)o({ret:5e4,msg:n});else if(t._wsInstance&&t.isLogined())if(e.msgContentType=proto.css.msg.EMsgContentType.VIDEO,1==r["a"].strTrim(e.relay)){var d,c,g,p,m=function(e){e=e.toObject(),0==e.ret?(t._sendGuid=Long.fromValue(e.guid).toString()?Long.fromValue(e.guid).toString():t._sendGuid,e.guid=Long.fromValue(e.guid).toString(),l(e)):(e.msg=s["a"][e.ret],o(e))};t._log&&t._log instanceof y.Log&&t._log.debug("开始发送视频消息..."),d=new proto.css.chat.ChatMessageRequest,d.setToUsername(e.toUsername),d.setFromNick(e.fromNick),d.setBurnAfterRead(e.burnAfterRead),d.setFromClientType(proto.css.enum.EClientType.WEB),c=i["a"].Services.SERVICE_CHAT,g=i["a"].Methods.METHOD_SENDCHAT,p=proto.css.chat.ChatMessageResponse.deserializeBinary,d.setFromUsername(e.fromUsername),d.setAppkey(t._appkey),d.setMsgId(i["a"].Util.getUniqueId()),d.setMsgContentType(e.msgContentType);var h,_=new RegExp("(\\d+)x(\\d+)","g");while(h=_.exec(r["a"].strTrim(e.videoScreenShortLink)))e.width=h[1],e.height=h[2];d.setData(t._createConcreteMessage(e.msgContentType,e));var v=i["a"].Util.buildProxyRequest(c,g,d.serializeBinary());t._connection.addRequestHandler(m,c,g,v.getRequestId(),p),t._wsInstance.send(v.serializeBinary()),t._log&&t._log instanceof y.Log&&t._log.debug("视频消息已经发送 <br>请求 id:"+v.getRequestId()+"<br>消息 id:"+d.getMsgId()+"<br>消息内容："+e.fileName)}else browserMD5File(e.file,(function(n,d){i["a"].Util.doHttpRequest({type:"POST",url:t._pafsDomain+u+"?md5="+d.toString(),success:function(n){if(t._log&&t._log instanceof y.Log&&t._log.debug("成功匹配MD5："+n),n=JSON.parse(n),600==n.status){var u,d,c,g,p=function(e){e=e.toObject(),0==e.ret?(t._sendGuid=Long.fromValue(e.guid).toString()?Long.fromValue(e.guid).toString():t._sendGuid,e.guid=Long.fromValue(e.guid).toString(),l(e)):(e.msg=s["a"][e.ret],o(e))};t._log&&t._log instanceof y.Log&&t._log.debug("开始发送视频消息..."),u=new proto.css.chat.ChatMessageRequest,u.setToUsername(e.toUsername),u.setFromNick(e.fromNick),u.setBurnAfterRead(e.burnAfterRead),u.setFromClientType(proto.css.enum.EClientType.WEB),d=i["a"].Services.SERVICE_CHAT,c=i["a"].Methods.METHOD_SENDCHAT,g=proto.css.chat.ChatMessageResponse.deserializeBinary,u.setFromUsername(t.fromUsername),u.setAppkey(t._appkey),u.setMsgId(i["a"].Util.getUniqueId()),u.setMsgContentType(e.msgContentType),e.fileName=e.file.name,e.videoLink=n.original_link,e.videoScreenShortLink=n.cover_link,e.duration=n.duration,e.fileLength=e.file.size;var m,h=new RegExp("(\\d+)x(\\d+)","g");while(m=h.exec(r["a"].strTrim(n.cover_link)))e.width=m[1],e.height=m[2];u.setData(t._createConcreteMessage(e.msgContentType,e));var _=i["a"].Util.buildProxyRequest(d,c,u.serializeBinary());t._connection.addRequestHandler(p,d,c,_.getRequestId(),g),t._wsInstance.send(_.serializeBinary()),t._log&&t._log instanceof y.Log&&t._log.debug("视频消息已经发送 <br>请求 id:"+_.getRequestId()+"<br>消息 id:"+u.getMsgId()+"<br>消息内容："+e.file.name)}else{var v=function(n){if("600"!=n.status)return n.msg=s["a"]["50"+n.status],void o(n);var a,u,d,c;t._log&&t._log instanceof y.Log&&t._log.debug("开始发送视频消息..."),a=new proto.css.chat.ChatMessageRequest,a.setToUsername(e.toUsername),a.setFromNick(e.fromNick),a.setBurnAfterRead(!!r["a"].strTrim(e.burnAfterRead)),a.setFromClientType(proto.css.enum.EClientType.WEB),u=i["a"].Services.SERVICE_CHAT,d=i["a"].Methods.METHOD_SENDCHAT,c=proto.css.chat.ChatMessageResponse.deserializeBinary,a.setFromUsername(e.fromUsername),a.setAppkey(t._appkey),a.setMsgId(i["a"].Util.getUniqueId()),a.setMsgContentType(e.msgContentType),e.fileName=e.file.name,e.videoLink=n.original_link,e.videoScreenShortLink=n.cover_link,e.duration=n.duration,e.fileLength=e.file.size;var g,f=new RegExp("(\\d+)x(\\d+)","g");while(g=f.exec(n.cover_link))e.width=g[1],e.height=g[2];a.setData(t._createConcreteMessage(e.msgContentType,e));var p=i["a"].Util.buildProxyRequest(u,d,a.serializeBinary());function m(e){e=e.toObject(),0==e.ret?(t._sendGuid=Long.fromValue(e.guid).toString()?Long.fromValue(e.guid).toString():t._sendGuid,e.guid=Long.fromValue(e.guid).toString(),l(e)):(e.msg=s["a"][e.ret],o(e))}t._connection.addRequestHandler(m,u,d,p.getRequestId(),c),t._wsInstance.send(p.serializeBinary()),t._log&&t._log instanceof y.Log&&t._log.debug("视频消息已经发送 <br>请求 id:"+p.getRequestId()+"<br>消息 id:"+a.getMsgId()+"<br>消息内容："+e.file.name)},S=e.onFileUploadProgress||i["a"].Util.emptyFn,T=e.onFileUploadCanceled||i["a"].Util.emptyFn,E={fileInfo:{file:e.file,param:JSON.stringify({type:f,fileName:e.file.name})},url:t._pafsDomain+a,onFileUploadProgress:function(e){S(e)},onFileUploadComplete:function(e){v(e)},onFileUploadError:function(e){o(e)},onFileUploadCanceled:function(){T()}};t._log&&t._log instanceof y.Log&&t._log.debug("开始上传视频..."),i["a"].Util.uploadFn(E)}},error:function(e){t._log&&t._log instanceof y.Log&&t._log.error("匹配MD5失败："+JSON.stringify(e))}})}));else o({ret:50002,msg:s["a"][50002]})},y.prototype.sendLocMessage=function(e){var t=this,n=r["a"].validUserName("toUserName",e.toUserName);n+=r["a"].validRelay("relay",e.relay),""==r["a"].validRelay("relay",e.relay)&&1==r["a"].strTrim(e.relay)?(n+=r["a"].validFileName("locFileName",e.fileName),n+=r["a"].validPicFileLink("locOriginLink",e.originLink),n+=r["a"].validLimit("fileLength",e.fileLength)):n+=r["a"].validFile("locFile",e.file),n+=r["a"].validFloat("longitude",e.longitude),n+=r["a"].validFloat("latitude",e.latitude),n+=r["a"].validText("locationAddress",e.locationAddress),n+=r["a"].validText("locationDesc",e.locationDesc),n+=r["a"].validBoolean("burnAfterRead",e.burnAfterRead);var o=e.error||i["a"].Util.emptyFn,l=e.success||i["a"].Util.emptyFn;if(n)o({ret:5e4,msg:n});else if(t._wsInstance&&t.isLogined())if(e.msgContentType=proto.css.msg.EMsgContentType.LOCATION,1==r["a"].strTrim(e.relay)){var d,c,g,f,m=function(e){e=e.toObject(),0==e.ret?(t._sendGuid=Long.fromValue(e.guid).toString()?Long.fromValue(e.guid).toString():t._sendGuid,e.guid=Long.fromValue(e.guid).toString(),l(e)):(e.msg=s["a"][e.ret],o(e))};t._log&&t._log instanceof y.Log&&t._log.debug("开始发送位置消息..."),d=new proto.css.chat.ChatMessageRequest,d.setToUsername(e.toUserName.toString().trim().toLowerCase()),d.setFromNick(t._fromNick),d.setBurnAfterRead(!!r["a"].strTrim(e.burnAfterRead)),d.setFromClientType(proto.css.enum.EClientType.WEB),c=i["a"].Services.SERVICE_CHAT,g=i["a"].Methods.METHOD_SENDCHAT,f=proto.css.chat.ChatMessageResponse.deserializeBinary,d.setFromUsername(t._userName),d.setAppkey(t._appkey),d.setMsgId(i["a"].Util.getUniqueId()),d.setMsgContentType(e.msgContentType);var h,_=new RegExp("(\\d+)x(\\d+)","g");while(h=_.exec(e.originLink))e.width=h[1],e.height=h[2];d.setData(t._createConcreteMessage(e.msgContentType,e));var v=i["a"].Util.buildProxyRequest(c,g,d.serializeBinary());t._connection.addRequestHandler(m,c,g,v.getRequestId(),f),t._wsInstance.send(v.serializeBinary()),t._log&&t._log instanceof y.Log&&t._log.debug("位置消息已经发送 <br>请求 id:"+v.getRequestId()+"<br>消息 id:"+d.getMsgId()+"<br>消息内容："+e.fileName)}else browserMD5File(e.file,(function(n,d){i["a"].Util.doHttpRequest({type:"POST",url:t._pafsDomain+u+"?md5="+d.toString(),success:function(n){if(t._log&&t._log instanceof y.Log&&t._log.debug("成功匹配MD5："+n),n=JSON.parse(n),600==n.status){var u,d,c,g,f=function(e){e=e.toObject(),0==e.ret?(t._sendGuid=Long.fromValue(e.guid).toString()?Long.fromValue(e.guid).toString():t._sendGuid,e.guid=Long.fromValue(e.guid).toString(),l(e)):(e.msg=s["a"][e.ret],o(e))};t._log&&t._log instanceof y.Log&&t._log.debug("开始发送位置消息..."),u=new proto.css.chat.ChatMessageRequest,u.setToUsername(e.toUserName.toString().trim().toLowerCase()),u.setFromNick(t._fromNick),u.setBurnAfterRead(!!r["a"].strTrim(e.burnAfterRead)),u.setFromClientType(proto.css.enum.EClientType.WEB),d=i["a"].Services.SERVICE_CHAT,c=i["a"].Methods.METHOD_SENDCHAT,g=proto.css.chat.ChatMessageResponse.deserializeBinary,u.setFromUsername(t._userName),u.setAppkey(t._appkey),u.setMsgId(i["a"].Util.getUniqueId()),u.setMsgContentType(r["a"].strTrim(e.msgContentType)),e.fileName=e.file.name,e.originLink=n.small_link,e.fileLength=e.file.size;var m,h=new RegExp("(\\d+)x(\\d+)","g");while(m=h.exec(n.small_link))e.width=m[1],e.height=m[2];u.setData(t._createConcreteMessage(e.msgContentType,e));var _=i["a"].Util.buildProxyRequest(d,c,u.serializeBinary());t._connection.addRequestHandler(f,d,c,_.getRequestId(),g),t._wsInstance.send(_.serializeBinary()),t._log&&t._log instanceof y.Log&&t._log.debug("位置消息已经发送 <br>请求 id:"+_.getRequestId()+"<br>消息 id:"+u.getMsgId()+"<br>消息内容："+e.file.name)}else{var v=function(n){if("600"!=n.status)return n.msg=s["a"]["50"+n.status],void o(n);var a,u,d,c;t._log&&t._log instanceof y.Log&&t._log.debug("开始发送位置消息..."),a=new proto.css.chat.ChatMessageRequest,a.setToUsername(e.toUserName.toString().trim().toLowerCase()),a.setFromNick(t._fromNick),a.setBurnAfterRead(!!r["a"].strTrim(e.burnAfterRead)),a.setFromClientType(proto.css.enum.EClientType.WEB),u=i["a"].Services.SERVICE_CHAT,d=i["a"].Methods.METHOD_SENDCHAT,c=proto.css.chat.ChatMessageResponse.deserializeBinary,a.setFromUsername(t._userName),a.setAppkey(t._appkey),a.setMsgId(i["a"].Util.getUniqueId()),a.setMsgContentType(r["a"].strTrim(e.msgContentType)),e.fileName=e.file.name,e.originLink=n.small_link,e.fileLength=e.file.size;var g,f=new RegExp("(\\d+)x(\\d+)","g");while(g=f.exec(n.small_link))e.width=g[1],e.height=g[2];a.setData(t._createConcreteMessage(e.msgContentType,e));var p=i["a"].Util.buildProxyRequest(u,d,a.serializeBinary());function m(e){e=e.toObject(),0==e.ret?(t._sendGuid=Long.fromValue(e.guid).toString()?Long.fromValue(e.guid).toString():t._sendGuid,e.guid=Long.fromValue(e.guid).toString(),l(e)):(e.msg=s["a"][e.ret],o(e))}t._connection.addRequestHandler(m,u,d,p.getRequestId(),c),t._wsInstance.send(p.serializeBinary()),t._log&&t._log instanceof y.Log&&t._log.debug("位置消息已经发送 <br>请求 id:"+p.getRequestId()+"<br>消息 id:"+a.getMsgId()+"<br>消息内容："+e.file.name)},S=e.onFileUploadProgress||i["a"].Util.emptyFn,T=e.onFileUploadCanceled||i["a"].Util.emptyFn,E={fileInfo:{file:e.file,param:JSON.stringify({type:p,fileName:e.file.name})},url:t._pafsDomain+a,onFileUploadProgress:function(e){S(e)},onFileUploadComplete:function(e){v(e)},onFileUploadError:function(e){o(e)},onFileUploadCanceled:function(){T()}};t._log&&t._log instanceof y.Log&&t._log.debug("开始上传位置..."),i["a"].Util.uploadFn(E)}},error:function(e){t._log&&t._log instanceof y.Log&&t._log.error("匹配MD5失败："+JSON.stringify(e))}})}));else o({ret:50002,msg:s["a"][50002]})},y.prototype.sendReadReceiptMessage=function(e){var t=this,n=r["a"].validGuid("receiptGuid",e.receiptGuid);n+=r["a"].validUserName("toUserName",e.toUserName),n+=r["a"].validBoolean("burnAfterRead",e.burnAfterRead);var o=e.error||i["a"].Util.emptyFn,a=e.success||i["a"].Util.emptyFn;if(n)o({ret:5e4,msg:n});else if(console.log("开始发送已读回执消息"),t._wsInstance&&t.isLogined()){var u,l,d,c,g=function(e){e=e.toObject(),0==e.ret?(t._sendGuid=Long.fromValue(e.guid).toString()?Long.fromValue(e.guid).toString():t._sendGuid,e.guid=Long.fromValue(e.guid).toString(),a(e)):(e.msg=s["a"][e.ret],o(e))};t._log&&t._log instanceof y.Log&&t._log.debug("开始发送已读回执消息..."),e.msgContentType=proto.css.msg.EMsgContentType.READ_RECEIPT,u=new proto.css.chat.ChatMessageRequest,u.setToUsername(e.toUserName.toString().trim().toLowerCase()),u.setFromNick(t._fromNick),u.setBurnAfterRead(!!r["a"].strTrim(e.burnAfterRead)),u.setFromClientType(proto.css.enum.EClientType.WEB),l=i["a"].Services.SERVICE_CHAT,d=i["a"].Methods.METHOD_SENDCHAT,c=proto.css.chat.ChatMessageResponse.deserializeBinary,u.setFromUsername(t._userName),u.setAppkey(t._appkey),u.setMsgId(i["a"].Util.getUniqueId()),u.setMsgContentType(e.msgContentType),u.setData(t._createConcreteMessage(e.msgContentType,e));var f=i["a"].Util.buildProxyRequest(l,d,u.serializeBinary());t._connection.addRequestHandler(g,l,d,f.getRequestId(),c),t._wsInstance.send(f.serializeBinary()),t._log&&t._log instanceof y.Log&&t._log.debug("已读回执消息已经发送 <br>请求 id:"+f.getRequestId()+"<br>消息 id:"+u.getMsgId()+"<br>已读消息GUID："+e.receiptGuid)}else o({ret:50002,msg:s["a"][50002]})},y.prototype.removeMessage=function(e){var t=this,n=r["a"].validUserName("toUsername",e.toUsername);n+=r["a"].validBoolean("removeSession",e.removeSession),n||0!=r["a"].strTrim(e.removeSession)||(n+=r["a"].validGuidList("guidList",e.guidList));var o=e.error||i["a"].Util.emptyFn,a=e.success||i["a"].Util.emptyFn;if(n)o({ret:5e4,msg:n});else if(t._wsInstance&&t.isLogined()){var u,l,d,c=function(e){e=e.toObject(),0==e.ret?a(e):(e.msg=s["a"][e.ret],o(e))};t._log&&t._log instanceof y.Log&&t._log.debug("开始删除历史消息...");var g=proto.css.history.MessageRemoveResponse.deserializeBinary;u=new proto.css.history.ChatMessageRemoveRequest,l=i["a"].Services.SERVICE_HISTORY,d=i["a"].Methods.METHOD_CHATMESSAGEREMOVE,u.setToUsername(r["a"].strTrim(e.toUsername).toLowerCase()),u.setRemoveSession(r["a"].strTrim(e.removeSession)),0==r["a"].strTrim(e.removeSession)&&u.setGuidList(e.guidList),u.setFromUsername(t._userName),u.setAppkey(t._appkey);var f=i["a"].Util.buildProxyRequest(l,d,u.serializeBinary());t._connection.addRequestHandler(c,l,d,f.getRequestId(),g),t._wsInstance.send(f.serializeBinary()),t._log&&t._log instanceof y.Log&&t._log.debug("删除消息已经发送 <br>请求 id:"+f.getRequestId())}else o({ret:50002,msg:s["a"][50002]})},y.prototype.getHistoryMessage=function(e){var t=this;if(t._wsInstance&&t.isLogined()){t._log&&t._log instanceof y.Log&&t._log.debug("开始获取历史消息...");var n=i["a"].Services.SERVICE_CHAT,r=i["a"].Methods.METHOD_CHATHISTORYMESSAGEGET,o=proto.css.chat.MsgGetResponse.deserializeBinary,a=new proto.css.chat.ChatHistoryMessageGetRequest;a.setToUsername(e.toUsername),a.setFromUsername(e.fromUsername),a.setAppkey(h._appkey),a.setLimit(e.limit),a.setBeginGuid(e.beginGuid);var u=i["a"].Util.buildProxyRequest(n,r,a.serializeBinary()),l=function(n){var i=n.toObject();if(0==i.ret){for(var r=n.getDataList(),o=r.length,a=[],u=0;u<o;u++)try{var l=t._parseMessage(r[u]);0!=Object.keys(l).length&&a.push(l)}catch(d){e.error({ret:"50003",msg:s["a"]["50003"]+d.message})}e.success(a)}else i.msg=s["a"][i.ret],e.error&&e.error(i)};h._connection.addRequestHandler(l,n,r,u.getRequestId(),o),h._wsInstance.send(u.serializeBinary()),t._log&&t._log instanceof y.Log&&t._log.debug("获取历史消息已经发送 <br>请求 id:"+u.getRequestId()+"<br>起始消息GUID:"+e.begin)}else e.error&&e.error({ret:50002,msg:s["a"][50002]})},y.prototype.sendRetractMessage=function(e){var t=this,n=r["a"].validUserName("toUserName",e.toUserName);n+=r["a"].validGuid("retractGuid",e.retractGuid);var o=e.error||i["a"].Util.emptyFn,a=e.success||i["a"].Util.emptyFn;if(n)o({ret:5e4,msg:n});else if(t._wsInstance&&t.isLogined()){var u,l,d,c,g=function(e){e=e.toObject(),0==e.ret?(t._sendGuid=Long.fromValue(e.guid).toString()?Long.fromValue(e.guid).toString():t._sendGuid,e.guid=Long.fromValue(e.guid).toString(),a(e)):(e.msg=s["a"][e.ret],o(e))};t._log&&t._log instanceof y.Log&&t._log.debug("开始撤回消息..."),e.msgContentType=proto.css.msg.EMsgContentType.RETRACT,u=new proto.css.chat.ChatMessageRequest,u.setToUsername(e.toUserName.toString().trim().toLowerCase()),u.setFromNick(t._fromNick),u.setFromClientType(proto.css.enum.EClientType.WEB),l=i["a"].Services.SERVICE_CHAT,d=i["a"].Methods.METHOD_SENDCHAT,c=proto.css.chat.ChatMessageResponse.deserializeBinary,"undefined"!==typeof e.begin&&""!=r["a"].strTrim(e.begin)&&u.setBegin(r["a"].strTrim(e.begin)),"undefined"!==typeof e.end&&""!=r["a"].strTrim(e.end)&&u.setEnd(r["a"].strTrim(e.end)),u.setFromUsername(t._userName),u.setAppkey(t._appkey),u.setMsgId(i["a"].Util.getUniqueId()),u.setMsgContentType(e.msgContentType),u.setData(t._createConcreteMessage(e.msgContentType,e));var f=i["a"].Util.buildProxyRequest(l,d,u.serializeBinary());t._connection.addRequestHandler(g,l,d,f.getRequestId(),c),t._wsInstance.send(f.serializeBinary()),t._log&&t._log instanceof y.Log&&t._log.debug("撤回消息已经发送 <br>请求 id:"+f.getRequestId()+"<br>消息id:"+u.getMsgId()+"<br>被撤消息GUID："+e.retractGuid)}else o({ret:50002,msg:s["a"][50002]})},y.prototype.syncReceivedMessage=function(e){var t=this,n=e.error||i["a"].Util.emptyFn,r=e.success||i["a"].Util.emptyFn;if(this._wsInstance&&this.isLogined()){var o=i["a"].Services.SERVICE_CHAT,a=i["a"].Methods.METHOD_MESSAGESYNC,u=new proto.css.chat.MessageSyncRequest;u.setGuid(Long.fromString(e.recvGuid?e.recvGuid.toString():this._recvGuid.toString(),!0)),u.setUsername(e.csId),u.setAppkey(this._appkey),u.setSor(!1),u.setType(proto.css.chat.END_TYPE.WEB);var l=function(e){var i=e.toObject();if(0==i.ret){for(var o=e.getDataList(),a=o.length,u=[],l=0;l<a;l++)try{var d=t._parseMessage(o[l]);0!=Object.keys(d).length&&(t._recvGuid=d.guid?d.guid:t._recvGuid,u.push(d))}catch(c){n({ret:"50003",msg:s["a"]["50003"]+c.message})}t._onMessageRecivied(u),r({ret:0})}else i.msg=s["a"][i.ret],n(i)},d=i["a"].Util.buildProxyRequest(o,a,u.serializeBinary());this._connection.addRequestHandler(l,o,a,d.getRequestId(),proto.css.chat.MsgGetResponse.deserializeBinary),this._wsInstance.send(d.serializeBinary()),t._log&&t._log instanceof y.Log&&t._log.debug("从接收列表同步消息, 请求 id:"+d.getRequestId())}else n({ret:50002,msg:s["a"][50002]})},y.prototype.syncSentMessage=function(e){var t=this,n=r["a"].validGuid("initGuid",e.sendGuid?e.sendGuid:this._sendGuid),o=e.error||i["a"].Util.emptyFn,a=e.success||i["a"].Util.emptyFn;if(n)o({ret:5e4,msg:n});else if(this._wsInstance&&this.isLogined()){var u=i["a"].Services.SERVICE_HISTORY,l=i["a"].Methods.METHOD_MESSAGESYNC,d=new proto.css.history.MessageSyncRequest;d.setGuid(Long.fromString(e.sendGuid?e.sendGuid.toString():this._sendGuid.toString(),!0)),d.setUsername(this._userName),d.setAppkey(this._appkey),d.setSor(!0);var c=function(e){var n=e.toObject();if(0==n.ret){for(var i=e.getDataList(),r=i.length,u=[],l=0;l<r;l++)try{var d=t._parseMessage(i[l]);0!=Object.keys(d).length&&(t._sendGuid=d.guid?d.guid:t._sendGuid,u.push(d))}catch(c){o({ret:"50003",msg:s["a"]["50003"]+c.message})}t._onMessageSent(u),a({ret:0})}else n.msg=s["a"][n.ret],o(n)},g=i["a"].Util.buildProxyRequest(u,l,d.serializeBinary());this._connection.addRequestHandler(c,u,l,g.getRequestId(),proto.css.history.MsgGetResponse.deserializeBinary),this._wsInstance.send(g.serializeBinary()),t._log&&t._log instanceof y.Log&&t._log.debug("从发送列表同步消息, 请求 id:"+g.getRequestId())}else o({ret:50002,msg:s["a"][50002]})},y.prototype.syncSendGUID=function(){var e=this;if(this._wsInstance&&this.isLogined()){var t=i["a"].Services.SERVICE_HISTORY,n=i["a"].Methods.METHOD_SYNCSENDGUID,r=new proto.css.history.SyncSendGUIDRequest;r.setUsername(this._userName),r.setAppkey(this._appkey);var o=function(t){var n=t.toObject();0==n.ret?(e._recvGuid="0",e._sendGuid=Long.fromValue(n.sendGuid).toString(),e._log&&e._log instanceof y.Log&&e._log.debug("recvGuid:"+e._recvGuid+",sendGuid:"+e._sendGuid),e.syncReceivedMessage({recvGuid:e._recvGuid,success:function(e){},error:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(t){e._log&&e._log instanceof y.Log&&(t.msg=s["a"][t.ret],e._log.debug("登录拉取历史消息"+JSON.stringify(t)))}))})):(n.msg=s["a"][n.ret],e._log&&e._log instanceof y.Log&&e._log.debug("获取guid失败返回："+JSON.stringify(n)))},a=i["a"].Util.buildProxyRequest(t,n,r.serializeBinary());this._connection.addRequestHandler(o,t,n,a.getRequestId(),proto.css.history.SyncSendGUIDResponse.deserializeBinary),this._wsInstance.send(a.serializeBinary()),e._log&&e._log instanceof y.Log&&e._log.debug("获取guid, 请求 id:"+a.getRequestId())}else error({ret:50002,msg:s["a"][50002]})},y.prototype.disconnect=function(){if("undefined"!==typeof this._wsInstance)return this._wsInstance.disconnect()},y.prototype.getConnStatus=function(){if("undefined"!==typeof this._connection)return this._connection.status},y.prototype.isConnected=function(){return"undefined"!==typeof this._connection?this._connection.status==i["a"].Connection.Status.CONNECTED||this._connection.status==i["a"].Connection.Status.LOGINED:i["a"].Connection.Status.DISCONNECTED},y.prototype.isLogined=function(){if("undefined"!==typeof this._connection)return this._connection.status==i["a"].Connection.Status.LOGINED},y.prototype.isClosed=function(){return this._connection.status!=i["a"].Connection.Status.LOGINED},y.prototype._handleKickNotification=function(e){var t=this;t._onKicked(e),h._kicked=!0},y.prototype._handleNewMessageNotify=function(e){var t=i["a"].Services.SERVICE_CHAT,n=i["a"].Methods.METHOD_MESSAGESYNC,r=new proto.css.chat.MessageSyncRequest;console.log("_handleNewMessageNotify"),console.log(e),r.setGuid(0),r.setUsername(e.toUsername),r.setAppkey(e.appkey),r.setSor(!1),r.setType(proto.css.chat.END_TYPE.WEB);var o=function(e){var t=e.toObject();if(0==t.ret){for(var n=e.getDataList(),i=n.length,r=[],o=0;o<i;o++)try{var a=h._parseMessage(n[o]);0!=Object.keys(a).length&&(h._recvGuid=a.guid?a.guid:h._recvGuid,r.push(a))}catch(u){h._connection.onError({ret:"50003",msg:s["a"]["50003"]+u.message})}h._onMessageRecivied(r)}else 2003!=t.ret&&(t.msg=s["a"][t.ret],h._connection.onError(t))},a=i["a"].Util.buildProxyRequest(t,n,r.serializeBinary());h._connection.addRequestHandler(o,t,n,a.getRequestId(),proto.css.chat.MsgGetResponse.deserializeBinary),h._wsInstance.send(a.serializeBinary())},y.prototype._handleFriendUpdateNotify=function(e){var t=this;t._onFriendUpdated(e)},y.prototype._handleGroupUpdateNotify=function(e){var t=this;t._onGroupUpdated(e)},y.prototype._handleRetractNotify=function(e){var t=this;t.syncReceivedMessage({recvGuid:t._recvGuid,success:function(e){},error:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){t._log&&t._log instanceof y.Log&&(e.msg=s["a"][e.ret],t._log.debug("拉取历史消息"+JSON.stringify(e)))}))})},y.prototype._handleCarbonMsgNotify=function(e){var t=this;t.syncSentMessage({sendGuid:t._sendGuid,success:function(e){},error:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){t._log&&t._log instanceof y.Log&&(e.msg=s["a"][e.ret],t._log.debug("拉取伙伴终端发送的消息"+JSON.stringify(e)))}))})},y.prototype._parseMessage=function(e){if(e){var t=e.getMsgType(),n=e.getData(),i={};switch(t){case proto.css.msg.EMsgType.CHAT_MSG:var s=proto.css.chat.ChatMessage.deserializeBinary(n);i=this._parseChatMessage(s),i.msgType=proto.css.msg.EMsgType.CHAT_MSG;break;case proto.msg.EMsgType.MSGGW_MSG:var r=proto.css.msg.MsggwMessage.deserializeBinary(n);i=this._parseMsggwMessage(r),i.msgType=proto.css.msg.EMsgType.MSGGW_MSG;break;case proto.css.msg.EMsgType.SYSTEM_MSG:break;default:break}return i}return{}},y.prototype._parseChatMessage=function(e){if(e){var t={fromUserName:e.getFromUsername(),fromNick:e.getFromNick(),toUsername:e.getToUsername(),guid:Long.fromValue(e.getGuid()).toString(),time:i["a"].Util.guidToTime(Long.fromValue(e.getGuid()).toString()),msgId:e.getMsgId(),msgContentType:e.getMsgContentType(),burnAfterRead:e.getBurnAfterRead(),appkey:e.getAppkey()},n=e.getData(),s=this._parseConcreteMessage(t.msgContentType,n);return t=i["a"].Util.extend(t,s.toObject()),t.msgContentType==proto.css.msg.EMsgContentType.READ_RECEIPT&&(t.receiptGuid=Long.fromValue(s.getReceiptGuid()).toString()),t.msgContentType==proto.css.msg.EMsgContentType.RETRACT&&(t.retractGuid=Long.fromValue(s.getRetractGuid()).toString()),t}return{}},y.prototype._parseMsggwMessage=function(e){if(e){var t={from:e.getFrom(),appkey:e.getAppkey(),content:e.getContent(),guid:Long.fromValue(e.getGuid()).toString(),time:i["a"].Util.guidToTime(Long.fromValue(e.getGuid()).toString()),notification:e.getNotification()};return t}return{}},y.prototype._parseConcreteMessage=function(e,t){if(t){var n={};switch(e){case proto.css.msg.EMsgContentType.TEXT:n=proto.css.msg.TextMessage.deserializeBinary(t);break;case proto.css.msg.EMsgContentType.IMAGE:n=proto.css.msg.ImageMessage.deserializeBinary(t),n.setOriginLink(this._pafsDomain+n.getOriginLink()),n.setBigLink(this._pafsDomain+n.getBigLink()),n.setMiddleLink(this._pafsDomain+n.getMiddleLink()),n.setSmallLink(this._pafsDomain+n.getSmallLink());break;case proto.css.msg.EMsgContentType.VIDEO:n=proto.css.msg.VideoMessage.deserializeBinary(t),n.setVideoLink(this._pafsDomain+n.getVideoLink()),n.setVideoScreenShortLink(this._pafsDomain+n.getVideoScreenShortLink());break;case proto.css.msg.EMsgContentType.AUDIO:n=proto.css.msg.AudioMessage.deserializeBinary(t),n.setAudioLink(this._pafsDomain+n.getAudioLink());break;case proto.css.msg.EMsgContentType.LOCATION:n=proto.css.msg.LocationMessage.deserializeBinary(t),n.setOriginLink(this._pafsDomain+n.getOriginLink());break;case proto.css.msg.EMsgContentType.AT:n=proto.css.msg.AtMessage.deserializeBinary(t);break;case proto.css.msg.EMsgContentType.READ_RECEIPT:n=proto.css.msg.ReadReceiptMessage.deserializeBinary(t);break;case proto.css.msg.EMsgContentType.FILE:n=proto.css.msg.FileMessage.deserializeBinary(t),n.setFileLink(this._pafsDomain+n.getFileLink());break;case proto.css.msg.EMsgContentType.RETRACT:n=proto.css.msg.RetractMessage.deserializeBinary(t);break;case proto.css.msg.EMsgContentType.CUSTOM:n=proto.css.msg.CustomMessage.deserializeBinary(t);break;default:break}return n}return{}},y.prototype._createConcreteMessage=function(e,t){if(t){var n=null;switch(e){case proto.css.msg.EMsgContentType.TEXT:n=new proto.css.msg.TextMessage,"undefined"!==typeof t.text&&null!=t.text&&"string"===typeof t.text&&n.setText(r["a"].strTrim(t.text)),n.setBurnAfterRead(!!r["a"].strTrim(t.burnAfterRead));break;case proto.css.msg.EMsgContentType.IMAGE:n=new proto.css.msg.ImageMessage,n.setFileName(r["a"].strTrim(t.fileName)),n.setOriginLink(r["a"].strTrim(t.originLink)),n.setSmallLink(r["a"].strTrim(t.smallLink)),n.setFileLength(r["a"].strTrim(t.fileLength)),n.setSmallWidth(r["a"].strTrim(t.smallWidth)),n.setSmallHeight(r["a"].strTrim(t.smallHeight)),".gif"!=t.mime&&(n.setBigLink(r["a"].strTrim(t.bigLink)),n.setMiddleLink(r["a"].strTrim(t.middleLink)),n.setMiddleWidth(r["a"].strTrim(t.middleWidth)),n.setMiddleHeight(r["a"].strTrim(t.middleHeight)));break;case proto.css.msg.EMsgContentType.VIDEO:n=new proto.css.msg.VideoMessage,n.setFileName(r["a"].strTrim(t.fileName)),n.setVideoLink(r["a"].strTrim(t.videoLink)),n.setVideoScreenShortLink(r["a"].strTrim(t.videoScreenShortLink)),n.setFileLength(r["a"].strTrim(t.fileLength)),n.setDuration(r["a"].strTrim(t.duration)),n.setWidth(r["a"].strTrim(t.width)),n.setHeight(r["a"].strTrim(t.height));break;case proto.css.msg.EMsgContentType.AUDIO:n=new proto.css.msg.AudioMessage,n.setFileName(r["a"].strTrim(t.fileName)),n.setAudioLink(r["a"].strTrim(t.audioLink)),n.setFileLength(r["a"].strTrim(t.fileLength)),n.setDuration(r["a"].strTrim(t.duration));break;case proto.css.msg.EMsgContentType.LOCATION:n=new proto.css.msg.LocationMessage,n.setFileName(r["a"].strTrim(t.fileName)),n.setOriginLink(r["a"].strTrim(t.originLink)),n.setFileLength(r["a"].strTrim(t.fileLength)),n.setWidth(r["a"].strTrim(t.width)),n.setHeight(r["a"].strTrim(t.height)),n.setLongitude(r["a"].strTrim(t.longitude)),n.setLatitude(r["a"].strTrim(t.latitude)),n.setLocationDesc(r["a"].strTrim(t.locationDesc)),n.setLocationAddress(r["a"].strTrim(t.locationAddress));break;case proto.css.msg.EMsgContentType.AT:n=new proto.css.msg.AtMessage,t.atAll?n.setAtAll(t.atAll):n.setAtMemberList(_(t.atMemberList).map((function(e){return e.toLowerCase()}))),"undefined"!==typeof t.text&&null!=t.text&&"string"===typeof t.text&&0!=t.text.toString().trim().length&&n.setText(r["a"].strTrim(t.text));break;case proto.css.msg.EMsgContentType.READ_RECEIPT:n=new proto.css.msg.ReadReceiptMessage,n.setReceiptGuid(Long.fromString(r["a"].strTrim(t.receiptGuid).toString(),!0));break;case proto.css.msg.EMsgContentType.FILE:n=new proto.css.msg.FileMessage,n.setFileName(r["a"].strTrim(t.fileName)),n.setFileLink(r["a"].strTrim(t.fileLink)),n.setFileLength(r["a"].strTrim(t.fileLength));break;case proto.css.msg.EMsgContentType.RETRACT:n=new proto.css.msg.RetractMessage,n.setRetractGuid(Long.fromString(r["a"].strTrim(t.retractGuid).toString(),!0));break;case proto.css.msg.EMsgContentType.CUSTOM:if(n=new proto.css.msg.CustomMessage,"undefined"!==typeof t.notification&&null!=t.notification&&""!=r["a"].strTrim(t.notification)&&n.setNotification(r["a"].strTrim(t.notification)),t.customEntityList)for(var i=0;i<t.customEntityList.length;i++){var s=new proto.css.msg.CustomEntity;s.setKey(r["a"].strTrim(t.customEntityList[i].key)),s.setValue(r["a"].strTrim(t.customEntityList[i].value)),n.getCustomEntityList().push(s)}break;default:break}return n.serializeBinary()}return""},y.Log=i["a"].Log,y.Util=i["a"].Util},"76ea":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i={0:"操作成功",1:"server端数据库异常",2:"token过期",3:"用户名或密码不存在",4:"系统错误，server端异常",5:"资源访问失败",6:"该操作用户没有权限",7:"请求包含错误参数",8:"PB解析出错",20:"账户在其他地方登录了",21:"系统临时禁止登录",23:"appkey或者appkeyPassword不存在",500:"服务器内部错误",601:"用户未登录",602:"其他用户登录，被踢",603:"session连接异常",604:"用户已登录",1001:"发送方被禁言",1002:"接收方不存在",1003:"消息内容不正确",1004:"消息存储失败",1005:"发送方是空",1006:"群发接收者超出人数限制",1007:"群发部分接收者不存在",2001:"消息存储失败",2002:"参数解析异常",2003:"没有满足查询条件的消息",2004:"参数格式错误",2005:"查询时出现未知错误",2006:"查询guid不合法",2007:"内部错误",2008:"更新GUID出错",2009:"查询用户群列表错误",2010:"用户群列表为空",2011:"会话不存在",2012:"撤回消息失败",2013:"删除消息错误",2014:"用户没有发送消息",5e4:"参数不合法",50001:"未建立连接",50002:"账号未登录",50003:"消息解析异常",50004:"当前浏览器不支持异步上传文件,请换用其他浏览器",50005:"文件上传失败",50610:"UNKOWN",50620:"FILE_SAVE_ERROR",50630:"IMAGE_COMPRESS_ERROR",50640:"CREATE_THUMBNAIL_ERROR",50650:"UNSUPPORTED_AUDIO_FILE",50660:"INVALIED_PARAMETER_FORMAT",50670:"SESSION_TIME_OUT",50680:"OFFSET_UNMATCHED",50690:"FILE_MERGE_FAILED",50700:"PART_OK",50710:"MD5_NOT_MATCH",50720:"INNER_ERROR"}},8866:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return a}));n("7514"),n("28a5"),n("ac6a"),n("2ef0");var i=n("4360"),s=window.moment;function r(e,t){t||(t=",");var n="";return e.forEach((function(e,i){i&&(n+=t),n+=e.url})),n}function o(e,t){if(!e)return[];t||(t=",");var n=e.split(t);return n=n.map((function(e){return{url:e}})),n}function a(e,t){return t||(t="YYYY-MM-DD HH:mm:ss"),s(parseInt(e)).format(t)}Vue.filter("formatTime",(function(e,t){return t||(t="YYYY-MM-DD HH:mm:ss"),e&&parseInt(e)?s(parseInt(e)).format(t):"-"})),Vue.filter("time",(function(e){if(!e)return"";var t=new Date(e),n=t.getFullYear(),i=t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1,s=t.getDate()<10?"0"+t.getDate():t.getDate();return"".concat(n,"-").concat(i,"-").concat(s)})),Vue.filter("statusFilter",(function(e){switch(e){case 0:return"待支付";case 1:return"待发货";case 2:return"待收货";case 3:return"交易成功";case 4:return"交易关闭";case 5:return"部分发货"}return"待支付"})),Vue.filter("afterStatusFilter",(function(e){switch(e){case 0:return"审核中";case 1:return"审核通过";case 2:return"售后成功";case 3:return"售后关闭(用户取消)";case 4:return"售后驳回(拒绝)";case 5:return"售后失败(信息有误，重新填写)"}return"无售后"})),Vue.filter("groupStatusFilter",(function(e){switch(e){case 1:return"待成团";case 2:return"拼团成功";case 3:return"拼团失败"}return""})),Vue.filter("divideFilter",(function(e){var t=parseFloat(e||0);return(t/100).toFixed(2)})),Vue.filter("multiplyFilter",(function(e){var t=parseFloat(e||0);return(100*t).toFixed(0)})),Vue.filter("specFilter",(function(e){if(e){var t="规格：";try{var n=JSON.parse(e),i=0;for(var s in n)i&&(t+="，"),i=1,t+=n[s]}catch(r){return}return t}})),Vue.filter("filterSpecialChar",(function(e){if(e){var t="规格：";try{var n=JSON.parse(e),i=0;for(var s in n)i&&(t+="，"),i=1,t+=n[s]}catch(r){return}return t}})),Vue.filter("customTimeFormat",(function(e,t){if(e){var n=s(e);return n.isValid()&&(e=n.format(t)),e}return"-"})),Vue.filter("dateTimeFormat",(function(e){if(e){var t=s(e);return t.isValid()&&(e=t.format("YYYY-MM-DD")),e}return"-"})),Vue.filter("hourTimeFormat",(function(e){if(e){var t=s(e);return t.isValid()&&(e=t.format("YYYY-MM-DD HH")),e}return"-"})),Vue.filter("minuteTimeFormat",(function(e){if(e){e=parseInt(e);var t=s(e);return t.isValid()&&(e=t.format("YYYY-MM-DD HH:mm")),e}return"-"})),Vue.filter("secondTimeFormat",(function(e){if(e){e=parseInt(e);var t=s(e);return t.isValid()&&(e=t.format("YYYY-MM-DD HH:mm:ss")),e}return"-"})),Vue.filter("countryFilter",(function(e){var t=i["a"].state.dict.countryList,n=t.find((function(t){return t.shortCode==e}));return"ID"==e?"印尼":"CN"==e?"中国":n?n.nameCn:e})),Vue.filter("currencyUnitFilter",(function(e){var t=i["a"].state.dict.countryList,n=t.find((function(t){return t.shortCode==e}));return n?n.currencyUnit:""}))},dc1b:function(e,t,n){"use strict";n("c5f6"),n("55dd"),n("7514"),n("ac6a"),n("456d");var i=n("7618"),s=n("4360"),r=n("5c96"),o=n("a18c"),a=(n("c32d"),function e(t){var n=JSON.parse(JSON.stringify(t));for(var s in n)n[s]||0===n[s]?"string"===typeof n[s]?n[s]=n[s].trim():"object"===Object(i["a"])(n[s])&&(Object.keys(0!=n[s].length)?n[s]=e(n[s]):delete n[s]):delete n[s];return n}),u=function(e){var t="image/jpeg"===e.type||"image/jpg"===e.type||"image/png"===e.type||"image/gif"===e.type,n=e.size/1024/1024<2;return t?!!n||(r["Message"].error("上传文件大小不能超过 2MB!"),!1):(r["Message"].error("上传文件只能是图片格式!"),!1)},l=function(e){var t=localStorage.adminUserInfo?JSON.parse(localStorage.adminUserInfo):{account:""};if("admin"==t.account)return!0;var n=s["a"].state.user.permissionKey[e];return!!n},d=function(e,t){var n=new XMLHttpRequest;n.open("GET",e,!0),n.setRequestHeader("token",localStorage.getItem("adminToken")),n.setRequestHeader("deviceId",(new DeviceUUID).get()),n.setRequestHeader("version","2.4.0"),n.responseType="blob",n.onload=function(e){if(200==this.status){var n=this.response,i=document.createElement("a"),s=URL.createObjectURL(n);i.download=t,i.href=s,i.click(),window.URL.revokeObjectURL(s)}},n.send()},c=function(e){o["a"].push({name:"orderList",query:{orderNo:e}})},g=function(e){o["a"].push({name:"userInfo",query:{userId:e}})},f=function(e){o["a"].push({name:"memberInfo",query:{userId:e}})},p=function(e){return e&&-1!=e.indexOf("http")?e:e?"https://file.fingo.shop"+e:""},m=function(e,t){var n=s["a"].state.dict.countryList,i=n.find((function(t){return t.shortCode==e}));return t?i?i[t]:null:i?t:null},h=function(e){var t=new Date(e),n=t.getFullYear()+"-",i=(t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-",s=(t.getDate()+1<=10?"0"+t.getDate():t.getDate())+" ",r=(t.getHours()+1<=10?"0"+t.getHours():t.getHours())+":",o=(t.getMinutes()+1<=10?"0"+t.getMinutes():t.getMinutes())+":",a=t.getSeconds()+1<=10?"0"+t.getSeconds():t.getSeconds();return n+i+s+r+o+a},_=function(e){var t=new Date(e),n=t.getTime();return n},y=function(e){for(var t=[],n={},i=0;i<e.length;i++){var s=Object.keys(e[i]);s.sort((function(e,t){return Number(e)-Number(t)}));for(var r="",o=0;o<s.length;o++)r+=JSON.stringify(s[o]),r+=JSON.stringify(e[i][s[o]]);n.hasOwnProperty(r)||(t.push(e[i]),n[r]=!0)}return t=t,t};t["a"]={filterData:a,onImgBeforeUpload:u,hasPermission:l,downLoadByUrl:d,triggerToOderList:c,clickToUserInfo:g,clickToMemberInfo:f,dealShowFileSrc:p,getCurrencyUnit:m,timestampToTime:h,timeTotimestamp:_,deleteObject:y}},e7ab:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return o}));n("ac4d"),n("8a81"),n("34ef"),n("673e");var i,s=n("7618"),r=(n("7f7f"),n("6b54"),n("4917"),n("3b2b"),n("a481"),n("76ea"));window.XDomainRequest&&(XDomainRequest.prototype.oldsend=XDomainRequest.prototype.send,XDomainRequest.prototype.send=function(){XDomainRequest.prototype.oldsend.apply(this,arguments),this.readyState=2}),Date.prototype.format=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var n in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),t)new RegExp("("+n+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[n]:("00"+t[n]).substr((""+t[n]).length)));return e};var o={};function a(e,t){var n=new XMLHttpRequest;return"withCredentials"in n?n.open(e,t,!0):"undefined"!==typeof XDomainRequest?(n=new XDomainRequest,n.open(e,t)):n=null,n}o.Util={emptyFn:function(){},doHttpRequest:function(e){var t=e.dataType||"text",n=e.success||o.Util.emptyFn,i=e.error||o.Util.emptyFn,s=a("post",e.url);if(s.onreadystatechange=function(){if(4===s.readyState){var e=s.status||0;if(200==e){if("text"==t)return void n(s.responseText,s);if("json"==t){try{var r=JSON.parse(s.responseText);n(r,s)}catch(o){i(s.responseText,s,"错误的数据,无法转换为json")}return}return"xml"==t?void(s.responseXML&&s.responseXML.documentElement?n(s.responseXML.documentElement,s):i(s.responseText,s,"浏览器不支持ajax返回xml对象")):void n(s.response||s.responseText,s)}if("json"==t){try{r=JSON.parse(s.responseText);i(r,s,"服务器返回错误信息")}catch(o){i(s.responseText,s,"服务器返回错误信息")}return}return"xml"==t?void(s.responseXML&&s.responseXML.documentElement?i(s.responseXML.documentElement,s,"服务器返回错误信息"):i(s.responseText,s,"服务器返回错误信息")):void i(s.responseText,s,"服务器返回错误信息")}0===s.readyState&&i(s.responseText,s,"服务器异常")},e.responseType){if(!s.responseType)return i("",s,"当前浏览器不支持设置响应类型"),null;s.responseType=e.responseType}if(e.mimeType){if(!s.overrideMimeType)return i("",s,"当前浏览器不支持设置mimeType"),null;s.overrideMimeType(e.mimeType)}var r=e.type||"POST";s.open(r,e.url);var u=e.headers||{};for(var l in u){if(!s.setRequestHeader)return i("",s,"当前浏览器不支持设置header"),null;s.setRequestHeader(l,u[l])}var d=e.data||null,c=new FormData;c.append("param",d),s.send(c)},uploadFn:function(e){e=e||{},e.onFileUploadProgress=e.onFileUploadProgress||o.Util.emptyFn,e.onFileUploadComplete=e.onFileUploadComplete||o.Util.emptyFn,e.onFileUploadError=e.onFileUploadError||o.Util.emptyFn,e.onFileUploadCanceled=e.onFileUploadCanceled||o.Util.emptyFn;var t=e.url,n=a("post",t);if(n){var i=n.setRequestHeader&&"undefined"!==typeof FormData;if(i){var s=function(t){e.onFileUploadError({ret:"50005",msg:r["a"]["50005"]+t.message})};n.upload&&n.upload.addEventListener("progress",e.onFileUploadProgress,!1),n.addEventListener?(n.addEventListener("abort",e.onFileUploadCanceled,!1),n.addEventListener("load",(function(t){try{var i=JSON.parse(n.responseText);e.onFileUploadComplete(i)}catch(t){e.onFileUploadError({ret:"50005",msg:r["a"]["50005"]+t.message})}}),!1),n.addEventListener("error",s,!1)):n.onreadystatechange&&(n.onreadystatechange=function(){if(4===n.readyState)if(200==ajax.status)try{var t=JSON.parse(n.responseText);e.onFileUploadComplete(t)}catch(i){e.onFileUploadError({ret:"50005",msg:r["a"]["50005"]+i.message})}else e.onFileUploadError({ret:"50005",msg:r["a"]["50005"]+"服务端返回异常"});else n.abort(),e.onFileUploadCanceled()});var u=new FormData;u.append("file",e.fileInfo.file),u.append("param",e.fileInfo.param),n.send(u)}else e.onFileUploadError({ret:"50004",msg:r["a"]["50004"]})}else alert("CORS not supported")},getCookie:function(e){var t,n=new RegExp("(^| )"+e+"=([^;]*)(;|$)");return(t=document.cookie.match(n))?unescape(t[2]):null},delCookie:function(e){var t=new Date;t.setTime(t.getTime()-1);var n=this.getCookie(e);null!=n&&(document.cookie=e+"="+escape(n)+";expires="+t.toGMTString()+";path=/")},setCookie:function(e,t,n){var i=new Date;i.setDate(i.getDate()+n),document.cookie=e+"="+escape(t)+(null==n?"":";expires="+i.toGMTString())+";path=/"},guidToTime:function(e){if(e){e=e.toString();var t=e.substring(0,e.length-3),n=Math.floor(t/16);n*=1e3,n=Math.floor(n/(1<<18));var i=1468976307657;return n+=i,n}return""},getUniqueId:function(){for(var e="",t=0;t<12;t++)e+=Math.floor(10*Math.random());return"FINGOIMWEB_"+e},extend:function(e,t){for(var n in t)e[n]=t[n];return e},getNotifySessionInstance:function(e){var t=e.getType(),n=e.getData(),i=null;switch(t){case proto.css.ntf.ENtfType.LOGIN_RESPONSE:break;case proto.css.ntf.ENtfType.LOGOUT_RESPONSE:break;case proto.css.ntf.ENtfType.KICK_NOTIFICATION:i=proto.css.ntf.KickNotification.deserializeBinary(n);break;case proto.css.ntf.ENtfType.STREAM_INIT_RESPONSE:break;case proto.css.ntf.ENtfType.NEW_MSG:i=e;break;case proto.css.ntf.ENtfType.FRIEND_UPDATE_NOTIFICATION:i=proto.css.ntf.FriendUpdateNotification.deserializeBinary(n);break;case proto.css.ntf.ENtfType.RETRACT_NOTIFICATION:i=proto.css.ntf.RetractNotification.deserializeBinary(n);break;case proto.css.ntf.ENtfType.CARBON_MSG:i=proto.css.ntf.CarbonMsgNotification.deserializeBinary(n);break;default:break}return i},buildProxyRequest:function(e,t,n){var i=o.Util.getUniqueId(),s=new proto.css.websocket.ProxyRequest;return s.setServiceName(e),s.setMethodName(t),s.setData(n),s.setRequestId(i),s}},o.Xmlrequest=function(e){this.crossDomain=e||!0;var t=this._createStandardXHR()||this._createActiveXHR();if("withCredentials"in t)return t;if(!e)return t;if(void 0===window.XDomainRequest)return t;var n=new XDomainRequest;return n.readyState=0,n.status=100,n.onreadystatechange=o.Util.emptyFn,n.onload=function(){n.readyState=4,n.status=200;var e=new ActiveXObject("Microsoft.XMLDOM");e.async="false",e.loadXML(n.responseText),n.responseXML=e,n.response=n.responseText,n.onreadystatechange()},n.upload=function(){n.readyState=4,n.status=200;var e=new ActiveXObject("Microsoft.XMLDOM");e.async="false",e.loadXML(n.responseText),n.responseXML=e,n.response=n.responseText,n.onreadystatechange()},n.ontimeout=n.onerror=function(){n.readyState=4,n.status=500,n.onreadystatechange()},n},o.Xmlrequest.prototype={_createStandardXHR:function(){try{return new window.XMLHttpRequest}catch(e){return!1}},_createActiveXHR:function(){try{return new window.ActiveXObject("Microsoft.XMLHTTP")}catch(e){return!1}}},o.Log=function(e,t,n,i,s,r){this._level=e||"debug",this._tagFilter=t||"",this._postFlag=n||!1,this._postUrl=i||"",this._isDev=s||!0,this._sUA=r||navigator.userAgent.toLowerCase()},o.Log.Level={error:4,warn:3,info:2,log:1,debug:0},o.Log.prototype={error:function(e,t){this._exec("error",e,t)},warn:function(e,t){this._exec("warn",e,t)},info:function(e,t){this._exec("info",e,t)},debug:function(e,t){this._exec("debug",e,t)},_exec:function(e,t,n){var i=o.Log.Level[this._level];if(!(i>o.Log.Level[e])){var s=!1;if(void 0!=n){var r=new RegExp(this._tagFilter);s=r.test(n)}else s=!0;if(s){var a=(new Date).format("yyyy-MM-dd hh:mm:ss");if(t=a+" 【"+e+"】:"+t+"\r\n","undefined"===typeof console||!this._isDev||console[e](t),this._postFlag&&this._postUrl,this._isDev){var u;u="debug"==e?"<p style='color:blue;margin-bottom:5px'>"+t+"</p>":"info"==e?"<p style='margin-bottom:5px'>"+t+"</p>":"warn"==e?"<p style='color:#f9a60a;margin-bottom:5px'>"+t+"</p>":"error"==e?"<p style='color:red;margin-bottom:5px'>"+t+"</p>":"<p style='margin-bottom:5px'>"+t+"</p>";var l=document.createElement("div");l.id="mDiv",l.innerHTML=u,document.getElementById("log")&&document.getElementById("log").appendChild(l)}}}}},o.Handler=function(e,t,n,i,s,r){this.handler=e,this.service=t,this.method=n,this.id=i,this.user=!0,this.log=r,this.deserializeBinary=s},o.Handler.prototype={isMatch:function(e,t,n){return this.service==e&&this.method==t&&this.id==n},run:function(e){if(this.deserializeBinary&&e)try{var t=this.deserializeBinary(e.getData());this.handler(t)}catch(n){this.log&&this.log instanceof o.Log&&this.log.warn(n.sourceURL+":"+n.line+" - "+n.name+": "+n.message)}},toString:function(){return"{Handler: "+this.handler+"("+this.service+","+this.method+","}},o.NotifyHandler=function(e,t,n){this.handler=e,this.notifyType=t,this.user=!1,this.log=n},o.NotifyHandler.prototype={isMatch:function(e){return this.notifyType==e},run:function(e){var t=o.Util.getNotifySessionInstance(e);if(t)try{this.handler(t.toObject())}catch(n){this.log&&this.log instanceof o.Log&&this.log.warn(n.sourceURL+":"+n.line+" - "+n.name+": "+n.message)}},toString:function(){return"{Handler: "+this.handler+"("+this.notifyType+")}"}},o.TimedHandler=function(e,t){this.period=e,this.handler=t,this.lastCalled=(new Date).getTime(),this.user=!0},o.TimedHandler.prototype={run:function(){return this.lastCalled=(new Date).getTime(),this.handler()},reset:function(){this.lastCalled=(new Date).getTime()},toString:function(){return"{TimedHandler: "+this.handler+"("+this.period+")}"}},o.Services={SERVICE_WEBSOCKET:"littlec-websocket",SERVICE_CHAT:"littlec-chat",SERVICE_HISTORY:"littlec-history"},o.Methods={METHOD_LOGIN:"login",METHOD_LOGOUT:"logout",METHOD_SENDCHAT:"sendChat",METHOD_MESSAGESYNC:"messageSync",METHOD_CHATHISTORYMESSAGEGET:"chatHistoryMessageGet",METHOD_SYNCSENDGUID:"syncSendGUID",METHOD_CHATMESSAGEREMOVE:"chatMessageRemove",METHOD_CUSTOMER_LOGIN:"customerServiceSignIn",METHOD_CUSTOMER_LOGOUT:"customerServiceSingOut",METHOD_GET_SESSION:"getSessionWithPage",METHOD_SET_STATUS:"setServiceStatus",METHOD_STOP_SERVICE:"cSStopService",METHOD_CHECK_BUNDLE_OVERDUE:"checkBundleOverdue",METHOD_SUBMIT_WORK_ORDER:"setSessionTypeAfterSubmittedWorkOrder"},o.Connection=function(e,t){this.service=e,this.log=t,this.timedHandlers=[],this.handlers=[],this.removeTimeds=[],this.removeHandlers=[],this.addTimeds=[],this.addHandlers=[],this.requestHandlers=[],this.notifyHandlers=[],this.messages=[],this.paused=!1},o.Connection.Status={ERROR:0,CONNECTING:1,CONNFAIL:2,CONNECTED:3,LOGINING:4,LOGINED:5,DISCONNECTED:6,DISCONNECTING:7,LOGOUTING:8,LOGOUTED:9},o.Connection.prototype={addMessageHandler:function(e,t,n){var i=new o.Handler(e,t,n,this.log);return this.addHandlers.push(i),i},deleteMessageHandler:function(e){e&&this.removeHandlers.push(e)},addRequestHandler:function(e,t,n,i,s){var r=new o.Handler(e,t,n,i,s,this.log);return this.requestHandlers.push(r),r},deleteRequestHandler:function(e,t){e&&this.requestHandlers.splice(t,1)},addNotifyHandler:function(e,t){var n=new o.NotifyHandler(e,t,this.log);return this.notifyHandlers.push(n),n},deleteNotifyHandler:function(e,t){e&&this.notifyHandlers.splice(t,1)},addTimedHandler:function(e,t){var n=new o.TimedHandler(e,t);return this.addTimeds.push(n),n},deleteTimedHandler:function(e){this.removeTimeds.push(e)},connect:function(){},_connect:function(){},disconnect:function(e){},_doDisconnect:function(e){this.handlers=[],this.timedHandlers=[],this.removeTimeds=[],this.removeHandlers=[],this.addTimeds=[],this.addHandlers=[],this.connected=!1},_dataRecv:function(e){var t=this;if(e&&e instanceof ArrayBuffer){var n=e,i=proto.css.websocket.DownStream.deserializeBinary(n),s=i.getStream(),r=i.getDownStreamType();if(r==proto.css.websocket.EDownStreamType.PROXY_RESPONSE)for(var o=proto.css.websocket.ProxyResponse.deserializeBinary(s),a=o.getServiceName(),u=o.getMethodName(),l=o.getRequestId(),d=0;d<t.requestHandlers.length;d++)t.requestHandlers[d].isMatch(a,u,l)&&(t.requestHandlers[d].run(o),t.deleteRequestHandler(t.requestHandlers[d],d));else if(r==proto.css.websocket.EDownStreamType.SESSION_NOTIFY){var c=proto.css.websocket.SessionNotify.deserializeBinary(s),g=c.getType();for(d=0;d<t.notifyHandlers.length;d++)t.notifyHandlers[d].isMatch(g)&&t.notifyHandlers[d].run(c)}}else if(e instanceof Blob){var f=new FileReader;f.readAsArrayBuffer(e),f.onload=function(e){var n=f.result,i=proto.css.websocket.DownStream.deserializeBinary(n),s=i.getStream(),r=i.getDownStreamType();if(r==proto.css.websocket.EDownStreamType.PROXY_RESPONSE)for(var o=proto.css.websocket.ProxyResponse.deserializeBinary(s),a=o.getServiceName(),u=o.getMethodName(),l=o.getRequestId(),d=0;d<t.requestHandlers.length;d++)t.requestHandlers[d].isMatch(a,u,l)&&(t.requestHandlers[d].run(o),t.deleteRequestHandler(t.requestHandlers[d],d));else if(r==proto.css.websocket.EDownStreamType.SESSION_NOTIFY){var c=proto.css.websocket.SessionNotify.deserializeBinary(s),g=c.getType();for(d=0;d<t.notifyHandlers.length;d++)t.notifyHandlers[d].isMatch(g)&&t.notifyHandlers[d].run(c)}}}},_onIdle:function(){var e,t,n,i;while(this.addTimeds.length>0)this.timedHandlers.push(this.addTimeds.pop());while(this.removeTimeds.length>0)t=this.removeTimeds.pop(),e=this.timedHandlers.indexOf(t),e>=0&&this.timedHandlers.splice(e,1);var s=(new Date).getTime();for(i=[],e=0;e<this.timedHandlers.length;e++)t=this.timedHandlers[e],!this.authenticated&&t.user||(n=t.lastCalled+t.period,n-s<=0?t.run()&&i.push(t):i.push(t));this.timedHandlers=i,clearTimeout(this._idleTimeout),this._proto._onIdle(),this.connected&&(this._idleTimeout=setTimeout(this._onIdle.bind(this),this.pollingTime))}},o.Websocket=function(e,t){this._conn=e,this.log=t};var u=!1,l=!1;function d(e,t,n){var i={debug:!1,automaticOpen:!0,reconnectInterval:1e3,maxReconnectInterval:3e4,reconnectDecay:1.5,timeoutInterval:2e3,maxReconnectAttempts:10,binaryType:"arraybuffer"};for(var s in n||(n={}),i)"undefined"!==typeof n[s]?this[s]=n[s]:this[s]=i[s];this.url=e,this.reconnectAttempts=0,this.readyState=WebSocket.CONNECTING,this.protocol=null;var r,o=this,a=!1,u=!1,l=document.createElement("div");function c(e,t){var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!1,!1,t),n}l.addEventListener("open",(function(e){o.onopen(e)})),l.addEventListener("close",(function(e){o.onclose(e)})),l.addEventListener("connecting",(function(e){o.onconnecting(e)})),l.addEventListener("message",(function(e){o.onmessage(e)})),l.addEventListener("error",(function(e){o.onerror(e)})),this.addEventListener=l.addEventListener.bind(l),this.removeEventListener=l.removeEventListener.bind(l),this.dispatchEvent=l.dispatchEvent.bind(l),this.open=function(e){if(r=new WebSocket(o.url,t||[]),r.binaryType=this.binaryType,e){if(this.maxReconnectAttempts&&this.reconnectAttempts>this.maxReconnectAttempts)return}else l.dispatchEvent(c("connecting")),this.reconnectAttempts=0;(o.debug||d.debugAll)&&"undefined"!==typeof console&&console.debug("ReconnectingWebSocket","attempt-connect",o.url);var n=r,i=setTimeout((function(){(o.debug||d.debugAll)&&"undefined"!==typeof console&&console.debug("ReconnectingWebSocket","connection-timeout",o.url),u=!0,n.close(),u=!1}),o.timeoutInterval);r.onopen=function(t){clearTimeout(i),(o.debug||d.debugAll)&&"undefined"!==typeof console&&console.debug("ReconnectingWebSocket","onopen",o.url),o.protocol=r.protocol,o.readyState=WebSocket.OPEN,o.reconnectAttempts=0;var n=c("open");n.isReconnect=e,e=!1,l.dispatchEvent(n)},r.onclose=function(t){if(clearTimeout(i),r=null,a)o.readyState=WebSocket.CLOSED,l.dispatchEvent(c("close"));else{o.readyState=WebSocket.CONNECTING;var n=c("connecting");n.code=t.code,n.reason=t.reason,n.wasClean=t.wasClean,l.dispatchEvent(n),e||u||((o.debug||d.debugAll)&&"undefined"!==typeof console&&console.debug("ReconnectingWebSocket","onclose",o.url),l.dispatchEvent(c("close")));var i=o.reconnectInterval*Math.pow(o.reconnectDecay,o.reconnectAttempts);setTimeout((function(){o.reconnectAttempts++,o.open(!0)}),i>o.maxReconnectInterval?o.maxReconnectInterval:i)}},r.onmessage=function(e){(o.debug||d.debugAll)&&"undefined"!==typeof console&&console.debug("ReconnectingWebSocket","onmessage",o.url,e.data);var t=c("message");t.data=e.data,l.dispatchEvent(t)},r.onerror=function(e){(o.debug||d.debugAll)&&"undefined"!==typeof console&&console.debug("ReconnectingWebSocket","onerror",o.url,e),l.dispatchEvent(c("error"))}},1==this.automaticOpen&&this.open(!1),this.send=function(e){if(r)return(o.debug||d.debugAll)&&"undefined"!==typeof console&&console.debug("ReconnectingWebSocket","send",o.url,e),r.send(e);throw"INVALID_STATE_ERR : Pausing to reconnect websocket"},this.close=function(e,t){"undefined"===typeof e&&(e=1e3),a=!0,r&&r.close(e,t)},this.refresh=function(){r&&r.close()}}o.Websocket.prototype={timeout:15e3,timeoutObj:null,serverTimeoutObj:null,conSuccess:function(){},conError:function(){},reset:function(){var e=this;return clearTimeout(e.timeoutObj),clearTimeout(e.serverTimeoutObj),this},start:function(){var e=this;e.timeoutObj=setTimeout((function(){e.socket.send("ping"),console.log("ping"),e.serverTimeoutObj=setTimeout((function(){e._closeSocket()}),e.timeout)}),e.timeout)},reconnect:function(){if(!u){u=!0;var e=this;setTimeout((function(){e.connect(e.conSuccess,e.conError),u=!1}),2e3)}},connect:function(e,t){this._closeSocket(),this.conSuccess=e,this.conError=t;try{this._conn.status=o.Connection.Status.CONNECTING,this.socket=new WebSocket(this._conn.service),this.socket.binaryType="arraybuffer"}catch(n){this._conn.status=o.Connection.Status.ERROR,this._conn.onError(n.message),this.log&&this.log instanceof o.Log&&this.log.error(n.message)}this._conn.status=o.Connection.Status.CONNECTED,this.socket.onopen=this._onOpen.bind(this),this.socket.onerror=this._onError.bind(this),this.socket.onclose=this._onClose.bind(this),this.socket.onmessage=this._onMessage.bind(this)},send:function(e){try{this.socket.send(e)}catch(t){this.log&&this.log instanceof o.Log&&this.log.error(t.message)}},disconnect:function(){this._conn.status=o.Connection.Status.DISCONNECTING,this._conn._doDisconnect(),this._doDisconnect()},_doDisconnect:function(){this.log&&this.log instanceof o.Log&&this.log.debug("WebSockets  was DISCONNECTING"),this._closeSocket()},manualCloseSocket:function(){this.reset(),l=!0},_closeSocket:function(){if(this.socket)try{this.socket.close()}catch(e){this._conn.status=o.Connection.Status.DISCONNECTED,this._conn.onError(e.message),this.log&&this.log instanceof o.Log&&this.log.error(e.message)}},_onClose:function(e){l?(this._conn.status=o.Connection.Status.DISCONNECTED,this._conn.onDisconnected(e)):this.reconnect()},_onError:function(e){l?this._conn.status=o.Connection.Status.ERROR:this.reconnect()},_onIdle:function(){var e=this._conn._data;if(e.length>0&&!this._conn.paused){for(var t=0;t<e.length;t++)if(null!==e[t]){var n=e[t];this.socket.send(n)}this._conn._data=[]}},_onMessage:function(e){this.reset().start(),console.log(e),"pong"!=e.data&&this._conn._dataRecv(e.data)},_onOpen:function(){this._conn.status=o.Connection.Status.CONNECTED,this.reset().start(),this._conn.onConnected(),this.conSuccess&&(this.conSuccess(),this.conSuccess=null)},_reset:function(){}},d.prototype.onopen=function(e){},d.prototype.onclose=function(e){},d.prototype.onconnecting=function(e){},d.prototype.onmessage=function(e){},d.prototype.onerror=function(e){},d.debugAll=!1,d.CONNECTING=WebSocket.CONNECTING,d.OPEN=WebSocket.OPEN,d.CLOSING=WebSocket.CLOSING,d.CLOSED=WebSocket.CLOSED,function(t){if("object"===("undefined"===typeof exports?"undefined":Object(s["a"])(exports)))e.exports=t();else if("function"===typeof define&&n("3c35"))define(t);else{var i;try{i=window}catch(r){i=self}i.Long=t()}}((function(e){function t(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function n(e){return!0===(e&&e["__isLong__"])}t.prototype.__isLong__,Object.defineProperty(t.prototype,"__isLong__",{value:!0,enumerable:!1,configurable:!1}),t.isLong=n;var i={},s={};function r(e,t){var n,r,o;return t?(e>>>=0,(o=e>=0&&e<256)&&(r=s[e],r)?r:(n=a(e,(0|e)<0?-1:0,!0),o&&(s[e]=n),n)):(e|=0,(o=e>=-128&&e<128)&&(r=i[e],r)?r:(n=a(e,e<0?-1:0,!1),o&&(i[e]=n),n))}function o(e,t){if(isNaN(e)||!isFinite(e))return t?y:_;if(t){if(e<0)return y;if(e>=p)return C}else{if(e<=-m)return b;if(e+1>=m)return E}return e<0?o(-e,t).neg():a(e%f|0,e/f|0,t)}function a(e,n,i){return new t(e,n,i)}t.fromInt=r,t.fromNumber=o,t.fromBits=a;var u=Math.pow;function l(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return _;if("number"===typeof t?(n=t,t=!1):t=!!t,n=n||10,n<2||n>36)throw RangeError("radix");var i;if((i=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===i)return l(e.substring(1),t,n).neg();for(var s=o(u(n,8)),r=_,a=0;a<e.length;a+=8){var d=Math.min(8,e.length-a),c=parseInt(e.substring(a,a+d),n);if(d<8){var g=o(u(n,d));r=r.mul(g).add(o(c))}else r=r.mul(s),r=r.add(o(c))}return r.unsigned=t,r}function d(e){return e instanceof t?e:"number"===typeof e?o(e):"string"===typeof e?l(e):a(e.low,e.high,e.unsigned)}t.fromString=l,t.fromValue=d;var c=65536,g=1<<24,f=c*c,p=f*f,m=p/2,h=r(g),_=r(0);t.ZERO=_;var y=r(0,!0);t.UZERO=y;var v=r(1);t.ONE=v;var S=r(1,!0);t.UONE=S;var T=r(-1);t.NEG_ONE=T;var E=a(-1,2147483647,!1);t.MAX_VALUE=E;var C=a(-1,-1,!0);t.MAX_UNSIGNED_VALUE=C;var b=a(0,-2147483648,!1);t.MIN_VALUE=b;var M=t.prototype;return M.toInt=function(){return this.unsigned?this.low>>>0:this.low},M.toNumber=function(){return this.unsigned?(this.high>>>0)*f+(this.low>>>0):this.high*f+(this.low>>>0)},M.toString=function(e){if(e=e||10,e<2||e>36)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(b)){var t=o(e),n=this.div(t),i=n.mul(t).sub(this);return n.toString(e)+i.toInt().toString(e)}return"-"+this.neg().toString(e)}var s=o(u(e,6),this.unsigned),r=this,a="";while(1){var l=r.div(s),d=r.sub(l.mul(s)).toInt()>>>0,c=d.toString(e);if(r=l,r.isZero())return c+a;while(c.length<6)c="0"+c;a=""+c+a}},M.getHighBits=function(){return this.high},M.getHighBitsUnsigned=function(){return this.high>>>0},M.getLowBits=function(){return this.low},M.getLowBitsUnsigned=function(){return this.low>>>0},M.getNumBitsAbs=function(){if(this.isNegative())return this.eq(b)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0;t--)if(0!=(e&1<<t))break;return 0!=this.high?t+33:t+1},M.isZero=function(){return 0===this.high&&0===this.low},M.isNegative=function(){return!this.unsigned&&this.high<0},M.isPositive=function(){return this.unsigned||this.high>=0},M.isOdd=function(){return 1===(1&this.low)},M.isEven=function(){return 0===(1&this.low)},M.equals=function(e){return n(e)||(e=d(e)),(this.unsigned===e.unsigned||this.high>>>31!==1||e.high>>>31!==1)&&(this.high===e.high&&this.low===e.low)},M.eq=M.equals,M.notEquals=function(e){return!this.eq(e)},M.neq=M.notEquals,M.lessThan=function(e){return this.comp(e)<0},M.lt=M.lessThan,M.lessThanOrEqual=function(e){return this.comp(e)<=0},M.lte=M.lessThanOrEqual,M.greaterThan=function(e){return this.comp(e)>0},M.gt=M.greaterThan,M.greaterThanOrEqual=function(e){return this.comp(e)>=0},M.gte=M.greaterThanOrEqual,M.compare=function(e){if(n(e)||(e=d(e)),this.eq(e))return 0;var t=this.isNegative(),i=e.isNegative();return t&&!i?-1:!t&&i?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},M.comp=M.compare,M.negate=function(){return!this.unsigned&&this.eq(b)?b:this.not().add(v)},M.neg=M.negate,M.add=function(e){n(e)||(e=d(e));var t=this.high>>>16,i=65535&this.high,s=this.low>>>16,r=65535&this.low,o=e.high>>>16,u=65535&e.high,l=e.low>>>16,c=65535&e.low,g=0,f=0,p=0,m=0;return m+=r+c,p+=m>>>16,m&=65535,p+=s+l,f+=p>>>16,p&=65535,f+=i+u,g+=f>>>16,f&=65535,g+=t+o,g&=65535,a(p<<16|m,g<<16|f,this.unsigned)},M.subtract=function(e){return n(e)||(e=d(e)),this.add(e.neg())},M.sub=M.subtract,M.multiply=function(e){if(this.isZero())return _;if(n(e)||(e=d(e)),e.isZero())return _;if(this.eq(b))return e.isOdd()?b:_;if(e.eq(b))return this.isOdd()?b:_;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(h)&&e.lt(h))return o(this.toNumber()*e.toNumber(),this.unsigned);var t=this.high>>>16,i=65535&this.high,s=this.low>>>16,r=65535&this.low,u=e.high>>>16,l=65535&e.high,c=e.low>>>16,g=65535&e.low,f=0,p=0,m=0,y=0;return y+=r*g,m+=y>>>16,y&=65535,m+=s*g,p+=m>>>16,m&=65535,m+=r*c,p+=m>>>16,m&=65535,p+=i*g,f+=p>>>16,p&=65535,p+=s*c,f+=p>>>16,p&=65535,p+=r*l,f+=p>>>16,p&=65535,f+=t*g+i*c+s*l+r*u,f&=65535,a(m<<16|y,f<<16|p,this.unsigned)},M.mul=M.multiply,M.divide=function(e){if(n(e)||(e=d(e)),e.isZero())throw Error("division by zero");if(this.isZero())return this.unsigned?y:_;var t,i,s;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return y;if(e.gt(this.shru(1)))return S;s=y}else{if(this.eq(b)){if(e.eq(v)||e.eq(T))return b;if(e.eq(b))return v;var r=this.shr(1);return t=r.div(e).shl(1),t.eq(_)?e.isNegative()?v:T:(i=this.sub(e.mul(t)),s=t.add(i.div(e)),s)}if(e.eq(b))return this.unsigned?y:_;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();s=_}i=this;while(i.gte(e)){t=Math.max(1,Math.floor(i.toNumber()/e.toNumber()));var a=Math.ceil(Math.log(t)/Math.LN2),l=a<=48?1:u(2,a-48),c=o(t),g=c.mul(e);while(g.isNegative()||g.gt(i))t-=l,c=o(t,this.unsigned),g=c.mul(e);c.isZero()&&(c=v),s=s.add(c),i=i.sub(g)}return s},M.div=M.divide,M.modulo=function(e){return n(e)||(e=d(e)),this.sub(this.div(e).mul(e))},M.mod=M.modulo,M.not=function(){return a(~this.low,~this.high,this.unsigned)},M.and=function(e){return n(e)||(e=d(e)),a(this.low&e.low,this.high&e.high,this.unsigned)},M.or=function(e){return n(e)||(e=d(e)),a(this.low|e.low,this.high|e.high,this.unsigned)},M.xor=function(e){return n(e)||(e=d(e)),a(this.low^e.low,this.high^e.high,this.unsigned)},M.shiftLeft=function(e){return n(e)&&(e=e.toInt()),0===(e&=63)?this:e<32?a(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):a(0,this.low<<e-32,this.unsigned)},M.shl=M.shiftLeft,M.shiftRight=function(e){return n(e)&&(e=e.toInt()),0===(e&=63)?this:e<32?a(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):a(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},M.shr=M.shiftRight,M.shiftRightUnsigned=function(e){if(n(e)&&(e=e.toInt()),e&=63,0===e)return this;var t=this.high;if(e<32){var i=this.low;return a(i>>>e|t<<32-e,t>>>e,this.unsigned)}return a(32===e?t:t>>>e-32,0,this.unsigned)},M.shru=M.shiftRightUnsigned,M.toSigned=function(){return this.unsigned?a(this.low,this.high,!1):this},M.toUnsigned=function(){return this.unsigned?this:a(this.low,this.high,!0)},M.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},M.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24&255,255&e,e>>>8&255,e>>>16&255,e>>>24&255]},M.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24&255,e>>>16&255,e>>>8&255,255&e,t>>>24&255,t>>>16&255,t>>>8&255,255&t]},t})),function e(t,n,s){function r(a,u){if(!n[a]){if(!t[a]){var l="function"===typeof i&&i;if(!u&&l)return i(a,!0);if(o)return o(a,!0);var d=new Error("Cannot find module '"+a+"'");throw d.code="MODULE_NOT_FOUND",d}var c=n[a]={exports:{}};t[a][0].call(c.exports,(function(e){var n=t[a][1][e];return r(n||e)}),c,c.exports,e,t,n,s)}return n[a].exports}for(var o="function"===typeof i&&i,a=0;a<s.length;a++)r(s[a]);return r}({1:[function(e,t,i){(function(e){if("object"===Object(s["a"])(i))t.exports=e();else if("function"===typeof define&&n("3c35"))define(e);else{var r;try{r=window}catch(o){r=self}r.SparkMD5=e()}})((function(e){var t=function(e,t){return e+t&4294967295},n=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function i(e,n,i,s,r,o){return n=t(t(n,e),t(s,o)),t(n<<r|n>>>32-r,i)}function s(e,t,n,s,r,o,a){return i(t&n|~t&s,e,t,r,o,a)}function r(e,t,n,s,r,o,a){return i(t&s|n&~s,e,t,r,o,a)}function o(e,t,n,s,r,o,a){return i(t^n^s,e,t,r,o,a)}function a(e,t,n,s,r,o,a){return i(n^(t|~s),e,t,r,o,a)}function u(e,n){var i=e[0],u=e[1],l=e[2],d=e[3];i=s(i,u,l,d,n[0],7,-680876936),d=s(d,i,u,l,n[1],12,-389564586),l=s(l,d,i,u,n[2],17,606105819),u=s(u,l,d,i,n[3],22,-1044525330),i=s(i,u,l,d,n[4],7,-176418897),d=s(d,i,u,l,n[5],12,1200080426),l=s(l,d,i,u,n[6],17,-1473231341),u=s(u,l,d,i,n[7],22,-45705983),i=s(i,u,l,d,n[8],7,1770035416),d=s(d,i,u,l,n[9],12,-1958414417),l=s(l,d,i,u,n[10],17,-42063),u=s(u,l,d,i,n[11],22,-1990404162),i=s(i,u,l,d,n[12],7,1804603682),d=s(d,i,u,l,n[13],12,-40341101),l=s(l,d,i,u,n[14],17,-1502002290),u=s(u,l,d,i,n[15],22,1236535329),i=r(i,u,l,d,n[1],5,-165796510),d=r(d,i,u,l,n[6],9,-1069501632),l=r(l,d,i,u,n[11],14,643717713),u=r(u,l,d,i,n[0],20,-373897302),i=r(i,u,l,d,n[5],5,-701558691),d=r(d,i,u,l,n[10],9,38016083),l=r(l,d,i,u,n[15],14,-660478335),u=r(u,l,d,i,n[4],20,-405537848),i=r(i,u,l,d,n[9],5,568446438),d=r(d,i,u,l,n[14],9,-1019803690),l=r(l,d,i,u,n[3],14,-187363961),u=r(u,l,d,i,n[8],20,1163531501),i=r(i,u,l,d,n[13],5,-1444681467),d=r(d,i,u,l,n[2],9,-51403784),l=r(l,d,i,u,n[7],14,1735328473),u=r(u,l,d,i,n[12],20,-1926607734),i=o(i,u,l,d,n[5],4,-378558),d=o(d,i,u,l,n[8],11,-2022574463),l=o(l,d,i,u,n[11],16,1839030562),u=o(u,l,d,i,n[14],23,-35309556),i=o(i,u,l,d,n[1],4,-1530992060),d=o(d,i,u,l,n[4],11,1272893353),l=o(l,d,i,u,n[7],16,-155497632),u=o(u,l,d,i,n[10],23,-1094730640),i=o(i,u,l,d,n[13],4,681279174),d=o(d,i,u,l,n[0],11,-358537222),l=o(l,d,i,u,n[3],16,-722521979),u=o(u,l,d,i,n[6],23,76029189),i=o(i,u,l,d,n[9],4,-640364487),d=o(d,i,u,l,n[12],11,-421815835),l=o(l,d,i,u,n[15],16,530742520),u=o(u,l,d,i,n[2],23,-995338651),i=a(i,u,l,d,n[0],6,-198630844),d=a(d,i,u,l,n[7],10,1126891415),l=a(l,d,i,u,n[14],15,-1416354905),u=a(u,l,d,i,n[5],21,-57434055),i=a(i,u,l,d,n[12],6,1700485571),d=a(d,i,u,l,n[3],10,-1894986606),l=a(l,d,i,u,n[10],15,-1051523),u=a(u,l,d,i,n[1],21,-2054922799),i=a(i,u,l,d,n[8],6,1873313359),d=a(d,i,u,l,n[15],10,-30611744),l=a(l,d,i,u,n[6],15,-1560198380),u=a(u,l,d,i,n[13],21,1309151649),i=a(i,u,l,d,n[4],6,-145523070),d=a(d,i,u,l,n[11],10,-1120210379),l=a(l,d,i,u,n[2],15,718787259),u=a(u,l,d,i,n[9],21,-343485551),e[0]=t(i,e[0]),e[1]=t(u,e[1]),e[2]=t(l,e[2]),e[3]=t(d,e[3])}function l(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}function d(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e[t]+(e[t+1]<<8)+(e[t+2]<<16)+(e[t+3]<<24);return n}function c(e){var t,n,i,s,r,o,a=e.length,d=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=a;t+=64)u(d,l(e.substring(t-64,t)));for(e=e.substring(t-64),n=e.length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<n;t+=1)i[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(i[t>>2]|=128<<(t%4<<3),t>55)for(u(d,i),t=0;t<16;t+=1)i[t]=0;return s=8*a,s=s.toString(16).match(/(.*?)(.{0,8})$/),r=parseInt(s[2],16),o=parseInt(s[1],16)||0,i[14]=r,i[15]=o,u(d,i),d}function g(e){var t,n,i,s,r,o,a=e.length,l=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=a;t+=64)u(l,d(e.subarray(t-64,t)));for(e=t-64<a?e.subarray(t-64):new Uint8Array(0),n=e.length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<n;t+=1)i[t>>2]|=e[t]<<(t%4<<3);if(i[t>>2]|=128<<(t%4<<3),t>55)for(u(l,i),t=0;t<16;t+=1)i[t]=0;return s=8*a,s=s.toString(16).match(/(.*?)(.{0,8})$/),r=parseInt(s[2],16),o=parseInt(s[1],16)||0,i[14]=r,i[15]=o,u(l,i),l}function f(e){var t,i="";for(t=0;t<4;t+=1)i+=n[e>>8*t+4&15]+n[e>>8*t&15];return i}function p(e){var t;for(t=0;t<e.length;t+=1)e[t]=f(e[t]);return e.join("")}function m(e){return/[\u0080-\uFFFF]/.test(e)&&(e=unescape(encodeURIComponent(e))),e}function h(e,t){var n,i=e.length,s=new ArrayBuffer(i),r=new Uint8Array(s);for(n=0;n<i;n+=1)r[n]=e.charCodeAt(n);return t?r:s}function _(e){return String.fromCharCode.apply(null,new Uint8Array(e))}function y(e,t,n){var i=new Uint8Array(e.byteLength+t.byteLength);return i.set(new Uint8Array(e)),i.set(new Uint8Array(t),e.byteLength),n?i:i.buffer}function v(e){var t,n=[],i=e.length;for(t=0;t<i-1;t+=2)n.push(parseInt(e.substr(t,2),16));return String.fromCharCode.apply(String,n)}function S(){this.reset()}return"5d41402abc4b2a76b9719d911017c592"!==p(c("hello"))&&(t=function(e,t){var n=(65535&e)+(65535&t),i=(e>>16)+(t>>16)+(n>>16);return i<<16|65535&n}),"undefined"===typeof ArrayBuffer||ArrayBuffer.prototype.slice||function(){function t(e,t){return e=0|e||0,e<0?Math.max(e+t,0):Math.min(e,t)}ArrayBuffer.prototype.slice=function(n,i){var s,r,o,a,u=this.byteLength,l=t(n,u),d=u;return i!==e&&(d=t(i,u)),l>d?new ArrayBuffer(0):(s=d-l,r=new ArrayBuffer(s),o=new Uint8Array(r),a=new Uint8Array(this,l,s),o.set(a),r)}}(),S.prototype.append=function(e){return this.appendBinary(m(e)),this},S.prototype.appendBinary=function(e){this._buff+=e,this._length+=e.length;var t,n=this._buff.length;for(t=64;t<=n;t+=64)u(this._hash,l(this._buff.substring(t-64,t)));return this._buff=this._buff.substring(t-64),this},S.prototype.end=function(e){var t,n,i=this._buff,s=i.length,r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<s;t+=1)r[t>>2]|=i.charCodeAt(t)<<(t%4<<3);return this._finish(r,s),n=p(this._hash),e&&(n=v(n)),this.reset(),n},S.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},S.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash}},S.prototype.setState=function(e){return this._buff=e.buff,this._length=e.length,this._hash=e.hash,this},S.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},S.prototype._finish=function(e,t){var n,i,s,r=t;if(e[r>>2]|=128<<(r%4<<3),r>55)for(u(this._hash,e),r=0;r<16;r+=1)e[r]=0;n=8*this._length,n=n.toString(16).match(/(.*?)(.{0,8})$/),i=parseInt(n[2],16),s=parseInt(n[1],16)||0,e[14]=i,e[15]=s,u(this._hash,e)},S.hash=function(e,t){return S.hashBinary(m(e),t)},S.hashBinary=function(e,t){var n=c(e),i=p(n);return t?v(i):i},S.ArrayBuffer=function(){this.reset()},S.ArrayBuffer.prototype.append=function(e){var t,n=y(this._buff.buffer,e,!0),i=n.length;for(this._length+=e.byteLength,t=64;t<=i;t+=64)u(this._hash,d(n.subarray(t-64,t)));return this._buff=t-64<i?new Uint8Array(n.buffer.slice(t-64)):new Uint8Array(0),this},S.ArrayBuffer.prototype.end=function(e){var t,n,i=this._buff,s=i.length,r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<s;t+=1)r[t>>2]|=i[t]<<(t%4<<3);return this._finish(r,s),n=p(this._hash),e&&(n=v(n)),this.reset(),n},S.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},S.ArrayBuffer.prototype.getState=function(){var e=S.prototype.getState.call(this);return e.buff=_(e.buff),e},S.ArrayBuffer.prototype.setState=function(e){return e.buff=h(e.buff,!0),S.prototype.setState.call(this,e)},S.ArrayBuffer.prototype.destroy=S.prototype.destroy,S.ArrayBuffer.prototype._finish=S.prototype._finish,S.ArrayBuffer.hash=function(e,t){var n=g(new Uint8Array(e)),i=p(n);return t?v(i):i},S}))},{}],2:[function(e,t,i){function r(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":Object(s["a"])(e)}var o=e("./browser-md5-file");(function(e){"function"===typeof define&&n("3c35")?define([],e):"object"===("undefined"===typeof window?"undefined":r(window))&&(window.browserMD5File=e())})((function(){return o}))},{"./browser-md5-file":3}],3:[function(e,t,n){var i=e("spark-md5");t.exports=function(e,t){var n=File.prototype.slice||File.prototype.mozSlice||File.prototype.webkitSlice,s=2097152,r=Math.ceil(e.size/s),o=0,a=new i.ArrayBuffer,u=new FileReader;function l(){var t=o*s,i=t+s>=e.size?e.size:t+s;u.readAsArrayBuffer(n.call(e,t,i))}l(),u.onloadend=function(e){a.append(e.target.result),o++,o<r?l():t(null,a.end())},u.onerror=function(){t("oops, something went wrong.")}}},{"spark-md5":1}]},{},[2]);new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298)}).call(this,n("dd40")(e))}}]);