(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-48e18880"],{"3d3b":function(e,t,a){"use strict";var i=a("cd5a"),n=a.n(i);n.a},"5b17":function(e,t,a){},"5d28":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"filter-container"},[a("el-form",{ref:"indexFilterForm",attrs:{inline:"","label-width":"90px",model:e.queryData}},[a("el-form-item",{staticClass:"filter-item",attrs:{label:"指标名称：",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入指标名",size:"medium",clearable:""},model:{value:e.queryData.name,callback:function(t){e.$set(e.queryData,"name",t)},expression:"queryData.name"}})],1),a("el-form-item",{staticClass:"filter-item",attrs:{label:"指标键：",prop:"status"}},[a("el-input",{attrs:{placeholder:"请输入指标名",size:"medium",clearable:""},model:{value:e.queryData.key,callback:function(t){e.$set(e.queryData,"key",t)},expression:"queryData.key"}})],1),a("el-form-item",{staticClass:"filter-item",staticStyle:{"margin-left":"20px"}},[a("el-button",{attrs:{icon:"el-icon-search",type:"primary",size:"medium"},on:{click:e.search},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}}},[e._v("搜索")]),a("el-button",{attrs:{icon:"el-icon-refresh-left",size:"medium"},on:{click:e.resetSearch}},[e._v("重置")])],1)],1),a("div",{staticClass:"operator-container"},[a("el-button",{staticClass:"operator-item",staticStyle:{marginRight:"10px"},attrs:{icon:"el-icon-plus",type:"primary",size:"small"},on:{click:e.addIndex}},[e._v("新建指标")]),a("el-upload",{staticClass:"upload-wrapper",attrs:{action:"",multiple:"","http-request":e.uploadFile,"show-file-list":!1}},[a("el-button",{staticClass:"operator-item",attrs:{icon:"el-icon-upload2",type:"primary",size:"small",plain:""}},[e._v("\n                    批量导入指标\n                ")])],1)],1)],1),a("div",{staticClass:"main-content-wrapper"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{height:"100%",data:e.tableData,border:""}},[a("el-table-column",{attrs:{prop:"targetCategoryName",label:"指标大类",align:"center",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.row.targetCategoryName))])]}}])}),a("el-table-column",{attrs:{prop:"targetName",label:"指标名称",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.row.targetName))])]}}])}),a("el-table-column",{attrs:{prop:"targetKey",label:"指标键",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.row.targetKey))])]}}])}),a("el-table-column",{attrs:{prop:"targetDescription",label:"业务口径描述",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.row.targetDescription))])]}}])}),a("el-table-column",{attrs:{prop:"status",label:"状态",align:"center",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return["1"===t.row.targetStatus?a("el-tag",{attrs:{size:"mini"}},[e._v("有效")]):e._e(),"2"===t.row.targetStatus?a("el-tag",{attrs:{size:"mini",type:"info"}},[e._v("失效")]):e._e()]}}])}),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(e._f("formatTime")(t.row.createTime)))])]}}])}),a("el-table-column",{attrs:{label:"操作",align:"center",width:"240"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{plain:"",type:"primary",size:"mini"},on:{click:function(a){return e.editIndex(t.row)}}},[e._v("编辑")]),a("el-button",{attrs:{plain:"",type:"danger",size:"mini"},on:{click:function(a){return e.deleteIndex(t.row)}}},[e._v("删除")])]}}])})],1)],1),a("div",{staticClass:"pagination-box"},[a("el-pagination",{staticClass:"pagination",attrs:{"page-sizes":[10,20,50,100],"current-page":e.queryData.page.pageNum,"page-size":e.queryData.page.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.totalCount},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange}})],1),a("index-edit-dialog",{attrs:{dialogVisible:e.editDialogVisible,title:e.editDailogTitle,categoryList:e.categoryList,editType:e.editType,editData:e.editData,tableData:e.tableData},on:{"on-cancle":e.handleCancleEdit,"on-confirm":e.handleConfirmEdit}})],1)},n=[],r=(a("ac6a"),a("ac4d"),a("8a81"),a("5df3"),a("1c4c"),a("6b54"),a("96cf"),a("3b8d")),o=(a("c5f6"),a("7f7f"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"eidt-dialog"},[a("el-dialog",{attrs:{title:e.title,visible:e.toggle,"close-on-click-modal":!1,"show-close":!1,width:"700px"},on:{"update:visible":function(t){e.toggle=t}}},[a("div",{attrs:{slot:"title"},slot:"title"},[e._v("\n            "+e._s(e.title)+"\n        ")]),a("el-form",{ref:"indexEditForm",attrs:{model:e.indexModel,rules:e.ruleValidate,"label-width":"120px"}},[a("el-form-item",{attrs:{prop:"targetCategoryId",label:"指标大类："}},[a("el-select",{attrs:{filterable:"","allow-create":"","default-first-option":"",placeholder:"请输入",size:"medium",disabled:"edit"===e.editType},on:{change:e.selectChange},model:{value:e.indexModel.targetCategoryId,callback:function(t){e.$set(e.indexModel,"targetCategoryId",t)},expression:"indexModel.targetCategoryId"}},e._l(e.categoryList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.id}})})),1)],1),a("el-form-item",{attrs:{prop:"indexKey",label:"指标键："}},[a("el-input",{staticStyle:{width:"320px"},attrs:{clearable:"",placeholder:"请输入指标键",maxlength:120,size:"medium"},model:{value:e.indexModel.indexKey,callback:function(t){e.$set(e.indexModel,"indexKey",t)},expression:"indexModel.indexKey"}})],1),a("el-form-item",{attrs:{prop:"indexName",label:"指标名称："}},[a("el-input",{staticStyle:{width:"320px"},attrs:{clearable:"",placeholder:"请输入指标名称",maxlength:40,size:"medium"},model:{value:e.indexModel.indexName,callback:function(t){e.$set(e.indexModel,"indexName",t)},expression:"indexModel.indexName"}})],1),a("el-form-item",{attrs:{prop:"indexDesc",label:"业务口径描述："}},[a("el-input",{staticStyle:{width:"320px"},attrs:{clearable:"",placeholder:"请输入备注",maxlength:120,size:"medium"},model:{value:e.indexModel.indexDesc,callback:function(t){e.$set(e.indexModel,"indexDesc",t)},expression:"indexModel.indexDesc"}})],1),a("el-form-item",{attrs:{prop:"",label:"是否生效："}},[a("el-switch",{staticStyle:{display:"block",marginTop:"9px"},attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-text":"生效","inactive-text":"失效"},model:{value:e.indexModel.indexStatus,callback:function(t){e.$set(e.indexModel,"indexStatus",t)},expression:"indexModel.indexStatus"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:e.cancle}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.comfirm}},[e._v("确 定")])],1)],1)],1)}),l=[],s=a("284b");function d(e){var t=s["a"].create("GetTargetPageByParamReq",e);return Object(s["a"])("datahouse","DataHouseTargetService.GetTargetPageByParam",t,"GetTargetPageByParamResp")}function c(e){var t=s["a"].create("AddTargetDataReq",e);return Object(s["a"])("datahouse","DataHouseTargetService.AddTargetData",t,"AddTargetDataResp")}function u(e){var t=s["a"].create("EditTargetDataReq",e);return Object(s["a"])("datahouse","DataHouseTargetService.EditTargetData",t,"EditTargetDataResp")}function g(e){var t=s["a"].create("DeleteTargetDataReq",e);return Object(s["a"])("datahouse","DataHouseTargetService.DeleteTargetData",t,"DeleteTargetDataResp")}function f(e){var t=s["a"].create("AddTargetDataByExcelReq",e);return Object(s["a"])("datahouse","DataHouseTargetService.AddTargetDataByExcel",t,"AddTargetDataByExcelResp")}function m(e,t){var a;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=p(e))||t&&e&&"number"===typeof e.length){a&&(e=a);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,l=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return o=e.done,e},e:function(e){l=!0,r=e},f:function(){try{o||null==a.return||a.return()}finally{if(l)throw r}}}}function p(e,t){if(e){if("string"===typeof e)return h(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?h(e,t):void 0}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,i=new Array(t);a<t;a++)i[a]=e[a];return i}var y={data:function(){return{ruleValidate:{indexName:[{required:!0,trigger:"blur",message:"指标名称不能为空"}],indexKey:[{required:!0,trigger:"blur",message:"指标键不能为空"}],indexDesc:[{required:!0,trigger:"blur",message:"业务口径描述不能为空"}]},indexModel:{targetCategoryId:"",targetCategoryName:"",indexKey:"",indexName:"",indexDesc:"",indexStatus:!0}}},props:{dialogVisible:{type:Boolean,default:!1},title:{type:String,default:""},editType:{type:String,default:""},editData:Object,categoryList:Array,tableData:Array},watch:{editData:{handler:function(e){e&&(this.indexModel.indexKey=e.indexKey,this.indexModel.indexName=e.indexName,this.indexModel.indexDesc=e.indexDesc,this.indexModel.indexStatus=e.indexStatus,this.indexModel.targetCategoryId=e.targetCategoryId,this.indexModel.targetCategoryName=e.targetCategoryName)},deep:!0}},computed:{toggle:{get:function(){return this.dialogVisible},set:function(){}}},methods:{selectChange:function(e){if(Number(e)){this.indexModel.targetCategoryId=e;var t,a=m(this.categoryList);try{for(a.s();!(t=a.n()).done;){var i=t.value;e===i.id&&(this.indexModel.targetCategoryName=i.name)}}catch(n){a.e(n)}finally{a.f()}}},getAddTargetData:function(){var e=this;Number(this.indexModel.targetCategoryId)||(this.indexModel.targetCategoryName=this.indexModel.targetCategoryId,this.indexModel.targetCategoryId="");var t,a=m(this.tableData);try{for(a.s();!(t=a.n()).done;){var i=t.value;if(i.targetKey===this.indexModel.indexKey)return void this.$message.error("指标键不能重复！");if(i.targetName===this.indexModel.indexName)return void this.$message.error("指标名称不能重复！")}}catch(r){a.e(r)}finally{a.f()}var n={targetKey:this.indexModel.indexKey,targetName:this.indexModel.indexName,targetDescription:this.indexModel.indexDesc,targetStatus:this.indexModel.indexStatus?"1":"2",targetCategoryId:this.indexModel.targetCategoryId,targetCategoryName:this.indexModel.targetCategoryName};console.log(n),c(n).then((function(t){1===t.ret.errcode&&(console.log(t),e.$refs.indexEditForm.validate((function(t){t&&(e.$emit("on-confirm",e.indexModel),e.$refs.indexEditForm.resetFields(),e.$message.success("添加成功"))})))}))},getEditTargetData:function(){var e=this;Number(this.indexModel.targetCategoryId)||(this.indexModel.targetCategoryName=this.indexModel.targetCategoryId,this.indexModel.targetCategoryId="");var t,a=m(this.tableData);try{for(a.s();!(t=a.n()).done;){var i=t.value;if(i.targetKey===this.indexModel.indexKey)return void this.$message.error("指标键不能重复！");if(i.targetName===this.indexModel.indexName)return void this.$message.error("指标名称不能重复！")}}catch(r){a.e(r)}finally{a.f()}var n={targetKey:this.indexModel.indexKey,targetName:this.indexModel.indexName,targetDescription:this.indexModel.indexDesc,targetStatus:this.indexModel.indexStatus?"1":"2",targetCategoryId:this.indexModel.targetCategoryId,targetCategoryName:this.indexModel.targetCategoryName,targetId:this.editData.targetId};u(n).then((function(t){1===t.ret.errcode&&(console.log(t),e.$refs.indexEditForm.validate((function(t){t&&(e.$emit("on-confirm",e.indexModel),e.$refs.indexEditForm.resetFields(),e.$message.success("编辑成功"))})))}))},cancle:function(){this.$emit("on-cancle"),this.$refs.indexEditForm.resetFields()},comfirm:function(){"add"===this.editType?this.getAddTargetData():this.getEditTargetData()}}},x=y,b=(a("fde5"),a("c4f9"),a("2877")),v=Object(b["a"])(x,o,l,!1,null,"125f9712",null),D=v.exports,C=a("60fb");function I(e,t){var a;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=S(e))||t&&e&&"number"===typeof e.length){a&&(e=a);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,l=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return o=e.done,e},e:function(e){l=!0,r=e},f:function(){try{o||null==a.return||a.return()}finally{if(l)throw r}}}}function S(e,t){if(e){if("string"===typeof e)return w(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?w(e,t):void 0}}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,i=new Array(t);a<t;a++)i[a]=e[a];return i}var M={name:"brandManage",data:function(){return{loading:!1,queryData:{name:"",key:"",page:{pageNum:1,pageSize:20}},brandName:"",tableData:[],totalCount:0,statusList:[{name:"有效",value:1},{name:"失效",value:2}],status:"",editDialogVisible:!1,editDailogTitle:"",editType:"add",categoryList:[],editData:{targetCategoryId:"",targetCategoryName:"",indexKey:"",indexName:"",indexDesc:"",indexStatus:!0,targetId:""}}},components:{IndexEditDialog:D},mounted:function(){this.getIndexList()},methods:{search:function(){this.queryData.page.pageNum=1,this.queryData.page.pageSize=20,this.getIndexList()},resetSearch:function(){this.queryData.page.pageNum=1,this.queryData.page.pageSize=20,this.queryData.name="",this.queryData.key="",this.getIndexList()},handleCurrentChange:function(e){this.queryData.page.pageNum=e||this.queryData.page.pageNum,this.getIndexList()},handleSizeChange:function(e){this.queryData.page.pageSize=e,this.getIndexList()},getIndexList:function(){var e=this,t={targetName:this.queryData.name,targetKey:this.queryData.key,page:this.queryData.page};d(t).then((function(t){if(1===t.ret.errcode){console.log(t);var a,i=[],n=I(t.targetPageViewList);try{for(n.s();!(a=n.n()).done;){var r=a.value;i.push({id:r.targetCategoryId,name:r.targetCategoryName})}}catch(o){n.e(o)}finally{n.f()}e.categoryList=_.uniqWith(i,_.isEqual),console.log(e.categoryList),e.tableData=t.targetPageViewList,e.totalCount=Number(t.total)}}))},addIndex:function(){this.editType="add",this.editDialogVisible=!0,this.editDailogTitle="新增指标"},editIndex:function(e){console.log(e),this.editData.targetCategoryId=e.targetCategoryId,this.editData.targetCategoryName=e.targetCategoryName,this.editData.indexKey=e.targetKey,this.editData.indexName=e.targetName,this.editData.indexDesc=e.targetDescription,this.editData.indexStatus="1"===e.targetStatus,this.editData.targetId=e.targetId,console.log(this.editData),this.editType="edit",this.editDialogVisible=!0,this.editDailogTitle="编辑指标"},deleteIndex:function(e){var t=this;this.$confirm("是否删除此指标","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(r["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.toDeleteTargetData(e.targetId);case 2:case"end":return a.stop()}}),a)})))).catch((function(){}))},enableIndex:function(e){var t=this;this.$confirm("是否启用此指标","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(r["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.changeIndexStatus(e.indexId,1);case 2:case"end":return a.stop()}}),a)})))).catch((function(){}))},disableIndex:function(e){var t=this;this.$confirm("是否禁用此指标","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(r["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.changeIndexStatus(e.indexId,2);case 2:case"end":return a.stop()}}),a)})))).catch((function(){}))},handleCancleEdit:function(){this.editDialogVisible=!1,this.getIndexList()},handleConfirmEdit:function(){this.editDialogVisible=!1,this.getIndexList()},toDeleteTargetData:function(e){var t=this,a={targetId:e};g(a).then((function(e){1===e.ret.errcode&&(console.log(e),t.$message.success("删除成功！"),t.getIndexList())}))},changeIndexStatus:function(e,t){},exportIndex:function(e){var t=this,a={targetDataList:e};f(a).then((function(e){1===e.ret.errcode&&(console.log(e),t.$message.success("导入成功！"),t.getIndexList())}))},uploadFile:function(e){var t=this;console.log(e),this.fileName=e.file.name,this.uploadLoading=!0;var a=new FormData,i={fileName:e.file.name,type:"other"};a.append("file",e.file),a.append("param",JSON.stringify(i));var n="/file/rest/uploadservices/uploadfile";Object(C["a"])(n,a).then((function(e){t.uploadLoading=!1,"600"===e.status?(t.fileUrl=e.original_link,console.log(t.fileUrl),t.exportIndex(e.original_link),t.percentage=100):t.$message.error("上传文件失败")})).catch((function(e){console.log(e)}))}}},N=M,T=(a("3d3b"),Object(b["a"])(N,i,n,!1,null,"3e3455ac",null));t["default"]=T.exports},"60fb":function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return o}));var i=a("5c96"),n="https://file.fingo.shop";axios.defaults.timeout=45e3,axios.interceptors.request.use((function(e){return e}),(function(e){return i["Message"].error("请求超时"),Promise.resolve(e)}));var r=function(e,t){var a={headers:{"Content-Type":"multipart/form-data"}};return axios.post("".concat(n).concat(e),t,a).then((function(e){return e.data}))},o=function(e,t){var a={headers:{"Content-Type":"multipart/form-data"}};return axios.post("".concat(n).concat(e),t,a).then((function(e){return e.data}))}},b2b3:function(e,t,a){},c4f9:function(e,t,a){"use strict";var i=a("5b17"),n=a.n(i);n.a},cd5a:function(e,t,a){},fde5:function(e,t,a){"use strict";var i=a("b2b3"),n=a.n(i);n.a}}]);