(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-61d0c5ec"],{"052d":function(t,e,a){},"45f1":function(t,e,a){"use strict";a.d(e,"b",(function(){return o})),a.d(e,"a",(function(){return s})),a.d(e,"c",(function(){return r}));var n=a("284b");function o(t){console.log(t);var e=n["a"].create("ListExportRecordByPageReq",t);return Object(n["a"])("datahouse","ExportRecordBossService.ListExportRecordByPage",e,"ListExportRecordByPageResp")}function s(t){console.log(t);var e=n["a"].create("DeleteExportByIdReq",t);return Object(n["a"])("datahouse","ExportRecordBossService.DeleteExportTask",e,"BooleanResp")}function r(t){console.log(t);var e=n["a"].create("CommonExportReq",t);return Object(n["a"])("datahouse","CommonExportBossService.RouteAndExport",e,"ExportResultResp")}},"478a":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"tip"},[t._v("提示：文件中心的文件默认保存30天，上限100条，超出后旧记录会自动删除")]),a("div",{staticClass:"filter-container"},[a("el-button",{attrs:{type:"danger"},on:{click:t.deleteRecords}},[t._v("批量删除")])],1),a("div",{staticClass:"main-content-wrapper"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,fit:"","highlight-current-row":""},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{align:"center",type:"selection",width:"55"}}),a("el-table-column",{attrs:{align:"center",label:"导出编号",prop:"exportId"}}),a("el-table-column",{attrs:{align:"center",label:"导出时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("formatTime")(e.row.createTime)))]}}])}),a("el-table-column",{attrs:{align:"center",label:"相关模块",prop:"type"}}),a("el-table-column",{attrs:{align:"center",label:"导出人",prop:"operationName"}}),a("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[3==e.row.status?a("el-button",{staticStyle:{color:"#F56C6C"},attrs:{type:"text",size:"mini"},on:{click:function(a){return t.deleteRecord(e.row)}}},[t._v("删除文件")]):t._e(),3==e.row.status?a("el-button",{attrs:{type:"text",size:"mini"}},[a("a",{attrs:{href:t.dealShowFileSrc(e.row.fileAddress)}},[t._v("下载文件")])]):t._e(),2==e.row.status||1==e.row.status?a("span",{staticClass:"status-text"},[t._v("正在生成文件，完成后可下载")]):t._e(),4==e.row.status?a("span",{staticClass:"status-text"},[t._v(t._s(e.row.failReason))]):t._e()]}}])})],1)],1),a("div",{staticClass:"pagination-box"},[a("el-pagination",{staticClass:"pagination",attrs:{"current-page":t.page,"page-size":t.pageSize,layout:"total, prev, pager, next, jumper",total:t.total},on:{"current-change":t.handleCurrentChange,"size-change":t.handleSizeChange}})],1)])},o=[],s=a("45f1"),r={name:"exportList",data:function(){return{tableData:[],total:2,pageNum:1,pageSize:5,selectionList:[]}},mounted:function(){this.queryTableData()},methods:{queryTableData:function(){var t=this;Object(s["b"])({page:{pageNum:this.pageNum,pageSize:this.pageSize}}).then((function(e){1==e.ret.errcode&&(t.total=e.total,t.tableData=e.exportRecordPb)})).catch((function(t){console.error(t)}))},deleteRecord:function(t){var e=this;this.$confirm("此操作将删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.deleteExportTask([t.exportId])})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},deleteRecords:function(){var t=this;if(this.selectionList.length<=0)this.$message({type:"info",message:"请选择删除项"});else{for(var e=[],a=0;a<this.selectionList.length;a++){var n=this.selectionList[a];e.push(n.exportId)}this.$confirm("此操作将删除选中的文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.deleteExportTask(e)})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))}},deleteExportTask:function(t){var e=this;Object(s["a"])({exportId:t}).then((function(t){1==t.ret.errcode&&(e.queryTableData(),e.$message({type:"success",message:"删除成功!"}))})).catch((function(t){console.error(t)}))},handleSelectionChange:function(t){this.selectionList=t},handleCurrentChange:function(t){this.pageNum=t,this.queryTableData()},handleSizeChange:function(t){this.pageSize=t,this.queryTableData()}}},i=r,c=(a("ad22"),a("2877")),l=Object(c["a"])(i,n,o,!1,null,"d0625ae2",null);e["default"]=l.exports},ad22:function(t,e,a){"use strict";var n=a("052d"),o=a.n(n);o.a}}]);