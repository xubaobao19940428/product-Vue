(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-35118478"],{"113d":function(e,t,a){"use strict";a.d(t,"f",(function(){return n})),a.d(t,"e",(function(){return o})),a.d(t,"b",(function(){return i})),a.d(t,"h",(function(){return l})),a.d(t,"j",(function(){return s})),a.d(t,"g",(function(){return u})),a.d(t,"k",(function(){return c})),a.d(t,"i",(function(){return d})),a.d(t,"d",(function(){return f})),a.d(t,"c",(function(){return p})),a.d(t,"a",(function(){return m}));var r=a("284b");function n(e){console.log(e);var t=r["a"].create("JitOrderPageReq",e);return Object(r["a"])("erp","JitOrderBossService.JitOrderPage",t,"JitOrderPageResp")}function o(e){console.log(e);var t=r["a"].create("ImportJitShipReq",e);return Object(r["a"])("erp","JitOrderBossService.ImportShip",t,"ImportJitShipResp")}function i(e){console.log(e);var t=r["a"].create("JitOrderPageReq",e);return Object(r["a"])("erp","JitOrderBossService.ExportJitOrder",t,"ExportJitOrderResp")}function l(e){console.log(e);var t=r["a"].create("QueryJitLogiReq",e);return Object(r["a"])("erp","JitOrderBossService.QueryJitLogi",t,"QueryJitLogiResp")}function s(e){console.log(e);var t=r["a"].create("QueryLogiTrackingReq",e);return Object(r["a"])("erp","JitOrderBossService.QueryLogiTracking",t,"QueryLogiTrackingResp")}function u(e){console.log(e);var t=r["a"].create("ModifyJitOrderLogiReq",e);return Object(r["a"])("erp","JitOrderBossService.ModifyLogi",t,"ModifyJitOrderLogiResp")}function c(e){console.log(e);var t=r["a"].create("JitOrderShipReq",e);return Object(r["a"])("erp","JitOrderBossService.Ship",t,"JitOrderShipResp")}function d(e){console.log(e);var t=r["a"].create("QueryLogiCompanyListReq",e);return Object(r["a"])("erp","SupplierOrderBusinessService.QueryLogiCompanyList",t,"QueryLogiCompanyListResp")}function f(e){console.log(e);var t=r["a"].create("LogiCompanyListReq",e);return Object(r["a"])("erp","LogiCompanyBossService.GetLogiCompanyList",t,"LogiCompanyListResp")}function p(e){console.log(e);var t=r["a"].create("ExportTemplateReq",e);return Object(r["a"])("erp","JitOrderBossService.ExportTemplate",t,"ExportJitOrderResp")}function m(e){console.log(e);var t=r["a"].create("CancelJitOrderReq",e);return Object(r["a"])("erp","JitOrderBossService.CancelOrder",t,"CancelJitOrderResp")}},3934:function(e,t,a){},4461:function(e,t,a){"use strict";var r=a("3934"),n=a.n(r);n.a},"60fb":function(e,t,a){"use strict";a.d(t,"a",(function(){return o})),a.d(t,"b",(function(){return i}));var r=a("5c96"),n="https://file.fingo.shop";axios.defaults.timeout=45e3,axios.interceptors.request.use((function(e){return e}),(function(e){return r["Message"].error("请求超时"),Promise.resolve(e)}));var o=function(e,t){var a={headers:{"Content-Type":"multipart/form-data"}};return axios.post("".concat(n).concat(e),t,a).then((function(e){return e.data}))},i=function(e,t){var a={headers:{"Content-Type":"multipart/form-data"}};return axios.post("".concat(n).concat(e),t,a).then((function(e){return e.data}))}},"673a":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"after-sale"},[a("el-form",{ref:"afterSaleFilter",attrs:{inline:"","label-width":"80px",model:e.queryData}},[a("el-form-item",{staticClass:"filter-item",attrs:{prop:"id",label:"订单编号："}},[a("el-input",{staticStyle:{width:"200px"},attrs:{clearable:"",placeholder:"支持查询父订单和子订单编号",size:"medium"},model:{value:e.queryData.id,callback:function(t){e.$set(e.queryData,"id",t)},expression:"queryData.id"}})],1),a("el-form-item",{staticClass:"filter-item",attrs:{prop:"refundId",label:"售后编号："}},[a("el-input",{staticStyle:{width:"200px"},attrs:{clearable:"",placeholder:"售后编号",size:"medium"},model:{value:e.queryData.refundId,callback:function(t){e.$set(e.queryData,"refundId",t)},expression:"queryData.refundId"}})],1),a("span",{directives:[{name:"show",rawName:"v-show",value:e.drop,expression:"drop"}]},[a("el-form-item",{staticClass:"filter-item",attrs:{label:"商品："}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:e.optionChange},model:{value:e.queryData.choseType,callback:function(t){e.$set(e.queryData,"choseType",t)},expression:"queryData.choseType"}},e._l(e.productOptionList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.code}})})),1)],1),a("el-form-item",{staticClass:"filter-item"},[a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入",clearable:""},model:{value:e.queryData.value,callback:function(t){e.$set(e.queryData,"value",t)},expression:"queryData.value"}})],1),a("el-form-item",{staticClass:"filter-item",attrs:{prop:"orderNo",label:"用户ID："}},[a("el-input",{staticStyle:{width:"200px"},attrs:{clearable:"",placeholder:"用户ID",size:"medium"},model:{value:e.queryData.userId,callback:function(t){e.$set(e.queryData,"userId",t)},expression:"queryData.userId"}})],1),a("el-form-item",{staticClass:"filter-item",attrs:{label:"订单国家：",prop:"countryCode"}},[a("el-select",{attrs:{size:"medium",clearable:""},model:{value:e.queryData.countryCode,callback:function(t){e.$set(e.queryData,"countryCode",t)},expression:"queryData.countryCode"}},e._l(e.countryList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.nameLocal,value:e.shortCode}})})),1)],1),a("el-form-item",{staticClass:"filter-item",attrs:{label:"订单类型："}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.queryData.orderType,callback:function(t){e.$set(e.queryData,"orderType",t)},expression:"queryData.orderType"}},e._l(e.orderTypeList,(function(e){return a("el-option",{key:e.key,attrs:{label:e.value,value:e.key}})})),1)],1),a("el-form-item",{staticClass:"filter-item",attrs:{prop:"timeList",label:"申请时间："}},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",size:"medium",type:"daterange","start-placeholder":"开始日期","end-placeholder":"结束日期","default-time":["00:00:00","23:59:59"]},model:{value:e.queryData.timeList,callback:function(t){e.$set(e.queryData,"timeList",t)},expression:"queryData.timeList"}})],1)],1),a("el-form-item",{staticClass:"filter-item",staticStyle:{"margin-left":"20px"}},[a("el-button",{attrs:{icon:"el-icon-search",type:"primary",size:"medium"},on:{click:e.search}},[e._v("搜索")]),a("el-button",{attrs:{icon:"el-icon-refresh-left",size:"medium"},on:{click:e.resetSearch}},[e._v("重置")]),a("el-link",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary",underline:!1},on:{click:e.dropDown}},[e._v("\n                "+e._s(e.dropDownContent)+"\n                "),a("i",{class:e.dropDownIcon})])],1)],1),1===e.activeTab||2===e.activeTab?a("el-button",{staticClass:"batch-pass",attrs:{type:"primary",plain:""},on:{click:e.batchClick}},[e._v("批量通过")]):e._e(),3===e.activeTab?a("el-button",{staticClass:"batch-pass1",attrs:{type:"primary",plain:""},on:{click:e.batchCRefundlick}},[e._v("批量标记为已退款")]):e._e(),3===e.activeTab?a("el-button",{staticClass:"batch-pass",attrs:{type:"primary",plain:""},on:{click:e.downloadClick}},[e._v("下载")]):e._e(),a("el-tabs",{on:{"tab-click":e.tabClick},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},e._l(e.tabList,(function(t,r){return a("el-tab-pane",{key:r,attrs:{label:t.title,name:t.name}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""},on:{"selection-change":e.handleSelectionChange,"sort-change":e.sortMethod}},[a("el-table-column",{attrs:{type:"selection",width:"55",align:"center",fixed:"left"}}),a("el-table-column",{attrs:{label:"单据信息",width:"250",fixed:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v("售后："+e._s(t.row.refundId))]),a("div",{staticClass:"order-num"},[a("div",{staticClass:"order"},[e._v("订单："+e._s(t.row.orderId))]),a("img",{attrs:{src:e.getCountryImg(t.row.countryCode)}})]),a("div",[e._v("skuId："+e._s(t.row.afterSaleProduct.skuId))])]}}],null,!0)}),a("el-table-column",{attrs:{label:"售后商品",width:"400",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"produt"},[a("div",{staticClass:"product-pic"},[a("img",{attrs:{src:e.dealShowFileSrc(t.row.afterSaleProduct.picture)}}),1===t.row.afterSaleProduct.type||2===t.row.afterSaleProduct.type||12===t.row.afterSaleProduct.type||10===t.row.afterSaleProduct.type||11===t.row.afterSaleProduct.type||9===t.row.afterSaleProduct.type||14===t.row.afterSaleProduct.type?a("div",{staticClass:"img-mark"}):e._e(),1===t.row.afterSaleProduct.type||2===t.row.afterSaleProduct.type||12===t.row.afterSaleProduct.type||10===t.row.afterSaleProduct.type||11===t.row.afterSaleProduct.type||9===t.row.afterSaleProduct.type||14===t.row.afterSaleProduct.type?a("div",{staticClass:"img-mark-content"},[e._v(e._s(e.type[t.row.afterSaleProduct.type]))]):e._e()]),a("div",{staticClass:"product-content"},[a("div",{staticClass:"product-content-supplier"},[e._v("商品ID："+e._s(t.row.afterSaleProduct.productId))]),a("div",{staticClass:"product-content-name"},[e._v(e._s(t.row.afterSaleProduct.title))]),0!==t.row.afterSaleProduct.attr.length?a("div",{staticClass:"product-content-supplier"},[e._v("\n                                    规格：\n                                    "),e._l(t.row.afterSaleProduct.attr,(function(t){return a("span",{key:t.attrId},[e._v(e._s(t.attrLabel)+"："+e._s(t.valueLabel)+" ")])}))],2):e._e()])])]}}],null,!0)}),a("el-table-column",{attrs:{label:"实付单价×数量",width:"150",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v("退"+e._s(t.row.refundCurrency)+e._s(t.row.afterSaleProduct.price)+" X "+e._s(t.row.afterSaleProduct.num))]),a("div",[e._v("（售 X "+e._s(t.row.afterSaleProduct.num)+"）")])]}}],null,!0)}),a("el-table-column",{attrs:{label:"退款金额",width:"150",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.row.refundCurrency)+e._s(t.row.refundAmount))]),"0"!==t.row.refundFreight&&"0.00"!==t.row.refundFreight?a("div",[e._v("（含运费"+e._s(t.row.refundCurrency)+e._s(t.row.refundFreight)+"）")]):e._e()]}}],null,!0)}),1===e.activeTab||2===e.activeTab?a("el-table-column",{attrs:{label:"售后原因",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.row.refundReason))])]}}],null,!0)}):e._e(),1===e.activeTab||2===e.activeTab?a("el-table-column",{attrs:{label:"发货状态",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[2===t.row.orderStatus?a("div",{staticClass:"pricess"},[e._v(e._s(e.OrderStatus[t.row.orderStatus]))]):a("div",[e._v(e._s(e.OrderStatus[t.row.orderStatus]))])]}}],null,!0)}):e._e(),5!==e.activeTab?a("el-table-column",{attrs:{label:"等待时长",width:"150",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                        "+e._s(e.formatSeconds(t.row.waitTime))+"\n                    ")]}}],null,!0)}):e._e(),1===e.activeTab?a("el-table-column",{attrs:{label:"申请时间",sortable:"custom",width:"160",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                        "+e._s(e._f("secondTimeFormat")(t.row.operateTime))+"\n                    ")]}}],null,!0)}):e._e(),2===e.activeTab?a("el-table-column",{attrs:{label:"最新留言",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                        "+e._s(t.row.message)+"\n                    ")]}}],null,!0)}):e._e(),2===e.activeTab||3===e.activeTab?a("el-table-column",{attrs:{label:"更新时间",sortable:"custom",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                        "+e._s(e._f("formatTime")(t.row.operateTime))+"\n                    ")]}}],null,!0)}):e._e(),3===e.activeTab||4===e.activeTab?a("el-table-column",{attrs:{label:"退款账户",width:"250",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v("银行名称："+e._s(t.row.refundBankName||"-"))]),a("div",[e._v("银行账户名："+e._s(t.row.refundCardholder||"-"))])]}}],null,!0)}):e._e(),4===e.activeTab?a("el-table-column",{attrs:{label:"退款时间",sortable:"custom",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                        "+e._s(e._f("formatTime")(t.row.refundTime))+"\n                    ")]}}],null,!0)}):e._e(),4===e.activeTab?a("el-table-column",{attrs:{label:"创建时间",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                        "+e._s(e._f("formatTime")(t.row.createTime))+"\n                    ")]}}],null,!0)}):e._e(),1===e.activeTab||2===e.activeTab?a("el-table-column",{attrs:{label:"申请人",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[1===t.row.operatorType?a("div",[a("i",{staticClass:"iconfont"},[e._v("")]),e._v(e._s(t.row.operatorName)+"（"+e._s(t.row.operate)+"）")]):a("div",[a("i",{staticClass:"iconfont"},[e._v("")]),e._v(e._s(t.row.operatorName)+"（"+e._s(t.row.operate)+"）")])]}}],null,!0)}):e._e(),3===e.activeTab?a("el-table-column",{attrs:{label:"联系方式",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v("联系电话："+e._s(t.row.mobile))]),a("div",[e._v("电子邮箱："+e._s(t.row.email))])]}}],null,!0)}):e._e(),3===e.activeTab?a("el-table-column",{attrs:{label:"更新人",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                        "+e._s(t.row.operatorName)+"\n                    ")]}}],null,!0)}):e._e(),5===e.activeTab?a("el-table-column",{attrs:{label:"取消时间",sortable:"custom",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                        "+e._s(e._f("formatTime")(t.row.cancelTime))+"\n                    ")]}}],null,!0)}):e._e(),5===e.activeTab?a("el-table-column",{attrs:{label:"取消人",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                        "+e._s(t.row.cancelOperator)+"\n                    ")]}}],null,!0)}):e._e(),5!==e.activeTab?a("el-table-column",{attrs:{label:"操作",width:"120",align:"center",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.toReview(t.row)}}},[e._v(e._s(1===e.activeTab||2===e.activeTab?"去审核":"查看详情"))])]}}],null,!0)}):a("el-table-column",{attrs:{label:"操作",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.toReview(t.row)}}},[e._v(e._s(1===e.activeTab||2===e.activeTab?"去审核":"查看详情"))])]}}],null,!0)})],1),a("div",{staticClass:"page-wrapper"},[a("el-pagination",{attrs:{"current-page":e.queryData.page.pageNum,"page-sizes":[10,20,30,50],"page-size":e.queryData.page.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChanges,"current-change":e.handleCurrentChanges}})],1)],1)})),1),a("upload-file",{attrs:{dialogVisible:e.dialogVisible},on:{"on-cancel":e.cancelUpload,"on-confirm":e.confirmUpload}}),a("initiate-sale",{attrs:{dialogVisible:e.saleVisible}})],1)},n=[],o=(a("ac6a"),a("ac4d"),a("8a81"),a("5df3"),a("1c4c"),a("7f7f"),a("6b54"),a("c5f6"),a("7514"),a("6863")),i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"upload-file"},[a("el-dialog",{attrs:{title:e.dialogTitle,visible:e.toggle,width:"600px","before-close":e.cancle,"close-on-click-modal":!1},on:{"update:visible":function(t){e.toggle=t}}},[a("div",[e._v("\n            上传：\n            "),e.fileUrl?e._e():a("el-upload",{staticClass:"upload-wrapper",attrs:{action:"",multiple:"","http-request":e.uploadFile,"show-file-list":!1}},[a("el-button",{attrs:{icon:"el-icon-upload2",loading:e.uploadLoading,disable:e.uploadLoading,size:"medium",plain:""}},[e._v("\n                    选择文件\n                ")])],1),a("span",{staticClass:"file-name"},[e._v(e._s(e.fileName))])],1),a("div",{staticClass:"notice"},[a("div",[e._v("\n                通过上传表格，可批量发起售后申请；请"),a("span",{staticClass:"download",on:{click:e.downloadTemp}},[e._v("下载导入模板")]),e._v("并按照模板中的指导说明制作表格。\n            ")])]),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:e.cancle}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.confirm}},[e._v("确 定")])],1)])],1)},l=[],s=(a("8e6e"),a("456d"),a("bd86")),u=a("60fb"),c=a("113d"),d=a("5880");function f(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function p(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?f(Object(a),!0).forEach((function(t){Object(s["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):f(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var m={data:function(){return{dialogTitle:"批量发起售后",uploadLoading:!1,fileUrl:"",errorDialog:!1,percentage:0,fileName:"",message:""}},props:{dialogVisible:{type:Boolean,default:!1}},components:{},computed:p({toggle:{get:function(){return this.dialogVisible},set:function(){}}},Object(d["mapState"])({lang:function(e){return e.app.lang}})),methods:{cancle:function(){this.fileUrl="",this.$emit("on-cancle")},confirm:function(){this.$emit("on-confirm")},uploadFile:function(e){var t=this;console.log(e),this.fileName=e.file.name,this.uploadLoading=!0;var a=new FormData,r={fileName:e.file.name,type:"other"};a.append("file",e.file),a.append("param",JSON.stringify(r));var n="/file/rest/uploadservices/uploadfile";Object(u["a"])(n,a).then((function(e){t.uploadLoading=!1,"600"===e.status?(t.fileUrl=e.original_link,console.log(t.fileUrl),"onBehalf"===t.mark?t.getImportOrderDeliver(e.original_link):"direct"===t.mark&&t.getImportShip(e.original_link),t.percentage=100):t.$message.error("文件上传失败，请重试！")})).catch((function(e){console.log(e)}))},getImportShip:function(e){var t=this,a={fileUrl:e,languageCode:"cn",reqType:1};Object(c["e"])(a).then((function(e){1===e.ret.errcode?(t.message=e.message,t.$message.success("导入成功")):(t.message=e.message,t.$message.error(e.message))}))},getImportOrderDeliver:function(e){var t=this,a={uploadUrl:e,languageCode:this.lang};ImportOrderDeliver(a).then((function(e){1===e.ret.errcode&&(console.log(e),t.message=e.message,t.$message.error(e.message))}))},downloadTemp:function(){window.open("")},confirmUploadPresale:function(){this.fileUrl}}},h=m,y=(a("d2a7"),a("dc80"),a("2877")),v=Object(y["a"])(h,i,l,!1,null,null,null),b=v.exports,g=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"initate-sale",attrs:{title:"批量发起售后",visible:e.toggle,width:"80%","before-close":e.cancel},on:{"update:visible":function(t){e.toggle=t}}},[a("el-form",{ref:"afterSaleFilter",staticClass:"initate-form",attrs:{rules:e.rules,"label-position":"left",inline:"",model:e.queryData}},[a("el-form-item",{attrs:{label:"售后原因：",prop:"reason"}},[a("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请选择",size:"medium"},model:{value:e.queryData.reason,callback:function(t){e.$set(e.queryData,"reason",t)},expression:"queryData.reason"}},e._l(e.reasonList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"是否发放补偿券：",prop:"isVouchers"}},[a("el-radio-group",{model:{value:e.queryData.isVouchers,callback:function(t){e.$set(e.queryData,"isVouchers",t)},expression:"queryData.isVouchers"}},[a("el-radio",{attrs:{label:1}},[e._v("不发放")]),a("el-radio",{attrs:{label:2}},[e._v("发放")])],1)],1)],1),a("initate-table"),a("special-table"),a("div",{staticClass:"initate-prompt"},[a("div",[a("i",{staticClass:"iconfont icon-prompt"},[e._v("")]),e._v("共有13笔B类订单（礼包订单/品牌馆订单/Costgo订单等），请确认是否仍需发起售后")]),a("div",{staticClass:"prompt-see"},[a("i",{staticClass:"iconfont"},[e._v("")]),a("span",[e._v("查看")]),a("span",[e._v("取消查看")])])]),a("div",{staticClass:"initate-prompt"},[a("div",[a("i",{staticClass:"iconfont icon-prompt"},[e._v("")]),e._v("共有13条数据验证不通过而无法售后，请按照上传模板填写表格")]),a("div",{staticClass:"prompt-see"},[a("i",{staticClass:"iconfont"},[e._v("")]),a("span",[e._v("查看")]),a("span",[e._v("取消查看")])])]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.cancel}},[e._v("取消操作")]),a("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("确定对选中条目发起售后")])],1)],1)},_=[],S=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55",align:"center",fixed:"left"}}),a("el-table-column",{attrs:{label:"订单编号（order_id）",width:"160",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v("\n                    "+e._s(t.row.num)+"\n                    ")])]}}])}),a("el-table-column",{attrs:{label:"出库单",width:"160",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(t.row.num)+"\n            ")]}}])}),a("el-table-column",{attrs:{label:"订单类型",width:"160",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(t.row.num)+"\n            ")]}}])}),a("el-table-column",{attrs:{label:"Product_id",width:"160",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(t.row.num)+"\n            ")]}}])}),a("el-table-column",{attrs:{label:"SKUID",width:"160",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(t.row.num)+"\n            ")]}}])}),a("el-table-column",{attrs:{label:"SKUCODE",width:"160",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(t.row.num)+"\n            ")]}}])}),a("el-table-column",{attrs:{label:"校验",width:"160",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(t.row.num)+"\n            ")]}}])})],1)],1)},w=[],D={data:function(){return{}},methods:{handleSelectionChange:function(){}}},q=D,k=Object(y["a"])(q,S,w,!1,null,"a39f734a",null),C=k.exports,O=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55",align:"center",fixed:"left"}}),a("el-table-column",{attrs:{label:"订单编号（order_id）",width:"160",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v("\n                    "+e._s(t.row.num)+"\n                    ")])]}}])}),a("el-table-column",{attrs:{label:"出库单",width:"160",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(t.row.num)+"\n            ")]}}])}),a("el-table-column",{attrs:{label:"订单类型",width:"160",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(t.row.num)+"\n            ")]}}])}),a("el-table-column",{attrs:{label:"Product_id",width:"160",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(t.row.num)+"\n            ")]}}])}),a("el-table-column",{attrs:{label:"SKUID",width:"160",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(t.row.num)+"\n            ")]}}])}),a("el-table-column",{attrs:{label:"SKUCODE",width:"160",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(t.row.num)+"\n            ")]}}])}),a("el-table-column",{attrs:{label:"商品名称",width:"160",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(t.row.num)+"\n            ")]}}])}),a("el-table-column",{attrs:{label:"退货数量",width:"160",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(t.row.num)+"\n            ")]}}])}),a("el-table-column",{attrs:{label:"可退数量",width:"160",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(t.row.num)+"\n            ")]}}])}),a("el-table-column",{attrs:{label:"校验",width:"160",align:"center",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(t.row.num)+"\n            ")]}}])})],1)],1)},T=[],I={data:function(){return{}},methods:{handleSelectionChange:function(){}}},R=I,L=Object(y["a"])(R,O,T,!1,null,"336fe9d3",null),A=L.exports,j={data:function(){return{queryData:{reason:"",isVouchers:1},reasonList:[],rules:{reason:[{required:!0,message:"请至少选择一个",trigger:"change"}],isVouchers:[{required:!0,message:"请至少选择一个",trigger:"change"}]}}},props:{dialogVisible:{type:Boolean,default:!1}},components:{initateTable:C,specialTable:A},mounted:function(){this.getAllReturnReason()},computed:{toggle:{get:function(){return this.dialogVisible},set:function(){}}},methods:{getAllReturnReason:function(){var e=this;Object(o["c"])({}).then((function(t){1===t.ret.errcode&&(e.reasonList=t.refundReason)}))},getCountryImg:function(e){var t=this.countryList.find((function(t){return t.shortCode==e}));return t?this.dealShowFileSrc(t.image):""},cancel:function(){},confirm:function(){}}},P=j,x=(a("9e0e"),Object(y["a"])(P,g,_,!1,null,"9efc53a8",null)),B=x.exports;function N(e,t){var a;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=$(e))||t&&e&&"number"===typeof e.length){a&&(e=a);var r=0,n=function(){};return{s:n,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,l=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return i=e.done,e},e:function(e){l=!0,o=e},f:function(){try{i||null==a.return||a.return()}finally{if(l)throw o}}}}function $(e,t){if(e){if("string"===typeof e)return J(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?J(e,t):void 0}}function J(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}var V={data:function(){return{activeTab:1,tabList:[{title:"待审核",name:1},{title:"审核中",name:2},{title:"已通过待退款",name:3},{title:"售后成功",name:4},{title:"售后关闭",name:5}],queryData:{choseType:"1",id:"",refundId:"",value:"",skuId:"",productId:"",productName:"",userId:"",orderType:null,timeList:[],countryCode:"",page:{pageNum:1,pageSize:10}},total:0,OrderStatus:{0:"待支付",1:"待发货",2:"已发货",3:"交易成功",4:"交易关闭",5:"部分发货"},productOptionList:[{name:"商品ID",code:"1"},{name:"skuID",code:"2"},{name:"商品名称",code:"3"}],type:{2:"大礼包",1:"小礼包",12:"青春礼包",10:"批发商品",11:"微商商品",9:"虚拟商品",14:"微商礼包"},orderTypeList:[{key:0,value:"普通商品订单"},{key:1,value:"小礼包商品订单"},{key:2,value:"大礼包商品订单"},{key:4,value:"拼团订单"},{key:5,value:"直播订单"},{key:8,value:"虚拟商品订单"},{key:9,value:"批发商品订单"},{key:10,value:"微商商品订单"},{key:11,value:"99青春版礼包"}],drop:!1,dropDownContent:"展开",dropDownIcon:"el-icon-arrow-down",tableData:[],refundList:[],dialogVisible:!1,saleVisible:!1,sortTable:""}},components:{uploadFile:b,initiateSale:B},mounted:function(){this.queryData.timeList=[this.lastWeekDate,this.nowEndDate],console.log(this.$route.query.refundId),this.$route.query.refundId?(console.log("===>"),this.queryData.choseType="2",this.queryData.refundId=this.$route.query.refundId,this.inputChange(this.$route.query.refundId)):this.getAfterSalePage()},computed:{countryList:function(){return this.$store.state.dict.countryList},nowEndDate:function(){return this.$store.state.globalNum.nowEndDate},lastWeekDate:function(){return this.$store.state.globalNum.lastWeekDate}},methods:{dropDown:function(){this.drop?(this.dropDownContent="展开",this.dropDownIcon="el-icon-arrow-down"):(this.dropDownContent="收起",this.dropDownIcon="el-icon-arrow-up"),this.drop=!this.drop},getCountryImg:function(e){var t=this.countryList.find((function(t){return t.shortCode==e}));return t?this.dealShowFileSrc(t.image):""},sortMethod:function(e){console.log(e),"descending"===e.order?this.sortTable="":this.sortTable="update_time desc",console.log(this.sortTable),this.getAfterSalePage()},formatSeconds:function(e){var t,a=parseInt(e/864e5),r=parseInt(e%864e5/36e5),n=parseInt(e%36e5/6e4),o=parseInt(e%6e4/1e3);return a>0?t=a+"天"+r+"小时"+n+"分"+o+"秒":r>0?t=r+"小时"+n+"分"+o+"秒":n>0?t=n+"分"+o+"秒":o>0&&(t=o+"秒"),t},optionChange:function(e){switch(this.queryData.choseType=e,this.queryData.choseType){case"1":this.queryData.skuId="",this.queryData.productName="";break;case"2":this.queryData.productName="",this.queryData.productId="";break;case"3":this.queryData.skuId="",this.queryData.productId="";break}},inputChange:function(e){var t=this;switch(console.log("===>",e),this.queryData.choseType){case"1":this.queryData.productId=this.queryData.value;break;case"2":this.queryData.skuId=this.queryData.value;break;case"3":this.queryData.productName=this.queryData.value;break}console.log(this.queryData.timeList);var a={id:this.queryData.id,startTime:this.queryData.timeList?moment(this.queryData.timeList[0]).valueOf():null,endTime:this.queryData.timeList?moment(this.queryData.timeList[1]).valueOf():null,refundStatus:this.activeTab,orderType:this.queryData.orderType,productId:this.queryData.productId,skuId:this.queryData.skuId,productName:this.queryData.productName,countryCode:this.queryData.countryCode,userId:this.queryData.userId,refundId:e,page:this.queryData.page,orderBy:this.sortTable};Object(o["b"])(this.filterData(a)).then((function(e){if(1===e.ret.errcode){console.log(e),t.tableData.splice(0);for(var a=e.afterSale,r=6===a[0].refundStatus?5:a[0].refundStatus,n=0;n<a.length;n++)6==a[n].refundStatus&&Object.assign(a[n],{refundStatus:5}),r==a[n].refundStatus&&t.tableData.push(a[n]);t.activeTab=a[0].refundStatus,console.log(t.activeTab),t.total=Number(e.total)}}))},getAfterSalePage:function(){var e=this;switch(this.queryData.choseType){case"1":this.queryData.productId=this.queryData.value;break;case"2":this.queryData.skuId=this.queryData.value;break;case"3":this.queryData.productName=this.queryData.value;break}console.log(this.sortTable);var t={id:this.queryData.id,startTime:this.queryData.timeList?moment(this.queryData.timeList[0]).valueOf():null,endTime:this.queryData.timeList?moment(this.queryData.timeList[1]).valueOf():null,refundStatus:this.activeTab,orderType:this.queryData.orderType,productId:this.queryData.productId,skuId:this.queryData.skuId,productName:this.queryData.productName,countryCode:this.queryData.countryCode,userId:this.queryData.userId,refundId:this.queryData.refundId,page:this.queryData.page,orderBy:this.sortTable};Object(o["b"])(this.filterData(t)).then((function(t){1===t.ret.errcode&&(console.log(t),e.tableData=t.afterSale,e.total=Number(t.total))}))},handleSelectionChange:function(e){console.log(e),this.refundList.splice(0);var t,a=N(e);try{for(a.s();!(t=a.n()).done;){var r=t.value;this.refundList.push(r.refundId)}}catch(n){a.e(n)}finally{a.f()}},batchClick:function(){this.getBatchApproved()},batchCRefundlick:function(){this.getBatchRefundSuccess()},downloadClick:function(){switch(this.queryData.choseType){case"1":this.queryData.productId=this.queryData.value;break;case"2":this.queryData.skuId=this.queryData.value;break;case"3":this.queryData.productName=this.queryData.value;break}var e={id:this.queryData.id,startTime:this.queryData.timeList?moment(this.queryData.timeList[0]).valueOf():null,endTime:this.queryData.timeList?moment(this.queryData.timeList[1]).valueOf():null,refundStatus:this.activeTab,orderType:this.queryData.orderType,productId:this.queryData.productId,skuId:this.queryData.skuId,productName:this.queryData.productName,countryCode:this.queryData.countryCode,userId:this.queryData.userId,refundId:this.queryData.refundId,page:this.queryData.page};Object(o["j"])(e).then((function(e){1===e.ret.errcode&&(console.log(e),window.open(e.url))}))},getBatchApproved:function(){var e=this,t={refundId:this.refundList};Object(o["f"])(t).then((function(t){1===t.ret.errcode&&(e.$message.success("批量通过成功！"),e.getAfterSalePage())}))},getBatchRefundSuccess:function(){var e=this,t={refundId:this.refundList};Object(o["g"])(t).then((function(t){1===t.ret.errcode&&(console.log(t),e.$message.success("批量标记已退款成功！"),e.getAfterSalePage())}))},tabClick:function(){this.sortTable="",this.getAfterSalePage()},search:function(){this.getAfterSalePage()},resetSearch:function(){Object.assign(this.queryData,{choseType:"1",id:"",refundId:"",value:"",skuId:"",productId:"",productName:"",userId:"",orderType:null,countryCode:"",page:{pageNum:1,pageSize:10}}),this.queryData.timeList=[this.lastWeekDate,this.nowEndDate],this.getAfterSalePage()},handleSizeChanges:function(e){this.queryData.page.pageSize=e,this.getAfterSalePage()},handleCurrentChanges:function(e){this.queryData.page.pageNum=e,this.getAfterSalePage()},toReview:function(e){this.$router.push({path:"/order/reviewOperation",query:{refundId:e.refundId}})},initiateSale:function(){this.dialogVisible=!0},cancelUpload:function(){this.dialogVisible=!1},confirmUpload:function(){this.dialogVisible=!1,this.saleVisible=!0}}},z=V,U=(a("4461"),Object(y["a"])(z,r,n,!1,null,"445b6494",null));t["default"]=U.exports},6863:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return o})),a.d(t,"m",(function(){return i})),a.d(t,"n",(function(){return l})),a.d(t,"e",(function(){return s})),a.d(t,"f",(function(){return u})),a.d(t,"g",(function(){return c})),a.d(t,"i",(function(){return d})),a.d(t,"o",(function(){return f})),a.d(t,"k",(function(){return p})),a.d(t,"d",(function(){return m})),a.d(t,"p",(function(){return h})),a.d(t,"l",(function(){return y})),a.d(t,"h",(function(){return v})),a.d(t,"j",(function(){return b})),a.d(t,"c",(function(){return g}));var r=a("284b");function n(e){console.log(e);var t=r["a"].create("AfterSalePageRequest",e);return Object(r["a"])("order","AfterService.AfterSalePage",t,"AfterSalePageResponse")}function o(e){console.log(e);var t=r["a"].create("AfterSaleInfoRequest",e);return Object(r["a"])("order","AfterService.AfterSaleInfo",t,"AfterSaleInfoResponse")}function i(e){console.log(e);var t=r["a"].create("ModifyAfterSaleRequest",e);return Object(r["a"])("order","AfterService.ModifyAfterSale",t,"ModifyAfterSaleResponse")}function l(e){console.log(e);var t=r["a"].create("RefundSuccessRequest",e);return Object(r["a"])("order","AfterService.RefundSuccess",t,"RefundSuccessResponse")}function s(e){console.log(e);var t=r["a"].create("AuditPassRequest",e);return Object(r["a"])("order","AfterService.AuditPass",t,"AuditPassResponse")}function u(e){console.log(e);var t=r["a"].create("BatchApprovedRequest",e);return Object(r["a"])("order","AfterService.BatchApproved",t,"BatchApprovedResponse")}function c(e){console.log(e);var t=r["a"].create("BatchRefundSuccessRequest",e);return Object(r["a"])("order","AfterService.BatchRefundSuccess",t,"BatchRefundSuccessResponse")}function d(e){console.log(e);var t=r["a"].create("DelayProcessingRequest",e);return Object(r["a"])("order","AfterService.DelayProcessing",t,"DelayProcessingResponse")}function f(e){console.log(e);var t=r["a"].create("RejectApplyRequest",e);return Object(r["a"])("order","AfterService.RejectApply",t,"RejectApplyResponse")}function p(e){console.log(e);var t=r["a"].create("GetAfterSaleProductRequest",e);return Object(r["a"])("order","AfterService.GetAfterSaleProduct",t,"GetAfterSaleProductResponse")}function m(e){console.log(e);var t=r["a"].create("ApplyForRefundV1Req",e);return Object(r["a"])("order","AfterService.ApplyForRefundV1",t,"ApplyForRefundV1Resp")}function h(e){console.log(e);var t=r["a"].create("ReturnOperValidReq",e);return Object(r["a"])("order","AfterService.ReturnOperValid",t,"ReturnOperValidResp")}function y(e){console.log(e);var t=r["a"].create("GetUserBankListReq",e);return Object(r["a"])("polypay","WithdrawalBossService.GetUserBankList",t,"polypay.GetUserBankListResp")}function v(e){console.log(e);var t=r["a"].create("ComputeReturnAmountReq",e);return Object(r["a"])("order","AfterService.ComputeReturnAmount",t,"ComputeReturnAmountResp")}function b(e){console.log(e);var t=r["a"].create("AfterSalePageRequest",e);return Object(r["a"])("order","AfterService.DownloadAfterSalePage",t,"DownloadAfterSalePageResponse")}function g(e){console.log(e);var t=r["a"].create("ReturnReasonReq",e);return Object(r["a"])("order","AfterService.AllReturnReason",t,"ReturnReasonResp")}},"9e0e":function(e,t,a){"use strict";var r=a("b20c"),n=a.n(r);n.a},"9f52":function(e,t,a){},afb8:function(e,t,a){},b20c:function(e,t,a){},d2a7:function(e,t,a){"use strict";var r=a("9f52"),n=a.n(r);n.a},dc80:function(e,t,a){"use strict";var r=a("afb8"),n=a.n(r);n.a}}]);