(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-047c83e4"],{"3cbe":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"time-dialog",attrs:{title:"提示",visible:e.toggle,width:"30%","before-close":e.cancle},on:{"update:visible":function(t){e.toggle=t}}},["miss"===e.timeMark?a("div",[a("el-date-picker",{staticClass:"statistic-time",attrs:{type:"datetimerange",align:"right",size:"small","unlink-panels":"","range-separator":"~","start-placeholder":"开始日期","end-placeholder":"结束日期",clearable:!1,"picker-options":e.pickerOptions,disabledDate:"disabledDate"},on:{change:e.handelDateTimeChange},model:{value:e.dateRangeTwo,callback:function(t){e.dateRangeTwo=t},expression:"dateRangeTwo"}})],1):a("div",[a("el-date-picker",{staticClass:"statistic-time",attrs:{type:"daterange",align:"right",size:"small","unlink-panels":"","range-separator":"~","start-placeholder":"开始日期","end-placeholder":"结束日期",clearable:!1,"picker-options":e.pickerOptions,disabledDate:"disabledDate"},on:{change:e.handelDateChange},model:{value:e.dateRange,callback:function(t){e.dateRange=t},expression:"dateRange"}})],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.cancle}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("确 定")])],1)])},n=[],s={data:function(){return{dateRange:"add"===this.timeMark||"returns"===this.timeMark||"cancles"===this.timeMark?[moment("2020-04-18").format("YYYY-MM-DD"),moment().subtract("days",1).format("YYYY-MM-DD")]:[moment().subtract("days",30).format("YYYY-MM-DD"),moment().subtract("days",1).format("YYYY-MM-DD")],dateRangeTwo:[moment().subtract("days",30).format("YYYY-MM-DD HH:mm:ss"),moment().subtract("days",1).format("YYYY-MM-DD HH:mm:ss")],dateRangeTimeStamp:"add"===this.timeMark||"returns"===this.timeMark||"cancles"===this.timeMark?[moment("2020-04-18").format("YYYY-MM-DD").valueOf(),moment().subtract("days",1).format("YYYY-MM-DD").valueOf()]:[moment(moment().subtract("days",30).format("YYYY-MM-DD")).valueOf(),moment(moment().subtract("days",1).format("YYYY-MM-DD")).valueOf()],pickerOptions:{disabledDate:this.disabledDate,shortcuts:[{text:"昨日",onClick:function(e){var t=moment(new Date).add(-1,"days").format("YYYY-MM-DD"),a=moment(new Date).add(-1,"days").format("YYYY-MM-DD");console.log(t),e.$emit("pick",[a,t])}},{text:"今日",onClick:function(e){var t=moment(new Date).format("YYYY-MM-DD"),a=moment(new Date).format("YYYY-MM-DD");e.$emit("pick",[a,t])}},{text:"上周",onClick:function(e){var t=parseInt(moment().format("d")),a=moment().subtract(t+7,"days").format("YYYY-MM-DD"),i=moment().subtract(t+1,"days").format("YYYY-MM-DD");e.$emit("pick",[a,i])}},{text:"本周",onClick:function(e){var t=parseInt(moment().format("d")),a=moment().subtract(t-1,"days").format("YYYY-MM-DD"),i=moment().add(7-t,"days").format("YYYY-MM-DD");e.$emit("pick",[a,i])}},{text:"上月",onClick:function(e){var t=moment().subtract("month",1).format("YYYY-MM")+"-01",a=moment(t).subtract("month",-1).add("days",-1).format("YYYY-MM-DD");e.$emit("pick",[t,a])}},{text:"本月",onClick:function(e){var t=moment().add("month",0).format("YYYY-MM")+"-01",a=moment(t).add("month",1).add("days",-1).format("YYYY-MM-DD");e.$emit("pick",[t,a])}},{text:"去年",onClick:function(e){var t=moment().year(moment().year()-1).startOf("year"),a=moment().year(moment().year()-1).endOf("year");e.$emit("pick",[t,a])}},{text:"今年",onClick:function(e){var t=moment().startOf("year"),a=moment().endOf("year");e.$emit("pick",[t,a])}},{text:"过去7天",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-5184e5),e.$emit("pick",[a,t])}},{text:"过去30天",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-25056e5),e.$emit("pick",[a,t])}},{text:"上线至今",onClick:function(e){var t=new Date,a=moment("2018-12-26 00:00:00");e.$emit("pick",[a,t])}}]}}},props:{dialogVisible:{type:Boolean,default:!1},timeMark:String},computed:{toggle:{get:function(){return this.dialogVisible},set:function(){}}},methods:{disabledDate:function(e){return("add"===this.timeMark||"returns"===this.timeMark||"cancles"===this.timeMark)&&moment(e).format("YYYY-MM-DD")<moment("2020-04-18").format("YYYY-MM-DD")||moment(e).format("YYYY-MM-DD")>moment(new Date).add(-1,"days").format("YYYY-MM-DD")},cancle:function(){this.$emit("on-cancle")},confirm:function(){console.log(this.dateRangeTimeStamp),console.log(this.timeMark),"miss"===this.timeMark?(console.log("====>"),this.$emit("on-confirms",this.timeMark,this.dateRangeTwo,this.dateRangeTimeStamp)):this.$emit("on-confirm",this.timeMark,this.dateRange,this.dateRangeTimeStamp)},handelDateChange:function(e){console.log(e),e[0]=moment(e[0]).format("YYYY-MM-DD"),e[1]=moment(e[1]).format("YYYY-MM-DD"),this.dateRange=e;var t=e[0]+" 00:00:00",a=e[1]+" 23:59:59";this.dateRangeTimeStamp[0]=moment(t,"YYYY-MM-DD HH:mm:ss").valueOf(),this.dateRangeTimeStamp[1]=moment(a,"YYYY-MM-DD HH:mm:ss").valueOf(),console.log(this.dateRangeTimeStamp)},handelDateTimeChange:function(e){console.log(e),this.dateRangeTwo=[moment(e[0]).format("YYYY-MM-DD HH:mm:ss"),moment(e[1]).format("YYYY-MM-DD HH:mm:ss")],console.log(this.dateRangeTwo),this.dateRangeTimeStamp[0]=this.dateRangeTwo[0].valueOf(),this.dateRangeTimeStamp[1]=this.dateRangeTwo[1].valueOf(),console.log(this.dateRangeTimeStamp)}}},o=s,r=(a("9eee"),a("525e"),a("2877")),l=Object(r["a"])(o,i,n,!1,null,"422ce234",null);t["a"]=l.exports},"47d8":function(e,t,a){"use strict";var i=a("77f6"),n=a.n(i);n.a},"525e":function(e,t,a){"use strict";var i=a("a5b4"),n=a.n(i);n.a},"558f":function(e,t,a){"use strict";var i=a("ccc3"),n=a.n(i);n.a},"77f6":function(e,t,a){},"8f2b":function(e,t,a){},"9eee":function(e,t,a){"use strict";var i=a("8f2b"),n=a.n(i);n.a},a5b4:function(e,t,a){},ccc3:function(e,t,a){},e377:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.increaseLoading,expression:"increaseLoading"}],staticClass:"member-team",attrs:{"element-loading-background":"rgb(237,239,242)","element-loading-text":"数据加载中"}},[a("el-row",{staticClass:"num-row",attrs:{gutter:12}},e._l(e.increaseData,(function(t,i){return a("el-col",{key:i,attrs:{span:6}},[a("el-card",{staticClass:"increase-num",attrs:{shadow:"never"}},[a("div",{staticClass:"member-title"},[a("div",[e._v(e._s(e.dataType[t.dataType]))])]),-1!==t.dataType.indexOf("Increase")?a("div",{staticClass:"member-time"},[e._v(e._s(e._f("dateTimeFormat")((new Date).getTime()))+" | 今日")]):a("div",{staticClass:"member-time"},[e._v("上线至今")]),a("div",[a("span",{staticClass:"human-num"},[e._v(e._s(t.volume))]),a("span",{staticClass:"human"},[e._v("人")])])])],1)})),1),a("el-row",{staticClass:"num-row",attrs:{gutter:12}},e._l(e.miscellaneousData,(function(t,i){return a("el-col",{key:i,attrs:{span:6}},[a("el-card",{staticClass:"increase-num",attrs:{shadow:"never"}},[a("div",{staticClass:"member-title"},[a("div",[e._v(e._s(e.dataActionType[t.dataType]))]),a("el-tooltip",{staticClass:"item-icon",attrs:{effect:"dark",content:e.cardInfo[t.dataType],placement:"top"}},[a("i",{staticClass:"el-icon-warning-outline"})])],1),-1==t.dataType.indexOf("All")?a("div",{staticClass:"member-time",on:{click:e.timeChange}},[e._v(e._s(e.monthStart)+" ～ "+e._s(e.monthEnd)+" | 本月")]):a("div",{staticClass:"member-time",on:{click:e.timeChange}},[e._v("上线至今")]),a("div",[a("span",{staticClass:"human-num"},[e._v(e._s(t.volume))]),a("span",{staticClass:"human"},[e._v("人")])])])],1)})),1),a("div",{staticClass:"country-box"},[e._m(0),a("el-select",{attrs:{size:"small"},on:{change:e.countryChange},model:{value:e.countryCode,callback:function(t){e.countryCode=t},expression:"countryCode"}},e._l(e.countryList,(function(e){return a("el-option",{key:e.shortCode,attrs:{label:e.nameCn,value:e.shortCode}})})),1)],1)],1),a("el-card",{staticClass:"user-line",attrs:{shadow:"never"}},[a("el-tabs",{on:{"tab-click":e.handleTabClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},e._l(e.tabList,(function(t,i){return a("el-tab-pane",{key:i,attrs:{label:t.label,name:t.name,lazy:""}},[a("div",{staticClass:"uesr-box"},[a("div",{staticClass:"time-title"},[a("div",{staticClass:"line-chart-info"},[e._v(e._s(e.tabList[i].label)+"趋势")]),a("div",{staticClass:"line-chart-time",on:{click:function(t){return e.timeChange(i)}}},[e._v("\n                            "+e._s(e.dateRangeUserTimeStamp[i][0])+"~"+e._s(e.dateRangeUserTimeStamp[i][1])+"\n                            "),a("i",{staticClass:"iconfont"},[e._v("")])])]),"用户拉新"===e.tabList[i].label?a("el-select",{attrs:{size:"small"},on:{change:e.countryLineChange},model:{value:e.countryDimension,callback:function(t){e.countryDimension=t},expression:"countryDimension"}},e._l(e.countryDimensionList,(function(e){return a("el-option",{key:e.code,attrs:{label:e.label,value:e.code}})})),1):"用户收入"===e.tabList[i].label?a("el-select",{attrs:{size:"small"},on:{change:e.dimensionOneChange},model:{value:e.activeDimensionOne,callback:function(t){e.activeDimensionOne=t},expression:"activeDimensionOne"}},e._l(e.dimensionList,(function(e){return a("el-option",{key:e.dimension,attrs:{label:e.label,value:e.dimension}})})),1):"用户消费"===e.tabList[i].label?a("el-select",{attrs:{size:"small"},on:{change:e.dimensionTwoChange},model:{value:e.activeDimensionTwo,callback:function(t){e.activeDimensionTwo=t},expression:"activeDimensionTwo"}},e._l(e.dimensionList,(function(e){return a("el-option",{key:e.dimension,attrs:{label:e.label,value:e.dimension}})})),1):e._e()],1),a("line-chart",{ref:t.name,refInFor:!0,attrs:{userIndex:e.userIndex,dimensionIncome:e.activeDimensionOne,dimensionlevel:e.activeDimensionTwo,lineData:e.lineDataMap[t.name],unit:e.tabList[i].unit,yMin:e.tabList[i].yMin}})],1)})),1)],1),a("el-row",{staticClass:"num-row",attrs:{gutter:12}},e._l(e.topList,(function(t,i){return a("el-col",{key:i,attrs:{span:12}},[a("el-card",{staticClass:"increase-num",attrs:{shadow:"never"}},[a("div",{staticClass:"top-title"},[e._v("\n                    "+e._s(t)+"\n                ")]),a("div",{staticClass:"top-box"},[a("div",{staticClass:"line-chart-time",on:{click:function(t){return e.timeTopChange(i)}}},[e._v("\n                        "+e._s(e.dateRangeTOPTimeStamp[i][0])+"~"+e._s(e.dateRangeTOPTimeStamp[i][1])+"\n                        "),a("i",{staticClass:"iconfont"},[e._v("")])]),a("el-select",{staticClass:"top-country",attrs:{size:"small"},on:{change:function(t){return e.countryTopChange(i)}},model:{value:e.countryCodeList[i],callback:function(t){e.$set(e.countryCodeList,i,t)},expression:"countryCodeList[index]"}},e._l(e.countryList,(function(e){return a("el-option",{key:e.shortCode,attrs:{label:e.nameCn,value:e.shortCode}})})),1)],1),a("sort-table",{attrs:{tableList:e.tableList[i]}})],1)],1)})),1),a("time-chose",{attrs:{dialogVisible:e.timeDialogVisible,timeMark:e.timeMark},on:{"on-cancle":e.cancleTime,"on-confirm":e.confirmTime}})],1)},n=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"country-title"},[a("i",{staticClass:"iconfont"},[e._v("")]),a("span",{},[e._v("看板多国家筛选：")])])}],s=(a("c5f6"),a("7f7f"),a("ac6a"),a("6b54"),a("7514"),a("284b"));function o(e){var t=s["a"].create("MemberIncreaseNumberReq",e);return Object(s["a"])("datahouse","MemberTeamBossService.MemberIncreaseNumber",t,"MemberIncreaseNumberResp")}function r(e){var t=s["a"].create("MemberMiscellaneousDataReq",e);return Object(s["a"])("datahouse","MemberTeamBossService.MemberMiscellaneousData",t,"MemberMiscellaneousDataResp")}function l(e){var t=s["a"].create("MemberBrokenLineGraphReq",e);return Object(s["a"])("datahouse","MemberTeamBossService.MemberBrokenLineGraph",t,"MemberBrokenLineGraphResp")}function m(e){var t=s["a"].create("MemberPsIncreaseRankingListReq",e);return Object(s["a"])("datahouse","MemberTeamBossService.MemberPsIncreaseRankingList",t,"MemberPsIncreaseRankingListResp")}function c(e){var t=s["a"].create("MemberPsIncreaseRiseRankingListReq",e);return Object(s["a"])("datahouse","MemberTeamBossService.MemberPsIncreaseRiseRankingList",t,"MemberPsIncreaseRiseRankingListResp")}function u(e){var t=s["a"].create("MemberPsIncreaseDropRankingListReq",e);return Object(s["a"])("datahouse","MemberTeamBossService.MemberPsIncreaseDropRankingList",t,"MemberPsIncreaseDropRankingListResp")}var d=a("3cbe"),h=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"line-chart"},[a("div",{ref:"lineChart",staticStyle:{height:"400px",width:"100%"}})])},f=[],p=(a("ac4d"),a("8a81"),a("5df3"),a("1c4c"),a("313e")),g=a.n(p);function b(e,t){var a;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=v(e))||t&&e&&"number"===typeof e.length){a&&(e=a);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,r=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return o=e.done,e},e:function(e){r=!0,s=e},f:function(){try{o||null==a.return||a.return()}finally{if(r)throw s}}}}function v(e,t){if(e){if("string"===typeof e)return D(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?D(e,t):void 0}}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,i=new Array(t);a<t;a++)i[a]=e[a];return i}var y={props:{lineData:{type:Object,default:function(){}},unit:{type:String,default:""},yMin:{type:Number,default:0},userIndex:{type:Number,default:0},dimensionIncome:{type:Number,default:0},dimensionlevel:{type:Number,default:0}},data:function(){return{chart:null}},mounted:function(){this.initChart(),this.setOption()},watch:{lineData:{handler:function(e,t){this.setOption()},deep:!0}},methods:{initChart:function(){this.chart=g.a.init(this.$refs.lineChart),console.log(this.chart.resize),this.resize=_.throttle(this.chart.resize,100),window.addEventListener("resize",this.resize)},resizeChart:function(){var e=this;setTimeout((function(){e.chart.resize()}),10)},setOption:function(e){console.log(this.lineData);var t=this,a={};0===this.userIndex?a=Object.assign(a,{animation:!1,tooltip:{trigger:"axis",axisPointer:{type:"line"},formatter:function(e){var a,i=moment(e[0].axisValue).format("YYYY-MM-DD")+"</br>",n=b(e);try{for(n.s();!(a=n.n()).done;){var s=a.value;i=i+s.marker+""+s.seriesName+": "+s.value+t.unit+"</br>"}}catch(o){n.e(o)}finally{n.f()}return i}},legend:{data:["Total","SH","PS","AM","AT"]},grid:{top:30,left:60,bottom:70,right:60},label:{show:!0,position:"top",textStyle:{color:"#00ca95"}},xAxis:{type:"category",boundaryGap:!1,data:this.lineData.xAxis},yAxis:{type:"value",axisLabel:{formatter:function(e){var a="";return a="%"===t.unit?e+t.unit:e,a}},min:t.yMin},dataZoom:[{type:"inside",start:0,end:100,zoomOnMouseWheel:"ctrl"},{show:!0,type:"slider",y:"90%",start:50,end:100}],series:[{name:"全部",type:"line",stack:"总量",data:this.lineData.series&&this.lineData.series[0]},{name:"SH",type:"line",data:this.lineData.series&&this.lineData.series[1]},{name:"PS",type:"line",data:this.lineData.series&&this.lineData.series[2]},{name:"AM",type:"line",data:this.lineData.series&&this.lineData.series[3]},{name:"AT",type:"line",data:this.lineData.series&&this.lineData.series[4]}]}):1===this.userIndex?(console.log(this.dimensionIncome),0==this.dimensionIncome?a=Object.assign(a,{animation:!1,tooltip:{trigger:"axis",axisPointer:{type:"line"},formatter:function(e){var t=e[0].name+"</br>"+e[0].marker+e[0].seriesName+": "+e[0].value;return t}},legend:{data:[]},grid:{top:30,left:60,bottom:70,right:60},label:{show:!0,position:"top",textStyle:{color:"#00ca95"}},xAxis:{type:"category",boundaryGap:!1,data:this.lineData.xAxis},yAxis:{type:"value",axisLabel:{formatter:function(e){var a="";return a="%"===t.unit?e+t.unit:e,a}},min:t.yMin},dataZoom:[{type:"inside",start:0,end:100,zoomOnMouseWheel:"ctrl"},{show:!0,type:"slider",y:"90%",start:50,end:100}],series:[{name:"全部",type:"line",stack:"总量",data:this.lineData.series&&this.lineData.series[0]}]}):1==this.dimensionIncome?a=Object.assign(a,{animation:!1,tooltip:{trigger:"axis",axisPointer:{type:"line"},formatter:function(e){var t,a=moment(e[0].axisValue).format("YYYY-MM-DD")+"</br>",i=b(e);try{for(i.s();!(t=i.n()).done;){var n=t.value;a=a+n.marker+""+n.seriesName+": "+n.value+"</br>"}}catch(s){i.e(s)}finally{i.f()}return a}},legend:{data:["马来西亚","新加坡","泰国","印度尼西亚"]},grid:{top:30,left:60,bottom:70,right:60},label:{show:!0,position:"top",textStyle:{color:"#00ca95"}},xAxis:{type:"category",boundaryGap:!1,data:this.lineData.xAxis},yAxis:{type:"value",axisLabel:{formatter:function(e){var a="";return a="%"===t.unit?e+t.unit:e,a}},min:t.yMin},dataZoom:[{type:"inside",start:0,end:100,zoomOnMouseWheel:"ctrl"},{show:!0,type:"slider",y:"90%",start:50,end:100}],series:[{name:"马来西亚",type:"line",data:this.lineData.series&&this.lineData.series[0]},{name:"新加坡",type:"line",data:this.lineData.series&&this.lineData.series[1]},{name:"泰国",type:"line",data:this.lineData.series&&this.lineData.series[2]},{name:"印度尼西亚",type:"line",data:this.lineData.series&&this.lineData.series[3]}]}):2==this.dimensionIncome&&(a=Object.assign(a,{animation:!1,tooltip:{trigger:"axis",axisPointer:{type:"line"},formatter:function(e){var t,a=moment(e[0].axisValue).format("YYYY-MM-DD")+"</br>",i=b(e);try{for(i.s();!(t=i.n()).done;){var n=t.value;a=a+n.marker+""+n.seriesName+": "+n.value+"</br>"}}catch(s){i.e(s)}finally{i.f()}return a}},legend:{data:["SH","PS","AM","AT"]},grid:{top:30,left:60,bottom:70,right:60},label:{show:!0,position:"top",textStyle:{color:"#00ca95"}},xAxis:{type:"category",boundaryGap:!1,data:this.lineData.xAxis},yAxis:{type:"value",axisLabel:{formatter:function(e){var a="";return a="%"===t.unit?e+t.unit:e,a}},min:t.yMin},dataZoom:[{type:"inside",start:0,end:100,zoomOnMouseWheel:"ctrl"},{show:!0,type:"slider",y:"90%",start:50,end:100}],series:[{name:"SH",type:"line",data:this.lineData.series&&this.lineData.series[0]},{name:"PS",type:"line",data:this.lineData.series&&this.lineData.series[1]},{name:"AM",type:"line",data:this.lineData.series&&this.lineData.series[2]},{name:"AT",type:"line",data:this.lineData.series&&this.lineData.series[3]}]}))):2===this.userIndex&&(0==this.dimensionlevel?a=Object.assign(a,{animation:!1,tooltip:{trigger:"axis",axisPointer:{type:"line"},formatter:function(e){var t=e[0].name+"</br>"+e[0].marker+e[0].seriesName+": "+e[0].value;return t}},legend:{data:[]},grid:{top:30,left:60,bottom:70,right:60},label:{show:!0,position:"top",textStyle:{color:"#00ca95"}},xAxis:{type:"category",boundaryGap:!1,data:this.lineData.xAxis},yAxis:{type:"value",axisLabel:{formatter:function(e){var a="";return a="%"===t.unit?e+t.unit:e,a}},min:t.yMin},dataZoom:[{type:"inside",start:0,end:100,zoomOnMouseWheel:"ctrl"},{show:!0,type:"slider",y:"90%",start:50,end:100}],series:[{name:"全部",type:"line",stack:"总量",data:this.lineData.series[0]}]}):1==this.dimensionlevel?(console.log("====>"),a=Object.assign(a,{animation:!1,tooltip:{trigger:"axis",axisPointer:{type:"line"},formatter:function(e){var t,a=moment(e[0].axisValue).format("YYYY-MM-DD")+"</br>",i=b(e);try{for(i.s();!(t=i.n()).done;){var n=t.value;a=a+n.marker+""+n.seriesName+": "+n.value+"</br>"}}catch(s){i.e(s)}finally{i.f()}return a}},legend:{data:["马来西亚","新加坡","泰国","印度尼西亚"]},grid:{top:30,left:60,bottom:70,right:60},label:{show:!0,position:"top",textStyle:{color:"#00ca95"}},xAxis:{type:"category",boundaryGap:!1,data:this.lineData.xAxis},yAxis:{type:"value",axisLabel:{formatter:function(e){var a="";return a="%"===t.unit?e+t.unit:e,a}},min:t.yMin},dataZoom:[{type:"inside",start:0,end:100,zoomOnMouseWheel:"ctrl"},{show:!0,type:"slider",y:"90%",start:50,end:100}],series:[{name:"马来西亚",type:"line",data:this.lineData.series&&this.lineData.series[0]},{name:"新加坡",type:"line",data:this.lineData.series&&this.lineData.series[1]},{name:"泰国",type:"line",data:this.lineData.series&&this.lineData.series[2]},{name:"印度尼西亚",type:"line",data:this.lineData.series&&this.lineData.series[3]}]})):2==this.dimensionlevel&&(a=Object.assign(a,{animation:!1,tooltip:{trigger:"axis",axisPointer:{type:"line"},formatter:function(e){var t,a=moment(e[0].axisValue).format("YYYY-MM-DD")+"</br>",i=b(e);try{for(i.s();!(t=i.n()).done;){var n=t.value;a=a+n.marker+""+n.seriesName+": "+n.value+"</br>"}}catch(s){i.e(s)}finally{i.f()}return a}},legend:{data:["SH","PS","AM","AT"]},grid:{top:30,left:60,bottom:70,right:60},label:{show:!0,position:"top",textStyle:{color:"#00ca95"}},xAxis:{type:"category",boundaryGap:!1,data:this.lineData.xAxis},yAxis:{type:"value",axisLabel:{formatter:function(e){var a="";return a="%"===t.unit?e+t.unit:e,a}},min:t.yMin},dataZoom:[{type:"inside",start:0,end:100,zoomOnMouseWheel:"ctrl"},{show:!0,type:"slider",y:"90%",start:50,end:100}],series:[{name:"SH",type:"line",data:this.lineData.series&&this.lineData.series[0]},{name:"PS",type:"line",data:this.lineData.series&&this.lineData.series[1]},{name:"AM",type:"line",data:this.lineData.series&&this.lineData.series[2]},{name:"AT",type:"line",data:this.lineData.series&&this.lineData.series[3]}]}))),this.chart.setOption(a,!0)}}},M=y,Y=a("2877"),T=Object(Y["a"])(M,h,f,!1,null,"2dcccdc6",null),x=T.exports,k=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sort-table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableList,border:"","max-height":"400"}},[a("el-table-column",{attrs:{label:"排名",type:"index",width:"50",align:"center"}}),a("el-table-column",{attrs:{label:"用户昵称",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"user-nick",on:{click:function(a){return e.userClick(t.row.userId)}}},[e._v(e._s(t.row.userNickname))])]}}])}),a("el-table-column",{attrs:{label:"新增PS数",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.row.volume))])]}}])}),a("el-table-column",{attrs:{label:"环比变化",width:"160",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(e.showNum(t.row.changePP))),t.row.changePP<0?a("i",{staticClass:"iconfont increase"},[e._v("")]):e._e(),t.row.changePP>0?a("i",{staticClass:"iconfont down"},[e._v("")]):e._e()])]}}])})],1)],1)},S=[],C=(a("28a5"),{props:{tableList:Array},methods:{showNum:function(e){if(e<0){var t=e.toString().split("-")[1];return"".concat(t,"%")}return"".concat(e,"%")},userClick:function(e){this.$router.push({name:"memberInfo",query:{userId:e}})}}}),O=C,w=(a("558f"),Object(Y["a"])(O,k,S,!1,null,"7b7838d2",null)),R=w.exports,L={data:function(){return{countryCode:"",dataType:{IncreaseSHNumber:"新增SH数",IncreasePSNumber:"新增PS数",IncreaseAMNumber:"新增AM数",IncreaseATNumber:"新增AT数",AllTimeSHNumber:"累计SH数",AllTimePSNumber:"累计PS数",AllTimeAMNumber:"累计AM数",AllTimeATNumber:"累计AT数"},dataActionType:{PSActivationNumber:"0度PS激活数",PSInvitationNumber:"邀约PS成功用户数",FirstOrderNumber:"开首单用户数",AllTimePSActivationNumber:"0度PS激活累计数",AllTimePSInvitationNumber:"邀约PS成功用户累计数",AllTimeFirstOrderNumber:"开单用户累计数"},cardInfo:{PSActivationNumber:"统计周期内，团队内没有的PS下属的PS团队长，团队中晋升了ps/am/at的团队长 的数量",PSInvitationNumber:"统计周期内，用户邀到粉丝（即有绑定关系），且粉丝在周期内成功升级PS ，的邀请人数量，同个邀请人在邀请到不同用户时，可以被计算多次",FirstOrderNumber:"统计周期内，会员开单（自己购买或者销售给SH普通商品）用户数（首单）",AllTimePSActivationNumber:"团队内没有的PS下属的PS团队长，团队中晋升了ps/am/at的团队长 的数量，每日加总的累计值",AllTimePSInvitationNumber:"用户邀到粉丝（即有绑定关系），且粉丝在周期内成功升级PS ，的邀请人数量，同个邀请人在邀请到不同用户时，可以被计算多次，每日的值累加汇总",AllTimeFirstOrderNumber:"会员开单（自己购买或者销售给SH普通商品）用户数（首单），每日的值累加汇总"},increaseData:[],miscellaneousData:[],timeDialogVisible:!1,monthStart:moment().add("month",0).format("YYYY-MM")+"-01",monthEnd:moment(new Date((new Date).getFullYear(),(new Date).getMonth()+1,0)).format("YYYY-MM-DD"),increaseLoading:!0,misLoading:!0,activeName:"UserPullNew",activeTab:"UserPullNew",userIndex:0,tabList:[{label:"用户拉新",name:"UserPullNew",unit:"人",yMin:0},{label:"用户收入",name:"UserIncome",unit:"$",yMin:0},{label:"用户消费",name:"UserConsumption",unit:"$",yMin:0}],activeRebateName:"NumOfOrder",rebateIndex:0,tabRebateList:[{label:"返佣人数",name:"NumOfOrder",unit:"单",yMin:0},{label:"返佣订单",name:"GMV",unit:"$",yMin:0},{label:"返佣金额",name:"GMVPerUser",unit:"$",yMin:0}],lineDataMap:{UserPullNew:{},UserIncome:{},UserConsumption:{}},activeDimensionOne:0,activeDimensionTwo:0,countryDimension:0,countryDimensionList:[{code:0,label:"合计"},{code:100,label:"马来西亚"},{code:101,label:"新加坡"},{code:102,label:"泰国"},{code:103,label:"印度尼西亚"}],dimensionList:[{label:"按合计",dimension:0},{label:"按国家",dimension:1},{label:"按用户等级",dimension:2}],timeMark:"user",dateRangeUserTimeStamp:[[moment().subtract("days",30).format("YYYY-MM-DD"),moment().subtract("days",1).format("YYYY-MM-DD")],[moment().subtract("days",30).format("YYYY-MM-DD"),moment().subtract("days",1).format("YYYY-MM-DD")],[moment().subtract("days",30).format("YYYY-MM-DD"),moment().subtract("days",1).format("YYYY-MM-DD")]],dateRangeTOPTimeStamp:[[moment().subtract("days",30).format("YYYY-MM-DD"),moment().subtract("days",1).format("YYYY-MM-DD")],[moment().subtract("days",30).format("YYYY-MM-DD"),moment().subtract("days",1).format("YYYY-MM-DD")],[moment().subtract("days",30).format("YYYY-MM-DD"),moment().subtract("days",1).format("YYYY-MM-DD")]],dateRangeRebateTimeStamp:[[15725376e5,1577721599e3],[15725376e5,1577721599e3],[15725376e5,1577721599e3]],topList:["新增PS数TOP50用户","邀约环比上涨最多TOP50用户","邀约环比下降最多TOP50用户"],countryCodeList:["","",""],topIndex:0,tableList:[[],[],[]]}},components:{timeChose:d["a"],lineChart:x,sortTable:R},mounted:function(){this.getMemberIncreaseNumber(),this.getMemberMiscellaneousData(),this.getMemberBrokenLineGraph(),this.getMemberPsIncreaseRankingList(),this.getMemberPsIncreaseRiseRankingList(),this.getMemberPsIncreaseDropRankingList()},computed:{countryList:function(){var e=[].concat(this.$store.state.dict.countryList),t=e.find((function(e){return""==e.shortCode}));t||e.unshift({nameCn:"合计",nameLocal:"合计",shortCode:""});var a=e.find((function(e){return"ID"==e.shortCode}));return a||e.push({nameCn:"印度尼西亚",nameLocal:"印度尼西亚",shortCode:"ID"}),e}},methods:{getMemberIncreaseNumber:function(){var e=this,t={countryCode:this.countryCode,dataType:[11,12,13,14,15,16,17,18]};o(t).then((function(t){1===t.ret.errcode&&(console.log(t),e.increaseLoading=!1,e.increaseData=t.data)}))},getMemberMiscellaneousData:function(){var e=this,t={countryCode:this.countryCode,dataType:[19,20,21,22,23,24]};r(t).then((function(t){1===t.ret.errcode&&(console.log(t),e.misLoading=!1,e.miscellaneousData=t.data)}))},countryChange:function(e){console.log(e),this.countryCode=e,this.increaseLoading=!0,this.misLoading=!0,this.getMemberIncreaseNumber(),this.getMemberMiscellaneousData()},cancleTime:function(){this.timeDialogVisible=!1},confirmTime:function(e,t,a){if(console.log(e,t,a),console.log(this.dateRangeUserTimeStamp),"user"===e)console.log(this.userIndex),this.dateRangeUserTimeStamp[this.userIndex]=t,this.getMemberBrokenLineGraph(),console.log(this.dateRangeUserTimeStamp);else if("rebate"===e)this.dateRangeRebateTimeStamp[this.rebateIndex]=a;else if("top"===e)switch(this.dateRangeTOPTimeStamp[this.topIndex]=t,this.topIndex){case 0:this.getMemberPsIncreaseRankingList();break;case 1:this.getMemberPsIncreaseRiseRankingList();break;case 2:this.getMemberPsIncreaseDropRankingList();break}console.log(this.dateRangeTOPTimeStamp),this.timeDialogVisible=!1},timeChange:function(e){this.timeMark="user",this.userIndex=e,this.timeDialogVisible=!0},timeRebateChange:function(e){this.timeMark="rebate",this.rebateIndex=e,this.timeDialogVisible=!0},getMemberBrokenLineGraph:function(){var e=this,t={};if(console.log(moment(this.dateRangeUserTimeStamp[0][0],"YYYY-MM-DD HH:mm:ss")),0===this.userIndex){var a=this.dateRangeUserTimeStamp[0][0]+" 00:00:00",i=this.dateRangeUserTimeStamp[0][1]+" 23:59:59",n=moment(a,"YYYY-MM-DD HH:mm:ss").valueOf().toString(),s=moment(i,"YYYY-MM-DD HH:mm:ss").valueOf().toString();console.log(a,i,n,s),t=Object.assign(t,{startTime:n,endTime:s,dimension:this.countryDimension,dataType:25})}else if(1===this.userIndex){var o=this.dateRangeUserTimeStamp[1][0]+" 00:00:00",r=this.dateRangeUserTimeStamp[1][1]+" 23:59:59",m=moment(o,"YYYY-MM-DD HH:mm:ss").valueOf().toString(),c=moment(r,"YYYY-MM-DD HH:mm:ss").valueOf().toString();console.log(o,r,m,c),t=Object.assign(t,{startTime:m,endTime:c,dimension:this.activeDimensionOne,dataType:26})}else if(2===this.userIndex){var u=this.dateRangeUserTimeStamp[2][0]+" 00:00:00",d=this.dateRangeUserTimeStamp[2][1]+" 23:59:59",h=moment(u,"YYYY-MM-DD HH:mm:ss").valueOf().toString(),f=moment(d,"YYYY-MM-DD HH:mm:ss").valueOf().toString();console.log(u,d,h,f),t=Object.assign(t,{startTime:h,endTime:f,dimension:this.activeDimensionTwo,dataType:27})}console.log(t),l(t).then((function(t){if(1===t.ret.errcode)if(console.log(t),0===e.userIndex){var a=[[],[],[],[],[]],i=[];_.forEach(t.data,(function(e){-1!==e.dimensionTag.indexOf("Total")?a[0].push(e.volume):-1!==e.dimensionTag.indexOf("SH")?a[1].push(e.volume):-1!==e.dimensionTag.indexOf("PS")?a[2].push(e.volume):-1!==e.dimensionTag.indexOf("AM")?a[3].push(e.volume):-1!==e.dimensionTag.indexOf("AT")&&a[4].push(e.volume),i.push(e.date)})),console.log(a),e.lineDataMap[e.activeName]={series:a,xAxis:e.distinct(i)},console.log(e.lineDataMap)}else if(1===e.userIndex){if(0===e.activeDimensionOne){var n=[[]],s=[];_.forEach(t.data,(function(e){n[0].push(e.volume),s.push(e.date)})),e.lineDataMap[e.activeName]={series:n,xAxis:e.distinct(s)},console.log(e.lineDataMap)}else if(1===e.activeDimensionOne){var o=[[],[],[],[]],r=[];_.forEach(t.data,(function(e){-1!==e.dimensionTag.indexOf("MY")?o[0].push(e.volume):-1!==e.dimensionTag.indexOf("SG")?o[1].push(e.volume):-1!==e.dimensionTag.indexOf("TH")?o[2].push(e.volume):-1!==e.dimensionTag.indexOf("ID")&&o[3].push(e.volume),r.push(e.date)})),console.log(o),e.lineDataMap[e.activeName]={series:o,xAxis:e.distinct(r)},console.log(e.lineDataMap)}else if(2===e.activeDimensionOne){var l=[[],[],[],[]],m=[];_.forEach(t.data,(function(e){-1!==e.dimensionTag.indexOf("SH")?l[0].push(e.volume):-1!==e.dimensionTag.indexOf("PS")?l[1].push(e.volume):-1!==e.dimensionTag.indexOf("AM")?l[2].push(e.volume):-1!==e.dimensionTag.indexOf("AT")&&l[3].push(e.volume),m.push(e.date)})),console.log(l),e.lineDataMap[e.activeName]={series:l,xAxis:e.distinct(m)},console.log(e.lineDataMap)}}else if(2===e.userIndex)if(0===e.activeDimensionTwo){var c=[[]],u=[];_.forEach(t.data,(function(e){c[0].push(e.volume),u.push(e.date)})),e.lineDataMap[e.activeName]={series:c,xAxis:e.distinct(u)},console.log(e.lineDataMap)}else if(1===e.activeDimensionTwo){var d=[[],[],[],[]],h=[];_.forEach(t.data,(function(e){-1!==e.dimensionTag.indexOf("MY")?d[0].push(e.volume):-1!==e.dimensionTag.indexOf("SG")?d[1].push(e.volume):-1!==e.dimensionTag.indexOf("TH")?d[2].push(e.volume):-1!==e.dimensionTag.indexOf("ID")&&d[3].push(e.volume),h.push(e.date)})),console.log(d),e.lineDataMap[e.activeName]={series:d,xAxis:e.distinct(h)},console.log(e.lineDataMap)}else if(2===e.activeDimensionTwo){var f=[[],[],[],[]],p=[];_.forEach(t.data,(function(e){-1!==e.dimensionTag.indexOf("SH")?f[0].push(e.volume):-1!==e.dimensionTag.indexOf("PS")?f[1].push(e.volume):-1!==e.dimensionTag.indexOf("AM")?f[2].push(e.volume):-1!==e.dimensionTag.indexOf("AT")&&f[3].push(e.volume),p.push(e.date)})),console.log(f),e.lineDataMap[e.activeName]={series:f,xAxis:e.distinct(p)},console.log(e.lineDataMap)}}))},distinct:function(e){for(var t=[],a=0;a<e.length;a++)t.indexOf(e[a])<0&&t.push(e[a]);return t},handleTabClick:function(e){console.log(e),this.activeName=e.name,this.activeTab=e.name,this.userIndex=Number(e.index),this.getMemberBrokenLineGraph()},handleRebateTabClick:function(e){this.rebateIndex=Number(e)},countryLineChange:function(e){console.log(e),this.countryDimension=e,this.getMemberBrokenLineGraph()},dimensionOneChange:function(e){console.log(e),this.activeDimensionOne=e,this.getMemberBrokenLineGraph()},dimensionTwoChange:function(e){this.activeDimensionTwo=e,this.getMemberBrokenLineGraph()},timeTopChange:function(e){this.timeMark="top",this.timeDialogVisible=!0,this.topIndex=e},countryTopChange:function(e){switch(e){case 0:this.getMemberPsIncreaseRankingList();break;case 1:this.getMemberPsIncreaseRiseRankingList();break;case 2:this.getMemberPsIncreaseDropRankingList();break}},getMemberPsIncreaseRankingList:function(){var e=this,t={startTime:moment(this.dateRangeTOPTimeStamp[0][0]).valueOf().toString(),endTime:moment(this.dateRangeTOPTimeStamp[0][1]).valueOf().toString(),countryCode:this.countryCodeList[0]};m(t).then((function(t){1===t.ret.errcode&&(console.log(t),e.tableList[0].splice(0),e.tableList[0]=t.memberData,console.log(e.tableList))}))},getMemberPsIncreaseRiseRankingList:function(){var e=this,t={startTime:moment(this.dateRangeTOPTimeStamp[1][0]).valueOf().toString(),endTime:moment(this.dateRangeTOPTimeStamp[1][1]).valueOf().toString(),countryCode:this.countryCodeList[1]};c(t).then((function(t){1===t.ret.errcode&&(console.log(t),e.tableList[1].splice(0),e.tableList[1]=t.memberData)}))},getMemberPsIncreaseDropRankingList:function(){var e=this,t={startTime:moment(this.dateRangeTOPTimeStamp[2][0]).valueOf().toString(),endTime:moment(this.dateRangeTOPTimeStamp[2][1]).valueOf().toString(),countryCode:this.countryCodeList[2]};u(t).then((function(t){1===t.ret.errcode&&(console.log(t),e.tableList[2].splice(0),e.tableList[2]=t.memberData)}))}}},P=L,I=(a("47d8"),Object(Y["a"])(P,i,n,!1,null,"05e50f88",null));t["default"]=I.exports}}]);