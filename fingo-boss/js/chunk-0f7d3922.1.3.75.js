(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0f7d3922"],{"0375":function(e,t,a){},"03a5":function(e,t,a){},"0ccf":function(e,t,a){},"0cd8":function(e,t,a){"use strict";a.d(t,"O",(function(){return i})),a.d(t,"N",(function(){return o})),a.d(t,"Q",(function(){return n})),a.d(t,"P",(function(){return c})),a.d(t,"M",(function(){return s})),a.d(t,"A",(function(){return l})),a.d(t,"C",(function(){return u})),a.d(t,"R",(function(){return d})),a.d(t,"B",(function(){return p})),a.d(t,"L",(function(){return f})),a.d(t,"E",(function(){return h})),a.d(t,"G",(function(){return m})),a.d(t,"I",(function(){return g})),a.d(t,"K",(function(){return v})),a.d(t,"J",(function(){return y})),a.d(t,"H",(function(){return b})),a.d(t,"F",(function(){return S})),a.d(t,"D",(function(){return I})),a.d(t,"z",(function(){return C})),a.d(t,"l",(function(){return P})),a.d(t,"y",(function(){return k})),a.d(t,"x",(function(){return T})),a.d(t,"m",(function(){return O})),a.d(t,"j",(function(){return D})),a.d(t,"v",(function(){return w})),a.d(t,"w",(function(){return _})),a.d(t,"u",(function(){return L})),a.d(t,"n",(function(){return x})),a.d(t,"r",(function(){return R})),a.d(t,"p",(function(){return A})),a.d(t,"s",(function(){return E})),a.d(t,"q",(function(){return N})),a.d(t,"o",(function(){return $})),a.d(t,"t",(function(){return j})),a.d(t,"i",(function(){return F})),a.d(t,"d",(function(){return V})),a.d(t,"b",(function(){return B})),a.d(t,"h",(function(){return q})),a.d(t,"k",(function(){return M})),a.d(t,"e",(function(){return U})),a.d(t,"f",(function(){return G})),a.d(t,"g",(function(){return z})),a.d(t,"c",(function(){return W})),a.d(t,"a",(function(){return H}));var r=a("284b");function i(e){console.log(e);var t=r["a"].create("PurchaseOrderSavePbReq",e);return Object(r["a"])("erp","PurchaseOrderHandleService.SavePo",t,"purchase.PurchaseOrderSavePbResp")}function o(e){console.log(e);var t=r["a"].create("PurchaseOrderReq",e);return Object(r["a"])("erp","PurchaseOrderService.PurchaseOrderPage",t,"purchase.PurchaseOrderResp")}function n(e){console.log(e);var t=r["a"].create("PoSingleEditReq",e);return Object(r["a"])("erp","PurchaseOrderHandleService.SinglePoEdit",t,"purchase.PoSingleEditResp")}function c(e){console.log(e);var t=r["a"].create("PurchaseOrderSingleMakeupReq",e);return Object(r["a"])("erp","PurchaseOrderHandleService.SingleMakeup",t,"purchase.PurchaseOrderSingleMakeupResp")}function s(e){console.log(e);var t=r["a"].create("PurchasePartCancelReq",e);return Object(r["a"])("erp","PurchaseOrderHandleService.PartCancel",t,"purchase.PurchasePartCancelResp")}function l(e){console.log(e);var t=r["a"].create("PurchaseOrderCancelReq",e);return Object(r["a"])("erp","PurchaseOrderHandleService.AllCancel",t,"purchase.PurchaseOrderCancelResp")}function u(e){console.log(e);var t=r["a"].create("EnsurePurchaseReq",e);return Object(r["a"])("erp","PurchaseOrderHandleService.EnsurePurchase",t,"purchase.EnsurePurchaseResp")}function d(e){console.log(e);var t=r["a"].create("StockOutReq",e);return Object(r["a"])("erp","PurchaseOrderHandleService.Stockout",t,"purchase.StockOutResp")}function p(e){console.log(e);var t=r["a"].create("DeliverReq",e);return Object(r["a"])("erp","PurchaseOrderHandleService.Deliver",t,"purchase.DeliverResp")}function f(e){console.log(e);var t=r["a"].create("ImportShipReq",e);return Object(r["a"])("erp","PurchaseOrderHandleService.ImportShip",t,"purchase.ImportShipResp")}function h(e){console.log(e);var t=r["a"].create("PoDetailReq",e);return Object(r["a"])("erp","PurchaseOrderService.ExportoPo",t,"purchase.ExportPoResp")}function m(e){console.log(e);var t=r["a"].create("PoDetailReq",e);return Object(r["a"])("erp","PurchaseOrderService.GetPurchaseOrder",t,"purchase.PoDetailResp")}function g(e){console.log(e);var t=r["a"].create("PurchaseStatusRateReq",e);return Object(r["a"])("erp","PurchaseOrderService.PurchaseStatusRate",t,"purchase.PurchaseStatusRateResp")}function v(e){console.log(e);var t=r["a"].create("SkuDeliveryDetailReq",e);return Object(r["a"])("erp","PurchaseOrderService.SkuDeliveryDetail",t,"purchase.SkuDeliveryDetailResp")}function y(e){console.log(e);var t=r["a"].create("SkuAbnormalDetailReq",e);return Object(r["a"])("erp","PurchaseOrderService.SkuAbnormalDetail",t,"purchase.SkuAbnormalDetailResp")}function b(e){console.log(e);var t=r["a"].create("PurchaseRelationOrderReq",e);return Object(r["a"])("erp","PurchaseOrderService.PurchaseRelationOrder",t,"purchase.PurchaseRelationOrderResp")}function S(e){var t=r["a"].create("PurchaseOrderReq",e);return Object(r["a"])("erp","PurchaseOrderService.ExportoPos",t,"purchase.ExportPoResp")}function I(e){var t=r["a"].create("PurchaseOrderReq",e);return Object(r["a"])("erp","PurchaseOrderService.ExportShipOrder",t,"purchase.ExportPoResp")}function C(e){var t=r["a"].create("PurchaseStockoutReq",e);return Object(r["a"])("erp","PurchaseOrderHandleService.PurchaseStockout",t,"purchase.PurchaseStockoutResp")}function P(e){var t=r["a"].create("GetStockoutDataReq",e);return Object(r["a"])("erp","PurchaseOrderService.GetStockoutData",t,"purchase.GetStockoutDataResp")}function k(e){var t=r["a"].create("PurchaseSkuOrderPageReq",e);return Object(r["a"])("erp","PurchaseOrderService.PurchaseSkuOrderPage",t,"purchase.PurchaseSkuOrderPageResp")}function T(e){var t=r["a"].create("PurchaseSkuOrderExportReq",e);return Object(r["a"])("erp","PurchaseOrderService.PurchaseSkuOrderExport",t,"purchase.PurchaseSkuOrderExportResp")}function O(e){var t=r["a"].create("ImportBatchPurchaseReq",e);return Object(r["a"])("erp","PurchaseOrderHandleService.ImportBatchPurchase",t,"purchase.ImportBatchPurchaseResp")}function D(e){var t=r["a"].create("ExportPurEnsureTemplateReq",e);return Object(r["a"])("erp","PurchaseOrderService.ExportPurEnsureTemplate",t,"purchase.ExportPurEnsureTemplateResp")}function w(e){var t=r["a"].create("PurEnsureImportPageReq",e);return Object(r["a"])("erp","PurchaseOrderService.PurEnsureImportPage",t,"purchase.PurEnsureImportPageResp")}function _(e){var t=r["a"].create("PurExportTaskPageReq",e);return Object(r["a"])("erp","PurchaseOrderService.PurExportTaskPage",t,"purchase.PurExportTaskPageResp")}function L(e){var t=r["a"].create("PurEnsureImportDetailPageReq",e);return Object(r["a"])("erp","PurchaseOrderService.PurEnsureImportDetailPage",t,"purchase.PurEnsureImportDetailPageResp")}function x(e){var t=r["a"].create("PurCateGroupAddReq",e);return Object(r["a"])("erp","PurCateGroupService.SaveAndUpdate",t,"purchase.PurCateGroupAddResp")}function R(e){var t=r["a"].create("PurCateGroupQueryReq",e);return Object(r["a"])("erp","PurCateGroupService.GetPurCateGroupList",t,"purchase.PurCateGroupListResp")}function A(e){var t=r["a"].create("PurCateGroupDetailReq",e);return Object(r["a"])("erp","PurCateGroupService.PurCateGroupDetail",t,"purchase.PurCateGroupDetailResp")}function E(e){var t=r["a"].create("PurCateGroupQueryReq",e);return Object(r["a"])("erp","PurCateGroupService.GetPurCateGroupBuyerList",t,"purchase.PurCateGroupBuyerListResp")}function N(e){var t=r["a"].create("PurCateGroupEditBuyerReq",e);return Object(r["a"])("erp","PurCateGroupService.EditBuyerGroup",t,"purchase.PurCateGroupEditBuyerResp")}function $(e){var t=r["a"].create("PurCateGroupBuyerDetailReq",e);return Object(r["a"])("erp","PurCateGroupService.PurCateGroupBuyerDetail",t,"purchase.PurCateGroupBuyerDetailResp")}function j(e){var t=r["a"].create("PurCateGroupSelectReq",e);return Object(r["a"])("erp","PurCateGroupService.GetPurCateGroupSelect",t,"purchase.PurCateGroupSelectResp")}function F(e){var t=r["a"].create("DeletePurCateGroupBuyerReq",e);return Object(r["a"])("erp","PurCateGroupService.DeletePurCateGroupBuyer",t,"purchase.DeletePurCateGroupBuyerResp")}function V(e){var t=r["a"].create("AutoPurchaseOrderListReq",e);return Object(r["a"])("erp","PurchaseAutoService.AutoPurchaseList",t,"purchase.AutoPurchaseOrderListResp")}function B(e){var t=r["a"].create("AutoPayCheckReq",e);return Object(r["a"])("erp","PurchaseAutoService.AutoPayCheck",t,"purchase.AutoPayCheckResp")}function q(e){var t=r["a"].create("CanPayBatchReq",e);return Object(r["a"])("erp","PurchaseAutoService.CanPayBatch",t,"purchase.CanPayBatchResp")}function M(e){var t=r["a"].create("GeneratePayUrlReq",e);return Object(r["a"])("erp","PurchaseAutoService.GeneratePayUrl",t,"purchase.GeneratePayUrlResp")}function U(e){var t=r["a"].create("AutoPurchaseSkuCancelReq",e);return Object(r["a"])("erp","PurchaseAutoService.AutoPurchaseSkuCancel",t,"purchase.AutoPurchaseSkuCancelResp")}function G(e){var t=r["a"].create("AutoPurchaseSkuPriceReq",e);return Object(r["a"])("erp","PurchaseAutoService.AutoPurchaseSkuPrice",t,"purchase.AutoPurchaseSkuPriceResp")}function z(e){var t=r["a"].create("AutoPurchaseUpdateReq",e);return Object(r["a"])("erp","PurchaseAutoService.AutoPurchaseUpdate",t,"purchase.AutoPurchaseUpdateResp")}function W(e){var t=r["a"].create("AutoPurchaseDetailReq",e);return Object(r["a"])("erp","PurchaseAutoService.AutoPurchaseDetail",t,"purchase.AutoPurchaseDetailResp")}function H(e){var t=r["a"].create("AutoBatchPurchaseReq",e);return Object(r["a"])("erp","PurchaseAutoService.AutoBatchPurchase",t,"purchase.AutoBatchPurchaseResp")}},1263:function(e,t,a){"use strict";var r=a("8cf7"),i=a.n(r);i.a},"13b4":function(e,t,a){"use strict";var r=a("6b88"),i=a.n(r);i.a},1699:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container back-category"},[a("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"后台类目",name:"1"}}),a("el-tab-pane",{attrs:{label:"类目分组",name:"2"}}),a("el-tab-pane",{attrs:{label:"类目权限",name:"3"}})],1),1==e.activeName?a("div",{staticClass:"main-content-wrapper category"},[a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:8}},[a("category-card",{attrs:{level:1,categoryList:e.categoryListLevelOne},on:{"on-create":e.createCategory,"on-select":e.handleItemSelect,"on-edit":e.handleItemEdit,"on-delete":e.handleItemDelete,"on-end-sort":e.handleItemSort}})],1),a("el-col",{attrs:{span:8}},[a("category-card",{attrs:{level:2,parentInfo:e.levelOne,categoryList:e.categoryListLevelTwo},on:{"on-select":e.handleItemSelect,"on-create":e.createCategory,"on-edit":e.handleItemEdit,"on-delete":e.handleItemDelete,"on-end-sort":e.handleItemSort}})],1),a("el-col",{attrs:{span:8}},[a("category-card",{attrs:{level:3,parentInfo:e.levelTwo,categoryList:e.categoryListLevelThree},on:{"on-select":e.handleItemSelect,"on-create":e.createCategory,"on-edit":e.handleItemEdit,"on-delete":e.handleItemDelete,"on-end-sort":e.handleItemSort}})],1)],1)],1):e._e(),2==e.activeName?a("div",{staticClass:"add_category"},[a("addCategory",{ref:"addCategorys"})],1):e._e(),3==e.activeName?a("div",{staticClass:"auth_category"},[a("authCategory",{ref:"authCategory"})],1):e._e(),a("back-category-edit",{ref:"categoryEdit",attrs:{editType:e.editType,level:e.categoryLevel,parentInfo:e.parentInfo,categoryData:e.categoryData,dialogVisible:e.categoryEditVisible},on:{"on-confirm":e.confirmEdit,"on-cancle":e.cancleEdit}}),a("confirm-dialog",{attrs:{dialogVisible:e.confirmVisible,title:e.confirmDialogTitle,text:e.confirmDialogText},on:{"on-cancle":e.cancleConfirm,"on-confirm":e.submitDel}})],1)},i=[],o=(a("7f7f"),a("ac6a"),a("2ef0")),n=a.n(o),c=a("310e"),s=a.n(c),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"edit-category-dialog"},[a("el-dialog",{attrs:{title:e.dialogTitle,visible:e.toggle,width:"950px",top:"5vh","close-on-click-modal":!1},on:{"update:visible":function(t){e.toggle=t},close:e.cancle}},[a("el-form",{ref:"categoryEditForm",attrs:{model:e.categoryModel,rules:e.ruleValidate,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"类目名：",prop:"name"}},[a("table",{staticClass:"table table-bordered table-info"},[a("tbody",e._l(e.languageList,(function(t,r){return a("tr",{key:r},[a("th",["cn"!==t.code&&"en"!==t.code||"check"==e.type?e._e():a("span",{staticClass:"required"},[e._v("*")]),e._v(" "+e._s(t.desc)+e._s(t.code)+" ")]),a("td",[a("el-input",{attrs:{clearable:"",size:"medium",placeholder:"请输入类目名",maxlength:"30"},on:{blur:e.changeValue},model:{value:e.categoryModel.nameList[t.code],callback:function(a){e.$set(e.categoryModel.nameList,t.code,a)},expression:"categoryModel.nameList[item.code]"}})],1)])})),0)])]),1!==e.parentInfo.level?a("el-form-item",{attrs:{label:"父类目：",prop:"pid"}},[a("el-select",{attrs:{disabled:"add"===e.editType,filterable:"",size:"medium",placeholder:"请选择"},model:{value:e.parentInfo.pid,callback:function(t){e.$set(e.parentInfo,"pid",t)},expression:"parentInfo.pid"}},e._l(e.parentOptions,(function(e){return a("el-option",{key:e.cateId,attrs:{label:e.cateName,value:e.cateId}})})),1)],1):e._e(),a("el-form-item",{attrs:{label:"类目级别：",prop:"level"}},[1===e.parentInfo.level?a("span",[e._v("一级类目")]):e._e(),2===e.parentInfo.level?a("span",[e._v("二级类目")]):e._e(),3===e.parentInfo.level?a("span",[e._v("三级类目")]):e._e()]),a("el-form-item",{attrs:{label:"类目图："}},[e.toggle?a("c-upload",{attrs:{fileList:e.categoryModel.cover},on:{setData:e.setCoverImg}}):e._e(),a("div",[e._v("尺寸800*800像素以上，大小2M以下，支持jpg/jpeg/png格式")])],1),a("el-form-item",{attrs:{label:"分类描述：",prop:"desc"}},[a("el-input",{attrs:{type:"textarea",clearable:"",maxlength:"50","show-word-limit":"",autosize:{minRows:2,maxRows:3},placeholder:"可输入50字以内的文案描述本类目"},model:{value:e.categoryModel.desc,callback:function(t){e.$set(e.categoryModel,"desc",t)},expression:"categoryModel.desc"}})],1),a("el-form-item",{attrs:{label:"参数属性：",prop:"parameter"}},[a("el-select",{attrs:{clearable:"",filterable:"",remote:"",size:"medium","remote-method":e.getProductAttrForParam,placeholder:"请选择"},on:{change:e.onSelectChangeForParam,clear:e.getProductAttrForParam},model:{value:e.categoryModel.parameter,callback:function(t){e.$set(e.categoryModel,"parameter",t)},expression:"categoryModel.parameter"}},e._l(e.paramAttrOptions,(function(e){return a("el-option",{key:e.attrId,attrs:{label:e.attrName,value:e.attrId}})})),1),a("attr-sortable-table",{attrs:{listData:e.paramAttrList},on:{"on-remove":e.removeParamAttr}})],1),a("el-form-item",{attrs:{label:"规格属性：",prop:"specification"}},[a("el-select",{attrs:{clearable:"",filterable:"",remote:"",size:"medium","remote-method":e.getProductAttrForStandard,placeholder:"请选择"},on:{change:e.onSelectChangeForStandard,clear:e.getProductAttrForStandard},model:{value:e.categoryModel.paramAttr,callback:function(t){e.$set(e.categoryModel,"paramAttr",t)},expression:"categoryModel.paramAttr"}},e._l(e.standardAttrOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.attrName,value:e.attrId}})})),1),a("attr-sortable-table",{attrs:{listData:e.standardAttrList},on:{"on-remove":e.removeStandardAttr}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:e.cancle}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.confirm}},[e._v("确 定")])],1)],1)],1)},u=[],d=(a("28a5"),a("c5f6"),a("aa47")),p=a("f09b"),f=a("9576"),h=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-table",{ref:"dragTable",staticStyle:{width:"100%","margin-top":"16px"},attrs:{data:e.listData,"row-key":"attrId",fit:"","highlight-current-row":"","header-cell-style":{background:"#F5F7FA",color:"#606266"}}},[a("el-table-column",{attrs:{label:"属性ID",align:"center",width:"70"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.attrId))])]}}])}),a("el-table-column",{attrs:{label:"中文cn",width:"110px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.cn))])]}}])}),a("el-table-column",{attrs:{label:"英文en",width:"110px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.en))])]}}])}),a("el-table-column",{attrs:{label:"马来语ms",width:"110px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.ms))])]}}])}),a("el-table-column",{attrs:{label:"泰语th",width:"110px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.th))])]}}])}),a("el-table-column",{attrs:{label:"自定义",width:"100px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.customize))])]}}])}),a("el-table-column",{attrs:{align:"center",label:"操作",width:"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"}},[a("i",{staticClass:"el-icon-s-operation"})]),a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.removeAttr(t.row.attrId)}}},[a("i",{staticClass:"el-icon-close"})])]}}])})],1)],1)},m=[],g={name:"AttrSortableTable",props:{listData:{type:Array,default:function(){return[]}}},data:function(){return{list:[{id:1,cn:"颜色",en:"color",ms:"warna",th:"สี",custom:"允许"},{id:2,cn:"材质",en:"color",ms:"warna",th:"สี",custom:"禁止"},{id:3,cn:"大小",en:"size",ms:"warna",th:"สี",custom:"允许"},{id:5,cn:"材质",en:"color",ms:"warna",th:"สี",custom:"禁止"},{id:4,cn:"大小",en:"size",ms:"warna",th:"สี",custom:"允许"}],sortable:null,oldList:[],newList:[]}},components:{},mounted:function(){this.setSort()},methods:{setSort:function(){var e=this,t=this.$refs.dragTable.$el.querySelectorAll(".el-table__body-wrapper > table > tbody")[0];this.sortable=d["default"].create(t,{ghostClass:"sortable-ghost",setData:function(e){e.setData("Text","")},onEnd:function(t){var a=e.listData.splice(t.oldIndex,1)[0];e.listData.splice(t.newIndex,0,a);var r=e.newList.splice(t.oldIndex,1)[0];e.newList.splice(t.newIndex,0,r),console.log(e.newList)}})},removeAttr:function(e){this.$emit("on-remove",e)}}},v=g,y=a("2877"),b=Object(y["a"])(v,h,m,!1,null,"210d1bf1",null),S=b.exports,I={name:"BackCategoryEdit",props:{dialogVisible:{type:Boolean,default:!1},editType:{type:String,default:"add"},level:{type:Number,default:1},parentInfo:{type:Object,default:function(){return{}}},categoryData:{type:Object,default:function(){return{}}}},data:function(){var e=this,t=function(t,a,r){e.hasFmt?r():r(new Error("类目名不能为空"))};return{ruleValidate:{name:[{required:!0,validator:t,trigger:"blur"}],pid:[{required:!0}]},hasFmt:!1,parentOptions:[],paramAttrOptions:[],standardAttrOptions:[],sortable:null,oldList:[],newList:[],paramAttrList:[],standardAttrList:[],categoryListLevelOne:[],categoryListLevelTwo:[],categoryListLevelThree:[],categoryLinkStr:"",languageList:[]}},components:{AttrSortableTable:S,cUpload:p["a"]},computed:{toggle:{get:function(){return this.dialogVisible&&(this.languageList=JSON.parse(this.getStore("languageList"))),this.dialogVisible},set:function(){}},dialogTitle:{get:function(){return"add"===this.editType?"新增后台类目":"编辑后台类目"},set:function(){}},categoryModel:function(){return console.log(this.categoryData),this.categoryData}},mounted:function(){this.getProductAttrForParam(),this.getProductAttrForStandard()},methods:{changeValue:function(e){this.categoryModel.nameList["cn"]&&this.categoryModel.nameList["en"]?(this.hasFmt=!0,this.$refs["categoryEditForm"].validateField("name")):(this.hasFmt=!1,this.$refs["categoryEditForm"].validateField("name"))},setCoverImg:function(e){this.parentInfo.cover=e.data},cancle:function(){this.$emit("on-cancle"),this.reset()},confirm:function(){var e=this;this.$refs.categoryEditForm.validate((function(t){if(t){if(""===e.categoryModel.nameList["cn"].trim()||""===e.categoryModel.nameList["en"].trim())return void e.$message.warning("类目名称中文、英文不能为空");var a=[],r=[];n.a.forEach(e.paramAttrList,(function(e){a.push(e.attrId)})),n.a.forEach(e.standardAttrList,(function(e){r.push(e.attrId)})),e.categoryModel.paramAttrId=a.toString(),e.categoryModel.standardAttrId=r.toString();var i=n.a.pick(e.categoryModel,["desc","paramAttrId","standardAttrId"]),o=[];n.a.forEach(e.categoryModel.nameList,(function(e,t){var a={languageCode:t,name:e};o.push(a)})),i.cateType=2,i.level=e.parentInfo.level,i.pid=e.parentInfo.pid,i.cover=e.parentInfo.cover,i.cateNameValue=o,"edit"===e.editType&&(i.cateId=e.categoryModel.cateId),e.$emit("on-confirm",i),e.reset()}}))},reset:function(){this.$refs.categoryEditForm.resetFields(),this.paramAttrList=[],this.standardAttrList=[]},translate:function(){},delAttrValue:function(){var e="黑色";this.confirmVisible=!0,this.confirmDialogTitle="确定删除该属性值？",this.confirmDialogText="删除属性值“".concat(e,"”不影响现有类目和商品，但一经删除无法恢复")},getCategoryList:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(1!==this.parentInfo.level){var a={cateType:2,page:{pageNum:1,pageSize:1e3}};a.pid=t,Object(f["V"])(a).then((function(t){var a=t;if(1===a.ret.errcode){var r=[];n.a.forEach(a.categoryUnit,(function(e){e.cateName=e.cateNameValue[0].name,e.value=e.cateId,e.label=e.cateNameValue[0].name,e.children=[],r.push(e)})),e.parentOptions=r}})).catch((function(e){console.error(e)}))}},getProductAttrForParam:function(e){var t=this,a={attrNameKey:e,attrNameLanguageCode:"cn",page:{pageNum:1,pageSize:1e3}};Object(f["Kb"])(this.filterData(a)).then((function(e){var a=e;1===a.ret.errcode&&(t.paramAttrOptions=a.productAttr)}))},onSelectChangeForParam:function(e){var t=this,a={attrId:e};Object(f["Lb"])(a).then((function(a){var r=a,i={};n.a.forEach(r.attrName,(function(e){i[e.languageCode]=e.name})),i.attrId=r.attrId,i.customize=1===r.customize?"允许":"禁止",!t.attrExist(t.paramAttrList,i)&&e&&t.paramAttrList.push(i)}))},getProductAttrForStandard:function(e){var t=this,a={attrNameKey:e,attrNameLanguageCode:"cn",page:{pageNum:1,pageSize:1e3}};Object(f["Kb"])(this.filterData(a)).then((function(e){var a=e;1===a.ret.errcode&&(t.standardAttrOptions=a.productAttr)}))},onSelectChangeForStandard:function(e){var t=this,a={attrId:e};Object(f["Lb"])(a).then((function(a){var r=a,i={};n.a.forEach(r.attrName,(function(e){i[e.languageCode]=e.name})),i.attrId=r.attrId,i.customize=1===r.customize?"允许":"禁止",!t.attrExist(t.standardAttrList,i)&&e&&t.standardAttrList.push(i)}))},removeParamAttr:function(e){var t=-1;n.a.forEach(this.paramAttrList,(function(a,r){a.attrId===e&&(t=r)})),this.paramAttrList.splice(t,1)},removeStandardAttr:function(e){var t=-1;n.a.forEach(this.standardAttrList,(function(a,r){a.attrId===e&&(t=r)})),this.standardAttrList.splice(t,1)},attrExist:function(e,t){var a=!1;return n.a.forEach(e,(function(e){e.attrId===t.attrId&&(a=!0)})),a},handleChange:function(e){console.log(e)},getBatchProductAttr:function(){var e=this,t=null,a=null;""!=this.categoryModel.paramAttrId&&(t=this.categoryModel.paramAttrId.split(",")),""!=this.categoryModel.standardAttrId&&(a=this.categoryModel.standardAttrId.split(","));var r={paramAttrId:t,standardAttrId:a,filterHiddenAttrValue:!0};Object(f["Mb"])(this.filterData(r)).then((function(t){if(1===t.ret.errcode){var a=t.paramAttr,r=t.standardAttr,i=[],o=[];n.a.forEach(a,(function(e){var t={};t.attrId=e.attrId,t.customize=1===e.customize?"允许":"禁止",n.a.forEach(e.attrName,(function(e,a){t[e.languageCode]=e.name})),i.push(t)})),e.paramAttrList=i,n.a.forEach(r,(function(e){var t={};t.attrId=e.attrId,t.customize=1===e.customize?"允许":"禁止",n.a.forEach(e.attrName,(function(e,a){t[e.languageCode]=e.name})),o.push(t)})),e.standardAttrList=o}}))}}},C=I,P=(a("75f3"),Object(y["a"])(C,l,u,!1,null,null,null)),k=P.exports,T=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"add_category"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline,"label-width":"80px","label-position":"left"}},[a("el-form-item",{attrs:{label:"用户搜索:"}},[a("el-input",{staticStyle:{width:"250px"},attrs:{placeholder:"请输入真实姓名"},model:{value:e.formInline.buyerName,callback:function(t){e.$set(e.formInline,"buyerName",t)},expression:"formInline.buyerName"}})],1),a("el-form-item",{attrs:{label:"类目分组:"}},[a("el-input",{attrs:{placeholder:"请输入类目分组"},model:{value:e.formInline.groupName,callback:function(t){e.$set(e.formInline,"groupName",t)},expression:"formInline.groupName"}})],1),a("el-form-item",{attrs:{label:"后台类目:"}},[a("el-cascader",{staticClass:"normalOperatorBox",staticStyle:{width:"300px"},attrs:{clearable:"",filterable:"",props:{label:"cateName",children:"levelValue",value:"cateId",lazy:!0,lazyLoad:e.getBackSubCategory,checkStrictly:!0,emitPath:!1},placeholder:"请选择商品后台分组",options:e.backCategoryOptions,size:"medium"},model:{value:e.formInline.cateId,callback:function(t){e.$set(e.formInline,"cateId",t)},expression:"formInline.cateId"}})],1),a("el-form-item",[a("el-button",{attrs:{icon:"el-icon-search",type:"primary",size:"medium"},on:{click:function(t){return e.getPurCateGroupList(0)}}},[e._v("搜索")]),a("el-button",{attrs:{icon:"el-icon-refresh-left",size:"medium"},on:{click:e.resetSearch}},[e._v("重置")])],1)],1),a("div",[e.hasPermission("BTN_CATE_GROUP_ADD")?a("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:e.addCategory}},[e._v("新增类目分组")]):e._e()],1),a("div",{staticClass:"add_table"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%","text-align":"center"},attrs:{data:e.tableData,"highlight-current-row":"",border:""}},[a("el-table-column",{attrs:{type:"index",width:"50",label:"序号",align:"center"}}),a("el-table-column",{attrs:{property:"groupName",label:"类目分组名",align:"center",width:"120"}}),a("el-table-column",{attrs:{label:"后台类目",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.returnName(t.row.cateList),placement:"top"}},[a("span",{staticClass:"block-right",staticStyle:{display:"-webkit-box",overflow:"hidden","white-space":"normal !important","text-overflow":"ellipsis","word-wrap":"break-word","-webkit-line-clamp":"3","-webkit-box-orient":"vertical","text-align":"center",margin:"5px 0"}},[e._v(e._s(e.returnName(t.row.cateList)))])])]}}])}),a("el-table-column",{attrs:{label:"用户",width:"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.buyerList,(function(t,r){return a("el-tag",{key:r,staticStyle:{margin:"5px"},attrs:{type:"info"}},[e._v(e._s(t.buyerName))])}))}}])}),a("el-table-column",{attrs:{property:"createTime",label:"创建时间",width:"200",align:"center"}}),a("el-table-column",{attrs:{property:"updateTime",label:"更新时间",width:"200",align:"center"}}),a("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.hasPermission("BTN_CATE_GROUP_EDIT")?a("el-link",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary",underline:!1},on:{click:function(a){return e.editCategory(t.row,"edit")}}},[e._v("编辑")]):e._e(),e.hasPermission("BTN_CATE_GROUP_DETAIL")?a("el-link",{attrs:{type:"primary",underline:!1},on:{click:function(a){return e.editCategory(t.row,"watch")}}},[e._v("查看详情")]):e._e()]}}])})],1)],1),a("div",{staticClass:"add_page"},[a("el-pagination",{attrs:{"page-sizes":[10,20,30,50],"page-size":e.formInline.page.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),a("el-dialog",{attrs:{title:"新增类目分组",visible:e.dialogFormVisible,width:"80%","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("div",{staticClass:"dialog_title"},[a("p",[e._v("1、类目分组名保存后不支持变更")]),a("p",[e._v("2、类目分组保存后不支持删除")]),a("p",[e._v("3、若有后台类目未被分组，后续产生的采购单将进入采购单列表‘未分组’标签页，须建立对应类目分组后才可操作")])]),a("div",{staticClass:"dialog_form"},[a("div",{staticClass:"dialog_left"},[a("el-form",{ref:"categoryForm",attrs:{model:e.categoryForm,"label-width":"100px"}},e._l(e.categoryForm.categoryUser,(function(t,r){return a("div",{key:r,staticStyle:{display:"flex"}},[a("el-form-item",{attrs:{label:"类目分组名:",prop:"categoryUser."+r+".groupName",rules:{required:!0,message:"类目分组名不能为空",trigger:"blur"}}},[a("el-input",{model:{value:t.groupName,callback:function(a){e.$set(t,"groupName",a)},expression:"item.groupName"}})],1),a("el-form-item",{attrs:{label:"后台类目:",prop:"categoryUser."+r+".cateId",rules:{required:!0,message:"后台类目不能为空",trigger:"blur"}}},[a("el-cascader",{staticClass:"normalOperatorBox",staticStyle:{width:"250px"},attrs:{clearable:"",filterable:"","show-all-levels":!1,props:{label:"cateName",children:"cateList",value:"cateId",lazy:!0,lazyLoad:e.getBackSubCategory,checkStrictly:!1,multiple:!0,disabled:"isDisabled",emitPath:!1},placeholder:"请选择商品后台分组",options:e.backCategoryOptions,size:"medium"},on:{change:e.setBackCateId},model:{value:t.cateId,callback:function(a){e.$set(t,"cateId",a)},expression:"item.cateId"}})],1),a("el-form-item",{attrs:{"label-width":"60px",label:"用户:",prop:"categoryUser."+r+".userId",rules:{required:!0,message:"用户不能为空",trigger:"change"}}},[a("el-select",{attrs:{multiple:"",clearable:""},model:{value:t.userId,callback:function(a){e.$set(t,"userId",a)},expression:"item.userId"}},e._l(e.buyerList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.realName,value:e.sysUserId}})})),1)],1),a("el-link",{staticStyle:{"margin-bottom":"15px","margin-left":"10px",width:"60px"},attrs:{type:"primary",underline:!1},on:{click:function(t){return t.preventDefault(),e.removeCatgory(r)}}},[e._v("删除")])],1)})),0)],1),a("div",{staticClass:"dialog_right"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.addNewCategory}},[e._v("新增分组")])],1)]),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.AddCategoryForm("categoryForm")}}},[e._v("确 定")])],1)]),a("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialogEdit,width:"60%"},on:{"update:visible":function(t){e.dialogEdit=t}}},[a("div",{staticClass:"dialog_title"},[a("p",[e._v("1、类目分组名保存后不支持变更")]),a("p",[e._v("2、类目分组保存后不支持删除")]),a("p",[e._v("3、若有后台类目未被分组，后续产生的采购单将进入采购单列表‘未分组’标签页，须建立对应类目分组后才可操作")])]),a("el-form",{ref:"editCategoryForm",attrs:{model:e.editCategoryForm,rules:e.editCategoryFormRules}},[a("el-form-item",{attrs:{label:"类目分组名","label-width":e.formLabelWidth,prop:"groupName"}},[a("el-input",{attrs:{autocomplete:"off",disabled:""},model:{value:e.editCategoryForm.groupName,callback:function(t){e.$set(e.editCategoryForm,"groupName",t)},expression:"editCategoryForm.groupName"}})],1),a("el-form-item",{attrs:{label:"用户","label-width":e.formLabelWidth,prop:"userId"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择用户",multiple:"",disabled:1==e.editForm},model:{value:e.editCategoryForm.userId,callback:function(t){e.$set(e.editCategoryForm,"userId",t)},expression:"editCategoryForm.userId"}},e._l(e.buyerList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.realName,value:e.sysUserId}})})),1)],1),a("div",[e.editForm?e._e():a("el-form-item",{attrs:{label:"后台类目",prop:"cateId","label-width":e.formLabelWidth}},[a("el-cascader",{key:e.isResouceShow,staticClass:"normalOperatorBox",staticStyle:{width:"100%"},attrs:{clearable:"",disabled:e.editForm,"show-all-levels":!1,props:{label:"cateName",children:"cateList",value:"cateId",lazy:!0,lazyLoad:e.getBackSubCategoryEdit,checkStrictly:!1,multiple:!0,disabled:"isDisabled",emitPath:!1},placeholder:"请选择商品后台分组",options:e.backCategoryOptionsEdit,size:"medium"},on:{change:e.selectEdit},model:{value:e.editCategoryForm.cateId,callback:function(t){e.$set(e.editCategoryForm,"cateId",t)},expression:"editCategoryForm.cateId"}})],1)],1),a("div",[e.editForm?a("el-form-item",{attrs:{label:"后台类目",prop:"cateId","label-width":e.formLabelWidth}},[a("el-cascader-panel",{key:e.isResouceShow,attrs:{disabled:"",options:e.backCategoryOptionsWatch,props:{label:"cateName",children:"cateList",value:"cateId",checkStrictly:!1,emitPath:!1},"collapse-tags":""},on:{change:e.selsectData},model:{value:e.editCategoryForm.cateIdone,callback:function(t){e.$set(e.editCategoryForm,"cateIdone",t)},expression:"editCategoryForm.cateIdone"}})],1):e._e()],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogEdit=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.updateCateGroup("editCategoryForm")}}},[e._v("确 定")])],1)],1)],1)},O=[],D=a("7618"),w=(a("7514"),a("6b54"),a("e7c2")),L=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"category-card"},[a("el-card",{staticClass:"box-card",style:{height:e.cardHeight+"px"},attrs:{shadow:"never"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"}),a("div",{staticClass:"category-list"},e._l(e.categoryList,(function(t){return a("div",{key:t.cateId,staticClass:"list-group-item",class:{active:e.active===t.cateName},on:{click:function(a){return e.selectItem(t)}}},[a("p",{staticClass:"category-name"},[e._v(e._s(t.cateId)+" "+e._s(t.cateName))])])})),0)])],1)},x=[],R={name:"CategoryForCard",inject:["page"],props:{level:{type:Number,default:1},categoryList:{type:Array,default:function(){return[]}}},data:function(){return{active:"",cardHeight:300,item:null}},computed:{levelText:function(){var e=["一级","二级","三级"];return e[this.level-1]}},watch:{categoryList:function(e,t){e.length>0&&(this.active=e[0].cateName,this.selectItem(e[0]))}},created:function(){"product"===this.page?this.enableSort=!1:this.hasPermission("BTN_BACK_CATE_SORT")?this.enableSort=!0:this.enableSort=!1},mounted:function(){"product"===this.page&&(this.cardHeight=300)},methods:{selectItem:function(e){this.active=e.cateName,this.$emit("on-select",{cateId:e.cateId,level:this.level})},cancleConfirm:function(){this.confirmVisible=!1}}},A=R,E=(a("eef9"),Object(y["a"])(A,L,x,!1,null,"3c002591",null)),N=E.exports,$=a("0cd8"),j={name:"addCategory",components:{CategoryForCard:N},data:function(){var e=this,t=function(t,a,r){0==e.editCategoryForm.userId.length?r(new Error("请选择用户")):r()},a=function(t,a,r){0==e.editCategoryForm.cateId.length?r(new Error("请选择后台类目")):r()};return{dialogVisible:!1,formInline:{buyerName:"",groupName:"",cateId:[],page:{pageSize:20,pageNum:1}},tableData:[],backCategoryOptionsWatch:[],total:0,categoryForm:{categoryUser:[{groupName:"",cateId:[],userId:[]}]},dialogFormVisible:!1,backCategoryOptions:[],backCategoryOptionsWatchSecond:[],backCategoryOptionsWatchThree:[],buyerList:[],dialogTitle:"编辑类目分组",dialogEdit:!1,formLabelWidth:"100px",editCategoryForm:{groupName:"",cateId:[],userId:[],groupId:"",cateIdone:""},editCategoryFormRules:{groupName:[{required:!0,message:"请输入类目名称",tirgger:"blur"}],cateId:[{required:!0,validator:a,tirgger:"change"}],userId:[{required:!0,validator:t,tirgger:"change"}]},editForm:!1,loading:!0,backCategoryOptionsEdit:[],editType:0,isResouceShow:0,watchForm:{groupName:"",buyerIds:[]}}},computed:{},watch:{},mounted:function(){var e=this;this.fetchCategory({level:1,cateType:2,resolve:function(t){e.backCategoryOptions=t}}),this.getPurCateGroupList(0)},methods:{watchCategory:function(e){this.dialogVisible=!0},removeCate:function(e){},selectEditCategory:function(e){var t=this;console.log(e),1==e.level?_.forEach(this.backCategoryOptionsWatch,(function(a){a.cateId==e.cateId&&(t.backCategoryOptionsWatchSecond=a.cateList,t.backCategoryOptionsWatchThree=a.cateList[0].cateList)})):2==e.level&&_.forEach(this.backCategoryOptionsWatch,(function(a){_.forEach(a.cateList,(function(a){e.cateId==a.cateId&&(t.backCategoryOptionsWatchThree=a.cateList)}))}))},returnName:function(e){var t=[];return _.forEach(e,(function(e){t.push(e.cateName)})),t.join(",")},returnUser:function(e){var t=[];return _.forEach(e,(function(e){t.push(e.buyerName)})),t.join(",")},resetSearch:function(){this.formInline.buyerName="",this.formInline.groupName="",this.formInline.cateId=[]},getPurCateGroupList:function(e){var t=this;0==e&&(this.formInline.page.pageNum=1),this.loading=!0,Object($["r"])(this.filterData(this.formInline)).then((function(e){1==e.ret.errcode&&(t.tableData=e.groupPB,t.total=e.total,t.loading=!1)})).catch((function(e){}))},handleSizeChange:function(e){this.formInline.page.pageSize=e,this.getPurCateGroupList()},handleCurrentChange:function(e){this.formInline.page.pageNum=e,this.getPurCateGroupList()},addCategory:function(){this.dialogFormVisible=!0,this.editType=0},addNewCategory:function(){this.categoryForm.categoryUser.push({groupName:"",cateId:[],userId:[]})},removeCatgory:function(e){0==e||this.categoryForm.categoryUser.splice(e,1)},AddCategoryForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;var a={pbList:[]};_.forEach(t.categoryForm.categoryUser,(function(e){a.pbList.push(e)})),Object($["n"])(a).then((function(e){1==e.ret.errcode&&(t.dialogFormVisible=!1,t.categoryForm.categoryUser=[{groupName:"",cateId:[],userId:[]}],t.getPurCateGroupList())})).catch((function(e){console.log(e)}))}))},getBackSubCategory:function(e,t){if(0!=e.level){console.log(e);var a=JSON.parse(e.value);this.fetchCategory({pid:parseInt(a),cateType:2,level:e.level+1,resolve:t})}},getBackSubCategoryEdit:function(e,t){if(0!=e.level){console.log(e);var a=JSON.parse(e.value);this.fetchCategoryEdit({pid:parseInt(a),cateType:2,level:e.level+1,resolve:t})}},fetchCategoryEdit:function(e){var t=this,a=e.id,r=e.cateType,i=e.level,o=e.pid,n=e.page,c=e.resolve;Object(f["V"])(this.filterData({pid:o,id:a,level:i,cateType:r,page:n})).then((function(e){if(1===e.ret.errcode){_.forEach(e.categoryUnit,(function(e,t){e["cateId"]=e["cateId"].toString(),3==i&&(e["leaf"]=!0)}));for(var a=function(a){e.categoryUnit[a]["cateList"]=[];var o=e.categoryUnit[a].cateNameValue.find((function(e){return"cn"==e.languageCode}));e.categoryUnit[a]["cateName"]=o?o.name:"",e.categoryUnit[a]["leaf"]=2==r?i>2:i>1,2==i?(_.forEach(t.backCategoryOptionsEdit,(function(t){_.forEach(t.cateList,(function(t){_.forEach(e.categoryUnit,(function(a,r){a&&a.cateId==t.cateId&&e.categoryUnit.splice(r,1)}))}))})),_.forEach(t.editCategoryForm.cateId,(function(e,a){t.$set(t.editCategoryForm.cateId,a,e)}))):3==i&&(delete e.categoryUnit[a].cateList,e.categoryUnit[a]["leaf"]=!0,_.forEach(t.backCategoryOptionsEdit,(function(t){_.forEach(t.cateList,(function(t){_.forEach(t.cateList,(function(t){_.forEach(e.categoryUnit,(function(r,i){r?r.cateId==t.cateId&&e.categoryUnit.splice(i,1):e.categoryUnit[a].cateId=e.categoryUnit[a].cateId.toString()}))}))}))})),_.forEach(t.editCategoryForm.cateId,(function(e,a){t.$set(t.editCategoryForm.cateId,a,e)})))},o=0;o<e.categoryUnit.length;o++)a(o);c&&c(e.categoryUnit,e),console.log(e.categoryUnit)}}))},fetchCategory:function(e){var t=this,a=e.id,r=e.cateType,i=e.level,o=e.pid,n=e.page,c=e.resolve;Object(f["V"])(this.filterData({pid:o,id:a,level:i,cateType:r,page:n})).then((function(e){if(1===e.ret.errcode){for(var a=function(a){e.categoryUnit[a]["cateList"]=[];var o=e.categoryUnit[a].cateNameValue.find((function(e){return"cn"==e.languageCode}));e.categoryUnit[a]["cateName"]=o?o.name:"",e.categoryUnit[a]["cateId"]=String(e.categoryUnit[a]["cateId"]),e.categoryUnit[a]["leaf"]=2==r?i>2:i>1,2==i||3==i&&_.forEach(t.categoryForm.categoryUser,(function(t){0==t.length||_.forEach(t.cateId,(function(t){t==e.categoryUnit[a].cateId&&(e.categoryUnit[a].isDisabled=!0)}))}))},o=0;o<e.categoryUnit.length;o++)a(o);c&&c(e.categoryUnit,e)}console.log(t.backCategoryOptions)}))},setBackCateId:function(e){},getBuyerList:function(){var e=this,t={page:{pageNum:1,pageSize:1e3},groupIds:[68,69,70]};Object(w["l"])(t).then((function(t){1===t.ret.errcode&&(console.log("人员信息",t),e.buyerList=t.sysUserPb)})).catch((function(e){console.log(e)}))},editCategory:function(e,t){var a=this;this.editCategoryForm.groupId=e.groupId,this.editType=1,"edit"==t?(this.dialogTitle="编辑类目分组",this.editForm=!1):(this.dialogTitle="查看类目分组",this.editForm=!0,this.dialogVisible=!0),this.dialogEdit=!0;var r={groupId:e.groupId};Object($["p"])(r).then((function(e){if(1==e.ret.errcode){++a.isResouceShow;var t=[];_.forEach(e.buyerIds,(function(e){t.push(e.buyerId)})),a.editCategoryForm.userId=t,a.editCategoryForm.groupName=e.groupName,a.backCategoryOptionsEdit=JSON.parse(JSON.stringify(a.backCategoryOptions)),_.forEach(a.backCategoryOptionsEdit,(function(t){_.forEach(e.cateIds,(function(e){e.cateId==t.cateId&&(t.cateList=e.cateList),_.forEach(e.cateList,(function(e){_.forEach(e.cateList,(function(e){e.leaf=!0}))}))}))})),a.editCategoryForm.cateId=e.cateIdList,a.editCategoryForm.cateIdone=e.cateIdList[0],_.forEach(e.cateIds,(function(e){_.forEach(e.cateList,(function(e){_.forEach(e.cateList,(function(e){delete e.cateList,e.leaf=!0}))}))})),a.backCategoryOptionsWatch=e.cateIds}})).catch((function(e){console.log(e)}))},updateCateGroup:function(e){var t=this;0==this.editForm?this.$refs[e].validate((function(e){if(e){var a={pbList:[t.editCategoryForm]};Object($["n"])(a).then((function(e){1==e.ret.errcode&&(t.dialogEdit=!1,t.getPurCateGroupList(),t.$message.success("类目分组修改成功"))})).catch((function(e){console.log(e)}))}else t.$message.error("请检查必填项")})):this.dialogEdit=!1},selectEdit:function(e){var t=this;this.editCategoryForm.cateId=this.uniq(this.editCategoryForm.cateId),this.$nextTick((function(){_.forEach(t.editCategoryForm.cateId,(function(e,a){t.$set(t.editCategoryForm.cateId,a,e)}))})),console.log(this.editCategoryForm.cateId)},uniq:function(e){for(var t,a,r={},i=[],o=e.length,n=0;n<o;n++)t=e[n],a=Object(D["a"])(t),r[t]?r[t].indexOf(a)<0&&(r[t].push(a),i.push(t)):(r[t]=[a],i.push(t));return i}}},F=j,V=(a("7877"),Object(y["a"])(F,T,O,!1,null,"f2766db0",null)),B=V.exports,q=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"add_category"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline,"label-width":"80px","label-position":"left"}},[a("el-form-item",{attrs:{label:"用户搜索:"}},[a("el-input",{staticStyle:{width:"250px"},attrs:{placeholder:"请输入真实姓名"},model:{value:e.formInline.buyerName,callback:function(t){e.$set(e.formInline,"buyerName",t)},expression:"formInline.buyerName"}})],1),a("el-form-item",{attrs:{label:"类目分组:"}},[a("el-input",{attrs:{placeholder:"请输入类目分组"},model:{value:e.formInline.groupName,callback:function(t){e.$set(e.formInline,"groupName",t)},expression:"formInline.groupName"}})],1),a("el-form-item",{attrs:{label:"后台类目:"}},[a("el-cascader",{staticClass:"normalOperatorBox",staticStyle:{width:"300px"},attrs:{clearable:"",filterable:"",props:{label:"cateName",children:"levelValue",value:"cateId",lazy:!0,lazyLoad:e.getBackSubCategory,checkStrictly:!0,emitPath:!1},placeholder:"请选择商品后台分组",options:e.backCategoryOptions,size:"medium"},model:{value:e.formInline.cateId,callback:function(t){e.$set(e.formInline,"cateId",t)},expression:"formInline.cateId"}})],1),a("el-form-item",[a("el-button",{attrs:{icon:"el-icon-search",type:"primary",size:"medium"},on:{click:function(t){return e.getPurCateGroupQuery(0)}}},[e._v("搜索")]),a("el-button",{attrs:{icon:"el-icon-refresh-left",size:"medium"},on:{click:e.resetSearch}},[e._v("重置")])],1)],1),a("div",{staticClass:"add_table"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%","text-align":"center"},attrs:{data:e.tableData,"highlight-current-row":"",border:""}},[a("el-table-column",{attrs:{type:"index",width:"50",label:"序号",align:"center"}}),a("el-table-column",{attrs:{property:"buyerName",label:"用户名",align:"center"}}),a("el-table-column",{attrs:{property:"realName",label:"真实姓名",align:"center"}}),a("el-table-column",{attrs:{property:"permissionGroup",label:"组织部门",align:"center"}}),a("el-table-column",{attrs:{property:"date",label:"角色",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.role.join(",")))]}}])}),a("el-table-column",{attrs:{label:"类目分组",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.returnGroupName(t.row.group)))]}}])}),a("el-table-column",{attrs:{property:"createTime",label:"创建时间",width:"200",align:"center"}}),a("el-table-column",{attrs:{property:"updateTime",label:"更新时间",width:"200",align:"center"}}),a("el-table-column",{attrs:{label:"操作",width:"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.hasPermission("BTN_CATE_ROLE_EDIT")?a("el-link",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary",underline:!1},on:{click:function(a){return e.editCategory(t.row,"edit")}}},[e._v("编辑")]):e._e(),e.hasPermission("BTN_CATE_ROLE_DETAIL")?a("el-link",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary",underline:!1},on:{click:function(a){return e.editCategory(t.row,"watch")}}},[e._v("查看详情")]):e._e(),e.hasPermission("BTN_CATE_ROLE_DETELE")?a("el-link",{attrs:{type:"primary",underline:!1},on:{click:function(a){return e.deleteCategory(t.row)}}},[e._v("删除")]):e._e()]}}])})],1)],1),a("div",{staticClass:"add_page"},[a("el-pagination",{attrs:{"page-sizes":[10,20,30,50],"page-size":e.formInline.page.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),a("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t},click:e.handleDialogClose}},[a("el-form",{ref:"editForm",attrs:{model:e.editForm,rules:e.editFormRule}},[a("el-form-item",{attrs:{label:"类目分组:","label-width":e.formLabelWidth,prop:"group"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择类目分组",multiple:"",disabled:e.isDisabled},model:{value:e.editForm.group,callback:function(t){e.$set(e.editForm,"group",t)},expression:"editForm.group"}},e._l(e.groupNameList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.groupName,value:e.groupId}})})),1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"真实姓名:","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off",disabled:""},model:{value:e.editForm.realName,callback:function(t){e.$set(e.editForm,"realName",t)},expression:"editForm.realName"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"用户名:","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off",disabled:""},model:{value:e.editForm.buyerName,callback:function(t){e.$set(e.editForm,"buyerName",t)},expression:"editForm.buyerName"}})],1)],1)],1),a("el-form-item",{attrs:{label:"类目权限:","label-width":e.formLabelWidth}},[a("el-cascader-panel",{key:e.isResouceShow,attrs:{disabled:"",options:e.options,props:{label:"cateName",children:"cateList",value:"cateId",checkStrictly:!1,disabled:"isDisabled",emitPath:!1},"collapse-tags":""},on:{change:e.selsectData},model:{value:e.editForm.cateId,callback:function(t){e.$set(e.editForm,"cateId",t)},expression:"editForm.cateId"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.handleDialogClose}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.updateBursy("editForm")}}},[e._v("确 定")])],1)],1)],1)},M=[],U={name:"authCategory",data:function(){var e=this,t=function(t,a,r){0==e.editForm.group.length?r(new Error("请选择类目分组")):r()};return{formInline:{buyerName:"",groupName:"",cateId:"",page:{pageSize:20,pageNum:1}},isDisabled:!1,editForm:{realName:"",buyerName:"",cateId:"",userId:"",group:[]},options:[],tableData:[],total:0,backCategoryOptions:[],dialogTitle:"编辑用户类目权限",dialogFormVisible:!1,formLabelWidth:"100px",editFormRule:{group:[{required:!0,validator:t,trigger:"change"}]},groupNameList:[],isResouceShow:0,loading:!0}},computed:{},watch:{},mounted:function(){var e=this;this.fetchCategory({level:1,cateType:2,resolve:function(t){e.backCategoryOptions=t}}),this.getPurCateGroupQuery(0),this.getPurCateGroupSelect()},methods:{getPurCateGroupSelect:function(e){var t=this;Object($["t"])({}).then((function(e){1==e.ret.errcode&&(t.groupNameList=e.groupList)}))},getPurCateGroupQuery:function(e){var t=this;0==e&&(this.formInline.page.pageNum=1),this.loading=!0,Object($["s"])(this.filterData(this.formInline)).then((function(e){1==e.ret.errcode&&(t.loading=!1,t.tableData=e.groupPB,t.total=e.total)})).catch((function(e){}))},returnGroupName:function(e){var t=[];return _.forEach(e,(function(e){t.push(e.groupName)})),t.join(",")},resetSearch:function(){this.formInline.buyerName="",this.formInline.groupName="",this.formInline.cateId=""},editCategory:function(e,t){var a=this;"edit"==t?(this.isDisabled=!1,this.dialogTitle="编辑类目权限"):(this.isDisabled=!0,this.dialogTitle="查看类目权限"),this.editForm.userId=e.buyerId;var r={userId:this.editForm.userId},i=[];Object($["o"])(r).then((function(e){1==e.ret.errcode&&(++a.isResouceShow,a.dialogFormVisible=!0,a.editForm.realName=e.realName,a.editForm.buyerName=e.buyerName,_.forEach(e.group,(function(e){i.push(e.groupId)})),a.editForm.group=i,a.editForm.cateId=e.cateList[0].cateList[0].cateList[0].cateId,_.forEach(e.cateList,(function(e){e.leaf=!1,e.level=1,_.forEach(e.cateList,(function(e){e.leaf=!1,e.level=2,_.forEach(e.cateList,(function(e){e.leaf=!0,delete e.cateList,e.level=3}))}))})),a.options=e.cateList)})).catch((function(e){console.log(e)}))},deleteCategory:function(e){var t=this;console.log(e),this.$confirm("此操作将删除该用户类目权限, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var a={userId:e.buyerId};Object($["i"])(a).then((function(e){1==e.ret.errcode&&t.$message({type:"success",message:"删除成功!"}),t.getPurCateGroupQuery()})).catch((function(e){console.log(e)}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},getBackSubCategory:function(e,t){if(0!=e.level){var a=e.value;console.log(e),this.fetchCategory({pid:parseInt(a),cateType:2,level:e.level+1,resolve:t})}},fetchCategory:function(e){var t=e.id,a=e.cateType,r=e.level,i=e.pid,o=e.page,n=e.resolve;Object(f["V"])(this.filterData({pid:i,id:t,level:r,cateType:a,page:o})).then((function(e){if(1===e.ret.errcode){for(var t=0;t<e.categoryUnit.length;t++){e.categoryUnit[t]["levelValue"]=[];var i=e.categoryUnit[t].cateNameValue.find((function(e){return"cn"==e.languageCode}));e.categoryUnit[t]["cateId"]=String(e.categoryUnit[t]["cateId"]),e.categoryUnit[t]["cateName"]=i?i.name:"",e.categoryUnit[t]["leaf"]=2==a?r>2:r>1}n&&n(e.categoryUnit,e)}}))},selsectData:function(e){console.log(e)},updateBursy:function(e){var t=this;0==this.isDisabled?this.$refs[e].validate((function(e){if(e){var a={userId:t.editForm.userId,groupId:t.editForm.group};Object($["q"])(a).then((function(e){1==e.ret.errcode&&(t.$message.success("用户权限编辑成功"),t.dialogFormVisible=!1,t.getPurCateGroupQuery(),t.editForm={realName:"",buyerName:"",cateId:"",userId:"",group:[]})}))}else console.log("error")})):this.dialogFormVisible=!1},handleDialogClose:function(){this.editForm.realName="",this.editForm.buyerName="",this.editForm.cateId="",this.editForm.userId="",this.editForm.group=[],this.dialogFormVisible=!1},handleSizeChange:function(e){this.formInline.page.pageSize=e,this.getPurCateGroupQuery()},handleCurrentChange:function(e){this.formInline.page.pageNum=e,this.getPurCateGroupQuery()}}},G=U,z=(a("315a"),Object(y["a"])(G,q,M,!1,null,"30e72c06",null)),W=z.exports,H=a("96ec"),K=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"category-card"},[a("el-card",{staticClass:"box-card",style:{height:e.cardHeight+"px"},attrs:{shadow:"never"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[e.parentInfo.cateName?a("span",{staticClass:"parent-name"},[e._v(e._s(e.parentInfo.cateName))]):e._e(),a("span",[e._v(e._s(e.levelText)+"类目")])]),a("div",{staticClass:"category-list"},[a("draggable",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"list-group",attrs:{list:e.categoryList,disabled:!e.enableSort,"ghost-class":"ghost"},on:{start:function(t){e.dragging=!0},end:e.onEnd}},e._l(e.categoryList,(function(t){return a("div",{key:t.cateId,staticClass:"list-group-item",class:{active:e.active===t.cateName},on:{click:function(a){return e.selectItem(t)}}},[a("p",{staticClass:"category-name"},[e._v(e._s(t.cateId)+" "+e._s(t.cateName))]),e.active===t.cateName&&"category"===e.page?a("div",{staticClass:"operate"},[e.hasPermission("BTN_BACK_CATE_EDIT")?a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.editItem(t)}}},[a("i",{staticClass:"el-icon-edit-outline"})]):e._e(),e.hasPermission("BTN_BACK_CATE_DELETE")?a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.delItem(t)}}},[a("i",{staticClass:"el-icon-close"})]):e._e()],1):e._e()])})),0)],1),"category"===e.page?a("div",{staticClass:"add-category"},[e.hasPermission("BTN_BACK_CATE_ADD")?a("el-button",{attrs:{type:"text"},on:{click:e.addItem}},[e._v("+ 新建"+e._s(e.levelText)+"类目")]):e._e()],1):e._e()]),a("confirm-dialog",{attrs:{dialogVisible:e.confirmVisible,title:e.confirmDialogTitle,text:e.confirmDialogText},on:{"on-cancle":e.cancleConfirm,"on-confirm":e.submitDel}})],1)},J=[],Q={name:"CategoryCard",inject:["page"],props:{level:{type:Number,default:1},parentInfo:{type:Object,default:function(){return{pid:0,cateName:"",level:0}}},categoryList:{type:Array,default:function(){return[]}}},data:function(){return{enableSort:!0,active:"",loading:!1,sort:!1,cardHeight:510,item:null,confirmVisible:!1,confirmDialogTitle:"",confirmDialogText:""}},components:{draggable:s.a,ConfirmDialog:H["a"]},computed:{levelText:function(){var e=["一级","二级","三级"];return e[this.level-1]}},watch:{categoryList:function(e,t){e.length>0&&(this.active=e[0].cateName,this.selectItem(e[0]))}},created:function(){"product"===this.page?this.enableSort=!1:this.hasPermission("BTN_BACK_CATE_SORT")?this.enableSort=!0:this.enableSort=!1},mounted:function(){"product"===this.page&&(this.cardHeight=450)},methods:{addItem:function(){var e={pid:this.parentInfo.pid,level:this.level};this.$emit("on-create",e)},selectItem:function(e){this.active=e.cateName,this.$emit("on-select",e)},editItem:function(e){var t={pid:this.parentInfo.pid,level:this.level};e.parentInfo=t,this.$emit("on-edit",e)},cancleConfirm:function(){this.confirmVisible=!1},submitDel:function(){this.confirmVisible=!1,this.$emit("on-delete",this.item)},delItem:function(e){this.confirmVisible=!0,this.confirmDialogTitle="确定要删除该类目吗？",this.item=e},onEnd:function(e){console.log(e),console.log(this.categoryList);var t={targetSort:e.newIndex+1,cateId:this.categoryList[e.newIndex].cateId};console.log(t),this.$emit("on-end-sort",t),this.sort=!0}}},Y=Q,X=(a("7283"),Object(y["a"])(Y,K,J,!1,null,"586b2d06",null)),Z=X.exports,ee={name:"BackCategory",provide:function(){return{page:this.pageName}},props:{pageName:{type:String,default:"category"}},data:function(){return{keywords:"",categoryLink:[],categoryLinkStr:"",enabled:!0,categoryListLevelOne:[],categoryListLevelTwo:[],categoryListLevelThree:[],dragging:!1,active:"中文类目名#1569651168682",categoryEditVisible:!1,confirmVisible:!1,confirmDialogTitle:"",confirmDialogText:"",editType:"add",categoryLevel:1,parentInfo:{},categoryItem:{},levelOne:{},levelTwo:{},categoryData:{name:"",nameList:{cn:"",en:"",ms:"",th:"",id:""},desc:"",cover:"",level:"1",pid:0,categoryDesc:""},activeName:"1"}},components:{draggable:s.a,BackCategoryEdit:k,ConfirmDialog:H["a"],CategoryCard:Z,addCategory:B,authCategory:W},mounted:function(){this.getCategoryList()},computed:{},watch:{categoryLink:function(e,t){var a=this;this.$emit("on-category-link-change",e),this.categoryLinkStr=[],n.a.forEach(e,(function(t,r){t.cateName&&(r===e.length-1?a.categoryLinkStr+=t.cateName:a.categoryLinkStr+=t.cateName+" >> ")}))}},methods:{handleClick:function(e){var t=this;this.$emit("onChangeType",this.activeName),2==e.name&&this.$nextTick((function(){t.$refs.addCategorys.getBuyerList()}))},checkMove:function(e){console.log("index: "+e.draggedContext.futureIndex)},onEnd:function(e){console.log(e)},selectCategory:function(e){this.active=e.cateName,this.getCategoryList(e.cateId)},addBackCategory:function(e){var t=this;this.categoryData.nameList={cn:"",en:"",ms:"",th:"",id:""},this.editType="add",this.parentInfo=e,this.categoryEditVisible=!0,e.level>1&&this.$nextTick((function(){if(2===e.level)t.$refs.categoryEdit.getCategoryList(0,1);else if(3===e.level&&t.categoryLink[0].cateId){var a=t.categoryLink[0].cateId;t.$refs.categoryEdit.getCategoryList(a,2)}}))},delBackCategory:function(e){this.categoryItem=e,this.confirmDialogTitle="确定要删除该类目吗？",this.confirmDialogText="",this.confirmVisible=!0},cancleEdit:function(){this.categoryEditVisible=!1},confirmEdit:function(e){"add"===this.editType?this.addCategory(e):"edit"===this.editType&&this.editCategory(e)},cancleConfirm:function(){this.confirmVisible=!1},submitDel:function(){this.confirmVisible=!1,this.deleteCategory(this.categoryItem.cateId)},search:function(){this.getCategoryList()},getCategoryList:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r={cateType:2,page:{pageNum:1,pageSize:1e3}};r.pid=t,Object(f["V"])(r).then((function(t){if(1===t.ret.errcode){var r=[];n.a.forEach(t.categoryUnit,(function(e){e.cateName=e.cateNameValue[0].name,r.push(e)})),1===a&&(e.categoryListLevelOne=r),2===a&&(e.categoryListLevelTwo=r),3===a&&(e.categoryListLevelThree=r)}})).catch((function(e){console.error(e)}))},addCategory:function(e){var t=this;Object(f["Q"])(e).then((function(e){1===e.ret.errcode&&(t.$message.success("类目添加成功"),t.categoryEditVisible=!1)}))},editCategory:function(e){var t=this;console.log(e),Object(f["X"])(e).then((function(e){1===e.ret.errcode&&(t.$message.success("类目修改成功"),t.getCategoryList(),t.categoryEditVisible=!1)}))},deleteCategory:function(e){var t=this,a={cateId:e};Object(f["T"])(a).then((function(e){1===e.ret.errcode&&t.$message.success("删除成功")}))},createCategory:function(e){void 0!=e.pid?this.addBackCategory(e):this.$message.warning("请先选择父类目")},handleItemSelect:function(e){this.categoryLink.splice(e.level-1,4-e.level);var t={cateId:e.cateId,cateName:e.cateName};this.categoryLink[e.level-1]=t;var a=e.cateId,r=e.level+1;this.getCategoryList(a,r);var i={pid:a,cateName:e.cateName};1===e.level?(this.levelOne=i,this.levelTwo={},this.categoryListLevelThree=[]):2===e.level&&(this.levelTwo=i),this.categoryData.pid=a},handleItemEdit:function(e){var t=this;console.log("item",e),this.parentInfo=e.parentInfo,this.editType="edit",this.categoryEditVisible=!0,this.categoryData.name=e.cateName,this.categoryData.nameList={cn:"",en:"",ms:"",th:"",id:""},n.a.forEach(e.cateNameValue,(function(e){t.categoryData.nameList[e.languageCode]=e.name})),this.categoryData.cateId=e.cateId,this.categoryData.level=e.level,this.categoryData.desc=e.desc,this.categoryData.cover=e.cover,this.categoryData.paramAttrId=e.paramAttrId,this.categoryData.standardAttrId=e.standardAttrId,e.parentInfo.level>1&&this.$nextTick((function(){if(2===e.parentInfo.level)t.$refs.categoryEdit.getCategoryList(0,1);else if(3===e.parentInfo.level&&t.categoryLink[0].cateId){var a=t.categoryLink[0].cateId;t.$refs.categoryEdit.getCategoryList(a,2)}})),this.$refs.categoryEdit.getBatchProductAttr()},handleItemDelete:function(e){var t=e.level,a=0;2===t&&(a=this.levelOne.pid),3===t&&(a=this.levelTwo.pid),this.deleteCategory(e.cateId),this.getCategoryList(a,t)},handleItemSort:function(e){var t=this;Object(f["S"])(e).then((function(e){var a=e;1===a.ret.errcode||t.$message.warning("类目排序失败，刷新页面后重试")}))}}},te=ee,ae=(a("bd7f"),a("c3d6"),Object(y["a"])(te,r,i,!1,null,"0ad8d09a",null));t["default"]=ae.exports},1760:function(e,t,a){"use strict";var r=a("ce37"),i=a.n(r);i.a},"19db":function(e,t,a){"use strict";var r=a("d433"),i=a.n(r);i.a},"1ab2":function(e,t,a){"use strict";var r=a("684a"),i=a.n(r);i.a},"1ae3":function(e,t,a){},"1e37":function(e,t,a){},"1e60":function(e,t,a){"use strict";var r=a("2863"),i=a.n(r);i.a},2128:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"i",(function(){return o})),a.d(t,"e",(function(){return n})),a.d(t,"g",(function(){return c})),a.d(t,"c",(function(){return s})),a.d(t,"b",(function(){return l})),a.d(t,"j",(function(){return u})),a.d(t,"f",(function(){return d})),a.d(t,"h",(function(){return p})),a.d(t,"d",(function(){return f}));var r=a("284b");function i(e){console.log(e);var t=r["a"].create("AddAfterSaleReq",e);return Object(r["a"])("product","AfterSalePledgeService.AddAfterSale",t,"AddAfterSaleResp")}function o(e){console.log(e);var t=r["a"].create("UpdateAfterSaleReq",e);return Object(r["a"])("product","AfterSalePledgeService.UpdateAfterSale",t,"UpdateAfterSaleResp")}function n(e){console.log(e);var t=r["a"].create("StartAfterSaleReq",e);return Object(r["a"])("product","AfterSalePledgeService.StartAfterSale",t,"StartAfterSaleResp")}function c(e){console.log(e);var t=r["a"].create("StopAfterSaleReq",e);return Object(r["a"])("product","AfterSalePledgeService.StopAfterSale",t,"StopAfterSaleResp")}function s(e){console.log(e);var t=r["a"].create("ListAfterSaleReq",e);return Object(r["a"])("product","AfterSalePledgeService.ListAfterSale",t,"ListAfterSaleResp")}function l(e){console.log(e);var t=r["a"].create("AddArrivalReq",e);return Object(r["a"])("product","ArrivalPledgeService.AddArrival",t,"AddArrivalResp")}function u(e){console.log(e);var t=r["a"].create("UpdateArrivalReq",e);return Object(r["a"])("product","ArrivalPledgeService.UpdateArrival",t,"UpdateArrivalResp")}function d(e){console.log(e);var t=r["a"].create("StartArrivalReq",e);return Object(r["a"])("product","ArrivalPledgeService.StartArrival",t,"StartArrivalResp")}function p(e){console.log(e);var t=r["a"].create("StopArrivalReq",e);return Object(r["a"])("product","ArrivalPledgeService.StopArrival",t,"StopArrivalResp")}function f(e){console.log(e);var t=r["a"].create("ListArrivalReq",e);return Object(r["a"])("product","ArrivalPledgeService.ListArrival",t,"ListArrivalResp")}},"25c0":function(e,t,a){"use strict";var r=a("d5d9"),i=a.n(r);i.a},"25f8":function(e,t,a){},2863:function(e,t,a){},"29b2":function(e,t,a){"use strict";var r=a("cfa8"),i=a.n(r);i.a},"30ee":function(e,t,a){},"315a":function(e,t,a){"use strict";var r=a("5129"),i=a.n(r);i.a},"33c7":function(e,t,a){"use strict";var r=a("dcfc"),i=a.n(r);i.a},"345d":function(e,t,a){"use strict";a.d(t,"k",(function(){return i})),a.d(t,"i",(function(){return o})),a.d(t,"h",(function(){return n})),a.d(t,"e",(function(){return c})),a.d(t,"b",(function(){return s})),a.d(t,"c",(function(){return l})),a.d(t,"a",(function(){return u})),a.d(t,"j",(function(){return d})),a.d(t,"g",(function(){return p})),a.d(t,"f",(function(){return f})),a.d(t,"d",(function(){return h}));var r=a("284b");function i(e){console.log(e);var t=r["a"].create("SupplierPageReq",e);return Object(r["a"])("erp","SupplierBossService.SupplierPage",t,"supplier.SupplierPageResp")}function o(e){console.log(e);var t=r["a"].create("SupplierBasePageReq",e);return Object(r["a"])("erp","SupplierBossService.SupplierBasePage",t,"supplier.SupplierBasePageResp")}function n(e){console.log(e);var t=r["a"].create("SupplierSaveReq",e);return Object(r["a"])("erp","SupplierBossService.SaveSupplier",t,"supplier.SupplierSaveResp")}function c(e){console.log(e);var t=r["a"].create("SupplierDetailReq",e);return Object(r["a"])("erp","SupplierBossService.GetSupplierDetail",t,"supplier.SupplierDetailResp")}function s(e){console.log(e);var t=r["a"].create("SupplierDisableReq",e);return Object(r["a"])("erp","SupplierBossService.DisableSupplier",t,"supplier.DisableSupplierResp")}function l(e){console.log(e);var t=r["a"].create("SupplierEnableReq",e);return Object(r["a"])("erp","SupplierBossService.EnableSupplier",t,"supplier.SupplierEnableResp")}function u(e){console.log(e);var t=r["a"].create("SupplierDeleteReq",e);return Object(r["a"])("erp","SupplierBossService.DeleteSupplier",t,"supplier.DeleteSupplierResp")}function d(e){console.log(e);var t=r["a"].create("SupplierOrderPageReq",e);return Object(r["a"])("erp","SupplierOrderBossService.SupplierOrderPage",t,"supplier.SupplierOrderPageResp")}function p(e){console.log(e);var t=r["a"].create("SupplierOrderStockoutReq",e);return Object(r["a"])("erp","SupplierOrderBossService.OrderStockout",t,"supplier.SupplierOrderStockoutResp")}function f(e){console.log(e);var t=r["a"].create("SupplierOrderDeliverReq",e);return Object(r["a"])("erp","SupplierOrderBossService.OrderDeliver",t,"supplier.SupplierOrderDeliverResp")}function h(e){console.log(e);var t=r["a"].create("SupplierOrderPageReq",e);return Object(r["a"])("erp","SupplierOrderBossService.ExportOrder",t,"supplier.ExportSupplierOrderResp")}},"38dd":function(e,t,a){},"3a4e":function(e,t,a){"use strict";var r=a("85bc"),i=a.n(r);i.a},"3e3b":function(e,t,a){"use strict";var r=a("9c8b"),i=a.n(r);i.a},"47b2":function(e,t,a){"use strict";var r=a("25f8"),i=a.n(r);i.a},5129:function(e,t,a){},"5ea9":function(e,t,a){},6047:function(e,t,a){},"60fb":function(e,t,a){"use strict";a.d(t,"a",(function(){return o})),a.d(t,"b",(function(){return n}));var r=a("5c96"),i="https://file.fingo.shop";axios.defaults.timeout=45e3,axios.interceptors.request.use((function(e){return e}),(function(e){return r["Message"].error("请求超时"),Promise.resolve(e)}));var o=function(e,t){var a={headers:{"Content-Type":"multipart/form-data"}};return axios.post("".concat(i).concat(e),t,a).then((function(e){return e.data}))},n=function(e,t){var a={headers:{"Content-Type":"multipart/form-data"}};return axios.post("".concat(i).concat(e),t,a).then((function(e){return e.data}))}},"684a":function(e,t,a){},"6b6d":function(e,t,a){},"6b88":function(e,t,a){},"6f8f":function(e,t,a){},7283:function(e,t,a){"use strict";var r=a("b437"),i=a.n(r);i.a},7412:function(e,t,a){"use strict";var r=a("9e08"),i=a.n(r);i.a},"75da":function(e,t,a){},"75f3":function(e,t,a){"use strict";var r=a("0ccf"),i=a.n(r);i.a},"77be":function(e,t,a){},7877:function(e,t,a){"use strict";var r=a("f6ee"),i=a.n(r);i.a},7956:function(e,t,a){"use strict";var r=a("38dd"),i=a.n(r);i.a},"817b":function(e,t,a){"use strict";var r=a("9a43"),i=a.n(r);i.a},"84a3":function(e,t,a){"use strict";a.d(t,"U",(function(){return i})),a.d(t,"Q",(function(){return o})),a.d(t,"K",(function(){return n})),a.d(t,"M",(function(){return c})),a.d(t,"N",(function(){return s})),a.d(t,"G",(function(){return l})),a.d(t,"E",(function(){return u})),a.d(t,"F",(function(){return d})),a.d(t,"P",(function(){return p})),a.d(t,"T",(function(){return f})),a.d(t,"S",(function(){return h})),a.d(t,"v",(function(){return m})),a.d(t,"l",(function(){return g})),a.d(t,"O",(function(){return v})),a.d(t,"u",(function(){return y})),a.d(t,"R",(function(){return b})),a.d(t,"H",(function(){return S})),a.d(t,"I",(function(){return I})),a.d(t,"o",(function(){return C})),a.d(t,"C",(function(){return P})),a.d(t,"L",(function(){return k})),a.d(t,"c",(function(){return T})),a.d(t,"a",(function(){return O})),a.d(t,"w",(function(){return D})),a.d(t,"b",(function(){return w})),a.d(t,"j",(function(){return _})),a.d(t,"k",(function(){return L})),a.d(t,"n",(function(){return x})),a.d(t,"J",(function(){return R})),a.d(t,"z",(function(){return A})),a.d(t,"y",(function(){return E})),a.d(t,"m",(function(){return N})),a.d(t,"x",(function(){return $})),a.d(t,"d",(function(){return j})),a.d(t,"h",(function(){return F})),a.d(t,"e",(function(){return V})),a.d(t,"g",(function(){return B})),a.d(t,"f",(function(){return q})),a.d(t,"D",(function(){return M})),a.d(t,"r",(function(){return U})),a.d(t,"q",(function(){return G})),a.d(t,"B",(function(){return z})),a.d(t,"A",(function(){return W})),a.d(t,"p",(function(){return H})),a.d(t,"t",(function(){return K})),a.d(t,"s",(function(){return J})),a.d(t,"i",(function(){return Q}));var r=a("284b");function i(e){console.log(e);var t=r["a"].create("WarehousePageReq",e);return Object(r["a"])("erp","WarehouseBossService.WarehousePage",t,"warehouse.WarehousePageResp")}function o(e){console.log(e);var t=r["a"].create("PurchaseLogiListReq",e);return Object(r["a"])("erp","IncomeOrderBossService.PurchaseLogiList",t,"warehouse.PurchaseLogiListResp")}function n(e){console.log(e);var t=r["a"].create("IncomeOrderSignReq",e);return Object(r["a"])("erp","IncomeOrderBossService.IncomeOrderSign",t,"warehouse.IncomeOrderSignResp")}function c(e){console.log(e);var t=r["a"].create("IncomeOrderPageReq",e);return Object(r["a"])("erp","IncomeOrderBossService.LogiOrderPage",t,"warehouse.IncomeOrderPageResp")}function s(e){console.log(e);var t=r["a"].create("ModifyIncomeOrderLogiReq",e);return Object(r["a"])("erp","IncomeOrderBossService.ModifyIncomeOrderLogi",t,"warehouse.ModifyIncomeOrderLogiResp")}function l(e){console.log(e);var t=r["a"].create("AddSignAbnormalReq",e);return Object(r["a"])("erp","AbnormalBossService.AddSignAbnormal",t,"warehouse.AddSignAbnormalResp")}function u(e){console.log(e);var t=r["a"].create("AbnormalLogiPageReq",e);return Object(r["a"])("erp","AbnormalBossService.AbnormalLogiPage",t,"warehouse.AbnormalLogiPageResp")}function d(e){console.log(e);var t=r["a"].create("AbnormalSkuPageReq",e);return Object(r["a"])("erp","AbnormalBossService.AbnormalSkuPage",t,"warehouse.AbnormalSkuPageResp")}function p(e){console.log(e);var t=r["a"].create("PurchaseDealAbnormalReq",e);return Object(r["a"])("erp","AbnormalBossService.PurchaseDealAbnormal",t,"warehouse.PurchaseDealAbnormalResp")}function f(e){console.log(e);var t=r["a"].create("SkuAbnormalTypeReq",e);return Object(r["a"])("erp","AbnormalBossService.SkuAbnormalType",t,"warehouse.SkuAbnormalTypeResp")}function h(e){console.log(e);var t=r["a"].create("SignAbnormalTypeReq",e);return Object(r["a"])("erp","AbnormalBossService.SignAbnormalType",t,"warehouse.SignAbnormalTypeResp")}function m(e){console.log(e);var t=r["a"].create("OutOrderNewPageReq",e);return Object(r["a"])("erp","OutOrderBossService.OutOrderNewPage",t,"warehouse.OutOrderNewPageResp")}function g(e){console.log(e);var t=r["a"].create("OutOrderNewPageReq",e);return Object(r["a"])("erp","OutOrderBossService.ExportList",t,"warehouse.ExportPoResp")}function v(e){console.log(e);var t=r["a"].create("OutOrderDetailReq",e);return Object(r["a"])("erp","OutOrderBossService.OutOrderDetail",t,"warehouse.OutOrderDetailResp")}function y(e){console.log(e);var t=r["a"].create("OutOrderNewDetailReq",e);return Object(r["a"])("erp","OutOrderBossService.OutOrderNewDetail",t,"warehouse.OutOrderNewDetailResp")}function b(e){console.log(e);var t=r["a"].create("RepushOutOrderReq",e);return Object(r["a"])("erp","OutOrderBossService.RepushOutOrder",t,"warehouse.RepushOutOrderResp")}function S(e){console.log(e);var t=r["a"].create("CannelOutOrderReq",e);return Object(r["a"])("erp","OutOrderBossService.CannelOutOrder",t,"warehouse.CannelOutOrderResp")}function I(e){console.log(e);var t=r["a"].create("CreateOutOrderReq",e);return Object(r["a"])("erp","OutOrderBossService.CreateOutOrder",t,"warehouse.CreateOutOrderResp")}function C(e){console.log(e);var t=r["a"].create("GetTransferWarehouseReq",e);return Object(r["a"])("erp","OutOrderBossService.GetTransferWarehouse",t,"warehouse.GetTransferWarehouseResp")}function P(e){console.log(e);var t=r["a"].create("TransferOutOrderReq",e);return Object(r["a"])("erp","OutOrderBossService.TransferOutOrder",t,"warehouse.TransferOutOrderResp")}function k(e){var t=r["a"].create("LogiCompanyReq",e);return Object(r["a"])("erp","WarehouseBossService.LogiCompany",t,"warehouse.LogiCompanyResp")}function T(e){var t=r["a"].create("AbnormalPurchaseOrderReq",e);return Object(r["a"])("erp","AbnormalBossService.AbnormalPurchaseOrder",t,"warehouse.AbnormalPurchaseOrderResp")}function O(e){var t=r["a"].create("AbnormalMakeupReq",e);return Object(r["a"])("erp","AbnormalBossService.AbnormalMakeup",t,"warehouse.AbnormalMakeupResp")}function D(e){var t=r["a"].create("OverAbnormalReq",e);return Object(r["a"])("erp","AbnormalBossService.OverAbnormal",t,"warehouse.OverAbnormalResp")}function w(e){var t=r["a"].create("AbnormalProcessReq",e);return Object(r["a"])("erp","AbnormalBossService.AbnormalProcess",t,"warehouse.AbnormalProcessResp")}function _(e){var t=r["a"].create("AbnormalLogiPageReq",e);return Object(r["a"])("erp","AbnormalBossService.ExportAbnormalLogi",t,"warehouse.ExportAbnormalLogiResp")}function L(e){var t=r["a"].create("AbnormalSkuPageReq",e);return Object(r["a"])("erp","AbnormalBossService.ExportAbnormalSku",t,"warehouse.ExportAbnormalSkuResp")}function x(e){var t=r["a"].create("GetTransferAddressReq",e);return Object(r["a"])("erp","WarehouseBossService.GetTransferAddress",t,"warehouse.GetTransferAddressResp")}function R(e){var t=r["a"].create("GetSkuBarCodeReq",e);return Object(r["a"])("erp","WarehouseBossService.GetSkuBarCode",t,"warehouse.GetSkuBarCodeResp")}function A(e){var t=r["a"].create("SpiltOutOrderReq",e);return Object(r["a"])("erp","OutOrderBossService.SpiltOutOrder",t,"warehouse.SpiltOutOrderResp")}function E(e){var t=r["a"].create("RevokeSpiltOutOrderReq",e);return Object(r["a"])("erp","OutOrderBossService.RevokeSpiltOutOrder",t,"warehouse.RevokeSpiltOutOrderResp")}function N(e){var t=r["a"].create("GetReissueWarehouseReq",e);return Object(r["a"])("erp","OutOrderBossService.GetReissueWarehouse",t,"warehouse.GetReissueWarehouseResp")}function $(e){var t=r["a"].create("ReissueOutOrderReq",e);return Object(r["a"])("erp","OutOrderBossService.ReissueOutOrder",t,"warehouse.ReissueOutOrderResp")}function j(e){var t=r["a"].create("BarterOutOrderReq",e);return Object(r["a"])("erp","OutOrderBossService.BarterOutOrder",t,"warehouse.BarterOutOrderResp")}function F(e){var t=r["a"].create("EditOutOrderReq",e);return Object(r["a"])("erp","OutOrderBossService.EditOutOrder",t,"warehouse.EditOutOrderResp")}function V(e){var t=r["a"].create("CancelOutOrderReq",e);return Object(r["a"])("erp","OutOrderBossService.CancelOutOrder",t,"warehouse.CancelOutOrderResp")}function B(e){var t=r["a"].create("DiffInventoryRecordPageReq",e);return Object(r["a"])("erp","DiffInventoryRecordBossService.DiffInventoryRecordPage",t,"warehouse.DiffInventoryRecordPageResp")}function q(e){var t=r["a"].create("DiffInventoryRecordPageReq",e);return Object(r["a"])("erp","DiffInventoryRecordBossService.DiffInventoryRecordExport",t,"warehouse.DiffInventoryRecordExportResp")}function M(e){var t=r["a"].create("ValidateWarehouseInventoryReq",e);return Object(r["a"])("erp","DiffInventoryRecordBossService.ValidateWarehouseInventory",t,"warehouse.ValidateWarehouseInventoryResp")}function U(e){var t=r["a"].create("NewIncomeOrderPageReq",e);return Object(r["a"])("erp","IncomeOrderBossService.NewIncomeOrderPage",t,"warehouse.NewIncomeOrderPageResp")}function G(e){var t=r["a"].create("NewIncomeOrderPageReq",e);return Object(r["a"])("erp","IncomeOrderBossService.NewIncomeOrderExport",t,"warehouse.NewIncomeOrderExportResp")}function z(e){var t=r["a"].create("SyncLogicDetailReq",e);return Object(r["a"])("erp","IncomeOrderBossService.SyncLogicDetail",t,"warehouse.SyncLogicDetailResp")}function W(e){var t=r["a"].create("SyncIncomeReq",e);return Object(r["a"])("erp","IncomeOrderBossService.SyncIncome",t,"warehouse.SyncIncomeResp")}function H(e){var t=r["a"].create("IncomeProductDetailReq",e);return Object(r["a"])("erp","IncomeOrderBossService.IncomeProductDetail",t,"warehouse.IncomeProductDetailResp")}function K(e){var t=r["a"].create("OrderIncomeCheckReq",e);return Object(r["a"])("erp","IncomeOrderBossService.OrderIncomeCheck",t,"warehouse.OrderIncomeCheckResp")}function J(e){var t=r["a"].create("OrderIncomeReq",e);return Object(r["a"])("erp","IncomeOrderBossService.OrderIncome",t,"warehouse.OrderIncomeResp")}function Q(e){var t=r["a"].create("EnterAbnormalProductReq",e);return Object(r["a"])("erp","AbnormalBossService.EnterAbnormalProduct",t,"warehouse.EnterAbnormalProductResp")}},"85bc":function(e,t,a){},"8cf7":function(e,t,a){},"8f70":function(e,t,a){"use strict";var r=a("df99"),i=a.n(r);i.a},9063:function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"a",(function(){return o})),a.d(t,"d",(function(){return n})),a.d(t,"c",(function(){return c}));var r=a("284b");function i(e){console.log(e);var t=r["a"].create("FreightTemplateListPageReq",e);return Object(r["a"])("product","FreightTemplateService.FreightTemplateListPage",t,"freight.FreightTemplateListPageResp")}function o(e){console.log(e);var t=r["a"].create("FreightTemplateAddReq",e);return Object(r["a"])("product","FreightTemplateService.FreightTemplateAdd",t,"freight.FreightTemplateAddResp")}function n(e){console.log(e);var t=r["a"].create("FreightTemplateUpdateReq",e);return Object(r["a"])("product","FreightTemplateService.FreightTemplateUpdate",t,"freight.FreightTemplateUpdateResp")}function c(e){console.log(e);var t=r["a"].create("FreightTemplateGetReq",e);return Object(r["a"])("product","FreightTemplateService.FreightTemplateGet",t,"freight.FreightTemplateGetResp")}},9576:function(e,t,a){"use strict";a.d(t,"Kb",(function(){return i})),a.d(t,"Hb",(function(){return o})),a.d(t,"Ib",(function(){return n})),a.d(t,"Ob",(function(){return c})),a.d(t,"Lb",(function(){return s})),a.d(t,"Nb",(function(){return l})),a.d(t,"Mb",(function(){return u})),a.d(t,"w",(function(){return d})),a.d(t,"Jb",(function(){return p})),a.d(t,"fc",(function(){return f})),a.d(t,"Qb",(function(){return h})),a.d(t,"gc",(function(){return m})),a.d(t,"Pb",(function(){return g})),a.d(t,"kc",(function(){return v})),a.d(t,"lc",(function(){return y})),a.d(t,"V",(function(){return b})),a.d(t,"d",(function(){return S})),a.d(t,"a",(function(){return I})),a.d(t,"c",(function(){return C})),a.d(t,"e",(function(){return P})),a.d(t,"b",(function(){return k})),a.d(t,"Q",(function(){return T})),a.d(t,"T",(function(){return O})),a.d(t,"S",(function(){return D})),a.d(t,"X",(function(){return w})),a.d(t,"W",(function(){return _})),a.d(t,"U",(function(){return L})),a.d(t,"R",(function(){return x})),a.d(t,"zb",(function(){return R})),a.d(t,"nb",(function(){return A})),a.d(t,"rb",(function(){return E})),a.d(t,"Ab",(function(){return N})),a.d(t,"ic",(function(){return $})),a.d(t,"hb",(function(){return j})),a.d(t,"Eb",(function(){return F})),a.d(t,"mc",(function(){return V})),a.d(t,"cb",(function(){return B})),a.d(t,"Rb",(function(){return q})),a.d(t,"Cb",(function(){return M})),a.d(t,"Y",(function(){return U})),a.d(t,"Yb",(function(){return G})),a.d(t,"db",(function(){return z})),a.d(t,"tb",(function(){return W})),a.d(t,"Bb",(function(){return H})),a.d(t,"x",(function(){return K})),a.d(t,"jc",(function(){return J})),a.d(t,"Z",(function(){return Q})),a.d(t,"N",(function(){return Y})),a.d(t,"P",(function(){return X})),a.d(t,"O",(function(){return Z})),a.d(t,"L",(function(){return ee})),a.d(t,"M",(function(){return te})),a.d(t,"kb",(function(){return ae})),a.d(t,"l",(function(){return re})),a.d(t,"mb",(function(){return ie})),a.d(t,"lb",(function(){return oe})),a.d(t,"jb",(function(){return ne})),a.d(t,"ib",(function(){return ce})),a.d(t,"ub",(function(){return se})),a.d(t,"sb",(function(){return le})),a.d(t,"Gb",(function(){return ue})),a.d(t,"bb",(function(){return de})),a.d(t,"gb",(function(){return pe})),a.d(t,"Db",(function(){return fe})),a.d(t,"hc",(function(){return he})),a.d(t,"pb",(function(){return me})),a.d(t,"qb",(function(){return ge})),a.d(t,"C",(function(){return ve})),a.d(t,"y",(function(){return ye})),a.d(t,"B",(function(){return be})),a.d(t,"A",(function(){return Se})),a.d(t,"E",(function(){return Ie})),a.d(t,"D",(function(){return Ce})),a.d(t,"z",(function(){return Pe})),a.d(t,"Fb",(function(){return ke})),a.d(t,"fb",(function(){return Te})),a.d(t,"vb",(function(){return Oe})),a.d(t,"G",(function(){return De})),a.d(t,"F",(function(){return we})),a.d(t,"K",(function(){return _e})),a.d(t,"J",(function(){return Le})),a.d(t,"I",(function(){return xe})),a.d(t,"ab",(function(){return Re})),a.d(t,"yb",(function(){return Ae})),a.d(t,"Zb",(function(){return Ee})),a.d(t,"ob",(function(){return Ne})),a.d(t,"ec",(function(){return $e})),a.d(t,"H",(function(){return je})),a.d(t,"dc",(function(){return Fe})),a.d(t,"bc",(function(){return Ve})),a.d(t,"cc",(function(){return Be})),a.d(t,"Xb",(function(){return qe})),a.d(t,"Vb",(function(){return Me})),a.d(t,"Wb",(function(){return Ue})),a.d(t,"eb",(function(){return Ge})),a.d(t,"Ub",(function(){return ze})),a.d(t,"Tb",(function(){return We})),a.d(t,"ac",(function(){return He})),a.d(t,"xb",(function(){return Ke})),a.d(t,"Sb",(function(){return Je})),a.d(t,"r",(function(){return Qe})),a.d(t,"j",(function(){return Ye})),a.d(t,"v",(function(){return Xe})),a.d(t,"h",(function(){return Ze})),a.d(t,"wb",(function(){return et})),a.d(t,"q",(function(){return tt})),a.d(t,"t",(function(){return at})),a.d(t,"i",(function(){return rt})),a.d(t,"k",(function(){return it})),a.d(t,"p",(function(){return ot})),a.d(t,"g",(function(){return nt})),a.d(t,"f",(function(){return ct})),a.d(t,"m",(function(){return st})),a.d(t,"u",(function(){return lt})),a.d(t,"o",(function(){return ut})),a.d(t,"n",(function(){return dt})),a.d(t,"s",(function(){return pt}));var r=a("284b");function i(e){console.log(e);var t=r["a"].create("ProductAttrGetReq",e);return Object(r["a"])("product","ProductAttrService.ProductAttrGet",t,"attribute.ProductAttrGetResp")}function o(e){console.log(e);var t=r["a"].create("ProductAttrAddReq",e);return Object(r["a"])("product","ProductAttrService.ProductAttrAdd",t,"attribute.ProductAttrAddResp")}function n(e){console.log(e);var t=r["a"].create("ProductAttrDisableReq",e);return Object(r["a"])("product","ProductAttrService.ProductAttrDisable",t,"attribute.ProductAttrDisableResp")}function c(e){console.log(e);var t=r["a"].create("ProductAttrValueDisableReq",e);return Object(r["a"])("product","ProductAttrService.ProductAttrValueDisable",t,"attribute.ProductAttrValueDisableResp")}function s(e){var t=r["a"].create("ProductAttrGetByIdReq",e);return Object(r["a"])("product","ProductAttrService.ProductAttrGetById",t,"attribute.ProductAttrGetByIdResp")}function l(e){console.log(e);var t=r["a"].create("ProductAttrModifyReq",e);return Object(r["a"])("product","ProductAttrService.ProductAttrModify",t,"attribute.ProductAttrModifyResp")}function u(e){console.log(e);var t=r["a"].create("ProductAttrGetByIdBatchReq",e);return Object(r["a"])("product","ProductAttrService.ProductAttrGetByIdBatch",t,"attribute.ProductAttrGetByIdBatchResp")}function d(e){console.log(e);var t=r["a"].create("AddCustomizeAttrValueReq",e);return Object(r["a"])("product","ProductAttrService.AddCustomizeAttrValue",t,"attribute.AddCustomizeAttrValueResp")}function p(e){var t=r["a"].create("ProductAttrDownloadReq",e);return Object(r["a"])("product","ProductAttrService.ProductAttrDownload",t,"attribute.ProductAttrDownloadResp")}function f(e){var t=r["a"].create("TranslateSelectedAttrReq",e);return Object(r["a"])("product","ProductAttrService.TranslateSelectedAttr",t,"attribute.TranslateSelectedAttrResp")}function h(e){var t=r["a"].create("ProductAttrValueGetReq",e);return Object(r["a"])("product","ProductAttrService.ProductAttrValueGet",t,"attribute.ProductAttrValueGetResp")}function m(e){var t=r["a"].create("UpdateAttrTranslateByIdReq",e);return Object(r["a"])("product","ProductAttrService.UpdateAttrTranslateById",t,"attribute.UpdateAttrTranslateByIdResp")}function g(e){var t=r["a"].create("ProductAttrValueDownloadReq",e);return Object(r["a"])("product","ProductAttrService.ProductAttrValueDownload",t,"attribute.ProductAttrValueDownloadResp")}function v(e){var t=r["a"].create("UploadAttrTranslateReq",e);return Object(r["a"])("product","ProductAttrService.UploadAttrTranslate",t,"attribute.UploadAttrTranslateResp")}function y(e){var t=r["a"].create("UploadAttrValueTranslateReq",e);return Object(r["a"])("product","ProductAttrService.UploadAttrValueTranslate",t,"attribute.UploadAttrValueTranslateResp")}function b(e){console.log(e);var t=r["a"].create("CategoryListGetReq",e);return Object(r["a"])("product","ProductCategoryService.CategoryListGet",t,"category.CategoryListGetResp")}function S(e){console.log(e);var t=r["a"].create("CategoryGroupListGetReq",e);return Object(r["a"])("product","ProductCategoryService.CategoryGroupListGet",t,"category.CategoryGroupListGetResp")}function I(e){console.log(e);var t=r["a"].create("CategoryGroupAddOrUpdateReq",e);return Object(r["a"])("product","ProductCategoryService.CategoryGroupAddOrUpdate",t,"category.CategoryGroupAddOrUpdateResp")}function C(e){console.log(e);var t=r["a"].create("CategoryGroupGetReq",e);return Object(r["a"])("product","ProductCategoryService.CategoryGroupGet",t,"category.CategoryGroupGetResp")}function P(e){console.log(e);var t=r["a"].create("CategoryGroupSortReq",e);return Object(r["a"])("product","ProductCategoryService.CategoryGroupSort",t,"category.CategoryGroupSortResp")}function k(e){console.log(e);var t=r["a"].create("CategoryGroupDeleteReq",e);return Object(r["a"])("product","ProductCategoryService.CategoryGroupDelete",t,"category.CategoryGroupDeleteResp")}function T(e){console.log(e);var t=r["a"].create("CategoryAddReq",e);return Object(r["a"])("product","ProductCategoryService.CategoryAdd",t,"category.CategoryAddResp")}function O(e){console.log(e);var t=r["a"].create("CategoryDeleteReq",e);return Object(r["a"])("product","ProductCategoryService.CategoryDelete",t,"category.CategoryDeleteResp")}function D(e){console.log(e);var t=r["a"].create("CategoryChangeToSortReq",e);return Object(r["a"])("product","ProductCategoryService.CategoryChangeToSort",t,"category.CategoryChangeToSortResp")}function w(e){console.log(e);var t=r["a"].create("CategoryUpdateReq",e);return Object(r["a"])("product","ProductCategoryService.CategoryUpdate",t,"category.CategoryUpdateResp")}function _(e){console.log(e);var t=r["a"].create("CategoryQueryByNameReq",e);return Object(r["a"])("product","ProductCategoryService.CategoryQueryByName",t,"CategoryQueryByNameResp")}function L(e){console.log(e);var t=r["a"].create("CategoryHiddenOrShowReq",e);return Object(r["a"])("product","ProductCategoryService.CategoryHiddenOrShow",t,"CategoryHiddenOrShowResp")}function x(e){console.log(e);var t=r["a"].create("CategoryChangSortReq",e);return Object(r["a"])("product","ProductCategoryService.CategoryChangSort",t,"CategoryChangSortResp")}function R(e){console.log(e);var t=r["a"].create("GetUpperRelatedCategoryByIdReq",e);return Object(r["a"])("product","ProductCategoryService.GetUpperRelatedCategoryById",t,"category.GetUpperRelatedCategoryByIdResp")}function A(e){console.log(e);var t=r["a"].create("Get1688PicReq",e);return Object(r["a"])("product","ProductService.Get1688Pic",t,"product.Get1688PicResp")}function E(e){console.log(e);var t=r["a"].create("GetProductEnumInfoReq",e);return Object(r["a"])("product","ProductService.GetProductEnumInfo",t,"product.GetProductEnumInfoResp")}function N(e){console.log(e);var t=r["a"].create("InsertProductReq",e);return Object(r["a"])("product","ProductService.InsertProduct",t,"product.InsertProductResp")}function $(e){console.log(e);var t=r["a"].create("UpdateProductReq",e);return Object(r["a"])("product","ProductService.UpdateProduct",t,"product.UpdateProductResp")}function j(e){console.log(e);var t=r["a"].create("DisableProductReq",e);return Object(r["a"])("product","ProductService.DisableProduct",t,"product.DisableProductResp")}function F(e){console.log(e);var t=r["a"].create("ListProductReq",e);return Object(r["a"])("product","ProductService.ListProduct",t,"product.ListProductResp")}function V(e){console.log(e);var t=r["a"].create("ViewProductInfoReq",e);return Object(r["a"])("product","ProductService.ViewProductInfo",t,"product.ViewProductInfoResp")}function B(e){console.log(e);var t=r["a"].create("CompositeSlaveSkuInfoQueryReq",e);return Object(r["a"])("product","ProductService.CompositeSlaveSkuInfoQuery",t,"product.CompositeSlaveSkuInfoQueryResp")}function q(e){var t=r["a"].create("ProductExportReq",e);return Object(r["a"])("product","ProductService.ProductExport",t,"product.ProductExportResp")}function M(e){console.log(e);var t=r["a"].create("ListCategoryProductReq",e);return Object(r["a"])("product","ProductCategoryService.ListCategoryProduct",t,"ListCategoryProductResp")}function U(e){console.log(e);var t=r["a"].create("ChangeCategoryProductSortReq",e);return Object(r["a"])("product","ProductCategoryService.ChangeCategoryProductSort",t,"ChangeCategoryProductSortResp")}function G(e){console.log(e);var t=r["a"].create("SetCategoryProductTopReq",e);return Object(r["a"])("product","ProductCategoryService.SetCategoryProductTop",t,"SetCategoryProductTopResp")}function z(e){var t=r["a"].create("CopyFrontCategoryReq",e);return Object(r["a"])("product","ProductCategoryService.CopyFrontCategory",t,"category.CopyFrontCategoryResp")}function W(e){console.log(e);var t=r["a"].create("GetProductSkuInfoBySkuCodeReq",e);return Object(r["a"])("product","ProductService.GetProductSkuInfoBySkuCode",t,"GetProductSkuInfoBySkuCodeResp")}function H(e){var t=r["a"].create("ListProductPriceTemplateReq",e);return Object(r["a"])("product","ProductPriceTemplateService.ListProductPriceTemplate",t,"ListProductPriceTemplateResp")}function K(e){var t=r["a"].create("AddNewProductPriceTemplateReq",e);return Object(r["a"])("product","ProductPriceTemplateService.AddNewProductPriceTemplate",t,"AddNewProductPriceTemplateResp")}function J(e){console.log(e);var t=r["a"].create("UpdateProductPriceTemplateReq",e);return Object(r["a"])("product","ProductPriceTemplateService.UpdateProductPriceTemplate",t,"UpdateProductPriceTemplateResp")}function Q(e){var t=r["a"].create("ChangePriceTemplateEffectStatusReq",e);return Object(r["a"])("product","ProductPriceTemplateService.ChangePriceTemplateEffectStatus",t,"ChangePriceTemplateEffectStatusResp")}function Y(e){console.log(e);var t=r["a"].create("BrandInfoAddReq",e);return Object(r["a"])("product","ProductBrandService.BrandInfoAdd",t,"brand.BrandInfoAddResp")}function X(e){console.log(e);var t=r["a"].create("BrandInfoModifyReq",e);return Object(r["a"])("product","ProductBrandService.BrandInfoModify",t,"brand.BrandInfoModifyResp")}function Z(e){console.log(e);var t=r["a"].create("BrandInfoGetReq",e);return Object(r["a"])("product","ProductBrandService.BrandInfoGet",t,"brand.BrandInfoGetResp")}function ee(e){console.log(e);var t=r["a"].create("BrandChangeStatusReq",e);return Object(r["a"])("product","ProductBrandService.BrandChangeStatus",t,"brand.BrandChangeStatusResp")}function te(e){console.log(e);var t=r["a"].create("BrandDeleteReq",e);return Object(r["a"])("product","ProductBrandService.BrandDelete",t,"brand.BrandDeleteResp")}function ae(e){var t=r["a"].create("ExchangeGetRecentRateTemplateReq",e);return Object(r["a"])("i18n","ExchangeService.ExchangeGetRecentRateTemplate",t,"ExchangeGetRecentRateTemplateResp")}function re(e){var t=r["a"].create("ExchangeGetReadyConfigTemplateReq",e);return Object(r["a"])("i18n","ExchangeService.ExchangeGetReadyConfigTemplate",t,"ExchangeGetReadyConfigTemplateResp")}function ie(e){var t=r["a"].create("ExchangeSaveRateReq",e);return Object(r["a"])("i18n","ExchangeService.ExchangeSaveRate",t,"ExchangeSaveRateResp")}function oe(e){var t=r["a"].create("ExchangeReviewReq",e);return Object(r["a"])("i18n","ExchangeService.ExchangeReview",t,"ExchangeReviewResp")}function ne(e){console.log(e);var t=r["a"].create("ExchangeGetRateSaveHistoryReq",e);return Object(r["a"])("i18n","ExchangeService.ExchangeGetRateSaveHistory",t,"ExchangeGetRateSaveHistoryResp")}function ce(e){var t=r["a"].create("ExchangeGetRateReq",e);return Object(r["a"])("i18n","ExchangeService.ExchangeGetRate",t,"ExchangeGetRateResp")}function se(e){var t=r["a"].create("GetProductSpuReq",e);return Object(r["a"])("product","ProductService.GetProductSpu",t,"GetProductSpuResp")}function le(e){var t=r["a"].create("GetProductSkuReq",e);return Object(r["a"])("product","ProductService.GetProductSku",t,"GetProductSkuResp")}function ue(e){var t=r["a"].create("OneKeyUploadProductReq",e);return Object(r["a"])("product","ProductService.OneKeyUploadProduct",t,"product.OneKeyUploadProductResp")}function de(e){var t=r["a"].create("CheckToBeConfirmReq",e);return Object(r["a"])("product","ProductService.CheckToBeConfirm",t,"product.CheckToBeConfirmResp")}function pe(e){var t=r["a"].create("DeleteDraftsReq",e);return Object(r["a"])("product","ProductService.DeleteDrafts",t,"product.DeleteDraftsResp")}function fe(e){var t=r["a"].create("ListDraftsReq",e);return Object(r["a"])("product","ProductService.ListDrafts",t,"product.ListDraftsResp")}function he(e){var t=r["a"].create("UpdateDraftReq",e);return Object(r["a"])("product","ProductService.UpdateDraft",t,"product.UpdateDraftResp")}function me(e){var t=r["a"].create("GetDraftByIdReq",e);return Object(r["a"])("product","ProductService.GetDraftById",t,"product.GetDraftByIdResp")}function ge(e){var t=r["a"].create("GetDraftOperatorListReq",e);return Object(r["a"])("product","ProductService.GetDraftOperatorList",t,"product.GetDraftOperatorListResp")}function ve(e){var t=r["a"].create("AdvanceSaleSkuInfoGetReq",e);return Object(r["a"])("product","ProductService.AdvanceSaleSkuInfoGet",t,"product.AdvanceSaleSkuInfoGetResp")}function ye(e){var t=r["a"].create("AdvanceSaleAddReq",e);return Object(r["a"])("product","ProductService.AdvanceSaleAdd",t,"product.AdvanceSaleAddResp")}function be(e){var t=r["a"].create("AdvanceSaleListReq",e);return Object(r["a"])("product","ProductService.AdvanceSaleList",t,"product.AdvanceSaleListResp")}function Se(e){var t=r["a"].create("AdvanceSaleGetReq",e);return Object(r["a"])("product","ProductService.AdvanceSaleGet",t,"product.AdvanceSaleGetResp")}function Ie(e){var t=r["a"].create("AdvanceSaleUploadReq",e);return Object(r["a"])("product","ProductService.AdvanceSaleUpload",t,"product.AdvanceSaleUploadResp")}function Ce(e){var t=r["a"].create("AdvanceSaleUpdateReq",e);return Object(r["a"])("product","ProductService.AdvanceSaleUpdate",t,"product.AdvanceSaleUpdateResp")}function Pe(e){var t=r["a"].create("AdvanceSaleDownloadReq",e);return Object(r["a"])("product","ProductService.AdvanceSaleDownload",t,"product.AdvanceSaleDownloadResp")}function ke(e){var t=r["a"].create("ManualPushAdvancePurchaseReq",e);return Object(r["a"])("product","ProductService.ManualPushAdvancePurchase",t,"product.ManualPushAdvancePurchaseResp")}function Te(e){var t=r["a"].create("CreateUploadTaskRequest",e);return Object(r["a"])("carrier","CarrierService.CreateUploadTask",t,"carrier.CreateUploadTaskResponse")}function Oe(e){var t=r["a"].create("GetShelveListReq",e);return Object(r["a"])("product","ProductBatchOperationService.GetShelveList",t,"product.GetShelveListResp")}function De(e){var t=r["a"].create("BatchAcceptShelveAdviceCheckReq",e);return Object(r["a"])("product","ProductBatchOperationService.BatchAcceptShelveAdviceCheck",t,"product.BatchAcceptShelveAdviceCheckResp")}function we(e){var t=r["a"].create("BatchAcceptShelveAdviceReq",e);return Object(r["a"])("product","ProductBatchOperationService.BatchAcceptShelveAdvice",t,"product.BatchAcceptShelveAdviceResp")}function _e(e){var t=r["a"].create("BatchOnShelveCheckReq",e);return Object(r["a"])("product","ProductBatchOperationService.BatchOnShelveCheck",t,"product.BatchOnShelveCheckResp")}function Le(e){var t=r["a"].create("BatchOnShelveReq",e);return Object(r["a"])("product","ProductBatchOperationService.BatchOnShelve",t,"product.BatchOnShelveResp")}function xe(e){var t=r["a"].create("BatchOffShelveReq",e);return Object(r["a"])("product","ProductBatchOperationService.BatchOffShelve",t,"product.BatchOffShelveResp")}function Re(e){var t=r["a"].create("ChangeSaleStatusReq",e);return Object(r["a"])("product","ProductBatchOperationService.ChangeSaleStatus",t,"product.ChangeSaleStatusResp")}function Ae(e){var t=r["a"].create("GetTaskListRequest",e);return Object(r["a"])("carrier","CarrierService.GetTaskList",t,"carrier.GetTaskListResponse")}function Ee(e){var t=r["a"].create("StopTaskRequest",e);return Object(r["a"])("carrier","CarrierService.StopTask",t,"carrier.StopTaskResponse")}function Ne(e){var t=r["a"].create("GetChilindoImagesReq",e);return Object(r["a"])("carrier","CarrierService.GetChilindoImages",t,"carrier.GetChilindoImagesResp")}function $e(e){var t=r["a"].create("TagChilindoImageReq",e);return Object(r["a"])("carrier","CarrierService.TagChilindoImage",t,"carrier.TagChilindoImageResp")}function je(e){var t=r["a"].create("BatchAddTaskReq",e);return Object(r["a"])("carrier","CarrierService.BatchAddTask",t,"carrier.BatchAddTaskResp")}function Fe(e){var t=r["a"].create("SynonymWordsListReq",e);return Object(r["a"])("product","ProductSearchBossService.SynonymWordsList",t,"product.SynonymWordsListResp")}function Ve(e){var t=r["a"].create("SynonymWordsAddOrEditReq",e);return Object(r["a"])("product","ProductSearchBossService.SynonymWordsAddOrEdit",t,"product.SynonymWordsAddOrEditResp")}function Be(e){var t=r["a"].create("SynonymWordsDeleteReq",e);return Object(r["a"])("product","ProductSearchBossService.SynonymWordsDelete",t,"product.SynonymWordsDeleteResp")}function qe(e){var t=r["a"].create("SensitiveWordsListReq",e);return Object(r["a"])("product","ProductSearchBossService.SensitiveWordsList",t,"product.SensitiveWordsListResp")}function Me(e){var t=r["a"].create("SensitiveWordsAddOrEditReq",e);return Object(r["a"])("product","ProductSearchBossService.SensitiveWordsAddOrEdit",t,"product.SensitiveWordsAddOrEditResp")}function Ue(e){var t=r["a"].create("SensitiveWordsDeleteReq",e);return Object(r["a"])("product","ProductSearchBossService.SensitiveWordsDelete",t,"product.SensitiveWordsDeleteResp")}function Ge(e){var t=r["a"].create("CreateSameKindTaskReq",e);return Object(r["a"])("carrier","CarrierService.CreateSameKindTask",t,"carrier.CreateSameKindTaskResp")}function ze(e){var t=r["a"].create("SameKindTaskListReq",e);return Object(r["a"])("carrier","CarrierService.SameKindTaskList",t,"carrier.SameKindTaskListResp")}function We(e){var t=r["a"].create("SameKindResultReq",e);return Object(r["a"])("carrier","CarrierService.SameKindResult",t,"carrier.SameKindResultResp")}function He(e){var t=r["a"].create("SupplierProductAuditListReq",e);return Object(r["a"])("product","SupplierProductService.SupplierAuditList",t,"SupplierProductAuditListResp")}function Ke(e){var t=r["a"].create("GetDraftByIdReq",e);return Object(r["a"])("product","ProductService.GetSupplierDraftById",t,"GetDraftByIdResp")}function Je(e){var t=r["a"].create("RefuseSupplierDraftReq",e);return Object(r["a"])("product","ProductService.RefuseSupplierDraft",t,"RecommendConfigResp")}function Qe(e){var t=r["a"].create("LiveProductListReq",e);return Object(r["a"])("product","LiveProductService.LiveProductList",t,"LiveProductListResp")}function Ye(e){var t=r["a"].create("DeleteLiveProductReq",e);return Object(r["a"])("product","LiveProductService.DeleteLiveProduct",t,"DeleteLiveProductResp")}function Xe(e){var t=r["a"].create("UpdateOrInsertLiveProductReq",e);return Object(r["a"])("product","LiveProductService.UpdateOrInsertLiveProduct",t,"UpdateOrInsertLiveProductResp")}function Ze(e){var t=r["a"].create("CategoryStarReq",e);return Object(r["a"])("product","ProductCategoryService.CategoryStar",t,"CategoryStarResp")}function et(e){var t=r["a"].create("GetSkuInfoBySkuIdReq",e);return Object(r["a"])("product","ProductService.GetSkuInfoBySkuId",t,"GetSkuInfoBySkuIdResp")}function tt(e){var t=r["a"].create("ListProductSelectReq",e);return Object(r["a"])("product","ProductSelectService.ListProductSelectPage",t,"ListProductSelectResp")}function at(e){var t=r["a"].create("SearchSupplierByImageReq",e);return Object(r["a"])("product","ProductSelectService.SearchSupplierByImage",t,"SearchSupplierByImageResp")}function rt(e){var t=r["a"].create("ConfirmProductReq",e);return Object(r["a"])("product","ProductSelectService.ConfirmProduct",t,"ConfirmProductResp")}function it(e){var t=r["a"].create("product.DeleteProductReq",e);return Object(r["a"])("product","ProductSelectService.DeleteProduct",t,"product.DeleteProductResp")}function ot(e){var t=r["a"].create("ListProductSelectReq",e);return Object(r["a"])("product","ProductSelectService.ListProductSelectExport",t,"ListProductSelectExportResp")}function nt(e){var t=r["a"].create("CategoryMappingQueryReq",e);return Object(r["a"])("product","ProductCategoryService.CategoryMappingList",t,"category.CategoryMappingQueryResp")}function ct(e){var t=r["a"].create("CategoryLazadaQueryReq",e);return Object(r["a"])("product","ProductCategoryService.CategoryLazadaList",t,"category.CategoryLazadaQueryResp")}function st(e){var t=r["a"].create("GetCateMappingDetailReq",e);return Object(r["a"])("product","ProductCategoryService.GetCateMappingDetail",t,"GetCateMappingDetailResp")}function lt(e){var t=r["a"].create("UpdateCategoryMappingReq",e);return Object(r["a"])("product","ProductCategoryService.UpdateCategoryMapping",t,"category.UpdateCategoryMappingResp")}function ut(e){var t=r["a"].create("ListProductReq",e);return Object(r["a"])("product","LazadaProductService.ListProduct",t,"lazada.ListProductResp")}function dt(e){var t=r["a"].create("GetPublishInfoReq",e);return Object(r["a"])("product","LazadaProductService.GetPublishInfo",t,"lazada.GetPublishInfoResp")}function pt(e){var t=r["a"].create("PublishProductReq",e);return Object(r["a"])("product","LazadaProductService.PublishProduct",t,"lazada.PublishProductResp")}},"96ec":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"confirm-dialog"},[a("el-dialog",{attrs:{title:e.title,visible:e.toggle,"close-on-click-modal":!1,"show-close":!1,width:"400px"},on:{"update:visible":function(t){e.toggle=t}}},[a("div",{attrs:{slot:"title"},slot:"title"},[a("i",{staticClass:"el-icon-warning icon"}),e._v(e._s(e.title)+"\n        ")]),a("p",{staticClass:"warning"},[e._v(e._s(e.text))]),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:e.cancle}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.confirm}},[e._v("确 定")])],1)])],1)},i=[],o={data:function(){return{}},props:{dialogVisible:{type:Boolean,default:!1},title:{type:String,default:"提示"},text:{type:String,default:""}},computed:{toggle:{get:function(){return this.dialogVisible},set:function(){}}},methods:{cancle:function(){this.$emit("on-cancle")},confirm:function(){this.$emit("on-confirm")}}},n=o,c=(a("33c7"),a("8f70"),a("2877")),s=Object(c["a"])(n,r,i,!1,null,"75168e74",null);t["a"]=s.exports},"9a43":function(e,t,a){},"9c1e":function(e,t,a){},"9c8b":function(e,t,a){},"9cf6":function(e,t,a){"use strict";var r=a("6b6d"),i=a.n(r);i.a},"9e08":function(e,t,a){},"9f81":function(e,t,a){"use strict";var r=a("1ae3"),i=a.n(r);i.a},a1e7:function(e,t,a){"use strict";var r=a("6f8f"),i=a.n(r);i.a},a4f1:function(e,t,a){},ad55:function(e,t,a){"use strict";var r=a("bef4"),i=a.n(r);i.a},b344:function(e,t,a){"use strict";var r=a("75da"),i=a.n(r);i.a},b437:function(e,t,a){},bd7f:function(e,t,a){"use strict";var r=a("1e37"),i=a.n(r);i.a},be37:function(e,t,a){"use strict";var r=a("77be"),i=a.n(r);i.a},bef4:function(e,t,a){},c3d6:function(e,t,a){"use strict";var r=a("30ee"),i=a.n(r);i.a},ce37:function(e,t,a){},cfa8:function(e,t,a){},d376:function(e,t,a){"use strict";var r=a("a4f1"),i=a.n(r);i.a},d433:function(e,t,a){},d5d9:function(e,t,a){},dc05:function(e,t,a){"use strict";var r=a("5ea9"),i=a.n(r);i.a},dcfc:function(e,t,a){},df99:function(e,t,a){},dfa5:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[1===e.step?a("div",[a("back-category",{attrs:{pageName:"product"},on:{"on-category-link-change":e.onCategoryLinkChange,onChangeType:e.changeType}}),"1"==e.activeName?a("div",{staticClass:"category-info"},[e._v("\n            已选："),a("span",[e._v(e._s(e.categoryLinkStr))]),a("el-button",{staticClass:"add-btn",attrs:{disabled:e.disabledStartCreate,type:"primary"},on:{click:e.startCreat}},[e._v(" 开始创建 ")])],1):e._e()],1):e._e(),2===e.step?a("div",{ref:"productInfo",staticClass:"product-info"},[a("el-card",{staticClass:"operate-btn",style:{width:e.operateAreaWidth+"px"}},[e.hasPermission("BTN_PRODUCT_EDIT")&&"check"!=e.editType?a("el-button",{attrs:{type:"primary",size:"small",loading:e.submitLoading},on:{click:e.submitProduct}},[e._v("保存")]):e._e(),"check"!=e.editType?a("el-button",{attrs:{type:"primary",plain:"",size:"small"},on:{click:e.cancleSubmit}},[e._v("取消")]):e._e(),"check"===e.editType&&e.hasPermission("BTN_PRODUCT_DRAFT_CHECK")?a("el-button",{attrs:{type:"success",size:"small"},on:{click:e.submitCheckDraft}},[e._v("审核通过")]):e._e(),"check"===e.editType&&e.hasPermission("BTN_PRODUCT_DRAFT_CHECK")&&3===e.draftStatus?a("el-button",{attrs:{type:"warning",size:"small"},on:{click:e.refuseCheckSupplierDraft}},[e._v("审核不通过")]):e._e(),"check"===e.editType&&e.hasPermission("BTN_PRODUCT_DRAFT_UPDATE")&&""===e.draftStatus?a("el-button",{attrs:{size:"small",loading:e.updateLoading},on:{click:e.updateDraftData}},[e._v("暂 存")]):e._e()],1),a("el-card",{staticClass:"info-card",staticStyle:{"margin-top":"60px"}},[a("div",{staticClass:"info-title"},[e._v("基本信息")]),a("product-base-info",{ref:"productBaseInfo",attrs:{type:e.editType,countryShelveMap:e.countryShelveMap,baseInfo:e.baseInfo},on:{"on-brand-change":e.handleBrandChange,"on-title-change":e.handleProductTitleChange,"on-orgurl-change":e.handleOrgUrlChange,"on-modify":e.handleModifyCategory}})],1),a("el-card",{staticClass:"info-card"},[a("div",{staticClass:"info-title"},[e._v("商品参数")]),a("product-params",{ref:"productParams",attrs:{standardAttrs:e.standardAttrIdList,type:e.editType,productId:e.productId,draftId:e.draftId,productParams:e.productParams,brandInfo:e.brandInfo,paramAttrs:e.paramAttrIdList}})],1),a("el-card",{staticClass:"info-card"},[a("div",{staticClass:"info-title"},[e._v("图片视频")]),a("product-media",{ref:"productMedia",attrs:{mediaInfo:e.mediaInfo,videoInfo:e.videoInfo,orgUrl:e.orgUrl}})],1),a("el-card",{staticClass:"info-card"},[a("div",{staticClass:"info-title"},[e._v("服务承诺")]),a("product-service-info",{ref:"serviceInfo",attrs:{type:e.editType,allServiceInfoItemForm:e.allServiceInfoItemForm}})],1),a("el-card",{staticClass:"info-card"},[a("div",{staticClass:"info-title"},[e._v("规格属性")]),a("product-standard-attr",{ref:"standardAttr",attrs:{editType:e.editType,productTitle:e.productTitle,selectedStandardModel:e.selectedStandardModel,standardAttrs:e.standardAttrIdList,attrValueModelList:e.attrValueModelList,supplyCurrencyObj:e.supplyCurrencyObj,allCountryTableDataModel:e.allCountryTableDataModel,categoryLink:e.categoryLink,category:e.baseInfo.cateId,productSourceInfo:e.productSourceInfo},on:{"on-get-media-data":e.handleGetMediaData}})],1)],1):e._e(),a("refuse-draft-dialog",{attrs:{dialogVisible:e.refuseDraftDialogVisible},on:{"on-confirm":e.handleConfirmRefuse,"on-cancle":e.handleCancleRefuse}})],1)},i=[],o=(a("f559"),a("55dd"),a("7514"),a("20d6"),a("7f7f"),a("28a5"),a("ac6a"),a("2ef0")),n=a.n(o),c=a("1699"),s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"base-info-wrapper"},[a("el-form",{ref:"productBaseInfoForm",attrs:{model:e.baseInfoForm,rules:e.ruleValidateInfo,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"商品分类：",prop:"cateId"}},[e._v("\n            "+e._s(e.baseInfoForm.categoryLinkStr)+"\n            "),"edit"!=e.type||"edit"==e.type&&e.hasPermission("BTN_OPERATION_EDIT")?a("el-link",{attrs:{underline:!1,type:"primary"},on:{click:e.modifyCategory}},[e._v(" 修改分类")]):e._e()],1),a("el-form-item",{attrs:{label:"销售国家：",prop:"productSaleCountry"}},[a("el-checkbox-group",{on:{change:e.handleSaleCountryChange},model:{value:e.baseInfoForm.productSaleCountry,callback:function(t){e.$set(e.baseInfoForm,"productSaleCountry",t)},expression:"baseInfoForm.productSaleCountry"}},e._l(e.countryList,(function(t,r){return a("p",{key:r},[a("el-checkbox",{key:r,attrs:{label:t.shortCode,disabled:!("edit"!=e.type||"edit"==e.type&&e.hasPermission("BTN_OPERATION_EDIT"))||e.countryShelveMapStatus[t.shortCode].disabled},on:{change:e.handelCheckboxChange}},[e._v(e._s(t.nameLocal)+"\n                        "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.countryShelveMapStatus[t.shortCode].show,expression:"countryShelveMapStatus[item.shortCode].show"}],staticClass:"putaway"},[a("el-radio-group",{model:{value:e.countryShelveMapStatus[t.shortCode].shelveStatus,callback:function(a){e.$set(e.countryShelveMapStatus[t.shortCode],"shelveStatus",a)},expression:"countryShelveMapStatus[item.shortCode].shelveStatus"}},[a("el-radio",{attrs:{label:1}},[e._v("上架")]),a("el-radio",{attrs:{label:2}},[e._v("下架")])],1)],1)])],1)})),0)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"商品类型：",prop:"productType"}},[a("el-select",{staticStyle:{width:"260px"},attrs:{filterable:"",clearable:"",placeholder:"请选择",size:"medium",disabled:!("edit"!=e.type||"edit"==e.type&&e.hasPermission("BTN_OPERATION_EDIT"))},model:{value:e.baseInfoForm.productType,callback:function(t){e.$set(e.baseInfoForm,"productType",t)},expression:"baseInfoForm.productType"}},e._l(e.productTypeList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.productType}})})),1)],1),a("el-form-item",{attrs:{label:"品牌：",prop:"brandId"}},[a("el-select",{staticStyle:{width:"260px"},attrs:{filterable:"",clearable:"",placeholder:"请选择",size:"medium",disabled:!("edit"!=e.type||"edit"==e.type&&e.hasPermission("BTN_OPERATION_EDIT"))},on:{change:e.handleChangeBrand},model:{value:e.baseInfoForm.brandId,callback:function(t){e.$set(e.baseInfoForm,"brandId",t)},expression:"baseInfoForm.brandId"}},e._l(e.brandList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.nameCn,value:e.brandId}})})),1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"货物性质：",prop:"nature"}},[a("el-radio-group",{attrs:{disabled:!("edit"!=e.type||"edit"==e.type&&e.hasPermission("BTN_OPERATION_EDIT"))},model:{value:e.baseInfoForm.nature,callback:function(t){e.$set(e.baseInfoForm,"nature",t)},expression:"baseInfoForm.nature"}},[a("el-radio",{attrs:{label:1}},[e._v("普货")]),a("el-radio",{attrs:{label:2}},[e._v("敏感货")]),a("el-radio",{attrs:{label:3}},[e._v("违禁品")])],1)],1),a("el-form-item",{staticClass:"filter-item",attrs:{label:"供应商：",prop:"supplierId"}},[a("el-select",{staticStyle:{width:"260px"},attrs:{"remote-method":e.getSupplierList,filterable:"",clearable:"",remote:"","reserve-keyword":"",placeholder:"请输入供应商",disabled:!("edit"!=e.type||"edit"==e.type&&e.hasPermission("BTN_OPERATION_EDIT"))},model:{value:e.baseInfoForm.supplierId,callback:function(t){e.$set(e.baseInfoForm,"supplierId",t)},expression:"baseInfoForm.supplierId"}},e._l(e.supplierList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.supplierName,value:e.supplierId}})})),1)],1)],1)],1),a("el-form-item",{attrs:{label:"商品标题："}},[a("p",{staticClass:"tips"},[e._v("\n                请仔细填写商品标题，一键翻译功能将帮助你从中文快速翻译到其他语种，且不会覆盖您已填写的内容\n                "),a("el-button",{attrs:{type:"primary",size:"mini",plain:"",loading:e.titleTransLoading},on:{click:function(t){return e.translate(e.baseInfoForm.title.cn,"title")}}},[e._v("一键翻译")])],1),a("table",{staticClass:"table table-bordered table-info"},[a("tbody",e._l(e.languageList,(function(t,r){return a("tr",{key:r},[a("th",["cn"!==t.code&&"en"!==t.code||"check"==e.type?e._e():a("span",{staticClass:"required"},[e._v("*")]),e._v(" "+e._s(t.desc)+e._s(t.code)+" ")]),a("td",[a("el-input",{attrs:{clearable:"",size:"medium",placeholder:"请输入内容"},model:{value:e.baseInfoForm.title[t.code],callback:function(a){e.$set(e.baseInfoForm.title,t.code,a)},expression:"baseInfoForm.title[item.code]"}})],1)])})),0)])]),a("el-form-item",{attrs:{label:"宣传文案："}},[a("p",{staticClass:"tips"},[e._v("\n                如有需要可为商品填写宣传文案，它将展示在商品标题的下方\n                "),a("el-button",{attrs:{type:"primary",size:"mini",plain:"",loading:e.subTitleTransLoading},on:{click:function(t){return e.translate(e.baseInfoForm.subTitle.cn,"subTitle")}}},[e._v("一键翻译")])],1),a("table",{staticClass:"table table-bordered table-info"},[a("tbody",e._l(e.languageList,(function(t,r){return a("tr",{key:r},[a("th",[e._v(e._s(t.desc)+e._s(t.code)+" ")]),a("td",[a("el-input",{attrs:{clearable:"",size:"medium",placeholder:"请输入内容"},model:{value:e.baseInfoForm.subTitle[t.code],callback:function(a){e.$set(e.baseInfoForm.subTitle,t.code,a)},expression:"baseInfoForm.subTitle[item.code]"}})],1)])})),0)])]),a("el-form-item",{attrs:{label:"原始链接："}},[a("el-input",{attrs:{clearable:"",size:"medium",disabled:!("edit"!=e.type||"edit"==e.type&&e.hasPermission("BTN_OPERATION_EDIT"))},model:{value:e.baseInfoForm.orgUrl,callback:function(t){e.$set(e.baseInfoForm,"orgUrl",t)},expression:"baseInfoForm.orgUrl"}})],1)],1),a("confirm-dialog",{attrs:{dialogVisible:e.confirmVisible,title:e.confirmDialogTitle,text:e.confirmDialogText},on:{"on-cancle":e.cancleModify,"on-confirm":e.confirmModify}})],1)},l=[],u=(a("6762"),a("2fdb"),a("5880"),a("96ec")),d=a("9576"),p=a("d6eb"),f=a("345d"),h={name:"ProductBaseInfo",props:{type:{type:String,default:"add"},baseInfo:{type:Object,default:function(){return{}}},countryShelveMap:{type:Object,default:function(){return{}}}},data:function(){return{titleTransLoading:!1,subTitleTransLoading:!1,countrys:[],radio:1,productTypeList:[],supplierList:[],brandList:[],confirmVisible:!1,confirmDialogTitle:"是否修改分类？",confirmDialogText:"修改分类当前页面数据不会被保留",ruleValidateInfo:{},ruleValidate:{cateId:[{required:!0,message:"请选择商品分类"}],productSaleCountry:[{required:!0,message:"至少选择一个销售国家国家"}],productType:[{required:!0,trigger:"change",message:"请选择商品类型"}],brandId:[{required:!0,trigger:"change",message:"请选择品牌"}],nature:[{required:!0,trigger:"change",message:"请选择货物性质"}],supplierId:[{required:!0,trigger:"change",message:"请选择供应商"}]},baseInfoResult:{},dataValid:!1}},computed:{countryList:function(){var e=JSON.parse(this.getStore("countryList"));return n.a.forEach(e,(function(e){var t={};t.countryCode=e.shortCode,t.shelveStatus=null,t.show=!1})),e},languageList:function(){return JSON.parse(this.getStore("languageList"))},baseInfoForm:function(){var e=this;return"add"===this.type&&n.a.forEach(this.languageList,(function(t){e.$set(e.baseInfo.title,t.code,""),e.$set(e.baseInfo.subTitle,t.code,"")})),this.baseInfo},countryShelveMapStatus:function(){return this.countryShelveMap}},components:{ConfirmDialog:u["a"]},watch:{"baseInfoForm.title.cn":function(e,t){this.$emit("on-title-change",e)},"baseInfoForm.orgUrl":function(e,t){var a=this.handleOrgUrl(e);this.baseInfoForm.orgUrl=a,this.$emit("on-orgurl-change",a)},"baseInfoForm.supplierId":function(e){e&&this.getSupplierList("",this.baseInfoForm.supplierId)}},created:function(){"check"===this.type?this.ruleValidateInfo={}:this.ruleValidateInfo=this.ruleValidate,this.getBrandList(),this.getProductTypeList()},mounted:function(){},methods:{modifyCategory:function(){this.confirmVisible=!0,"edit"!==this.type&&"check"!==this.type||(this.confirmDialogText="")},cancleModify:function(){this.confirmVisible=!1},confirmModify:function(){this.$emit("on-modify"),"add"===this.type&&this.$store.commit("SET_SALE_COUNTRY_LIST",[])},getSupplierList:function(e,t){var a=this,r={supplierName:e,supplierId:t};Object(f["i"])(this.filterData(r)).then((function(e){console.log(e),1===e.ret.errcode&&(a.supplierList=e.list)}))},handleSaleCountryChange:function(e){var t=this;console.log(this.countryShelve),console.log(e);var a=[];n.a.forEach(e,(function(e){n.a.forEach(t.countryList,(function(t){e===t.shortCode&&a.push(t)}))})),n.a.forEach(this.countryShelveMap,(function(a,r){n.a.includes(e,r)?t.countryShelveMapStatus[r].show=!0:(t.countryShelveMapStatus[r].show=!1,t.countryShelveMapStatus[r].shelveStatus=null)})),this.$store.commit("SET_SALE_COUNTRY_LIST",a)},handelCheckboxChange:function(e){console.log(e)},getBrandList:function(){var e=this,t={page:{pageSize:1e4,pageNum:1}};Object(d["O"])(t).then((function(t){var a=t;e.brandList=a.brandInfo})).catch((function(e){console.error(e)}))},getProductTypeList:function(){var e=this,t={};Object(d["rb"])(this.filterData(t)).then((function(t){1===t.ret.errcode&&(e.productTypeList=t.productType)})).catch((function(e){console.error(e)}))},handleChangeBrand:function(e){var t={};n.a.forEach(this.brandList,(function(a){a.brandId===e&&(t=a)})),this.$emit("on-brand-change",t)},translate:function(e,t){var a=this;if(n.a.isEmpty(e))this.$message.warning("请先填写中文内容");else{"title"===t?this.titleTransLoading=!0:this.subTitleTransLoading=!0;var r={},i=this.formatTranslateParam("cn",e);Object(p["j"])(this.filterData(i)).then((function(e){var i=e.oneKeyTranslationUnit;console.log(a.formatTranslateResult(i)),r=a.formatTranslateResult(i),"title"===t&&(a.fillEmptyTitle(r),a.titleTransLoading=!1),"subTitle"===t&&(a.fillEmptySubTitle(r),a.subTitleTransLoading=!1)}))}},formatTranslateParam:function(e,t){var a={},r=[],i=[];return n.a.forEach(this.languageList,(function(e){"cn"!==e.code&&i.push(e.code)})),n.a.forEach(i,(function(a){var i={};i.fromLanguageCode=e,i.originContent=t,i.toLanguageCode=a,r.push(i)})),console.log(r),a.oneKeyTranslationUnit=r,a},formatTranslateResult:function(e){var t={};return n.a.forEach(e,(function(e){t[e.toLanguageCode]=e.translation})),t},fillEmptyTitle:function(e){var t=this;n.a.forEach(e,(function(e,a){n.a.forEach(t.baseInfoForm.title,(function(r,i){a===i&&t.$set(t.baseInfoForm.title,i,e)}))}))},fillEmptySubTitle:function(e){var t=this;n.a.forEach(e,(function(e,a){n.a.forEach(t.baseInfoForm.subTitle,(function(r,i){a===i&&t.$set(t.baseInfoForm.subTitle,i,e)}))}))},getBaseInfoData:function(){var e=this;this.$refs.productBaseInfoForm.validate((function(t){if(t){var a=[];if(n.a.forEach(e.countryShelveMapStatus,(function(e,t){var r={};r.countryCode=t,r.shelveStatus=e.shelveStatus,e.show&&a.push(r)})),"check"!=e.type){if(n.a.find(a,{shelveStatus:null}))return void e.$message.error("请设置商品上下架状态！");if(""===e.baseInfoForm.title.cn)return void e.$message.error("商品标题中文不能为空！");if(""===e.baseInfoForm.title.en)return void e.$message.error("商品标题英文不能为空！")}var r=[];n.a.forEach(e.baseInfoForm.title,(function(e,t){var a={};a.languageCode=t,a.name=e,r.push(a)}));var i=[];n.a.forEach(e.baseInfoForm.subTitle,(function(e,t){var a={};a.languageCode=t,a.name=e,i.push(a)}));var o={};o=n.a.pick(e.baseInfoForm,["cateId","productType","brandId","nature","supplierId","orgUrl"]),o.title=r,o.subTitle=i,o.saleCountry=a,e.baseInfoResult=o,e.dataValid=!0}}))},handleOrgUrl:function(e){var t=e.indexOf("?");return t>-1&&(e=e.substring(0,t)),e}}},m=h,g=(a("be37"),a("47b2"),a("2877")),v=Object(g["a"])(m,s,l,!1,null,"197cc514",null),y=v.exports,b=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"product-params-wrapper"},[a("el-form",{ref:"productBaseInfoForm",attrs:{inline:!0,model:e.productParamsForm,"label-width":"150px"}},[a("el-form-item",{staticStyle:{width:"500px"},attrs:{label:"品牌："}},[e._v(e._s(e.brandInfo.nameCn)+"/"+e._s(e.brandInfo.nameEn))]),e._l(e.paramAttrs,(function(t,r){return a("el-form-item",{key:r,staticStyle:{width:"500px"},attrs:{label:t.cn+"："}},[a("el-select",{staticStyle:{width:"260px"},attrs:{multiple:"",filterable:"",clearable:"","multiple-limit":30,placeholder:"请选择或搜索",disabled:!("edit"!=e.type||"edit"==e.type&&e.hasPermission("BTN_OPERATION_EDIT"))},model:{value:e.productParamsForm.productType[t.attrId],callback:function(a){e.$set(e.productParamsForm.productType,t.attrId,a)},expression:"productParamsForm.productType[item.attrId]"}},[e._l(e.paramAttrOption[t.attrId],(function(e,t){return a("el-option",{key:t,staticStyle:{width:"260px"},attrs:{label:e.label,value:e.value}})})),a("div",{staticClass:"empty-option",attrs:{slot:"empty"},slot:"empty"},[e._v("\n                    没有你想要的属性值？\n                    "),1===t.customize?a("el-link",{attrs:{underline:!1,type:"primary"},on:{click:function(a){return e.addAttrValue(t.attrId)}}},[e._v("新增")]):a("span",[e._v("请联系属性值管理员扩充属性模板")])],1)],2),"check"===e.type?a("el-button",{staticStyle:{"margin-left":"6px"},attrs:{type:"text"},on:{click:function(a){return e.delParams(t)}}},[e._v("删除")]):e._e()],1)}))],2),a("add-attr-value-dialog",{attrs:{dialogVisible:e.addAttrValueVisible},on:{"on-cancle":e.cancleAddAttr,"on-confirm":e.confirmAddAttr}})],1)},S=[],I=(a("8e6e"),a("456d"),a("bd86")),C=(a("6b54"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"add-attr-value-dialog"},[a("el-dialog",{attrs:{title:e.dialogTitle,visible:e.toggle,width:"700px","close-on-click-modal":!1},on:{"update:visible":function(t){e.toggle=t},close:e.cancle}},[a("table",{staticClass:"table table-bordered table-info"},[a("tbody",e._l(e.languageList,(function(t,r){return a("tr",{key:r},[a("th",["cn"===t.code||"en"===t.code?a("span",{staticClass:"required"},[e._v("*")]):e._e(),e._v(" "+e._s(t.desc)+e._s(t.code)+" ")]),a("td",[a("el-input",{attrs:{clearable:"",size:"medium",placeholder:"请输入内容"},model:{value:e.attrValue[t.code],callback:function(a){e.$set(e.attrValue,t.code,a)},expression:"attrValue[item.code]"}})],1)])})),0)]),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:e.cancle}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.confirm}},[e._v("确 定")])],1)])],1)}),P=[],k={name:"AddAttrValueDialog",data:function(){return{dialogTitle:"新增属性值",attrValue:{}}},props:{editType:{type:String,default:"add"},dialogVisible:{type:Boolean,default:!1}},components:{},computed:{toggle:{get:function(){return this.dialogVisible},set:function(){}},languageList:function(){var e=this,t=JSON.parse(this.getStore("languageList"));return _.forEach(t,(function(t){e.$set(e.attrValue,t.code,"")})),t}},methods:{reset:function(){var e=this;_.forEach(this.languageList,(function(t){e.$set(e.attrValue,t.code,"")}))},cancle:function(){this.$emit("on-cancle"),this.reset()},confirm:function(){""!==this.attrValue.cn?""!==this.attrValue.en?this.$emit("on-confirm",this.attrValue):this.$message.error("属性值英文不能为空！"):this.$message.error("属性值中文不能为空！")}}},T=k,O=(a("b344"),Object(g["a"])(T,C,P,!1,null,null,null)),D=O.exports;function w(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function L(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?w(Object(a),!0).forEach((function(t){Object(I["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):w(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var x,R={name:"ProductParams",props:{type:{type:String,default:"add"},productId:{type:String,default:""},draftId:{type:String,default:""},brandInfo:{type:Object,default:function(){}},paramAttrs:{type:Array,default:function(){return[]}},standardAttrs:{type:Array,default:function(){return[]}},productParams:{type:Object,default:function(){}}},data:function(){return{addAttrValueVisible:!1,productTypeList:[],paramAttrOption:{},attrValueInfo:[],attrId:null,firstAddTime:"",isDel:!1}},computed:{productParamsForm:function(){return this.productParams}},components:{AddAttrValueDialog:D},watch:{paramAttrs:function(e,t){this.isDel||this.getAllAttrOpions(e)}},created:function(){this.firstAddTime=Date.parse(new Date).toString()},mounted:function(){console.log(this.productId)},methods:{addAttrValue:function(e){this.attrId=e,this.addAttrValueVisible=!0},cancleAddAttr:function(){this.addAttrValueVisible=!1},getProductAttrById:function(e){var t=this,a={attrId:e};this.productId&&(a.productId=this.productId),this.draftId&&(a.draftId=this.draftId),a.attrType=1,Object(d["Lb"])(a).then((function(e){if(1===e.ret.errcode){var a=[];n.a.forEach(e.attrValue,(function(r){var i={label:"",value:""};i.label=r.valueName[0]?r.valueName[0].name:"",i.value=r.valueId,a.push(i),t.$set(t.paramAttrOption,e.attrId,a)}))}})).catch((function(e){console.error(e)}))},getAllAttrOpions:function(e){var t=this,a=[],r=[];n.a.forEach(e,(function(e){a.push(e.attrId)})),n.a.forEach(this.standardAttrs,(function(e){r.push(e.attrId)}));var i={};this.productId&&(i.productId=this.productId),this.draftId&&(i.draftId=this.draftId),Object(d["Mb"])(L({paramAttrId:a,standardAttrId:r},i)).then((function(e){1===e.ret.errcode&&n.a.forEach(e.paramAttr,(function(e){var a=[];n.a.forEach(e.attrValue,(function(r){var i={label:"",value:""};i.label=r.valueName[0]?r.valueName[0].name:"",i.value=r.valueId,a.push(i),t.$set(t.paramAttrOption,e.attrId,a)}))}))})).catch((function(e){console.error(e)}))},getParamsData:function(){if(this.productParamsForm.productType){var e=[];n.a.forEach(this.productParamsForm.productType,(function(t,a){n.a.forEach(t,(function(t){var r={};r.attrId=a,r.valueId=t,e.push(r)}))})),this.attrValueInfo=e}},confirmAddAttr:function(e){this.addAttrValueVisible=!1;var t=[];n.a.forEach(e,(function(e,a){var r={};r.languageCode=a,r.name=e,t.push(r)})),this.addCustomizeAttrValue(t)},addCustomizeAttrValue:function(e){var t=this,a={attrId:this.attrId,valueName:e,firstAddTime:this.firstAddTime};Object(d["w"])(a).then((function(e){if(1===e.ret.errcode){t.$message.success("属性值添加成功！");var a=e.attrValue,r=[];n.a.forEach(a,(function(e){var t={};t.label=e.valueName[0].name,t.value=e.valueId,r.push(t)})),t.paramAttrOption[t.attrId]=r}})).catch((function(e){console.log(e)}))},delParams:function(e){this.isDel=!0;var t=n.a.findIndex(this.paramAttrs,(function(t){return t.attrId===e.attrId}));this.paramAttrs.splice(t,1),this.$delete(this.productParamsForm.productType,parseInt(e.attrId))}}},A=R,E=(a("1e60"),a("ea16"),Object(g["a"])(A,b,S,!1,null,"af68063a",null)),N=E.exports,$=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"product-media-wrapper"},[a("div",{staticClass:"batch-operation"},[a("el-button",{attrs:{type:"primary",size:"mini",plain:""},on:{click:e.batchUpload}},[e._v("一键传图")]),a("el-button",{attrs:{type:"primary",size:"mini",plain:""},on:{click:e.showSyncMedia}},[e._v("同步至其他语言")])],1),a("el-tabs",{on:{"tab-click":e.handleTabClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},e._l(e.languageList,(function(t,r){return a("el-tab-pane",{key:r,attrs:{label:t.desc,name:t.desc}},[a("media-form",{ref:"mediaForm"+t.code,refInFor:!0,attrs:{languageCode:t.code,batchData:e.batchMediaData,media:e.mediaFormList[t.code],video:e.videoList[t.code]},on:{"on-translate":e.handleTranslate}})],1)})),1),a("batch-upload-img-dialog",{attrs:{orgUrl:e.orgUrl,dialogVisible:e.dialogVisible},on:{"on-cancle":e.onCancleBatchUpload,"on-submit":e.onSubmitBatchUpload}}),a("sync-media-dialog",{attrs:{dialogVisible:e.syncDialogVisible},on:{"on-cancle":e.onCancleSync,"on-confirm":e.onSubmitSync}})],1)},j=[],F=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"media-form-wrapper"},[a("el-form",{ref:"mediaForm",staticClass:"media-form",attrs:{model:e.mediaForm,rules:e.ruleValidate,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"商品主图：",prop:"rotationPics"}},[a("p",{staticClass:"tips"},[e._v("建议710*270像素以上，大小2M以下；支持jpg、jpeg、png；至少3张最多8张，第一张为主图；支持拖拽排序")]),a("draggable",e._b({staticClass:"list-group image-show",attrs:{list:e.mediaForm.rotationPics,disabled:!e.enabled,"ghost-class":"ghost",move:e.checkMove},on:{start:function(t){e.dragging=!0},end:function(t){e.dragging=!1}}},"draggable",e.getOptions(),!1),[e._l(e.mediaForm.rotationPics,(function(t,r){return a("div",{key:t.originalLink,staticClass:"list-group-item image-box",on:{click:function(t){return e.openPreview("rotationPics",r)}}},[a("div",{staticClass:"darg-item"},[a("el-image",{staticClass:"image-item",attrs:{src:t.src}}),a("div",{staticClass:"operate-area"},[a("i",{staticClass:"el-icon-delete",on:{click:function(t){return t.stopPropagation(),e.delDetailImgItem("rotation",r)}}})])],1)])})),a("div",{staticClass:"upload-box nodrag",attrs:{slot:"footer"},slot:"footer"},[a("el-upload",{attrs:{action:"","list-type":"picture-card",multiple:"",accept:e.IMG_ACCEPT,"http-request":e.uploadRotationPic,"show-file-list":!1,"before-upload":e.onImgBeforeUpload,"on-preview":e.handlePictureCardPreview}},[a("i",{staticClass:"el-icon-plus"})])],1)],2)],1),a("el-form-item",{attrs:{label:"商品视频：",prop:"video"}},[a("p",{staticClass:"tips"},[e._v("建议720*1080像素以上，大小10M以下；支持mp4、avi")]),a("div",{staticClass:"product-video"},[""!=e.videoInfo.src?a("div",{staticClass:"video-wrap"},[a("video",{ref:"media",attrs:{width:"100%",height:"100%"}},[a("source",{attrs:{src:e.videoInfo.src}}),a("object",{attrs:{data:e.videoInfo.src,width:"100%",height:"100%"}},[a("embed",{attrs:{src:e.videoInfo.src,width:"100%",height:"100%"}})])]),a("div",{staticClass:"operate-area"},[a("i",{staticClass:"el-icon-video-play",on:{click:function(t){return e.showVideo()}}}),a("i",{staticClass:"el-icon-delete",on:{click:function(t){return e.delVideoItem()}}})])]):e._e(),a("div",{directives:[{name:"show",rawName:"v-show",value:""===e.videoInfo.src,expression:"videoInfo.src === ''"}],staticClass:"upload-box"},[a("el-upload",{attrs:{action:"","list-type":"picture-card",multiple:"",accept:e.VIDEO_ACCEPT,"http-request":e.uploadVideo,"show-file-list":!1}},[a("i",{staticClass:"el-icon-plus"})])],1)])]),a("el-form-item",{attrs:{label:"商品详情图：",prop:"detailImg"}},[a("p",{staticClass:"tips"},[e._v("建议710*270像素以上，大小2M以下；支持jpg、jpeg、png；支持拖拽排序")]),a("draggable",e._b({staticClass:"list-group image-show",attrs:{list:e.mediaForm.detailPics,disabled:!e.enabled,"ghost-class":"ghost",move:e.checkMove},on:{start:function(t){e.dragging=!0},end:function(t){e.dragging=!1}}},"draggable",e.getOptions(),!1),[e._l(e.mediaForm.detailPics,(function(t,r){return a("div",{key:t.originalLink,staticClass:"list-group-item image-box",on:{click:function(t){return e.openPreview("detailPics",r)}}},[a("div",{staticClass:"darg-item"},[a("el-image",{staticClass:"image-item",attrs:{src:t.src}}),a("div",{staticClass:"operate-area"},[a("i",{staticClass:"el-icon-delete",on:{click:function(t){return t.stopPropagation(),e.delDetailImgItem("detail",r)}}})])],1)])})),a("div",{staticClass:"upload-box nodrag",attrs:{slot:"footer"},slot:"footer"},[a("el-upload",{attrs:{action:"","list-type":"picture-card",multiple:"",accept:e.IMG_ACCEPT,"http-request":e.uploadDetailPic,"show-file-list":!1,"before-upload":e.onImgBeforeUpload}},[a("i",{staticClass:"el-icon-plus"})])],1)],2)],1),a("el-form-item",{attrs:{label:"文本描述：",prop:"description"}},[a("p",{staticClass:"tips"},[e._v("\n                如有需要可为商品填写文本描述，它将展示在详情图上方，可为不同国家不同语言单独设置\n                "),"cn"===e.languageCode?a("el-button",{attrs:{loading:e.transLoading,type:"primary",size:"mini",plain:""},on:{click:function(t){return e.translate(e.mediaForm.desc)}}},[e._v("一键翻译")]):e._e()],1),a("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"请输入内容"},model:{value:e.mediaForm.desc,callback:function(t){e.$set(e.mediaForm,"desc",t)},expression:"mediaForm.desc"}})],1)],1),a("el-dialog",{attrs:{title:"",visible:e.videoDialog,width:"800px","before-close":e.handleCloseVideo},on:{"update:visible":function(t){e.videoDialog=t}}},[a("d-player",{ref:"player",attrs:{options:e.options},on:{play:e.play}}),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"})],1),a("image-preview",{directives:[{name:"show",rawName:"v-show",value:e.image.show,expression:"image.show"}],attrs:{close:e.closePreview,index:e.image.index,list:e.image.list}})],1)},V=[],B=a("310e"),q=a.n(B),M=a("60fb"),U=a("71ee"),G=a.n(U),z=(a("4da9"),a("c229")),W=8,H=20,K={name:"MediaForm",props:{batchData:{type:Object,default:function(){}},media:{type:Object,default:function(){}},video:{type:Object,default:function(){}},languageCode:{type:String,default:function(){}}},data:function(){return{transLoading:!1,ruleValidate:{},enabled:!0,dragging:!1,IMG_ACCEPT:".jpg,.jpeg,.png,.gif,.bmp,.JPG,.JPEG,.PBG,.GIF,.BMP",VIDEO_ACCEPT:".mp4,.avi,.MP4,.AVI",videoDialog:!1,player:null,options:{video:{url:"",pic:""},autoplay:!0,contextmenu:[{text:"",link:""}]},image:{show:!1,index:0,list:[]},mediaFormData:null,dataValid:!1}},computed:{languageList:function(){return this.$store.state.dict.languageList},videoInfo:function(){return this.video},mediaForm:function(){return this.media},batchMediaData:function(){return this.batchData}},components:{draggable:q.a,"d-player":G.a,imagePreview:z["a"]},mounted:function(){},methods:{checkMove:function(e){window.console.log("index: "+e.draggedContext.futureIndex)},getOptions:function(){return{animation:150,handle:".darg-item",ghostClass:"ghostClass"}},handlePictureCardPreview:function(){},handleRemove:function(){},uploadRotationPic:function(e){var t=this,a=new FormData,r={fileName:e.file.name,type:"product"};a.append("file",e.file),a.append("param",JSON.stringify(r));var i="/file/rest/uploadservices/uploadfile";Object(M["a"])(i,a).then((function(e){if("600"===e.status){var a=t.mediaForm.rotationPics.length;if(a<W){var r={id:a,originalLink:e.original_link,src:t.dealShowFileSrc(e.small_link)};t.mediaForm.rotationPics.push(r)}else t.$message.warning("商品主图最多".concat(W,"张！"))}})).catch((function(e){console.log(e)}))},uploadDetailPic:function(e){var t=this,a=new FormData,r={fileName:e.file.name,type:"product"};a.append("file",e.file),a.append("param",JSON.stringify(r));var i="/file/rest/uploadservices/uploadfile";Object(M["a"])(i,a).then((function(e){if("600"===e.status){var a=t.mediaForm.detailPics.length;if(a<H){var r={id:a,originalLink:e.original_link,src:t.dealShowFileSrc(e.small_link)};t.mediaForm.detailPics.push(r)}else t.$message.warning("商品详情图最多".concat(H,"张！"))}})).catch((function(e){console.log(e)}))},uploadVideo:function(e){var t=this,a=new FormData,r={fileName:e.file.name,type:"video"};a.append("file",e.file),a.append("param",JSON.stringify(r));var i="/file/rest/uploadservices/uploadfile";Object(M["a"])(i,a).then((function(e){"600"===e.status&&(t.videoInfo.originalLink=e.original_link,t.videoInfo.src=t.dealShowFileSrc(e.original_link),t.videoInfo.coverLink=t.dealShowFileSrc(e.coverLink))})).catch((function(e){console.log(e)}))},delVideoItem:function(){this.videoInfo.src&&(this.videoInfo.src="",this.videoInfo.originalLink=""),this.$set(this.mediaForm,"video","")},showVideo:function(){var e=this;this.videoDialog=!0,this.options.video.url=this.videoInfo.src,this.options.video.pic=this.videoInfo.coverLink,this.$nextTick((function(){e.player=e.$refs.player.dp}))},play:function(){console.log("play callback")},handleCloseVideo:function(){this.videoDialog=!1,this.$refs.player.dp.pause(),this.$refs.player.dp.seek(0)},uploadDetailSuccess:function(e){console.log(e)},delDetailImgItem:function(e,t){console.log(this.mediaForm),"rotation"===e?this.mediaForm.rotationPics.splice(t,1):this.mediaForm.detailPics.splice(t,1)},translate:function(e){var t=this;if(_.isEmpty(e))this.$message.warning("请先填写中文内容");else{this.transLoading=!0;var a={},r=this.formatTranslateParam("cn",e);Object(p["j"])(this.filterData(r)).then((function(e){var r=e.oneKeyTranslationUnit;a=t.formatTranslateResult(r),t.$emit("on-translate",a),t.transLoading=!1})).catch((function(e){console.log(e)}))}},formatTranslateParam:function(e,t){var a={},r=[],i=[];return _.forEach(this.languageList,(function(e){"cn"!==e.code&&i.push(e.code)})),_.forEach(i,(function(a){var i={};i.fromLanguageCode=e,i.originContent=t,i.toLanguageCode=a,r.push(i)})),a.oneKeyTranslationUnit=r,a},formatTranslateResult:function(e){var t={};return _.forEach(e,(function(e){t[e.toLanguageCode]=e.translation})),t},fillEmptyDesc:function(e){var t=this;_.forEach(e,(function(e,a){_.forEach(t.mediaForm.desc,(function(r,i){a===i&&_.isEmpty(r)&&t.$set(t.mediaForm.desc,i,e)}))}))},getMediaFormData:function(){var e=this;this.$refs.mediaForm.validate((function(t){t&&(e.mediaFormData=e.mediaForm,e.mediaFormData.video=e.videoInfo.originalLink,e.dataValid=!0)}))},openPreview:function(e,t){this.image.show=!0;var a=[];_.forEach(this.mediaForm[e],(function(e){a.push(e.originalLink)})),this.image.list=a,this.image.index=t},closePreview:function(){this.image.index=0,this.image.show=!1,this.image.list=[]},updataMediaInfo:function(){var e=this;console.log(this.batchMediaData);var t=this.batchMediaData.detail,a=this.batchMediaData.rotation,r=this.batchMediaData.video,i=[];_.forEach(a,(function(t,a){var r={};r.id=a,r.originalLink=t.originalLink,r.src=e.dealShowFileSrc(t.smallLink),i.push(r)}));var o=[];_.forEach(t,(function(t,a){var r={};r.id=a,r.originalLink=t.originalLink,r.src=e.dealShowFileSrc(t.smallLink),o.push(r)})),this.mediaForm.rotationPics=i,this.mediaForm.detailPics=o,this.videoInfo.originalLink=r.originalLink,this.videoInfo.src=this.dealShowFileSrc(r.originalLink),this.videoInfo.coverLink=this.dealShowFileSrc(r.coverLink)}}},J=K,Q=(a("1ab2"),a("1760"),Object(g["a"])(J,F,V,!1,null,"6485e580",null)),Y=Q.exports,X=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"batch-upload-dialog"},[a("el-dialog",{attrs:{title:e.dialogTitle,visible:e.toggle,width:"900px","close-on-click-modal":!1},on:{"update:visible":function(t){e.toggle=t},close:e.cancle}},[a("el-form",{ref:"mediaForm",attrs:{"label-width":"120px"}},[a("el-form-item",{attrs:{label:"原始链接或源码："}},[a("el-input",{staticStyle:{width:"600px","margin-right":"10px"},attrs:{type:"textarea",autosize:{minRows:1,maxRows:3},size:"medium",clearable:"",placeholder:"请输入1688的链接或者1688商品页面上的网页源码"},model:{value:e.urlSource,callback:function(t){e.urlSource=t},expression:"urlSource"}}),a("el-link",{attrs:{type:"primary",underline:!1,disabled:e.fetching},on:{click:e.fetchImg}},[e._v("开始抓图")])],1),a("el-form-item",{attrs:{label:"商品主图："}},[a("p",[e._v("已选("+e._s(e.rotationPicChecked.length)+" /"+e._s(e.rotationPicList.length)+")")]),a("div",{staticClass:"image-show"},e._l(e.rotationPicList,(function(t,r){return a("div",{key:t.name,staticClass:"list-group-item image-box"},[a("div",{staticClass:"darg-item",on:{click:function(a){return e.choiceItem(t,r)}}},[a("el-image",{staticClass:"image-item",attrs:{src:t.src}}),a("div",{class:{active:t.check}},[a("div",[a("i",{staticClass:"el-icon-circle-check"})])])],1)])})),0)]),a("el-form-item",{attrs:{label:"商品详情图："}},[a("p",[e._v("已选("+e._s(e.detailPicChecked.length)+" /"+e._s(e.detailPicList.length)+")")]),a("div",{staticClass:"image-show"},e._l(e.detailPicList,(function(t,r){return a("div",{key:t.name,staticClass:"list-group-item image-box"},[a("div",{staticClass:"darg-item",on:{click:function(a){return e.choiceDetailItem(t,r)}}},[a("el-image",{staticClass:"image-item",attrs:{src:t.src}}),a("div",{class:{active:t.check}},[a("div",[a("i",{staticClass:"el-icon-circle-check"})])])],1)])})),0)])],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:e.cancle}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",disabled:!(e.rotationPicChecked.length>0||e.detailPicChecked.length>0),loading:e.loading,size:"small"},on:{click:e.confirm}},[e._v("确定上传")])],1)],1)],1)},Z=[],ee={name:"BatchUploadDialog",data:function(){return{dialogTitle:"一键传图",fetching:!1,urlSource:"",rotationPicList:[],detailPicList:[],videoUrlList:[],mediaResult:{},loading:!1}},props:{editType:{type:String,default:"add"},dialogVisible:{type:Boolean,default:!1},orgUrl:{type:String,default:""}},components:{},computed:{toggle:{get:function(){return this.dialogVisible},set:function(){}},rotationPicChecked:function(){var e=[];return n.a.forEach(this.rotationPicList,(function(t){t.check&&e.push(t)})),e},detailPicChecked:function(){var e=[];return n.a.forEach(this.detailPicList,(function(t){t.check&&e.push(t)})),e}},watch:{orgUrl:function(e,t){this.urlSource=e}},methods:{cancle:function(){this.$emit("on-cancle"),this.reset()},confirm:function(){var e=this;this.loading=!0;var t=this,a=[];n.a.forEach(this.rotationPicList,(function(t){var r={type:"product"};r.fileName=e.getFileNameByUrl(t.src),r.url=t.src,t.check&&a.push(r)}));var r=[];n.a.forEach(this.detailPicList,(function(t){var a={type:"product"};a.fileName=e.getFileNameByUrl(t.src),a.url=t.src,t.check&&r.push(a)})),this.videoUrlList[0]?axios.all([this.uploadVideo(this.videoUrlList[0]),this.uploadImg(a,"rotation"),this.uploadImg(r,"detail")]).then(axios.spread((function(e,i,o){if(t.loading=!1,"600"===e.status){var c={};c.originalLink=e.original_link,c.coverLink=e.cover_link,t.mediaResult.video=c}if("600"===i.status){var s=i.resultMap,l=[];n.a.forEach(a,(function(e){var t={};s[e.url]&&(t.originalLink=s[e.url].original_link,t.smallLink=s[e.url].small_link,l.push(t))})),t.mediaResult["rotation"]=l}if("600"===o.status){var u=o.resultMap,d=[];n.a.forEach(r,(function(e){var t={};u[e.url]&&(t.originalLink=u[e.url].original_link,t.smallLink=u[e.url].small_link,d.push(t))})),t.mediaResult["detail"]=d}t.$emit("on-submit",t.mediaResult),t.loading=!1}))):axios.all([this.uploadImg(a,"rotation"),this.uploadImg(r,"detail")]).then(axios.spread((function(e,i){if(t.loading=!1,"600"===e.status){var o=e.resultMap,c=[];n.a.forEach(a,(function(e){var t={};o[e.url]&&(t.originalLink=o[e.url].original_link,t.smallLink=o[e.url].small_link,c.push(t))})),t.mediaResult["rotation"]=c}if("600"===i.status){var s=i.resultMap,l=[];n.a.forEach(r,(function(e){var t={};s[e.url]&&(t.originalLink=s[e.url].original_link,t.smallLink=s[e.url].small_link,l.push(t))})),t.mediaResult["detail"]=l}t.$emit("on-submit",t.mediaResult),t.loading=!1})))},reset:function(){this.urlSource="",this.rotationPicList=[],this.detailPicList=[],this.videoUrlList=[]},fetchImg:function(){var e=this;if(""!==this.urlSource){this.fetching=!0;var t={content:this.urlSource};this.rotationPicList=[],this.detailPicList=[],this.videoUrlList=[],Object(d["nb"])(this.filterData(t)).then((function(t){e.fetching=!1,1===t.ret.errcode&&(n.a.forEach(t.rotationPic,(function(t,a){var r={id:a,src:t,check:!1};a<8&&(r.check=!0),e.rotationPicList.push(r)})),n.a.forEach(t.detailPic,(function(t,a){var r={id:a,src:t,check:!1};a<20&&(r.check=!0),e.detailPicList.push(r)})),n.a.forEach(t.videoUrl,(function(t,a){var r={id:a,src:t,check:!1};e.videoUrlList.push(r)}))),console.log(e.rotationPicList)})).catch((function(t){console.error(t),e.fetching=!1}))}else this.$message.warning("请输入1688的链接或者1688商品页面上的网页源码")},choiceItem:function(e,t){if(!this.rotationPicList[t].check&&this.rotationPicChecked.length>=8)this.$message.warning("最多选择8张");else{var a=this.rotationPicList[t].check;this.rotationPicList[t].check=!0!==a}},choiceDetailItem:function(e,t){if(!this.detailPicList[t].check&&this.detailPicChecked.length>=20)this.$message.warning("最多选择20张");else{var a=this.detailPicList[t].check;this.detailPicList[t].check=!0!==a}},uploadImg:function(e,t){if(!(e.length<0)){var a=new FormData;a.append("urlParam",JSON.stringify(e));var r="/file/rest/uploadservices/uploadfileByUrlBatch";return Object(M["b"])(r,a)}},uploadVideo:function(e){var t=this.getFileNameByUrl(e.src),a=new FormData,r={fileName:t,type:"video"};a.append("url",e.src),a.append("param",JSON.stringify(r));var i="/file/rest/uploadservices/uploadfileByUrl";return Object(M["b"])(i,a)},getFileNameByUrl:function(e){var t="",a=e.lastIndexOf("/");return a>0&&(t=e.substring(a+1,e.length)),t}}},te=ee,ae=(a("a1e7"),Object(g["a"])(te,X,Z,!1,null,null,null)),re=ae.exports,ie=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"auto-pricing-dialog"},[a("el-dialog",{attrs:{title:e.dialogTitle,visible:e.toggle,width:"700px","close-on-click-modal":!1},on:{"update:visible":function(t){e.toggle=t},close:e.cancle}},[a("el-form",{ref:"autoPricingForm",attrs:{rules:e.ruleValidate,model:e.syncModel,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"从：",prop:""}},[a("el-radio-group",{model:{value:e.syncModel.sourceLang,callback:function(t){e.$set(e.syncModel,"sourceLang",t)},expression:"syncModel.sourceLang"}},[a("el-radio",{attrs:{label:"en"}},[e._v("英文")]),a("el-radio",{attrs:{label:"cn"}},[e._v("中文")])],1)],1),a("el-form-item",{attrs:{label:"同步到：",prop:""}},[a("el-checkbox-group",{attrs:{min:1},model:{value:e.syncModel.targetLang,callback:function(t){e.$set(e.syncModel,"targetLang",t)},expression:"syncModel.targetLang"}},e._l(e.languageList,(function(t){return a("el-checkbox",{key:t.code,attrs:{label:t.code}},[e._v(e._s(t.desc))])})),1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:e.cancle}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.confirm}},[e._v("确 定")])],1)],1)],1)},oe=[],ne={name:"SyncMediaDialog",props:{dialogVisible:{type:Boolean,default:!1}},data:function(){return{dialogTitle:"图片和视频同步",syncModel:{sourceLang:"en",targetLang:[]},ruleValidate:{checkedCountry:[{required:!0,trigger:"change",message:"至少选择一个国家"}],priceType:[{required:!0,trigger:"change",message:"不能为空"}],templateId:[{required:!0,trigger:"change",message:"请选择定价模板"}],transport:[{required:!0,trigger:"change",message:"不能为空"}]}}},components:{},computed:{toggle:{get:function(){if(this.dialogVisible){var e=[];n.a.forEach(this.languageList,(function(t){e.push(t.code)})),this.syncModel.targetLang=e}return this.dialogVisible},set:function(){}},languageList:function(){var e=JSON.parse(this.getStore("languageList"));return e}},methods:{cancle:function(){this.$emit("on-cancle")},confirm:function(){this.$emit("on-confirm",this.syncModel)}}},ce=ne,se=(a("1263"),Object(g["a"])(ce,ie,oe,!1,null,null,null)),le=se.exports,ue=(x={name:"ProductMedia",props:{mediaInfo:{type:Object,default:function(){}},videoInfo:{type:Object,default:function(){}},orgUrl:{type:String,default:""}},data:function(){return{activeName:"简体中文",activeLanguageCode:"cn",allMediaFormData:{},dataValid:!1,dialogVisible:!1,batchMediaData:{},syncDialogVisible:!1}},computed:{},components:{MediaForm:Y,BatchUploadImgDialog:re,SyncMediaDialog:le}},Object(I["a"])(x,"computed",{languageList:function(){var e=JSON.parse(this.getStore("languageList"));return _.forEach(e,(function(e){})),e},mediaFormList:function(){return this.mediaInfo},videoList:function(){return this.videoInfo}}),Object(I["a"])(x,"methods",{getAllMediaFormData:function(){var e=this;this.removeStore("productMediaInfo");var t=this.$refs;_.forEach(t,(function(t,a){t.length>0&&(t[0].getMediaFormData(),e.allMediaFormData[a.substr(9)]=t[0].mediaFormData)}));var a=[],r=[{code:"cn",name:"简体中文",desc:"简体中文"},{code:"en",name:"English",desc:"英语"}],i=!0;if(_.forEach(r,(function(t){e.allMediaFormData[t.code].rotationPics&&e.allMediaFormData[t.code].rotationPics.length<3&&(a.push(t.name),i=!1)})),this.dataValid=i,a.length>0){var o=a.join("、");this.$message.error("".concat(o,"商品主图不能少于3张"))}console.log("产品影音数据",this.allMediaFormData),this.setStore("productMediaInfo",this.mediaInfo["cn"])},handleTabClick:function(e){this.activeLanguageCode=this.languageList[e.index].code},batchUpload:function(){this.dialogVisible=!0},onCancleBatchUpload:function(){this.dialogVisible=!1},onSubmitBatchUpload:function(e){var t=this;this.dialogVisible=!1,this.batchMediaData=_.cloneDeep(e);var a="mediaForm"+this.activeLanguageCode;setTimeout((function(){t.$refs[a][0].updataMediaInfo()}),100)},batchSyncOtherLanguage:function(){var e=this,t="mediaForm"+this.activeLanguageCode,a={};a=this.$refs[t][0].mediaForm,_.forEach(this.languageList,(function(t){if(e.activeLanguageCode!=t.code){var r=e.$refs["mediaForm"+t.code][0].mediaForm;""===r.desc?r=_.cloneDeep(a):(r.detailPics=a.detailPics,r.rotationPics=a.rotationPics),e.$set(e.mediaFormList,t.code,r)}}));var r={};r=this.$refs[t][0].videoInfo,_.forEach(this.languageList,(function(t){e.$set(e.videoList,t.code,_.cloneDeep(r))})),this.$message.success("图片视频一键同步至其他语言成功！")},batchSyncOtherLanguageNew:function(e,t){var a=this,r="mediaForm"+e,i={};i=this.$refs[r][0].mediaForm,_.forEach(t,(function(t){if(e!=t){var r=a.$refs["mediaForm"+t][0].mediaForm;""===r.desc?r=_.cloneDeep(i):(r.detailPics=i.detailPics,r.rotationPics=i.rotationPics),a.$set(a.mediaFormList,t,r)}}));var o={};o=this.$refs[r][0].videoInfo,_.forEach(t,(function(e){a.$set(a.videoList,e,_.cloneDeep(o))})),this.$message.success("图片视频一键同步至其他语言成功！")},handleTranslate:function(e){var t=this;_.forEach(e,(function(e,a){t.$set(t.mediaFormList[a],"desc",e)})),this.$message.success("商品文本描述一键翻译成功！")},showSyncMedia:function(){this.syncDialogVisible=!0},onCancleSync:function(){this.syncDialogVisible=!1},onSubmitSync:function(e){this.syncDialogVisible=!1,this.batchSyncOtherLanguageNew(e.sourceLang,e.targetLang)}}),x),de=ue,pe=(a("7412"),Object(g["a"])(de,$,j,!1,null,"2d6e4852",null)),fe=pe.exports,he=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"product-media-wrapper"},[a("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},e._l(e.saleCountryList,(function(t,r){return a("el-tab-pane",{key:r,attrs:{label:t.nameLocal,name:t.nameLocal}},[a("service-info-item",{ref:"serviceInfoItem"+t.shortCode,refInFor:!0,attrs:{type:e.type,shortCode:t.shortCode,serviceInfoItemForm:e.allServiceInfoItemForm[t.shortCode]}})],1)})),1)],1)},me=[],ge=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"service-info-item"},[a("el-form",{ref:"serviceInfoItemForm",attrs:{model:e.serviceInfoItemForm,rules:e.ruleValidateInfo,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"售后政策：",prop:"afterSalePledge"}},[a("el-select",{staticStyle:{width:"260px"},attrs:{size:"medium",filterable:"",clearable:"",placeholder:"请选择",disabled:!("edit"!=e.type||"edit"==e.type&&e.hasPermission("BTN_OPERATION_EDIT"))},model:{value:e.serviceInfoItemForm.afterSalePledge,callback:function(t){e.$set(e.serviceInfoItemForm,"afterSalePledge",t)},expression:"serviceInfoItemForm.afterSalePledge"}},e._l(e.afterSaleList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.afterSaleId}})})),1),a("span",{staticClass:"tips"},[e._v("此承诺将展示在APP商品详情页中")])],1),a("el-form-item",{attrs:{label:"到货承诺：",prop:"arrivalPledge"}},[a("el-select",{staticStyle:{width:"260px"},attrs:{size:"medium",filterable:"",clearable:"",placeholder:"请选择",disabled:!("edit"!=e.type||"edit"==e.type&&e.hasPermission("BTN_OPERATION_EDIT"))},model:{value:e.serviceInfoItemForm.arrivalPledge,callback:function(t){e.$set(e.serviceInfoItemForm,"arrivalPledge",t)},expression:"serviceInfoItemForm.arrivalPledge"}},e._l(e.arrivalList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.arrivalId}})})),1),a("span",{staticClass:"tips"},[e._v("此承诺将展示在APP商品详情页、搜索列表页、购物车、订单详情页中")])],1),a("el-form-item",{attrs:{label:"运费模板：",prop:"freightId"}},[a("el-radio-group",{attrs:{disabled:!("edit"!=e.type||"edit"==e.type&&e.hasPermission("BTN_OPERATION_EDIT"))},model:{value:e.serviceInfoItemForm.freightType,callback:function(t){e.$set(e.serviceInfoItemForm,"freightType",t)},expression:"serviceInfoItemForm.freightType"}},[a("div",{staticClass:"radio-item"},[a("el-radio",{attrs:{label:2}},[e._v(" 运费模板")]),a("el-select",{staticStyle:{width:"260px"},attrs:{size:"medium",filterable:"",clearable:"",placeholder:"请选择",disabled:!("edit"!=e.type||"edit"==e.type&&e.hasPermission("BTN_OPERATION_EDIT"))},model:{value:e.serviceInfoItemForm.freightId,callback:function(t){e.$set(e.serviceInfoItemForm,"freightId",t)},expression:"serviceInfoItemForm.freightId"}},e._l(e.freightTemplateList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.templateName,value:e.templateId}})})),1)],1),a("div",{staticClass:"radio-item"},[a("el-radio",{attrs:{label:0}},[e._v(" 包邮 ")])],1)])],1)],1)],1)},ve=[],ye=a("2128"),be=a("9063"),Se={name:"ServiceInfoItem",props:{type:{type:String,default:"add"},serviceInfoItemForm:{type:Object,default:function(){}},shortCode:{type:String,default:""}},data:function(){return{ruleValidateInfo:{},ruleValidate:{afterSalePledge:[{required:!0,trigger:"change",message:"售后政策不能为空"}],freightId:[{}]},afterSaleList:[],arrivalList:[],freightTemplateList:[],serviceInfoItemFormData:{},freightType:""}},computed:{countryShortCode:function(){return this.shortCode}},components:{},created:function(){"check"===this.type?this.ruleValidateInfo={}:this.ruleValidateInfo=this.ruleValidate,this.getAfterSaleList(),this.getArrivalList(),this.getFreightTemplateListPage()},methods:{getAfterSaleList:function(){var e=this,t={page:{pageNum:1,pageSize:1e3}};Object(ye["c"])(t).then((function(t){1===t.ret.errcode&&(e.afterSaleList=t.afterSalePledge)})).catch((function(e){console.log(e)}))},getArrivalList:function(){var e=this,t={countryCode:this.countryShortCode,type:2,page:{pageNum:1,pageSize:1e3}};Object(ye["d"])(t).then((function(t){1===t.ret.errcode&&(e.arrivalList=t.arrivalPledge)})).catch((function(e){console.log(e)}))},getFreightTemplateListPage:function(){var e=this,t={countryCode:this.countryShortCode,page:{pageNum:1,pageSize:1e3}};Object(be["b"])(t).then((function(t){1===t.ret.errcode&&(e.freightTemplateList=t.freightTemplateUnit)})).catch((function(e){console.log(e)}))},getServiceInfoItemData:function(){var e=this;this.$refs.serviceInfoItemForm.validate((function(t){t&&(e.serviceInfoItemFormData=e.serviceInfoItemForm)}))}}},Ie=Se,Ce=(a("13b4"),Object(g["a"])(Ie,ge,ve,!1,null,"8cf7dc54",null)),Pe=Ce.exports,ke={name:"AddPurchaseLimit",props:{type:{type:String,default:"add"},allServiceInfoItemForm:{type:Object,default:function(){}}},data:function(){return{allServiceInfoData:{},dataValid:!1}},computed:{countryList:function(){return this.$store.state.dict.countryList},saleCountryList:function(){return this.$store.state.dict.saleCountryList},activeName:{get:function(){var e="";return this.saleCountryList.length>0&&(e=this.saleCountryList[0].nameLocal),e},set:function(){}}},components:{ServiceInfoItem:Pe},methods:{handleClick:function(){},getAllServiceInfoData:function(){var e=this,t=this.$refs;_.forEach(t,(function(t,a){t.length>0&&(t[0].getServiceInfoItemData(),e.allServiceInfoData[a.substr(15)]=t[0].serviceInfoItemForm)})),_.forEach(this.allServiceInfoData,(function(t,a){var r=!1,i=!1;if("check"==e.type||null!==t.afterSalePledge&&""!==t.afterSalePledge)r=!0;else{var o=_.find(e.saleCountryList,{shortCode:a});e.$message.error("".concat(o.nameLocal,"售后政策不能为空")),r=!1}if("check"==e.type||2!==t.freightType||null!==t.freightId&&""!==t.freightId)i=!0;else{var n=_.find(e.saleCountryList,{shortCode:a});e.$message.error("".concat(n.nameLocal,"运费模板不能为空")),i=!1}r&&i&&(e.dataValid=!0)}))}}},Te=ke,Oe=(a("19db"),Object(g["a"])(Te,he,me,!1,null,"8a7c713e",null)),De=Oe.exports,we=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.saleCountryList.length>0?a("div",{staticClass:"standard-attr-wrapper"},[a("el-form",{ref:"productStandrdAttrForm",attrs:{"label-width":"80px"}},[a("el-form-item",{attrs:{label:"选择规格："}},[a("p",{staticClass:"tips"},[e._v("请确保所选规格正确完整！一旦创建好商品，无法再修改规格")]),a("el-select",{staticStyle:{width:"400px"},attrs:{disabled:"edit"===e.editType,size:"medium","multiple-limit":3,multiple:"",filterable:"","default-first-option":"",placeholder:"请选择"},on:{change:e.handleStandardChange},model:{value:e.productStandrdAttr,callback:function(t){e.productStandrdAttr=t},expression:"productStandrdAttr"}},e._l(e.standardAttrs,(function(e){return a("el-option",{key:e.attrId,attrs:{label:e.cn+"/"+e.en,value:e.attrId}})})),1)],1)],1),e._l(e.selectedStandard,(function(t,r){return a("el-form",{key:r,attrs:{"label-width":"80px"}},[a("standard-item",{ref:"standardItem"+t.attrId,refInFor:!0,attrs:{editType:e.editType,standardInfo:t,attrValueModel:e.attrValueModelList[r]},on:{"on-standard-change":e.handleStandardValueChange,"on-standard-change-index":function(t){e.selectIndex=r},"on-standard-update":e.handleStandardValueUpdate,"on-attr-remove":e.handleAttrRemove}})],1)})),a("el-form",{attrs:{"label-width":"80px"}},[a("el-form-item",{attrs:{label:"销售规格："}},[a("div",{staticClass:"sell-tips"},[a("p",{staticClass:"tips"},[e._v("1. 纵向同步数据：如果商品规格较多，且同规格下某字段值相同，可在批量填充栏选择需同步的规格并在右侧目标字段中输入目标值，最后点击同步该列；")]),a("p",{staticClass:"tips"},[e._v("2. 横向同步数据：如果商品适用多国，且某字段值在各国都相同，可在相应的输入框输入内容，最后并点击同步国家；")]),a("p",{staticClass:"tips"},[e._v("3. 自动定价：输入各规格重量、单品体积、箱体体积、供货价、佣金率，选择自动定价，选择需要自动定价的国家和价格项，即可完成定价，自动定价不会覆盖已录入的价格；")]),a("p",{staticClass:"tips"},[e._v("4. 销售信息至关重要，保存前请仔细检查每个国家每一项信息。")])])]),a("div",{staticClass:"sync-options"},[a("el-button",{attrs:{loading:e.syncColumnLoading,type:"primary",size:"mini",plain:""},on:{click:e.syncColumnData}},[e._v("同步该列")]),a("el-button",{attrs:{loading:e.syncCountryLoading,type:"primary",size:"mini",plain:""},on:{click:e.syncCountryData}},[e._v("同步至其他国家")]),"edit"!=e.editType||"edit"==e.editType&&e.hasPermission("BTN_OPERATION_EDIT")?a("el-button",{attrs:{type:"primary",size:"mini",plain:""},on:{click:e.showAutoPricing}},[e._v("自动定价")]):e._e()],1),a("div",{staticClass:"spec-table"},[a("el-tabs",{on:{"tab-click":e.handleTabClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("div",{staticClass:"sync-option-wrapper"},[a("div",{staticClass:"left",style:{width:e.tableLeftWidth+"px"}},[a("div",{staticClass:"param-item-wrapper",staticStyle:{padding:"0px"},style:{width:e.tableLeftWidth-120*e.saleSpecInfoList.length-130+"px"}}),e._l(e.saleSpecInfoList,(function(t,r){return a("div",{key:r,staticClass:"param-item-wrapper",staticStyle:{"margin-top":"70px"}},[t?a("el-select",{staticClass:"param-item",attrs:{clearable:"",placeholder:"请选择",size:"mini"},on:{change:function(a){e.handleChangeProp(a,t,r)}},model:{value:e.syncTempData["attr"+t.standardInfo.attrId],callback:function(a){e.$set(e.syncTempData,"attr"+t.standardInfo.attrId,a)},expression:"syncTempData['attr'+item.standardInfo.attrId]"}},e._l(t.standardValueList,(function(e){return a("el-option",{key:e.saleWay,attrs:{label:e.cn,value:e.attrId}})})),1):e._e()],1)})),a("div",{staticClass:"cover-image-wrapper",staticStyle:{width:"120px"}},[e.syncTempData.cover?a("div",{staticClass:"cover-image"},[a("el-image",{attrs:{src:e.dealShowFileSrc(e.syncTempData.cover),fit:"contain"}}),a("div",{staticClass:"operate-area"},[a("i",{staticClass:"el-icon-delete",on:{click:function(t){return e.delCover()}}})])],1):a("div",{staticClass:"cover-image"},[a("i",{staticClass:"el-icon-plus add-cover",on:{click:function(t){return e.addCover()}}})])])],2),a("div",{staticClass:"center"},[a("div",{staticClass:"param-item-wrapper"},[a("el-select",{staticClass:"param-item",attrs:{clearable:"",placeholder:"销售方式",size:"mini",disabled:!("edit"!=e.editType||"edit"==e.editType&&e.hasPermission("BTN_OPERATION_EDIT"))},model:{value:e.syncTempData.saleWay,callback:function(t){e.$set(e.syncTempData,"saleWay",t)},expression:"syncTempData.saleWay"}},e._l(e.saleWayOption,(function(e){return a("el-option",{key:e.saleWay,attrs:{label:e.name,value:e.saleWay}})})),1)],1),a("span",{staticClass:"param-item-wrapper"},[a("el-select",{staticClass:"param-item",attrs:{clearable:"",placeholder:"发货方式",size:"mini",disabled:!("edit"!=e.editType||"edit"==e.editType&&e.hasPermission("BTN_OPERATION_EDIT"))},model:{value:e.syncTempData.deliveryWay,callback:function(t){e.$set(e.syncTempData,"deliveryWay",t)},expression:"syncTempData.deliveryWay"}},e._l(e.deliveryWayOption,(function(e){return a("el-option",{key:e.deliveryWay,attrs:{label:e.name,value:e.deliveryWay}})})),1)],1),a("span",{staticClass:"param-item-wrapper"},[a("el-select",{staticClass:"param-item",attrs:{placeholder:"入货仓库",size:"mini",disabled:!("edit"!=e.editType||"edit"==e.editType&&e.hasPermission("BTN_OPERATION_EDIT"))},model:{value:e.syncTempData.warehouse,callback:function(t){e.$set(e.syncTempData,"warehouse",t)},expression:"syncTempData.warehouse"}},e._l(e.wareHouseList,(function(e){return a("el-option",{key:e.warehouseNo,attrs:{label:e.warehouseName,value:e.warehouseNo}})})),1)],1),a("span",{staticClass:"param-item-wrapper"},[a("el-input",{staticClass:"param-item",attrs:{disabled:!("edit"!=e.editType||"edit"==e.editType&&e.hasPermission("BTN_OPERATION_EDIT"))||"0"!=e.activeIndex,controls:!1,min:0,max:99999,precision:2,size:"mini",placeholder:"重量(KG)"},model:{value:e.syncTempData.weight,callback:function(t){e.$set(e.syncTempData,"weight",t)},expression:"syncTempData.weight"}})],1),a("div",{staticClass:"param-item-wrapper"},[a("div",{staticClass:"param-item-title"},[e._v("单品规格(cm)")]),a("el-input-number",{staticClass:"param-item-block",attrs:{disabled:!("edit"!=e.editType||"edit"==e.editType&&e.hasPermission("BTN_OPERATION_EDIT"))||"0"!=e.activeIndex,controls:!1,min:0,max:99999,placeholder:"长",size:"mini"},on:{blur:function(t){return e.calcVolume(e.syncTempData.specification,"specification")}},model:{value:e.syncTempData.specification.l,callback:function(t){e.$set(e.syncTempData.specification,"l",t)},expression:"syncTempData.specification.l"}}),a("el-input-number",{staticClass:"param-item-block",attrs:{disabled:!("edit"!=e.editType||"edit"==e.editType&&e.hasPermission("BTN_OPERATION_EDIT"))||"0"!=e.activeIndex,controls:!1,min:0,max:99999,placeholder:"宽",size:"mini"},on:{blur:function(t){return e.calcVolume(e.syncTempData.specification,"specification")}},model:{value:e.syncTempData.specification.w,callback:function(t){e.$set(e.syncTempData.specification,"w",t)},expression:"syncTempData.specification.w"}}),a("el-input-number",{staticClass:"param-item-block",attrs:{disabled:!("edit"!=e.editType||"edit"==e.editType&&e.hasPermission("BTN_OPERATION_EDIT"))||"0"!=e.activeIndex,controls:!1,min:0,max:99999,placeholder:"高",size:"mini"},on:{blur:function(t){return e.calcVolume(e.syncTempData.specification,"specification")}},model:{value:e.syncTempData.specification.h,callback:function(t){e.$set(e.syncTempData.specification,"h",t)},expression:"syncTempData.specification.h"}})],1),a("div",{staticClass:"param-item-wrapper"},[a("div",{staticClass:"param-item-title"},[e._v("箱体规格(cm)")]),a("el-input-number",{staticClass:"param-item-block",attrs:{disabled:!("edit"!=e.editType||"edit"==e.editType&&e.hasPermission("BTN_OPERATION_EDIT"))||"0"!=e.activeIndex,controls:!1,min:0,max:99999,placeholder:"长",size:"mini"},on:{blur:function(t){return e.calcVolume(e.syncTempData.boxSpecification,"box")}},model:{value:e.syncTempData.boxSpecification.l,callback:function(t){e.$set(e.syncTempData.boxSpecification,"l",t)},expression:"syncTempData.boxSpecification.l"}}),a("el-input-number",{staticClass:"param-item-block",attrs:{disabled:!("edit"!=e.editType||"edit"==e.editType&&e.hasPermission("BTN_OPERATION_EDIT"))||"0"!=e.activeIndex,controls:!1,min:0,max:99999,placeholder:"宽",size:"mini"},on:{blur:function(t){return e.calcVolume(e.syncTempData.boxSpecification,"box")}},model:{value:e.syncTempData.boxSpecification.w,callback:function(t){e.$set(e.syncTempData.boxSpecification,"w",t)},expression:"syncTempData.boxSpecification.w"}}),a("el-input-number",{staticClass:"param-item-block",attrs:{disabled:!("edit"!=e.editType||"edit"==e.editType&&e.hasPermission("BTN_OPERATION_EDIT"))||"0"!=e.activeIndex,controls:!1,min:0,max:99999,placeholder:"高",size:"mini"},on:{blur:function(t){return e.calcVolume(e.syncTempData.boxSpecification,"box")}},model:{value:e.syncTempData.boxSpecification.h,callback:function(t){e.$set(e.syncTempData.boxSpecification,"h",t)},expression:"syncTempData.boxSpecification.h"}})],1),a("span",{staticStyle:{padding:"0 10px"}},[a("el-input",{staticStyle:{width:"130px"},attrs:{disabled:!("edit"!=e.editType||"edit"==e.editType&&e.hasPermission("BTN_OPERATION_EDIT"))||"0"!=e.activeIndex||""==e.currencyType,controls:!1,min:0,precision:2,size:"mini",placeholder:"供货价"},model:{value:e.syncTempData.supplyPrice,callback:function(t){e.$set(e.syncTempData,"supplyPrice",t)},expression:"syncTempData.supplyPrice"}})],1),a("span",{staticStyle:{padding:"0 10px"}},[a("el-input",{staticStyle:{width:"80px"},attrs:{disabled:!("edit"!=e.editType||"edit"==e.editType&&e.hasPermission("BTN_OPERATION_EDIT")),controls:!1,min:0,max:60,precision:2,size:"mini",placeholder:("TH"===e.saleCountryList[e.activeIndex].shortCode?"总":"")+"佣金率"},model:{value:e.syncTempData.commission,callback:function(t){e.$set(e.syncTempData,"commission",t)},expression:"syncTempData.commission"}})],1),a("span",{staticClass:"param-item-wrapper"},[a("el-input",{staticClass:"param-item",attrs:{disabled:!("edit"!=e.editType||"edit"==e.editType&&e.hasPermission("BTN_OPERATION_EDIT")),controls:!1,min:0,precision:2,size:"mini",placeholder:"划线价"},model:{value:e.syncTempData.price,callback:function(t){e.$set(e.syncTempData,"price",t)},expression:"syncTempData.price"}})],1),a("span",{staticClass:"param-item-wrapper"},[a("el-input",{staticClass:"param-item",attrs:{disabled:!("edit"!=e.editType||"edit"==e.editType&&e.hasPermission("BTN_OPERATION_EDIT")),controls:!1,min:0,precision:2,size:"mini",placeholder:"VIP价"},model:{value:e.syncTempData.priceVip,callback:function(t){e.$set(e.syncTempData,"priceVip",t)},expression:"syncTempData.priceVip"}})],1),a("span",{staticClass:"param-item-wrapper"},[a("el-input",{staticClass:"param-item",attrs:{disabled:!("edit"!=e.editType||"edit"==e.editType&&e.hasPermission("BTN_OPERATION_EDIT")),controls:!1,min:0,precision:2,size:"mini",placeholder:"建议活动价"},model:{value:e.syncTempData.activePrice,callback:function(t){e.$set(e.syncTempData,"activePrice",t)},expression:"syncTempData.activePrice"}})],1),a("span",{staticClass:"param-item-wrapper"},[a("el-input",{staticClass:"param-item",attrs:{disabled:!("edit"!=e.editType||"edit"==e.editType&&e.hasPermission("BTN_OPERATION_EDIT"))||"0"!=e.activeIndex,maxlength:50,size:"mini",placeholder:"请输入商品编码"},model:{value:e.syncTempData.supplierCode,callback:function(t){e.$set(e.syncTempData,"supplierCode",t)},expression:"syncTempData.supplierCode"}})],1),a("div",{staticClass:"param-item-wrapper",staticStyle:{width:"280px"}}),a("span",{staticClass:"param-item-wrapper"},[a("el-input",{staticClass:"param-item",attrs:{disabled:!("edit"!=e.editType||"edit"==e.editType&&e.hasPermission("BTN_OPERATION_EDIT"))||"0"!=e.activeIndex,maxlength:50,size:"mini",placeholder:"请输入商品条形码"},model:{value:e.syncTempData.qrCode,callback:function(t){e.$set(e.syncTempData,"qrCode",t)},expression:"syncTempData.qrCode"}})],1),a("div",{staticClass:"param-item-wrapper"})]),a("div",{staticClass:"right"},[a("div",{staticClass:"param-item-wrapper",staticStyle:{"margin-top":"70px"}},[a("el-select",{staticClass:"param-item",attrs:{clearable:"",placeholder:"销售状态",size:"mini",disabled:!("edit"!=e.editType||"edit"==e.editType&&e.hasPermission("BTN_OPERATION_EDIT"))},model:{value:e.syncTempData.saleStatus,callback:function(t){e.$set(e.syncTempData,"saleStatus",t)},expression:"syncTempData.saleStatus"}},e._l(e.saleStatusOption,(function(e){return a("el-option",{key:e.saleStatus,attrs:{label:e.name,value:e.saleStatus}})})),1)],1)])]),e._l(e.saleCountryList,(function(t,r){return a("el-tab-pane",{key:r,attrs:{label:t.nameLocal,name:t.nameLocal}},[a("sale-specification-table-new",{ref:"saleSpecificationTable"+t.shortCode,refInFor:!0,attrs:{editType:e.editType,country:t.shortCode,productTitle:e.productTitle,supplyCurrency:e.supplyCurrencyObj[t.shortCode],currencyCode:t.currencyCode,saleSpecTypeModel:e.selectedStandard,tableHeight:e.allCountryTableData[t.shortCode]?140*e.allCountryTableData[t.shortCode].length+120:120,tableData:e.allCountryTableData[t.shortCode],index:r,productSourceInfo:e.productSourceInfo},on:{"on-sync-data":e.syncData,"on-sync-currency":e.syncCurrency,"on-get-media-data":e.handleGetMediaData}})],1)}))],2)],1)],1),a("auto-pricing-dialog",{ref:"autoPricingDialog",attrs:{dialogVisible:e.pricingDialog,category:e.category,autoPricingModel:e.autoPricingModel},on:{"on-cancle":e.hanldeCancleAutoPricing,"on-confirm":e.hanldeConfirmAutoPricing}}),a("sku-cover-select-dialog",{ref:"skuCouverSelectDialog",attrs:{dialogVisible:e.skuCoverSelectVisible},on:{"on-cancle":e.hanldeCancleSkuCoverSelect,"on-confirm":e.hanldeConfirmSkuCoverSelect}})],2):e._e()},_e=[],Le=(a("c5f6"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form-item",{attrs:{label:e.standardInfo.cn+"："}},[a("multiple-select",{attrs:{value:e.attrValue,standardInfo:e.standardInfo,optionList:e.optionList,disabled:!("edit"!=e.editType||"edit"==e.editType&&e.hasPermission("BTN_OPERATION_EDIT"))},on:{"change-selected":e.changeSelect,"update-option":e.handleUpdateOption}}),a("el-table",{ref:"dragTable",staticStyle:{width:"100%","margin-top":"16px"},attrs:{data:e.tableDataList,"row-key":"attrId",fit:"","highlight-current-row":"","empty-text":"未选择属性值","header-cell-style":{background:"#F5F7FA",color:"#606266"}}},[a("el-table-column",{attrs:{label:"属性ID",align:"center",width:"70"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.attrId))])]}}])}),e._l(e.languageList,(function(t,r){return a("el-table-column",{key:r,attrs:{label:t.desc+t.code,width:"150px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(r){return[a("span",[e._v(e._s(r.row[t.code]||"-"))])]}}],null,!0)})})),a("el-table-column",{attrs:{align:"center",label:"操作",width:"90"},scopedSlots:e._u([{key:"default",fn:function(t){return["edit"!=e.editType||"edit"==e.editType&&e.hasPermission("BTN_OPERATION_EDIT")?a("el-button",{attrs:{type:"text"}},[a("i",{staticClass:"el-icon-s-operation"})]):e._e(),"check"===e.editType?a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.removeItem(t.$index,t.row)}}},[a("i",{staticClass:"el-icon-close"})]):e._e(),"check"!=e.editType&&!0===t.row.allowDel?a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.removeItem(t.$index,t.row)}}},[a("i",{staticClass:"el-icon-close"})]):e._e()]}}])})],2)],1)],1)}),xe=[],Re=a("aa47"),Ae=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-select",e._b({staticStyle:{width:"400px"},attrs:{filterable:"",multiple:"",value:e.value,placeholder:"请选择",size:"medium",disabled:e.disabled},on:{change:e.changeHandle,"remove-tag":e.removeHandle}},"el-select",e.$attrs,!1),[e._l(e.optionList,(function(e){return a("el-option",{key:e.attrId,attrs:{label:e.cn,value:e.attrId,disabled:e.disabled}})})),a("div",{staticClass:"empty-option",attrs:{slot:"empty"},slot:"empty"},[e._v("\n            没有你想要的属性值？\n            "),1===e.standardInfo.customize?a("el-link",{attrs:{underline:!1,type:"primary"},on:{click:function(t){return e.addAttrValue()}}},[e._v("新增")]):a("span",[e._v("请联系属性值管理员扩充属性模板")])],1)],2),a("add-attr-value-dialog",{attrs:{dialogVisible:e.addAttrValueVisible},on:{"on-cancle":e.cancleAddAttr,"on-confirm":e.confirmAddAttr}})],1)},Ee=[],Ne={props:{value:null,optionList:{type:Array,default:function(){return[]}},standardInfo:{type:Object,default:function(){}},disabled:{type:Boolean,default:!1}},data:function(){return{selected:[],addAttrValueVisible:!1}},components:{AddAttrValueDialog:D},methods:{changeHandle:function(e){var t=this;this.selected=e,console.log(e),console.log(this.selected),setTimeout((function(){t.$emit("change-selected",t.selected)}),10)},removeHandle:function(e){var t=this.optionList.find((function(t){return t.attrId===e&&!1===t.disabled}));console.log(e,t),this.selected="undefined"===typeof t?this.value:this.value.filter((function(t){return t!==e}))},addAttrValue:function(){this.addAttrValueVisible=!0},cancleAddAttr:function(){this.addAttrValueVisible=!1},confirmAddAttr:function(e){this.addAttrValueVisible=!1;var t=[];_.forEach(e,(function(e,a){var r={};r.languageCode=a,r.name=e,t.push(r)})),this.addCustomizeAttrValue(t)},addCustomizeAttrValue:function(e){var t=this,a={attrId:this.standardInfo.attrId,valueName:e};Object(d["w"])(a).then((function(e){if(1===e.ret.errcode){t.$message.success("属性值添加成功！");var a=e.attrValue,r=a[a.length-1],i={};i.attrId=r.valueId,i.allowDel=!0,i.disabled=!1,_.forEach(r.valueName,(function(e){i[e.languageCode]=e.name})),t.$emit("update-option",i)}})).catch((function(e){console.log(e)}))}}},$e=Ne,je=Object(g["a"])($e,Ae,Ee,!1,null,null,null),Fe=je.exports,Ve={name:"StandardItem",props:{editType:{type:String,default:""},standardInfo:{type:Object,default:function(){return{}}},attrValueModel:{type:Array,default:function(){return[]}}},data:function(){return{productId:"",draftId:"",languageList:JSON.parse(this.getStore("languageList")),attrValue:this.attrValueModel,options:[],allowCreate:!1,placeholderText:"请输入",tableDataList:[],sortable:null,oldList:[],newList:[],selectValue:[2],optionList:[]}},components:{MultipleSelect:Fe},computed:{standardInfoData:function(){return this.standardInfo}},created:function(){this.$route.query.productId?this.productId=this.$route.query.productId:this.productId="",this.$route.query.draftId?this.draftId=this.$route.query.draftId:this.draftId=""},mounted:function(){var e=this;if(("edit"!=this.editType||"edit"==this.editType&&this.hasPermission("BTN_OPERATION_EDIT"))&&this.setSort(),this.getProductAttrById(this.standardInfo.attrId),this.allowCreate=1===this.standardInfo.customize,this.placeholderText=1===this.standardInfo.customize?"请选择或输入":"请选择",this.attrValueModel.length>0){var t=[],a=2500*this.attrValueModel.length>6e3?2500*this.attrValueModel.length:6e3;setTimeout((function(){n.a.forEach(e.attrValueModel,(function(a){n.a.forEach(e.options,(function(r){a===r.attrId&&("check"!=e.editType?r.allowDel=!1:r.allowDel=!0,t.push(r))}))})),e.tableDataList=t,console.log("standardInfo",e.standardInfo),console.log("tableDataList",e.tableDataList);var a={standardInfo:e.standardInfo,standardValueList:e.tableDataList};e.$emit("on-standard-change-index"),e.$emit("on-standard-update",a)}),a)}},watch:{"standardInfoData.attrId":function(e,t){this.getProductAttrById(e)}},methods:{setSort:function(){var e=this,t=this.$refs.dragTable.$el.querySelectorAll(".el-table__body-wrapper > table > tbody")[0];this.sortable=Re["default"].create(t,{ghostClass:"sortable-ghost",setData:function(e){e.setData("Text","")},onEnd:function(t){var a=e.tableDataList.splice(t.oldIndex,1)[0];e.tableDataList.splice(t.newIndex,0,a);var r=e.newList.splice(t.oldIndex,1)[0];e.newList.splice(t.newIndex,0,r),console.log(e.newList)}})},getProductAttrById:function(e){var t=this,a={attrId:e,productId:this.productId,draftId:this.draftId,attrType:2,filterHiddenAttrValue:!1};Object(d["Lb"])(this.filterData(a)).then((function(e){if(1===e.ret.errcode){var a=[];n.a.forEach(e.attrValue,(function(e){var t={};t.attrId=e.valueId,n.a.forEach(e.valueName,(function(e){t[e.languageCode]=e.name})),a.push(t)})),n.a.forEach(a,(function(e){-1!=n.a.indexOf(t.attrValue,e.attrId)&&"check"!=t.editType?e.disabled=!0:e.disabled=!1})),t.options=a,console.log(a),t.optionList=a}})).catch((function(e){console.error(e)}))},handleSelectChange:function(e){var t=this;this.tableDataList=[],n.a.forEach(e,(function(e){n.a.forEach(t.options,(function(a){e===a.attrId&&(a.disabled||(a.allowDel=!0),t.tableDataList.push(a))}))})),console.log(this.tableDataList),this.$emit("on-standard-change-index"),this.$emit("on-standard-change",this.tableDataList);var a={standardInfo:this.standardInfo,standardValueList:this.tableDataList};this.$emit("on-standard-update",a)},removeItem:function(e,t){if(this.tableDataList.splice(e,1),n.a.indexOf(this.attrValue,t.attrId)>-1){var a=n.a.cloneDeep(this.attrValue);this.$delete(this.attrValue,n.a.indexOf(this.attrValue,t.attrId)),this.handleSelectChange(this.attrValue);var r=this.getArrDifference(a,this.attrValue);this.$emit("on-attr-remove",r)}},handleClick:function(){console.log(this.attrValueModel),console.log(this.standardInfo),console.log(this.tableDataList)},changeSelect:function(e){var t=n.a.cloneDeep(this.attrValue);this.attrValue=e,this.handleSelectChange(e);var a=this.getArrDifference(t,this.attrValue);t.length>this.attrValue.length&&this.$emit("on-attr-remove",a)},handleUpdateOption:function(e){console.log(e),this.optionList.push(e),console.log(this.optionList)},getArrDifference:function(e,t){return e.concat(t).filter((function(e,t,a){return a.indexOf(e)===a.lastIndexOf(e)}))}}},Be=Ve,qe=Object(g["a"])(Be,Le,xe,!1,null,"ca27fb18",null),Me=qe.exports,Ue=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableDataList,border:"","header-cell-style":{background:"#F5F7FA",color:"#606266"}}},["edit"===e.editType?a("el-table-column",{attrs:{label:"SKUID",width:"120",fixed:"",align:"center",prop:"skuId"}}):e._e(),e._l(e.saleSpecType,(function(e,t){return a("el-table-column",{key:t,attrs:{fixed:"",prop:e.attrId,label:e.cn,width:"120",align:"center"}})})),a("el-table-column",{attrs:{fixed:"",label:"规格图",width:"130",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.cover?a("div",{staticClass:"cover-image"},[t.row.cover&&-1===t.row.cover.indexOf("http")?a("el-image",{attrs:{src:e.dealShowFileSrc(t.row.cover),fit:"contain"}}):a("el-image",{attrs:{src:t.row.cover,fit:"contain"}}),a("div",{staticClass:"operate-area"},[a("i",{staticClass:"el-icon-delete",on:{click:function(a){return e.delCover(t.$index)}}})])],1):a("el-upload",{staticClass:"standard-img",attrs:{action:t.$index+"",limit:1,accept:".jpg,.jpeg,.png,.gif,.bmp,.JPG,.JPEG,.PBG,.GIF,.BMP","http-request":e.uploadCoverPic,"list-type":"picture-card"}},[a("i",{staticClass:"el-icon-plus"})])]}}])}),a("el-table-column",{attrs:{label:"销售方式",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{placeholder:"请选择",size:"mini"},model:{value:t.row.saleWay,callback:function(a){e.$set(t.row,"saleWay",a)},expression:"scope.row.saleWay"}},e._l(e.saleWayOption,(function(e){return a("el-option",{key:e.saleWay,attrs:{label:e.name,value:e.saleWay}})})),1)]}}])}),a("el-table-column",{attrs:{label:"发货方式",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{filterable:"",placeholder:"请选择",size:"mini"},model:{value:t.row.deliveryWay,callback:function(a){e.$set(t.row,"deliveryWay",a)},expression:"scope.row.deliveryWay"}},e._l(e.deliveryWayOption,(function(e){return a("el-option",{key:e.deliveryWay,attrs:{label:e.name,value:e.deliveryWay}})})),1)]}}])}),a("el-table-column",{attrs:{label:"重量(kg)",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input-number",{staticStyle:{width:"90%"},attrs:{disabled:e.index>0,controls:!1,min:0,max:99999,precision:2,size:"mini"},on:{blur:function(a){return e.syncData("weight",t.row.weight,t.$index)}},model:{value:t.row.weight,callback:function(a){e.$set(t.row,"weight",a)},expression:"scope.row.weight"}})]}}])}),a("el-table-column",{attrs:{label:"单品规格",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input-number",{staticStyle:{width:"100%"},attrs:{disabled:e.index>0,controls:!1,min:0,max:99999,size:"mini",precision:0},on:{blur:function(a){e.calcVolume(t.row.specification,t.$index,"specification"),e.syncData("specification.l",t.row.specification.l,t.$index)}},model:{value:t.row.specification.l,callback:function(a){e.$set(t.row.specification,"l",a)},expression:"scope.row.specification.l"}}),a("el-input-number",{staticStyle:{width:"100%"},attrs:{disabled:e.index>0,controls:!1,min:0,max:99999,size:"mini",precision:0},on:{blur:function(a){e.calcVolume(t.row.specification,t.$index,"specification"),e.syncData("specification.w",t.row.specification.w,t.$index)}},model:{value:t.row.specification.w,callback:function(a){e.$set(t.row.specification,"w",a)},expression:"scope.row.specification.w"}}),a("el-input-number",{staticStyle:{width:"100%"},attrs:{disabled:e.index>0,controls:!1,min:0,max:99999,size:"mini",precision:0},on:{blur:function(a){e.calcVolume(t.row.specification,t.$index,"specification"),e.syncData("specification.h",t.row.specification.h,t.$index)}},model:{value:t.row.specification.h,callback:function(a){e.$set(t.row.specification,"h",a)},expression:"scope.row.specification.h"}})]}}])},[a("template",{slot:"header"},[e._v("\n                    单品规格(cm)\n                    "),a("p",[e._v("(长,宽,高)")])])],2),a("el-table-column",{attrs:{label:"箱体规格",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input-number",{staticStyle:{width:"100%"},attrs:{disabled:e.index>0,controls:!1,min:0,max:99999,size:"mini",precision:0},on:{blur:function(a){e.calcVolume(t.row.boxSpecification,t.$index,"box"),e.syncData("boxSpecification.l",t.row.boxSpecification.l,t.$index)}},model:{value:t.row.boxSpecification.l,callback:function(a){e.$set(t.row.boxSpecification,"l",a)},expression:"scope.row.boxSpecification.l"}}),a("el-input-number",{staticStyle:{width:"100%"},attrs:{disabled:e.index>0,controls:!1,min:0,max:99999,size:"mini",precision:0},on:{blur:function(a){e.calcVolume(t.row.boxSpecification,t.$index,"box"),e.syncData("boxSpecification.w",t.row.boxSpecification.w,t.$index)}},model:{value:t.row.boxSpecification.w,callback:function(a){e.$set(t.row.boxSpecification,"w",a)},expression:"scope.row.boxSpecification.w"}}),a("el-input-number",{staticStyle:{width:"100%"},attrs:{disabled:e.index>0,controls:!1,min:0,max:99999,size:"mini",precision:0},on:{blur:function(a){e.calcVolume(t.row.boxSpecification,t.$index,"box"),e.syncData("boxSpecification.h",t.row.boxSpecification.h,t.$index)}},model:{value:t.row.boxSpecification.h,callback:function(a){e.$set(t.row.boxSpecification,"h",a)},expression:"scope.row.boxSpecification.h"}})]}}])},[a("template",{slot:"header"},[e._v("\n                    箱体规格(cm)\n                    "),a("p",[e._v("(长,宽,高)")])])],2),a("el-table-column",{attrs:{label:"供货价",width:"150",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input-number",{staticStyle:{width:"90%"},attrs:{disabled:!e.currency||e.index>0,controls:!1,min:0,precision:2,size:"mini"},on:{blur:function(a){return e.syncData("supplyPrice",t.row.supplyPrice,t.$index)}},model:{value:t.row.supplyPrice,callback:function(a){e.$set(t.row,"supplyPrice",a)},expression:"scope.row.supplyPrice"}})]}}])},[a("template",{slot:"header"},[e._v("\n                    供货价\n                    "),a("el-select",{staticStyle:{width:"120px"},attrs:{disabled:e.index>0,size:"mini"},on:{change:e.handleCurrencyChange},model:{value:e.currency,callback:function(t){e.currency=t},expression:"currency"}},e._l(e.currencyOption,(function(e){return a("el-option",{key:e.currency,attrs:{label:e.name+e.unit,value:e.currencyCode}})})),1)],1)],2),a("el-table-column",{attrs:{label:"佣金率%",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input-number",{staticStyle:{width:"90%"},attrs:{controls:!1,min:0,max:60,precision:2,size:"mini"},on:{focus:function(a){return e.saveTempCommission(t.row.commission)},blur:function(a){return e.verifyCommission(t.row.commission,t.$index)}},model:{value:t.row.commission,callback:function(a){e.$set(t.row,"commission",a)},expression:"scope.row.commission"}})]}}])}),a("el-table-column",{attrs:{label:"划线价("+e.currencyCode+")",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input-number",{staticStyle:{width:"90%"},attrs:{controls:!1,min:0,precision:2,size:"mini"},model:{value:t.row.price,callback:function(a){e.$set(t.row,"price",a)},expression:"scope.row.price"}})]}}])}),a("el-table-column",{attrs:{label:"VIP价("+e.currencyCode+")",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input-number",{staticStyle:{width:"90%"},attrs:{controls:!1,min:0,precision:2,size:"mini"},model:{value:t.row.priceVip,callback:function(a){e.$set(t.row,"priceVip",a)},expression:"scope.row.priceVip"}})]}}])}),a("el-table-column",{attrs:{label:"建议活动价("+e.currencyCode+")",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input-number",{staticStyle:{width:"90%"},attrs:{controls:!1,min:0,precision:2,size:"mini"},model:{value:t.row.activePrice,callback:function(a){e.$set(t.row,"activePrice",a)},expression:"scope.row.activePrice"}})]}}])}),a("el-table-column",{attrs:{label:"供应商商品编码",width:"130",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{staticStyle:{width:"100%"},attrs:{disabled:e.index>0,placeholder:"请输入商品编码",maxlength:50,size:"mini"},on:{blur:function(a){return e.syncData("supplierCode",t.row.supplierCode,t.$index)}},model:{value:t.row.supplierCode,callback:function(a){e.$set(t.row,"supplierCode",a)},expression:"scope.row.supplierCode"}})]}}])}),a("el-table-column",{attrs:{label:"skuCode",width:"130",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.row.skuCode||"-"))])]}}])}),a("el-table-column",{attrs:{label:"Fingo商品固定编码",width:"150",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.row.skuCodeKey||"-"))])]}}])}),a("el-table-column",{attrs:{label:"商品条形码",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{staticStyle:{width:"100%"},attrs:{disabled:e.index>0,placeholder:"请输入商品条形码",maxlength:50,size:"mini"},on:{blur:function(a){return e.syncData("qrCode",t.row.qrCode,t.$index)}},model:{value:t.row.qrCode,callback:function(a){e.$set(t.row,"qrCode",a)},expression:"scope.row.qrCode"}})]}}])}),a("el-table-column",{attrs:{label:"商品组合",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.compositeProduct?a("el-link",{attrs:{type:"primary",underline:!1},on:{click:function(a){return e.viewCompositeProduct(t.row,t.$index)}}},[e._v("查看组合")]):a("el-link",{attrs:{type:"primary",underline:!1},on:{click:function(a){return e.addCompositeProduct(t.row,t.$index)}}},[e._v("添加")])]}}])}),a("el-table-column",{attrs:{fixed:"right",label:"销售状态",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{filterable:"",placeholder:"请选择",size:"mini"},model:{value:t.row.saleStatus,callback:function(a){e.$set(t.row,"saleStatus",a)},expression:"scope.row.saleStatus"}},e._l(e.saleStatusOption,(function(e){return a("el-option",{key:e.saleStatus,attrs:{label:e.name,value:e.saleStatus}})})),1)]}}])})],2),a("composite-product-dialog",{attrs:{dialogVisible:e.compositeDialog,productInfo:e.productInfo,compositeProductData:e.compositeProductData},on:{"on-cancle":e.cancleAddComposite,"on-confirm":e.submitAddComposite,"on-close":e.closeAddComposite}}),a("auto-pricing-dialog",{attrs:{dialogVisible:e.pricingDialog,countryList:e.countryList}})],1)},Ge=[],ze=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"composite-product-dialog"},[a("el-dialog",{attrs:{title:e.dialogTitle,visible:e.toggle,width:"950px","close-on-click-modal":!1},on:{"update:visible":function(t){e.toggle=t},close:e.closeDialog}},[a("el-form",{ref:"compositeProductForm",attrs:{rules:e.ruleValidate}},[a("el-form-item",{attrs:{label:"主商品："}},[a("p",{staticClass:"product-title"},[e._v(e._s(e.productInfo.title))]),a("p",{staticClass:"product-attr-value"},[e._v(e._s(e.productInfo.attrValueName))])]),a("el-form-item",{attrs:{label:"子商品："}},[a("el-input",{staticStyle:{width:"450px","margin-right":"10px"},attrs:{type:"textarea",autosize:{minRows:1,maxRows:4},size:"medium",placeholder:"请输入SKUID后点击添加，多个SKUID请用英文逗号隔开"},model:{value:e.skuInput,callback:function(t){e.skuInput=t},expression:"skuInput"}}),a("el-button",{attrs:{type:"text",disabled:!e.skuInput},on:{click:e.addSub}},[e._v("添加")]),a("div",{staticClass:"sub-product-table"},[a("el-table",{attrs:{border:"",data:e.skuTableData,"header-cell-style":{background:"#F5F7FA",color:"#606266"}}},[a("el-table-column",{attrs:{prop:"skuName","min-width":"150px",label:"商品名称",align:"center"}}),a("el-table-column",{attrs:{width:"130px",label:"skuCode",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                                "+e._s(t.row.skuCode)+"\n                            ")]}}])}),a("el-table-column",{attrs:{width:"130px",label:"skuId",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                                "+e._s(t.row.slaveSkuId)+"\n                            ")]}}])}),a("el-table-column",{attrs:{width:"120px",label:"规格",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                                "+e._s(e._f("formatAttrName")(t.row.standardAttr))+"\n                            ")]}}])}),a("el-table-column",{attrs:{prop:"deliveryNumber",width:"160px",label:"发货数量",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input-number",{attrs:{size:"mini","controls-position":"right",min:1,max:1e3},on:{change:e.handleChange},model:{value:t.row.deliveryNumber,callback:function(a){e.$set(t.row,"deliveryNumber",a)},expression:"scope.row.deliveryNumber"}})]}}])}),a("el-table-column",{attrs:{width:"80px",label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.removeSub(t.row)}}},[a("i",{staticClass:"el-icon-close"})])]}}])})],1)],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:e.cancle}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.confirm}},[e._v("确 定")])],1)],1),a("confirm-dialog",{attrs:{dialogVisible:e.confirmVisible,title:e.confirmDialogTitle,text:e.confirmDialogText},on:{"on-cancle":e.cancleDel,"on-confirm":e.confirmDel}})],1)},We=[],He={name:"CompositeProductDialog",props:{editType:{type:String,default:"add"},dialogVisible:{type:Boolean,default:!1},productInfo:{type:Object,default:function(){return{}}},compositeProductData:{type:Array,default:function(){return[]}}},data:function(){return{productInfoData:this.productInfo,skuInput:"",ruleValidate:{},confirmVisible:!1,confirmDialogTitle:"",confirmDialogText:"",compositeProductDataTemp:{}}},watch:{dialogVisible:function(e,t){e&&(this.compositeProductDataTemp=_.cloneDeep(this.skuTableData))}},components:{ConfirmDialog:u["a"]},computed:{toggle:{get:function(){return this.dialogVisible},set:function(){}},dialogTitle:{get:function(){return this.editType,"组合商品"},set:function(){}},confirmDisable:function(){var e=!1;return e=!(this.skuTableData.length>0),e},skuTableData:{get:function(){return this.compositeProductData},set:function(){}}},filters:{formatAttrName:function(e){var t=[];return _.forEach(e,(function(e){t.push(e.valueName)})),t.join("、")},formatAttrValue:function(e){var t=[];return _.forEach(e,(function(e){t.push(e.valueId)})),t.join("、")}},methods:{cancle:function(){this.$emit("on-cancle",this.compositeProductDataTemp),this.skuTableData.length=0},confirm:function(){this.$emit("on-confirm",this.skuTableData),this.skuTableData.length=0},closeDialog:function(){this.$emit("on-close")},cancleDel:function(){this.confirmVisible=!1},confirmDel:function(){this.confirmVisible=!1,this.confirmDelAttrValue()},delAttrValue:function(e){this.confirmVisible=!0,this.confirmDialogTitle="确定删除该值？",this.confirmDialogText="删除"},confirmDelAttrValue:function(){this.skuTableData.length<=1&&this.$message.warning("至少有一条属性值")},handleChange:function(){},getCompositeSlaveSkuInfo:function(e,t){var a=this,r={skuId:e,countryCode:t};Object(d["cb"])(r).then((function(e){var t=[];if(1===e.ret.errcode){var r=e.compositeSlaveSku;r.length<=0&&a.$message.warning("未搜索到该商品！"),_.forEach(r,(function(e){var a={};a.countryCode=e.countryCode,a.productId=e.productId,a.skuCode=e.skuCode,a.skuId=e.skuId,a.slaveSkuId=e.skuId,a.productId=e.productId,a.standardAttr=e.standardAttr,a.skuName=e.title,a.deliveryNumber=1,t.push(a)})),_.forEach(t,(function(e){console.log(a.skuTableData),void 0===_.find(a.skuTableData,{skuId:e.skuId})?a.skuTableData.push(e):a.$message.warning("商品已存在！")})),a.skuInput=""}else a.$message.error("未搜索到该商品！")})).catch((function(e){console.error(e)}))},addSub:function(){var e=this.skuInput.split(",");this.getCompositeSlaveSkuInfo(_.map(e,_.trim),this.productInfo.countryCode)},removeSub:function(e){var t=_.findIndex(this.skuTableData,{slaveSkuId:e.slaveSkuId});this.skuTableData.splice(t,1)},test:function(){console.log(this.skuTableData)}}},Ke=He,Je=(a("7956"),a("ebe2"),Object(g["a"])(Ke,ze,We,!1,null,"34e81535",null)),Qe=Je.exports,Ye=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"auto-pricing-dialog"},[a("el-dialog",{attrs:{title:e.dialogTitle,visible:e.toggle,width:"700px","close-on-click-modal":!1},on:{"update:visible":function(t){e.toggle=t},close:e.cancle}},[Object.keys(e.autoPricingModel).length>0?a("el-form",{ref:"autoPricingForm",attrs:{rules:e.ruleValidate,model:e.autoPricingModel}},[a("el-form-item",{attrs:{label:"选择国家：",prop:"checkedCountry"}},[a("el-checkbox-group",{on:{change:e.handleCheckedCountryChange},model:{value:e.autoPricingModel.checkedCountry,callback:function(t){e.$set(e.autoPricingModel,"checkedCountry",t)},expression:"autoPricingModel.checkedCountry"}},e._l(e.countryList,(function(t){return a("el-checkbox",{key:t.shortCode,attrs:{label:t.shortCode,disabled:!e.autoPricingModel.template[t.shortCode]}},[e._v(e._s(t.nameLocal)+"\n                         "),a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.autoPricingModel.template[t.shortCode],callback:function(a){e.$set(e.autoPricingModel.template,t.shortCode,a)},expression:"autoPricingModel.template[country.shortCode]"}},[e.templateOptions[t.shortCode]?a("div",e._l(e.templateOptions[t.shortCode],(function(e){return a("el-option",{key:e.templateId,attrs:{label:e.templateNameCn,value:e.templateId}})})),1):e._e()])],1)})),1)],1),e.autoPricingModel?a("el-form-item",{attrs:{label:"运输方式：",prop:"transport"}},[a("el-radio-group",{model:{value:e.autoPricingModel.transport,callback:function(t){e.$set(e.autoPricingModel,"transport",t)},expression:"autoPricingModel.transport"}},[a("el-radio",{attrs:{label:2}},[e._v("空运")]),a("el-radio",{attrs:{label:1}},[e._v("海运")])],1)],1):e._e()],1):e._e(),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:e.cancle}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.confirm}},[e._v("确 定")])],1)],1)],1)},Xe=[],Ze=a("284b");function et(e){console.log(e);var t=Ze["a"].create("GetTemplateByCategoryIdReq",e);return Object(Ze["a"])("product","ProductPriceTemplateService.GetTemplateByCategoryId",t,"price.GetTemplateByCategoryIdResp")}var tt={name:"AutoPricingDialog",props:{editType:{type:String,default:"add"},dialogVisible:{type:Boolean,default:!1},category:{type:String,default:""},autoPricingModel:{type:Object,default:function(){return{}}}},data:function(){return{dialogTitle:"自动定价",ruleValidate:{checkedCountry:[{required:!0,trigger:"change",message:"至少选择一个国家"}],priceType:[{required:!0,trigger:"change",message:"不能为空"}],transport:[{required:!0,trigger:"change",message:"不能为空"}]},confirmVisible:!1,confirmDialogTitle:"",confirmDialogText:"",priceTypeList:[{value:"1",label:"划线价"},{value:"2",label:"VIP价"},{value:"3",label:"建议活动价"}],templateOptions:{},priceTemp:{}}},components:{},computed:{toggle:{get:function(){return this.dialogVisible},set:function(){}},countryList:function(){var e=this.$store.state.dict.saleCountryList;return console.log("countryList",e),e}},mounted:function(){console.log("国家的模版",this.autoPricingModel)},methods:{cancle:function(){this.$emit("on-cancle")},confirm:function(){var e=this;n.a.forEach(this.autoPricingModel.template,(function(t,a){n.a.forEach(e.templateOptions[a],(function(r){r.templateId===t&&(r.transport=e.autoPricingModel.transport,e.priceTemp[a]=r)}))}));var t={};n.a.forEach(this.autoPricingModel.checkedCountry,(function(a){e.priceTemp[a]&&(t[a]=e.priceTemp[a])})),this.$refs.autoPricingForm.validate((function(a){a?e.$emit("on-confirm",t):e.$message.warning("必填字段不能为空")}))},cancleDel:function(){this.confirmVisible=!1},confirmDel:function(){this.confirmVisible=!1,this.confirmDelAttrValue()},delAttrValue:function(e){this.confirmVisible=!0,this.confirmDialogTitle="确定删除该值？",this.confirmDialogText="删除"},confirmDelAttrValue:function(){this.autoPricingModel.attrValueTableData.length<=1&&this.$message.warning("至少有一条属性值")},handleChange:function(){},handleCheckedCountryChange:function(e){console.log(e)},handleCheckedPriceTypeChange:function(){},getPriceTemplateByCategoryId:function(){var e=this,t=[];n.a.forEach(this.categoryLink,(function(e){t.push(e.cateId)}));var a={categoryId:[Number(this.category)]};et(a).then((function(t){if(1===t.ret.errcode){console.log(t);var a=n.a.groupBy(t.data,"countryCode");console.log("111111",a),e.templateOptions=a,n.a.forEach(e.countryList,(function(t){n.a.forEach(a,(function(r,i){t.shortCode===i&&(e.autoPricingModel.template[t.shortCode]=a[t.shortCode][0].templateId,e.autoPricingModel.checkedCountry.push(i))}))})),e.autoPricingModel.checkedCountry=n.a.uniq(e.autoPricingModel.checkedCountry),console.log(e.autoPricingModel)}})).catch((function(e){console.log(e)}))}}},at=tt,rt=(a("dc05"),Object(g["a"])(at,Ye,Xe,!1,null,null,null)),it=rt.exports,ot={name:"SaleSpecificationTable",props:{editType:{type:String,default:""},productTitle:{type:String,default:""},country:{type:String,default:""},supplyCurrency:{type:String},currencyCode:{type:String,default:""},saleSpecTypeModel:{type:Array,default:function(){return[]}},tableData:{type:Array,default:function(){return[]}},index:{type:Number,default:0}},data:function(){return{compositeDialog:!1,pricingDialog:!1,model:"",saleWayOption:[],saleStatusOption:[],deliveryWayOption:[],currencyOption:[],productInfo:{title:this.productTitle},rowIndex:null,compositeProductData:[],tempCommission:null}},computed:{countryList:function(){return this.$store.state.dict.countryList},tableDataList:{get:function(){return this.tableData},set:function(){}},saleSpecType:function(){return this.saleSpecTypeModel},currency:{get:function(){return this.supplyCurrency},set:function(){}}},watch:{},components:{CompositeProductDialog:Qe,AutoPricingDialog:it},mounted:function(){this.getProductEnumInfo()},methods:{handleClick:function(){console.log("currency:",this.currency),console.log(this.tableDataList)},handleClick2:function(){console.log(this.saleSpecType),console.log(this.tableDataList),this.$forceUpdate()},calcVolume:function(e,t,a){var r=e.l*e.w*e.h;e.v=r,"box"===a?this.tableData[t].boxSpecification=e:this.tableData[t].specification=e},getProductEnumInfo:function(){var e=this,t={};Object(d["rb"])(this.filterData(t)).then((function(t){console.log(t),1===t.ret.errcode&&(e.saleWayOption=t.saleWay,e.saleStatusOption=t.saleStatus,e.deliveryWayOption=t.deliveryWay,e.currencyOption=t.currency)}))},uploadCoverPic:function(e){var t=this,a=new FormData,r={fileName:e.file.name,type:"product"};a.append("file",e.file),a.append("param",JSON.stringify(r));var i="/file/rest/uploadservices/uploadfile";Object(M["a"])(i,a).then((function(a){if("600"===a.status){console.log(a);var r=parseInt(e.action);t.tableDataList[r].cover=a.original_link}})).catch((function(e){console.log(e)}))},delCover:function(e){this.tableDataList[e].cover=""},uploadCoverSuccess:function(e){console.log(e)},removeCoverPic:function(e){console.log(e)},reload:function(){this.$forceUpdate()},syncData:function(e,t,a){var r={field:e,value:t,rowIndex:a};this.$emit("on-sync-data",r)},handleChange:function(e){console.log(e)},handleCurrencyChange:function(e){this.$emit("on-sync-currency",e)},addCompositeProduct:function(e,t){console.log(this.saleSpecTypeModel);var a=[];_.forEach(this.saleSpecTypeModel,(function(t){e[t.attrId]&&a.push(e[t.attrId])})),this.productInfo.attrValueName=a.join("、"),this.productInfo.countryCode=this.country,this.compositeDialog=!0,this.rowIndex=t,this.compositeProductData=[]},viewCompositeProduct:function(e,t){var a=[];_.forEach(this.saleSpecTypeModel,(function(t){e[t.attrId]&&a.push(e[t.attrId])})),this.productInfo.attrValueName=a.join("、"),this.productInfo.countryCode=this.country,this.compositeDialog=!0,this.rowIndex=t;var r=[];_.forEach(e.compositeProduct.slaveSku,(function(t){var a={};a.countryCode=e.compositeProduct.countryCode,a.productId=e.compositeProduct.productId,a.skuId=t.skuId,a.skuCode=t.skuCode,a.slaveSkuId=t.slaveSkuId,a.deliveryNumber=t.deliveryNumber,a.standardAttr=t.skuAttrValue,a.skuName=t.skuName,r.push(a)})),this.compositeProductData=r},cancleAddComposite:function(e){if(this.$set(this.tableDataList[this.rowIndex],"composite",_.cloneDeep(e)),e.length>0){var t={};t.countryCode=e[0].countryCode,t.productId=e[0].productId;var a=[];_.forEach(e,(function(e){var t={};t.deliveryNumber=e.deliveryNumber,t.skuAttrValue=e.standardAttr,t.skuId=e.skuId,t.skuCode=e.skuCode,t.skuName=e.skuName,t.slaveSkuId=e.slaveSkuId,a.push(t)})),t.slaveSku=a,this.$set(this.tableDataList[this.rowIndex],"compositeProduct",t)}else this.$delete(this.tableDataList[this.rowIndex],"compositeProduct");this.compositeDialog=!1},submitAddComposite:function(e){if(this.$set(this.tableDataList[this.rowIndex],"composite",_.cloneDeep(e)),e.length>0){var t={};t.countryCode=e[0].countryCode,t.productId=e[0].productId;var a=[];_.forEach(e,(function(e){var t={};t.deliveryNumber=e.deliveryNumber,t.skuAttrValue=e.standardAttr,t.skuId=e.skuId,t.skuCode=e.skuCode,t.skuName=e.skuName,t.slaveSkuId=e.slaveSkuId,a.push(t)})),t.slaveSku=a,this.$set(this.tableDataList[this.rowIndex],"compositeProduct",t)}else this.$delete(this.tableDataList[this.rowIndex],"compositeProduct");this.compositeDialog=!1},closeAddComposite:function(){this.compositeDialog=!1},saveTempCommission:function(e){this.tempCommission=e},verifyCommission:function(e,t){var a=this;e>30&&this.$confirm("你输入的佣金率可能过高, 仍要保存吗?","提示",{confirmButtonText:"确定",cancelButtonText:"不保存",type:"warning"}).then().catch((function(){a.tableDataList[t].commission=a.tempCommission,a.$message({type:"info",message:"已取消"})}))}}},nt=ot,ct=(a("3a4e"),a("f144"),Object(g["a"])(nt,Ue,Ge,!1,null,"5f154e39",null)),st=ct.exports,lt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{width:"100%"}},[a("el-table",{attrs:{data:e.currentTableData}},["edit"===e.editType?a("el-table-column",{attrs:{label:"SKUID",align:"center",fixed:"",prop:"skuId",width:"120"}}):e._e(),e._l(e.saleSpecType,(function(e,t){return a("el-table-column",{key:t,attrs:{prop:e.attrId,label:e.cn,align:"center",fixed:"",width:"120"}})})),a("el-table-column",{attrs:{label:"规格图",align:"center",width:"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.cover?a("div",{staticClass:"cover-image"},[t.row.cover&&-1===t.row.cover.indexOf("http")?a("el-image",{attrs:{src:e.dealShowFileSrc(t.row.cover),fit:"contain"}}):a("el-image",{attrs:{src:t.row.cover,fit:"contain"}}),a("div",{staticClass:"operate-area"},[a("i",{staticClass:"el-icon-delete",on:{click:function(a){return e.delCover(t.$index)}}})])],1):a("div",{staticClass:"cover-image"},[a("i",{staticClass:"el-icon-plus add-cover",on:{click:function(a){return e.addCover(t.$index)}}})])]}}])}),a("el-table-column",{attrs:{label:"销售方式",align:"center",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{placeholder:"请选择",disabled:!("edit"!=e.editType||"edit"==e.editType&&e.hasPermission("BTN_OPERATION_EDIT"))||6===e.productSourceInfo.source&&2===e.productSourceInfo.deliveryWay,size:"mini"},on:{change:function(a){return e.handleSkuChange(t.row)}},model:{value:t.row.saleWay,callback:function(a){e.$set(t.row,"saleWay",a)},expression:"scope.row.saleWay"}},e._l(e.saleWayOption,(function(e){return a("el-option",{key:e.saleWay,attrs:{label:e.name,value:e.saleWay}})})),1)]}}])}),a("el-table-column",{attrs:{label:"发货方式",align:"center",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{filterable:"",placeholder:"请选择",size:"mini",disabled:!("edit"!=e.editType||"edit"==e.editType&&e.hasPermission("BTN_OPERATION_EDIT"))||6===e.productSourceInfo.source&&2===e.productSourceInfo.deliveryWay||6===e.productSourceInfo.source&&1===e.productSourceInfo.deliveryWay},on:{change:function(a){return e.handleSkuChange(t.row)}},model:{value:t.row.deliveryWay,callback:function(a){e.$set(t.row,"deliveryWay",a)},expression:"scope.row.deliveryWay"}},e._l(e.deliveryWayOption,(function(e){return a("el-option",{key:e.deliveryWay,attrs:{label:e.name,value:e.deliveryWay}})})),1)]}}])}),a("el-table-column",{attrs:{label:"入货仓库",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{placeholder:"入货仓库",size:"mini",disabled:!("edit"!=e.editType||"edit"==e.editType&&e.hasPermission("BTN_OPERATION_EDIT"))},on:{change:function(a){return e.handleSkuChange(t.row)}},model:{value:t.row.warehouse,callback:function(a){e.$set(t.row,"warehouse",a)},expression:"scope.row.warehouse"}},e._l(e.wareHouseList,(function(e){return a("el-option",{key:e.warehouseNo,attrs:{label:e.warehouseName,value:e.warehouseNo}})})),1)]}}])}),a("el-table-column",{attrs:{label:"重量(kg)",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input-number",{staticStyle:{width:"90%"},attrs:{disabled:!("edit"!=e.editType||"edit"==e.editType&&e.hasPermission("BTN_OPERATION_EDIT"))||e.index>0,controls:!1,min:0,max:99999,precision:2,size:"mini"},on:{blur:function(a){return e.syncData("weight",t.row.weight,t.$index)},change:function(a){return e.handleSkuChange(t.row)}},model:{value:t.row.weight,callback:function(a){e.$set(t.row,"weight",a)},expression:"scope.row.weight"}})]}}])}),a("el-table-column",{attrs:{label:"单品规格",width:"120",align:"center"},scopedSlots:e._u([{key:"header",fn:function(t){return[e._v("\n                单品规格(cm)\n                "),a("p",[e._v("(长,宽,高)")])]}},{key:"default",fn:function(t){return[a("el-input-number",{staticStyle:{width:"100%"},attrs:{disabled:!("edit"!=e.editType||"edit"==e.editType&&e.hasPermission("BTN_OPERATION_EDIT"))||e.index>0,controls:!1,min:0,max:99999,size:"mini",precision:0},on:{blur:function(a){e.calcVolume(t.row.specification,t.$index,"specification"),e.syncData("specification.l",t.row.specification.l,t.$index)}},model:{value:t.row.specification.l,callback:function(a){e.$set(t.row.specification,"l",a)},expression:"scope.row.specification.l"}}),a("el-input-number",{staticStyle:{width:"100%"},attrs:{disabled:!("edit"!=e.editType||"edit"==e.editType&&e.hasPermission("BTN_OPERATION_EDIT"))||e.index>0,controls:!1,min:0,max:99999,size:"mini",precision:0},on:{blur:function(a){e.calcVolume(t.row.specification,t.$index,"specification"),e.syncData("specification.w",t.row.specification.w,t.$index)}},model:{value:t.row.specification.w,callback:function(a){e.$set(t.row.specification,"w",a)},expression:"scope.row.specification.w"}}),a("el-input-number",{staticStyle:{width:"100%"},attrs:{disabled:!("edit"!=e.editType||"edit"==e.editType&&e.hasPermission("BTN_OPERATION_EDIT"))||e.index>0,controls:!1,min:0,max:99999,size:"mini",precision:0},on:{blur:function(a){e.calcVolume(t.row.specification,t.$index,"specification"),e.syncData("specification.h",t.row.specification.h,t.$index)}},model:{value:t.row.specification.h,callback:function(a){e.$set(t.row.specification,"h",a)},expression:"scope.row.specification.h"}})]}}])}),a("el-table-column",{attrs:{label:"箱体规格",width:"120",align:"center"},scopedSlots:e._u([{key:"header",fn:function(t){return[e._v("\n                箱体规格(cm)\n                "),a("p",[e._v("(长,宽,高)")])]}},{key:"default",fn:function(t){return[a("el-input-number",{staticStyle:{width:"100%"},attrs:{disabled:!("edit"!=e.editType||"edit"==e.editType&&e.hasPermission("BTN_OPERATION_EDIT"))||e.index>0,controls:!1,min:0,max:99999,size:"mini",precision:0},on:{blur:function(a){e.calcVolume(t.row.boxSpecification,t.$index,"box"),e.syncData("boxSpecification.l",t.row.boxSpecification.l,t.$index)}},model:{value:t.row.boxSpecification.l,callback:function(a){e.$set(t.row.boxSpecification,"l",a)},expression:"scope.row.boxSpecification.l"}}),a("el-input-number",{staticStyle:{width:"100%"},attrs:{disabled:!("edit"!=e.editType||"edit"==e.editType&&e.hasPermission("BTN_OPERATION_EDIT"))||e.index>0,controls:!1,min:0,max:99999,size:"mini",precision:0},on:{blur:function(a){e.calcVolume(t.row.boxSpecification,t.$index,"box"),e.syncData("boxSpecification.w",t.row.boxSpecification.w,t.$index)}},model:{value:t.row.boxSpecification.w,callback:function(a){e.$set(t.row.boxSpecification,"w",a)},expression:"scope.row.boxSpecification.w"}}),a("el-input-number",{staticStyle:{width:"100%"},attrs:{disabled:!("edit"!=e.editType||"edit"==e.editType&&e.hasPermission("BTN_OPERATION_EDIT"))||e.index>0,controls:!1,min:0,max:99999,size:"mini",precision:0},on:{blur:function(a){e.calcVolume(t.row.boxSpecification,t.$index,"box"),e.syncData("boxSpecification.h",t.row.boxSpecification.h,t.$index)}},model:{value:t.row.boxSpecification.h,callback:function(a){e.$set(t.row.boxSpecification,"h",a)},expression:"scope.row.boxSpecification.h"}})]}}])}),a("el-table-column",{attrs:{label:"供货价",width:"150",align:"center"},scopedSlots:e._u([{key:"header",fn:function(t){return[e._v("\n                供货价\n                "),a("el-select",{staticStyle:{width:"120px"},attrs:{disabled:!("edit"!=e.editType||"edit"==e.editType&&e.hasPermission("BTN_OPERATION_EDIT"))||e.index>0,size:"mini"},on:{change:e.handleCurrencyChange},model:{value:e.currency,callback:function(t){e.currency=t},expression:"currency"}},e._l(e.currencyOption,(function(e){return a("el-option",{key:e.currency,attrs:{label:e.name+e.unit,value:e.currencyCode}})})),1)]}},{key:"default",fn:function(t){return[a("el-input-number",{staticStyle:{width:"90%"},attrs:{disabled:!("edit"!=e.editType||"edit"==e.editType&&e.hasPermission("BTN_OPERATION_EDIT"))||!e.currency||e.index>0,controls:!1,min:0,precision:2,size:"mini"},on:{blur:function(a){return e.syncData("supplyPrice",t.row.supplyPrice,t.$index)},change:function(a){return e.handleSkuChange(t.row)}},model:{value:t.row.supplyPrice,callback:function(a){e.$set(t.row,"supplyPrice",a)},expression:"scope.row.supplyPrice"}})]}}])}),a("el-table-column",{attrs:{label:("TH"===e.country?"总":"")+"佣金率%",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input-number",{staticStyle:{width:"90%"},attrs:{controls:!1,min:0,max:60,precision:2,size:"mini",disabled:!("edit"!=e.editType||"edit"==e.editType&&e.hasPermission("BTN_OPERATION_EDIT"))},on:{focus:function(a){return e.saveTempCommission(t.row.commission)},blur:function(a){return e.verifyCommission(t.row.commission,t.$index)}},model:{value:t.row.commission,callback:function(a){e.$set(t.row,"commission",a)},expression:"scope.row.commission"}})]}}])}),a("el-table-column",{attrs:{label:"划线价("+e.currencyCode+")",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input-number",{staticStyle:{width:"90%"},attrs:{controls:!1,min:0,precision:2,size:"mini",disabled:!("edit"!=e.editType||"edit"==e.editType&&e.hasPermission("BTN_OPERATION_EDIT"))},on:{change:function(a){return e.handleSkuChange(t.row)}},model:{value:t.row.price,callback:function(a){e.$set(t.row,"price",a)},expression:"scope.row.price"}})]}}])}),a("el-table-column",{attrs:{label:"VIP价("+e.currencyCode+")",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input-number",{staticStyle:{width:"90%"},attrs:{controls:!1,min:0,precision:2,size:"mini",disabled:!("edit"!=e.editType||"edit"==e.editType&&e.hasPermission("BTN_OPERATION_EDIT"))},on:{change:function(a){return e.handleSkuChange(t.row)}},model:{value:t.row.priceVip,callback:function(a){e.$set(t.row,"priceVip",a)},expression:"scope.row.priceVip"}})]}}])}),a("el-table-column",{attrs:{label:"建议活动价("+e.currencyCode+")",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input-number",{staticStyle:{width:"90%"},attrs:{controls:!1,min:0,precision:2,size:"mini",disabled:!("edit"!=e.editType||"edit"==e.editType&&e.hasPermission("BTN_OPERATION_EDIT"))},on:{change:function(a){return e.handleSkuChange(t.row)}},model:{value:t.row.activePrice,callback:function(a){e.$set(t.row,"activePrice",a)},expression:"scope.row.activePrice"}})]}}])}),a("el-table-column",{attrs:{label:"供应商商品编码",width:"130",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{staticStyle:{width:"100%"},attrs:{disabled:!("edit"!=e.editType||"edit"==e.editType&&e.hasPermission("BTN_OPERATION_EDIT"))||e.index>0,placeholder:"请输入商品编码",maxlength:50,size:"mini"},on:{blur:function(a){return e.syncData("supplierCode",t.row.supplierCode,t.$index)},change:function(a){return e.handleSkuChange(t.row)}},model:{value:t.row.supplierCode,callback:function(a){e.$set(t.row,"supplierCode",a)},expression:"scope.row.supplierCode"}})]}}])}),a("el-table-column",{attrs:{label:"skuCode",width:"130",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.row.skuCode||"-"))])]}}])}),a("el-table-column",{attrs:{label:"Fingo商品固定编码",width:"150",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.row.skuCodeKey||"-"))])]}}])}),a("el-table-column",{attrs:{label:"商品条形码",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{staticStyle:{width:"100%"},attrs:{disabled:!("edit"!=e.editType||"edit"==e.editType&&e.hasPermission("BTN_OPERATION_EDIT"))||e.index>0,placeholder:"请输入商品条形码",maxlength:50,size:"mini"},on:{blur:function(a){return e.syncData("qrCode",t.row.qrCode,t.$index)},change:function(a){return e.handleSkuChange(t.row)}},model:{value:t.row.qrCode,callback:function(a){e.$set(t.row,"qrCode",a)},expression:"scope.row.qrCode"}})]}}])}),a("el-table-column",{attrs:{label:"商品组合",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.compositeProduct?a("el-link",{attrs:{type:"primary",underline:!1,disabled:!("edit"!=e.editType||"edit"==e.editType&&e.hasPermission("BTN_OPERATION_EDIT"))},on:{click:function(a){return e.viewCompositeProduct(t.row,t.$index)}}},[e._v("查看组合")]):a("el-link",{attrs:{disabled:!("edit"!=e.editType||"edit"==e.editType&&e.hasPermission("BTN_OPERATION_EDIT")),type:"primary",underline:!1},on:{click:function(a){return e.addCompositeProduct(t.row,t.$index)}}},[e._v("添加")])]}}])}),a("el-table-column",{attrs:{label:"库存",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return["check"==e.editType?a("div",[e._v(e._s(t.row.inventory))]):a("div",[e._v("\n                   "+e._s(t.row.inventory||"-")+"\n                ")])]}}])}),a("el-table-column",{attrs:{label:"销售状态",width:"120",align:"center",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{filterable:"",placeholder:"请选择",size:"mini",disabled:!("edit"!=e.editType||"edit"==e.editType&&e.hasPermission("BTN_OPERATION_EDIT"))},on:{change:function(a){return e.handleSkuChange(t.row)}},model:{value:t.row.saleStatus,callback:function(a){e.$set(t.row,"saleStatus",a)},expression:"scope.row.saleStatus"}},e._l(e.saleStatusOption,(function(e){return a("el-option",{key:e.saleStatus,attrs:{label:e.name,value:e.saleStatus}})})),1)]}}])})],2),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:e.total,"current-page":e.pageNum,"page-size":e.pageSize},on:{"current-change":e.handlePageClick}})],1),a("composite-product-dialog",{attrs:{dialogVisible:e.compositeDialog,productInfo:e.productInfo,compositeProductData:e.compositeProductData},on:{"on-cancle":e.cancleAddComposite,"on-confirm":e.submitAddComposite,"on-close":e.closeAddComposite}}),a("auto-pricing-dialog",{attrs:{dialogVisible:e.pricingDialog,countryList:e.countryList}}),a("sku-cover-select-dialog",{ref:"skuCouverSelectDialog",attrs:{dialogVisible:e.skuCoverSelectVisible},on:{"on-cancle":e.hanldeCancleSkuCoverSelect,"on-confirm":e.hanldeConfirmSkuCoverSelect}})],1)},ut=[],dt=(a("1c4c"),a("5df3"),a("f400"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sku-cover-select-dialog"},[a("el-dialog",{attrs:{title:e.dialogTitle,visible:e.toggle,width:"900px","close-on-click-modal":!1},on:{"update:visible":function(t){e.toggle=t},close:e.cancle}},[a("el-form",{ref:"mediaForm",staticStyle:{"padding-bottom":"30px"},attrs:{"label-width":"120px"}},[a("el-form-item",{attrs:{label:"从主图选取："}},[a("div",{staticClass:"image-show"},e._l(e.rotationPicList,(function(t,r){return a("div",{key:t.name,staticClass:"list-group-item image-box"},[a("div",{staticClass:"darg-item",on:{click:function(a){return e.choiceItem(t,r)}}},[a("el-image",{staticClass:"image-item",attrs:{src:t.src}}),a("div",{class:{active:t.check}},[a("div",[a("i",{staticClass:"el-icon-circle-check"})])])],1)])})),0)]),a("el-form-item",{attrs:{label:"从详情图选取："}},[a("div",{staticClass:"image-show"},e._l(e.detailPicList,(function(t,r){return a("div",{key:t.name,staticClass:"list-group-item image-box"},[a("div",{staticClass:"darg-item",on:{click:function(a){return e.choiceDetailItem(t,r)}}},[a("el-image",{staticClass:"image-item",attrs:{src:t.src}}),a("div",{class:{active:t.check}},[a("div",[a("i",{staticClass:"el-icon-circle-check"})])])],1)])})),0)]),a("el-form-item",{attrs:{label:"从本地上传："}},[a("div",{staticClass:"cover-image-wrapper",staticStyle:{width:"120px"}},[e.skuCover?a("div",{staticClass:"cover-image"},[a("el-image",{attrs:{src:e.dealShowFileSrc(e.skuCover),fit:"contain"}}),a("div",{staticClass:"operate-area"},[a("i",{staticClass:"el-icon-delete",on:{click:function(t){return e.delCover()}}})])],1):a("el-upload",{staticClass:"standard-img",attrs:{action:"",limit:1,accept:".jpg,.jpeg,.png,.gif,.bmp,.JPG,.JPEG,.PBG,.GIF,.BMP","http-request":e.uploadCoverPic,disabled:""!=e.cover,"list-type":"picture-card"}},[""==e.cover?a("i",{staticClass:"el-icon-plus"}):e._e()])],1)])],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:e.cancle}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",loading:e.loading,size:"small"},on:{click:e.confirm}},[e._v("确定")])],1)],1)],1)}),pt=[],ft={name:"SkuCoverSelectDialog",data:function(){return{dialogTitle:"上传SKU规格图",fetching:!1,rotationPicList:[],detailPicList:[],loading:!1,skuCover:"",cover:""}},props:{dialogVisible:{type:Boolean,default:!1}},components:{},computed:{toggle:{get:function(){var e=JSON.parse(this.getStore("productMediaInfo"));return e&&(n.a.forEach(e.rotationPics,(function(e){e.check=!1})),n.a.forEach(e.detailPics,(function(e){e.check=!1})),this.rotationPicList=e.rotationPics,this.detailPicList=e.detailPics),this.dialogVisible},set:function(){}},rotationPicChecked:function(){var e=[];return n.a.forEach(this.rotationPicList,(function(t){t.check&&e.push(t)})),e},detailPicChecked:function(){var e=[];return n.a.forEach(this.detailPicList,(function(t){t.check&&e.push(t)})),e}},methods:{cancle:function(){this.$emit("on-cancle"),this.reset()},confirm:function(){var e="";""!=this.cover?e=this.cover:""!=this.skuCover&&(e=this.skuCover),this.$emit("on-confirm",e),this.reset()},reset:function(){this.rotationPicList=[],this.detailPicList=[],this.skuCover="",this.cover=""},choiceItem:function(e,t){if(console.log(this.skuCover),""==this.skuCover)if(this.rotationPicList[t].check||""==this.cover)if(!this.rotationPicList[t].check&&this.rotationPicChecked.length>=1)this.$message.warning("最多选择1张");else{var a=this.rotationPicList[t].check;this.rotationPicList[t].check=!0!==a,console.log(a),this.cover=a?"":this.rotationPicList[t].originalLink}else this.$message.warning("最多选择1张");else this.$message.warning("已从本地上传了，如需从主图中选取请先移除本地上传图片")},choiceDetailItem:function(e,t){if(""==this.skuCover)if(this.detailPicList[t].check||""==this.cover)if(!this.detailPicList[t].check&&this.detailPicChecked.length>=1)this.$message.warning("最多选择1张");else{var a=this.detailPicList[t].check;this.detailPicList[t].check=!0!==a,this.cover=a?"":this.detailPicList[t].originalLink}else this.$message.warning("最多选择1张");else this.$message.warning("已从本地上传了，如需从详情图中选取请先移除本地上传图片")},uploadCoverPic:function(e){var t=this;if(""==this.cover){var a=new FormData,r={fileName:e.file.name,type:"product"};a.append("file",e.file),a.append("param",JSON.stringify(r));var i="/file/rest/uploadservices/uploadfile";Object(M["a"])(i,a).then((function(e){"600"===e.status&&(console.log(e),t.skuCover=e.original_link,console.log(t.skuCover))})).catch((function(e){console.log(e)}))}else this.$message.warning("已从主图或详情中选取，如需本地上传请先移除已选图片")},delCover:function(){this.skuCover=""}}},ht=ft,mt=(a("9cf6"),Object(g["a"])(ht,dt,pt,!1,null,null,null)),gt=mt.exports,vt=a("84a3"),yt={name:"SaleSpecificationTable",props:{editType:{type:String,default:""},productTitle:{type:String,default:""},country:{type:String,default:""},supplyCurrency:{type:String},currencyCode:{type:String,default:""},saleSpecTypeModel:{type:Array,default:function(){return[]}},tableData:{type:Array,default:function(){return[]}},index:{type:Number,default:0},tableHeight:{type:Number,default:0},productSourceInfo:{type:Object,default:function(){}},queryParams:{type:Object,default:function(){}}},data:function(){var e;return e={compositeDialog:!1,pricingDialog:!1,model:"",saleWayOption:[],saleStatusOption:[],deliveryWayOption:[],wareHouseList:[],currencyOption:[],productInfo:{title:this.productTitle},rowIndex:null,compositeProductData:[],tempCommission:null,skuCoverSelectVisible:!1},Object(I["a"])(e,"rowIndex",null),Object(I["a"])(e,"updateDateMap",new Map),Object(I["a"])(e,"pageNum",1),Object(I["a"])(e,"pageSize",5),Object(I["a"])(e,"total",0),Object(I["a"])(e,"currentTableData",[]),Object(I["a"])(e,"queryTable",{attrId:null,value:null}),Object(I["a"])(e,"queryTableData",[]),e},computed:{countryList:function(){return this.$store.state.dict.countryList},tableDataList:{get:function(){return this.tableData},set:function(){}},saleSpecType:function(){return this.saleSpecTypeModel},currency:{get:function(){return this.supplyCurrency},set:function(){}},tableHeightVal:function(){return this.tableHeight}},components:{CompositeProductDialog:Qe,AutoPricingDialog:it,SkuCoverSelectDialog:gt},watch:{tableData:function(e){this.total=e.length,this.getCurrentTableData(e)}},mounted:function(){var e=this;this.getProductEnumInfo(),this.getWarehouseList(),this.total=this.tableDataList.length,this.total=this.tableData.length,this.getCurrentTableData(this.tableData),this.$EventBus.$on("queryTableData",(function(t){if(e.pageNum=1,t){if(e.queryTable.value!=t.value){e.queryTable=t;for(var a=[],r=0;r<e.tableData.length;r++){var i=e.tableData[r];i[t.attrId]==t.value&&a.push(i)}e.total=a.length,e.queryTableData=a,e.getCurrentTableData(e.queryTableData)}}else e.queryTableData=[],e.total=e.tableData.length,e.getCurrentTableData(e.tableData)}))},methods:{handlePageClick:function(e){this.pageNum=e,this.queryTableData.length>0?this.getCurrentTableData(this.queryTableData):this.getCurrentTableData(this.tableData)},getCurrentTableData:function(e){var t=(this.pageNum-1)*this.pageSize,a=t+this.pageSize>=this.total?this.total:t+this.pageSize;this.currentTableData=e.slice(t,a),console.log("表格数据",this.currentTableData)},handleSkuChange:function(e){this.updateDateMap.set(e.skuId,e),this.getUpdateSku()},getUpdateSku:function(){return Array.from(this.updateDateMap.values())},handleClick:function(){console.log("currency:",this.currency),console.log(this.tableDataList)},handleClick2:function(){console.log(this.saleSpecType),console.log(this.tableDataList),this.$forceUpdate()},calcVolume:function(e,t,a){t+=(this.pageNum-1)*this.pageSize,_.isNumber(e.l)||(e.l=0),_.isNumber(e.w)||(e.w=0),_.isNumber(e.h)||(e.h=0);var r=e.l*e.w*e.h;e.v=r,"box"===a?this.tableData[t].boxSpecification=e:this.tableData[t].specification=e,this.updateDateMap.set(this.tableData[t].skuId,this.tableData[t])},getProductEnumInfo:function(){var e=this,t={};Object(d["rb"])(this.filterData(t)).then((function(t){console.log(t),1===t.ret.errcode&&(e.saleWayOption=t.saleWay,e.saleStatusOption=t.saleStatus,e.deliveryWayOption=t.deliveryWay,e.currencyOption=t.currency)}))},getWarehouseList:function(){var e=this,t={page:{pageSize:10,pageNum:1}};Object(vt["U"])(this.filterData(t)).then((function(t){1===t.ret.errcode&&(e.wareHouseList=t.list)})).catch((function(e){console.log(e)}))},uploadCoverPic:function(e){var t=this,a=new FormData,r={fileName:e.file.name,type:"product"};a.append("file",e.file),a.append("param",JSON.stringify(r));var i="/file/rest/uploadservices/uploadfile";Object(M["a"])(i,a).then((function(a){if("600"===a.status){console.log(a);var r=parseInt(e.action);t.tableDataList[r].cover=a.original_link}})).catch((function(e){console.log(e)}))},delCover:function(e){e+=(this.pageNum-1)*this.pageSize,this.tableDataList[e].cover="",this.updateDateMap.set(this.tableDataList[e].skuId,this.tableDataList[e])},addCover:function(e){e+=(this.pageNum-1)*this.pageSize,this.$emit("on-get-media-data"),this.rowIndex=e,this.skuCoverSelectVisible=!0},uploadCoverSuccess:function(e){console.log(e)},removeCoverPic:function(e){console.log(e)},reload:function(){this.$forceUpdate()},syncData:function(e,t,a){var r={field:e,value:t,rowIndex:a};this.$emit("on-sync-data",r)},handleChange:function(e){console.log(e)},handleCurrencyChange:function(e){this.$emit("on-sync-currency",e)},addCompositeProduct:function(e,t){var a=[];_.forEach(this.saleSpecTypeModel,(function(t){e[t.attrId]&&a.push(e[t.attrId])})),this.productInfo.attrValueName=a.join("、"),this.productInfo.countryCode=this.country,this.compositeDialog=!0,this.rowIndex=(this.pageNum-1)*this.pageSize+t,this.compositeProductData=[]},viewCompositeProduct:function(e,t){var a=[];_.forEach(this.saleSpecTypeModel,(function(t){e[t.attrId]&&a.push(e[t.attrId])})),this.productInfo.attrValueName=a.join("、"),this.productInfo.countryCode=this.country,this.compositeDialog=!0,this.rowIndex=(this.pageNum-1)*this.pageSize+t;var r=[];_.forEach(e.compositeProduct.slaveSku,(function(t){var a={};a.countryCode=e.compositeProduct.countryCode,a.productId=e.compositeProduct.productId,a.skuId=t.skuId,a.skuCode=t.skuCode,a.slaveSkuId=t.slaveSkuId,a.deliveryNumber=t.deliveryNumber,a.standardAttr=t.skuAttrValue,a.skuName=t.skuName,r.push(a)})),this.compositeProductData=r},cancleAddComposite:function(e){if(this.$set(this.tableDataList[this.rowIndex],"composite",_.cloneDeep(e)),e.length>0){var t={};t.countryCode=e[0].countryCode,t.productId=e[0].productId;var a=[];_.forEach(e,(function(e){var t={};t.deliveryNumber=e.deliveryNumber,t.skuAttrValue=e.standardAttr,t.skuId=e.skuId,t.skuCode=e.skuCode,t.skuName=e.skuName,t.slaveSkuId=e.slaveSkuId,a.push(t)})),t.slaveSku=a,this.$set(this.tableDataList[this.rowIndex],"compositeProduct",t)}else this.$delete(this.tableDataList[this.rowIndex],"compositeProduct");this.compositeDialog=!1},submitAddComposite:function(e){if(this.$set(this.tableDataList[this.rowIndex],"composite",_.cloneDeep(e)),e.length>0){var t={};t.countryCode=e[0].countryCode,t.productId=e[0].productId;var a=[];_.forEach(e,(function(e){var t={};t.deliveryNumber=e.deliveryNumber,t.skuAttrValue=e.standardAttr,t.skuId=e.skuId,t.skuCode=e.skuCode,t.skuName=e.skuName,t.slaveSkuId=e.slaveSkuId,a.push(t)})),t.slaveSku=a,this.$set(this.tableDataList[this.rowIndex],"compositeProduct",t)}else this.$delete(this.tableDataList[this.rowIndex],"compositeProduct");this.updateDateMap.set(this.tableDataList[this.rowIndex].skuId,this.tableDataList[this.rowIndex]),this.compositeDialog=!1},closeAddComposite:function(){this.compositeDialog=!1},saveTempCommission:function(e){this.tempCommission=e},verifyCommission:function(e,t){var a=this;t+=(this.pageNum-1)*this.pageSize,e>30&&this.$confirm("你输入的佣金率可能过高, 仍要保存吗?","提示",{confirmButtonText:"确定",cancelButtonText:"不保存",type:"warning"}).then((function(){a.updateDateMap.set(a.tableDataList[t].skuId,a.tableDataList[t])})).catch((function(){a.tableDataList[t].commission=a.tempCommission,a.$message({type:"info",message:"已取消"})}))},hanldeCancleSkuCoverSelect:function(){this.skuCoverSelectVisible=!1},hanldeConfirmSkuCoverSelect:function(e){this.skuCoverSelectVisible=!1,this.tableDataList[this.rowIndex].cover=e,this.updateDateMap.set(this.tableDataList[this.rowIndex].skuId,this.tableDataList[this.rowIndex])}}},bt=yt,St=(a("817b"),a("3e3b"),Object(g["a"])(bt,lt,ut,!1,null,"4deb6020",null)),It=St.exports,Ct={name:"ProductStandrdAttrForm",props:{editType:{type:String,default:""},productTitle:{type:String,default:""},standardAttrs:{type:Array,default:function(){return[]}},selectedStandardModel:{type:Array,default:function(){return[]}},allCountryTableDataModel:{type:Object,default:function(){}},attrValueModelList:{type:Array,default:function(){return[]}},supplyCurrencyObj:{type:Object,default:function(){}},categoryLink:{type:Array,default:function(){return[]}},category:{type:String,default:""},productSourceInfo:{type:Object,default:function(){}}},data:function(){return{syncColumnLoading:!1,syncCountryLoading:!1,standardOptions:[{value:1,label:"颜色"},{value:2,label:"尺寸"},{value:3,label:"重量"}],value:"",options:[],selectIndex:1,saleAttr:[],tableData:[],tableItem:{},standardAttrData:null,testArr:["黑色_183,小_112","黑色_183,大_111","红色_184,小_112","红色_184,大_111"],tableItmeData:{cover:null,saleWay:null,deliveryWay:null,weight:null,supplyPrice:null,commission:null,price:null,priceVip:null,activePrice:null,stock:null,activeStock:null,warehouse:null,supplierCode:null,qrCode:null,saleStatus:null,specification:{h:0,l:0,v:0,w:0},boxSpecification:{h:0,l:0,v:0,w:0}},AttrValueInfo:[],pricingDialog:!1,syncTempData:{cover:"",saleWay:"",deliveryWay:"",warehouse:"",weight:"",supplyPrice:"",commission:"",price:"",priceVip:"",activePrice:"",supplierCode:"",skuCode:"",skuCodeKey:"",qrCode:"",compositeProduct:"",saleStatus:"",specification:{h:0,l:0,v:0,w:0},boxSpecification:{h:0,l:0,v:0,w:0}},activeCountryShortCode:"",saleWayOption:[],saleStatusOption:[],deliveryWayOption:[],wareHouseList:[],activeIndex:"0",saleSpecInfoList:[],currencyType:"",exchangeRateList:{},reversRateMap:{},skuCoverSelectVisible:!1,priceTemp:{},exchangeRateCNY:{},exchangeRateOther:1,currentRatetemplateCode:"",autoPricingModel:{checkedCountry:[],template:{},transport:2}}},components:{StandardItem:Me,SaleSpecificationTable:st,AutoPricingDialog:it,SaleSpecificationTableNew:It,SkuCoverSelectDialog:gt},computed:{saleCountryList:function(){var e=this,t=this.$store.state.dict.saleCountryList;return n.a.forEach(t,(function(t){e.$set(e.autoPricingModel.template,t.shortCode,"")})),t},firstSaleCountry:function(){var e="";return this.saleCountryList.length>0&&(e=this.saleCountryList[0].shortCode),e},activeName:{get:function(){var e="";return this.saleCountryList.length>0&&(e=this.saleCountryList[0].nameLocal,this.activeCountryShortCode=this.saleCountryList[0].shortCode),e},set:function(){}},selectedStandard:function(){return this.selectedStandardModel},allCountryTableData:function(){var e=this.getFirst(this.allCountryTableDataModel);return e&&e[0]&&(this.currencyType=e[0].currencyCode),this.allCountryTableDataModel},productStandrdAttr:{get:function(){var e=[];return n.a.forEach(this.selectedStandardModel,(function(t){e.push(t.attrId)})),e},set:function(){}},tableLeftWidth:function(){var e=130;return e+=120*this.selectedStandard.length,"edit"===this.editType&&(e+=120),e}},watch:{saleCountryList:function(e,t){if("add"===this.editType){if(1===e.length&&0===t.length)this.initSkuTableData();else if(e.length>1){var a=n.a.cloneDeep(this.allCountryTableDataModel[e[0].shortCode]);n.a.forEach(a,(function(e){e.compositeProduct=null})),n.a.forEach(a,(function(t){t.countryCode=e[e.length-1].shortCode})),this.allCountryTableDataModel[e[e.length-1].shortCode]=a}}else if(0===t.length)this.allCountryTableDataModel=this.allCountryTableData;else if(e.length!=t.length&&e.length>1&&t.length>0){var r=n.a.cloneDeep(this.allCountryTableDataModel[e[0].shortCode]);n.a.forEach(r,(function(t){t.countryCode=e[e.length-1].shortCode})),n.a.forEach(r,(function(e){e.compositeProduct=null})),this.allCountryTableDataModel[e[e.length-1].shortCode]=r}}},mounted:function(){this.getProductEnumInfo(),this.getWarehouseList(),this.getExchangeRecentRateTemplate()},methods:{handleChangeProp:function(e,t,a){if(0==a){var r=null;if(e){for(var i="",o=t.standardValueList||[],n=0;n<o.length;n++)if(o[n].attrId==e){i=o[n].cn;break}r={attrId:t.standardInfo.attrId,value:i}}else r=null;this.$EventBus.$emit("queryTableData",r)}},handleStandardChange:function(e){var t=this;this.selectedStandard.length=0,this.productStandrdAttr=e,0===e.length&&this.$delete(this.selectedStandard,0),e.length>0?n.a.forEach(e,(function(e){n.a.forEach(t.standardAttrs,(function(a,r){e===a.attrId&&t.$set(t.selectedStandard,t.selectedStandard.length,a)}))})):this.initSkuTableData()},getProductAttrById:function(e){var t=this,a={attrId:e}(a).then((function(e){if(1===e.ret.errcode){var a=[];n.a.forEach(e.attrValue,(function(r){var i={label:"",value:""};i.label=r.valueName[0].name,i.value=r.valueId,a.push(i),t.$set(t.paramAttrOption,e.attrId,a)}))}}))},getAllAttrOpions:function(e){var t=this;n.a.forEach(e,(function(e){t.getProductAttrById(e.attrId)}))},initSkuTableData:function(){var e=this,t={countryCode:"",cover:null,saleWay:null,deliveryWay:null,weight:null,supplyPrice:null,commission:null,price:null,priceVip:null,activePrice:null,stock:null,activeStock:null,warehouse:null,supplierCode:null,qrCode:null,saleStatus:null,specification:{h:0,l:0,v:0,w:0},boxSpecification:{h:0,l:0,v:0,w:0}};n.a.forEach(this.saleCountryList,(function(a,r){t.countryCode=a.shortCode,e.$set(e.allCountryTableData,a.shortCode,[n.a.cloneDeep(t)])}))},handleStandardValueChange:function(e){var t=this;this.saleAttr[this.selectIndex]=e;var a=[];n.a.forEach(this.saleAttr,(function(e){var t=[];n.a.forEach(e,(function(e){t.push(e.cn+"_"+e.attrId)})),a.push(t)}));var r=[];n.a.forEach(a,(function(e){e.length>0&&r.push(e)}));var i=this.combination(r),o=[],c=[];n.a.forEach(i,(function(e){var a={},r={};n.a.forEach(t.selectedStandard,(function(t,i){e.split(",").length>1?(a[t.attrId]=e.split(",")[i].split("_")[0],r[t.attrId+"_value"]=e.split(",")[i].split("_")[1]):(a[t.attrId]=e.split("_")[0],r[t.attrId+"_value"]=e.split("_")[1])})),o.push(a),c.push(r)})),i&&this.verifyData(this.selectedStandard,i,o,c)},verifyData:function(e,t,a,r){var i=this;e.length===t[0].split(",").length&&n.a.forEach(this.saleCountryList,(function(e){var t=[];n.a.forEach(a,(function(a,o){var c=n.a.findIndex(i.allCountryTableData[e.shortCode],a),s={};c>-1?s=n.a.find(i.allCountryTableData[e.shortCode],a):(s=i.createTempData(a),s.countryCode=e.shortCode),s=Object.assign(s,r[o]),t.push(s)})),i.$set(i.allCountryTableData,e.shortCode,t)}))},createTempData:function(e){var t={countryCode:null,cover:null,saleWay:null,deliveryWay:null,weight:null,supplyPrice:null,commission:null,price:null,priceVip:null,activePrice:null,stock:null,activeStock:null,warehouse:null,supplierCode:null,qrCode:null,saleStatus:null,boxSpecification:{l:0,w:0,h:0,v:0},specification:{l:0,w:0,h:0,v:0}},a=Object.assign(t,e);return a},combination:function(e){var t=e.length;if(t<2)return e[0];for(var a=e[0].length,r=e[1].length,i=[],o=0;o<a;o++)for(var n=0;n<r;n++)i[i.length]=e[0][o]+","+e[1][n];for(var c=[],s=2;s<e.length;s++)c[s-1]=e[s];return c[0]=i,this.combination(c)},getSKUData:function(){var e=this,t=this.getStandardItemTableData(this.selectedStandard),a={};n.a.forEach(this.saleCountryList,(function(t){a[t.shortCode]=e.$refs["saleSpecificationTable"+t.shortCode][0].tableData}));var r=null;this.saleCountryList.length>0&&(r=this.$refs["saleSpecificationTable"+this.firstSaleCountry][0].tableData);var i=[];n.a.forEach(r,(function(t,a){var r={};t=t||{};var o="",c="";o="".concat(t.specification.l,",").concat(t.specification.w,",").concat(t.specification.h,",").concat(t.specification.v),c="".concat(t.boxSpecification.l,",").concat(t.boxSpecification.w,",").concat(t.boxSpecification.h,",").concat(t.boxSpecification.v),t.skuId&&(r.skuId=t.skuId),r.specification=o,r.boxSpecification=c,r.weight=1e3*t.weight,r.supplyPrice=t.supplyPrice+"",t.supplierSkuId&&(r.supplierSkuId=t.supplierSkuId);var s=null;n.a.forEach(e.supplyCurrencyObj,(function(e,t){e&&(s=e)})),r.currencyCode=s+"",r.supplierCode=t.supplierCode,r.qrCode=t.qrCode,r.skuAttrValue=e.getAttrValueInfo(t),t.inventory&&(r.inventory=t.inventory),i.push(r)})),n.a.forEach(i,(function(e){n.a.forEach(e.skuAttrValue,(function(e){var a=t[e.attrId];n.a.forEach(a,(function(t,a){e.valueId===t.attrId&&(e.sort=a+1)}))}))}));var o=[];n.a.forEach(a,(function(e,t){var r=[];n.a.forEach(a[t],(function(e){var a={};e=e||{},e.skuId&&(a.skuId=e.skuId),a.countryCode=t,a.cover=e.cover,a.saleWay=e.saleWay,a.deliveryWay=e.deliveryWay,a.stock=e.stock,a.activeStock=e.activeStock,a.price=e.price+"",a.priceVip=e.priceVip+"",a.activePrice=e.activePrice+"",a.commission=e.commission+"",a.warehouse=e.warehouse,a.saleStatus=e.saleStatus;var i={};if(e.composite&&e.composite.length>0){e.skuId&&(i.masterSkuId=e.skuId),i.countryCode=e.composite[0].countryCode;var o=[];n.a.forEach(e.composite,(function(e){var t={};e.slaveSkuId?t.slaveSkuId=e.slaveSkuId:t.slaveSkuId=e.skuId,t.deliveryNumber=e.deliveryNumber,t.skuCode=e.skuCode;var a=[];n.a.forEach(e.standardAttr,(function(e){var t={};t.attrId=e.attrId,t.valueId=e.valueId,a.push(t)})),t.skuAttrValue=a,o.push(t)})),i.slaveSku=o,a.compositeProduct=i}else a.compositeProduct=e.compositeProduct;r.push(a)})),o.push(r)}));var c=[];n.a.forEach(i,(function(e,t){var a={skuBase:null,skuCountry:null},r=[];n.a.forEach(o,(function(e){e[t]&&r.push(e[t])})),a.skuBase=e,a.skuCountry=r,c.push(a)})),this.standardAttrData=c},getAttrValueInfo:function(e){var t=[];return n.a.forEach(e,(function(e,a){var r={};a.includes("_value")&&(r.attrId=a.split("_")[0],r.valueId=e,t.push(r))})),t},syncData:function(e){n.a.forEach(this.allCountryTableData,(function(t){if(-1!=e.field.indexOf(".")){var a=e.field.split(".");t[e.rowIndex][a[0]][a[1]]=e.value}else t[e.rowIndex][e.field]=e.value}))},syncCurrency:function(e){var t=this;this.currencyType=e,n.a.forEach(this.supplyCurrencyObj,(function(a,r){t.$set(t.supplyCurrencyObj,r,e)}))},getStandardItemTableData:function(e){var t=this,a={};return n.a.forEach(e,(function(e){a[e.attrId]=t.$refs["standardItem"+e.attrId][0].tableDataList})),a},showAutoPricing:function(){this.pricingDialog=!0,this.$refs.autoPricingDialog.getPriceTemplateByCategoryId(),this.calculateRate("CNY"),this.calculateRateToCNY(this.currencyType)},hanldeCancleAutoPricing:function(){this.pricingDialog=!1},hanldeConfirmAutoPricing:function(e){this.pricingDialog=!1,this.priceTemp=e,this.verifySkuData()?this.autoPricing():this.$message.warning("请将所选国家全部SKU的（划线价、VIP价、建议活动价）均要设置为空或0，才能使用【自动定价】功能")},getProductEnumInfo:function(){var e=this,t={};Object(d["rb"])(this.filterData(t)).then((function(t){1===t.ret.errcode&&(e.saleWayOption=t.saleWay,e.saleStatusOption=t.saleStatus,e.deliveryWayOption=t.deliveryWay,e.currencyOption=t.currency)}))},getWarehouseList:function(){var e=this,t={page:{pageSize:10,pageNum:1}};Object(vt["U"])(this.filterData(t)).then((function(t){1===t.ret.errcode&&(e.wareHouseList=t.list)})).catch((function(e){console.log(e)}))},syncColumnData:function(){var e=this;this.syncColumnLoading=!0;var t={};n.a.forEach(this.syncTempData,(function(e,a){-1!=a.indexOf("attr")&&(t[a.substring(4)+"_value"]=e)}));var a=this.filterData(this.syncTempData);"0"!=this.activeIndex&&(a=n.a.pick(a,["cover","saleWay","deliveryWay","commission","price","priceVip","activePrice","saleStatus"])),n.a.forEach(a,(function(a,r){n.a.forEach(e.allCountryTableData[e.activeCountryShortCode],(function(i){e.isSameSku(i,e.filterData(t))&&("weight"===r?"0"!=a&&e.$set(i,r,a):"specification"===r||"boxSpecification"===r?0!=a.h&&0!=a.l&&0!=a.v&&0!=a.h&&e.$set(i,r,a):e.$set(i,r,a))}))}));var r=n.a.pick(a,["weight","specification","boxSpecification","supplyPrice","supplierCode","qrCode"]);n.a.forEach(this.filterData(r),(function(a,r){n.a.forEach(e.saleCountryList,(function(i){n.a.forEach(e.allCountryTableData[i.shortCode],(function(i){e.isSameSku(i,e.filterData(t))&&("weight"===r?"0"!=a&&e.$set(i,r,a):"specification"===r||"boxSpecification"===r?0!=a.h&&0!=a.l&&0!=a.v&&0!=a.h&&e.$set(i,r,a):e.$set(i,r,a))}))}))})),this.syncColumnLoading=!1,this.$message.success("同步成功！")},syncCountryData:function(){var e=this;this.syncCountryLoading=!0;var t=this.filterData(this.syncTempData);"0"!=this.activeIndex&&(t=n.a.pick(t,["cover","saleWay","deliveryWay","commission","saleStatus"]));var a={};n.a.forEach(this.syncTempData,(function(e,t){-1!=t.indexOf("attr")&&(a[t.substring(4)+"_value"]=e)})),n.a.forEach(t,(function(t,r){n.a.forEach(e.saleCountryList,(function(i){n.a.forEach(e.allCountryTableData[i.shortCode],(function(o){-1!=n.a.indexOf(["price","priceVip","activePrice"],r)||e.isSameSku(o,e.filterData(a))&&("TH"===e.saleCountryList[e.activeIndex].shortCode?("TH"===i.shortCode||"commission"!==r)&&e.$set(o,r,t):"TH"===i.shortCode&&"commission"===r||e.$set(o,r,t))}))}))})),this.syncCountryLoading=!1,this.$message.success("同步至其他国家成功！")},uploadCoverPic:function(e){var t=this,a=new FormData,r={fileName:e.file.name,type:"product"};a.append("file",e.file),a.append("param",JSON.stringify(r));var i="/file/rest/uploadservices/uploadfile";Object(M["a"])(i,a).then((function(e){"600"===e.status&&(console.log(e),t.syncTempData.cover=e.original_link)})).catch((function(e){console.log(e)}))},delCover:function(){this.syncTempData.cover=""},addCover:function(){this.$emit("on-get-media-data"),this.skuCoverSelectVisible=!0},calcVolume:function(e,t){var a=e.l*e.w*e.h;e.v=a,"box"===t?this.syncTempData.boxSpecification=e:this.syncTempData.specification=e},handleTabClick:function(e){var t=this;this.activeIndex=e.index,n.a.forEach(this.saleCountryList,(function(a){e.name===a.nameLocal&&(t.activeCountryShortCode=a.shortCode,t.calculateRate(a.currencyCode))}))},handleStandardValueUpdate:function(e){var t=this;this.saleSpecInfoList[this.selectIndex]=e,n.a.forEach(this.saleSpecInfoList,(function(e){e&&t.$set(t.syncTempData,"attr"+e.standardInfo.attrId,"")})),this.$forceUpdate()},isSameSku:function(e,t){var a=!0;return n.a.forEach(t,(function(t,r){e[r]?e[r]!=t&&(a=!1):a=!1})),a},getExchangeRate:function(){var e={fromCurrencyCode:"CNY ",toCurrencyCode:"USD",templateCode:"10000"};Object(d["ib"])(e).then((function(e){1===e.ret.errcode&&console.log(e)})).catch((function(e){console.log(e)}))},getExchangeRecentRateTemplate:function(){var e=this,t={};Object(d["kb"])(this.filterData(t)).then((function(t){1===t.ret.errcode&&(e.exchangeRateList=t.exchangeRate,e.currentRatetemplateCode=t.templateCode,e.calculateRate("MYR"))})).catch((function(e){console.log(e)}))},calculateRate:function(e){var t=this,a=0;n.a.forEach(this.exchangeRateList,(function(t){t.currencyCode===e&&(a=(1/Number(t.rate)).toFixed(6))})),this.reversRateMap={MY:0,SG:0,TH:0,ID:0},n.a.forEach(this.exchangeRateList,(function(e){"MYR"===e.currencyCode?t.reversRateMap.MY=(a*e.rate).toFixed(6):"SGD"===e.currencyCode?t.reversRateMap.SG=(a*e.rate).toFixed(6):"THB"===e.currencyCode?t.reversRateMap.TH=(a*e.rate).toFixed(6):"IDR"===e.currencyCode&&(t.reversRateMap.ID=(a*e.rate).toFixed(6))})),"CNY"===e&&(this.exchangeRateCNY=this.reversRateMap)},calculateRateToCNY:function(e){var t=1,a="";n.a.forEach(this.exchangeRateList,(function(e){"CNY"===e.currencyCode&&(a=e.rate)})),n.a.forEach(this.exchangeRateList,(function(r){r.currencyCode===e&&(t=(Number(a)/Number(r.rate)).toFixed(6))})),this.exchangeRateOther="CNY"!=e?t:1},handleAttrRemove:function(e){var t=this,a=[];n.a.forEach(this.allCountryTableData,(function(t,r){n.a.forEach(t,(function(t,r){n.a.forEach(t,(function(t,i){-1!=i.indexOf("_value")&&t==e[0]&&a.push(r)}))}))})),n.a.forEach(n.a.uniq(a),(function(e,a){n.a.forEach(t.allCountryTableData,(function(r,i){t.$delete(t.allCountryTableData[i],e-a)}))}))},formatPrice:function(e){var t=parseInt(100*Number(e).toFixed(2)).toString(),a=t.substring(t.length-1);a=Number(a)>=5?"9":"0";var r=t.substring(0,t.length-1)+a;return(r/100).toFixed(2)},hanldeCancleSkuCoverSelect:function(){this.skuCoverSelectVisible=!1},hanldeConfirmSkuCoverSelect:function(e){this.skuCoverSelectVisible=!1,this.syncTempData.cover=e},handleGetMediaData:function(){this.$emit("on-get-media-data")},autoPricing:function(){var e=this;n.a.forEach(this.allCountryTableData,(function(t,a){var r=n.a.keys(e.priceTemp);n.a.forEach(t,(function(t){if(-1!=n.a.indexOf(r,t.countryCode)){if(!t.supplyPrice||0===t.supplyPrice)return;var a=e.caclBasePrice(t),i=e.calcPrice(t,a,e.exchangeRateCNY[t.countryCode]),o=e.calcVipPrice(t,a,e.exchangeRateCNY[t.countryCode]),c=e.calcActivePrice(t,a,e.exchangeRateCNY[t.countryCode]);""!==t.price&&0!==t.price&&t.price&&"null"!==t.price&&"0"!==t.price&&"0.0"!==t.price&&"0.00"!==t.price||e.$set(t,"price",e.formatPriceNew(i,t.countryCode)),""!==t.priceVip&&0!==t.priceVip&&t.priceVip&&"null"!==t.priceVip&&"0"!==t.priceVip&&"0.0"!==t.priceVip&&"0.00"!==t.priceVip||e.$set(t,"priceVip",e.formatPriceNew(o,t.countryCode)),""!==t.activePrice&&0!==t.activePrice&&t.activePrice&&"null"!==t.activePrice&&"0"!==t.activePrice&&"0.0"!==t.activePrice&&"0.00"!==t.activePrice||e.$set(t,"activePrice",e.formatPriceNew(c,t.countryCode))}}))})),this.$message.success("自动定价操作成功")},caleAirFreight:function(e){var t=0,a=0;return t=e.weight*(Number(this.priceTemp[e.countryCode].airWeightPrice)/Number(this.priceTemp[e.countryCode].airWeightUnit)),a=Number(e.specification.v)*(Number(this.priceTemp[e.countryCode].airVolumePrice)/Number(this.priceTemp[e.countryCode].airVolumeUnit)),"TH"===e.countryCode&&(a+=2.5,t+=2.5),Math.max(t,a)},caclOceanFreight:function(e){var t=0;return t=Number(e.specification.v)*(Number(this.priceTemp[e.countryCode].oceanVolumePrice)/Number(this.priceTemp[e.countryCode].oceanVolumeUnit)),t},caclBasePrice:function(e){var t=0,a=Number(this.priceTemp[e.countryCode].domesticExpressFee),r=Number(this.priceTemp[e.countryCode].domesticWarehousingFee),i=Number(this.priceTemp[e.countryCode].internationalWarehousingFee),o=1.95*e.commission,n=Number(this.priceTemp[e.countryCode].paymentPassageFee),c=Number(this.priceTemp[e.countryCode].cashServiceFee),s=Number(this.priceTemp[e.countryCode].operatingFee),l=0;"TH"===e.countryCode&&(l=7);var u=0,d=this.getFirst(this.priceTemp);u=1===d.transport?this.caclOceanFreight(e):this.caleAirFreight(e);var p=0;p="0001"===e.warehouse?r:i;var f=1-(o+n+c+s+l)/100;return t=(e.supplyPrice*Number(this.exchangeRateOther)+a+u+p)/f,t},getFirst:function(e){for(var t in e)return e[t]},calcPrice:function(e,t,a){var r=0;return r=t*Number(a)/(1-Number(this.priceTemp[e.countryCode].grossInterestRate)/100),r},calcVipPrice:function(e,t,a){var r=0;return r=t*Number(a)/(1-Number(this.priceTemp[e.countryCode].vipGrossInterestRate)/100),r},calcActivePrice:function(e,t,a){var r=0;return r=t*Number(a)/(1-Number(this.priceTemp[e.countryCode].activeGrossInterestRate)/100),r},formatPriceNew:function(e,t){var a=null;if("TH"===t||"ID"===t){a=parseInt(e);var r=a%10;return r<5?a-=r:a+=9-r,a}a=parseInt(10*Number(e).toFixed(1)).toString();var i=a.substring(a.length-1);i=Number(i)>=5?"9":"0";var o=a.substring(0,a.length-1)+i;return(o/10).toFixed(1)},verifySkuData:function(){var e=!0,t=n.a.keys(this.priceTemp);return n.a.forEach(this.allCountryTableData,(function(a,r){n.a.forEach(a,(function(a){if(-1!=n.a.indexOf(t,a.countryCode)){if(""!==a.price&&0!==a.price&&a.price&&"null"!==a.price&&"0"!==a.price&&"0.0"!==a.price&&"0.00"!==a.price)return e=!1,e;if(""!==a.priceVip&&0!==a.priceVip&&a.priceVip&&"null"!==a.priceVip&&"0"!==a.priceVip&&"0.0"!==a.priceVip&&"0.00"!==a.priceVip)return e=!1,e;if(""!==a.activePrice&&0!==a.activePrice&&a.activePrice&&"null"!==a.activePrice&&"0"!==a.activePrice&&"0.0"!==a.activePrice&&"0.00"!==a.activePrice)return e=!1,e}}))})),e}}},Pt=Ct,kt=(a("29b2"),a("25c0"),Object(g["a"])(Pt,we,_e,!1,null,"85dcdafe",null)),Tt=kt.exports,Ot=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"refuse-dialog"},[a("el-dialog",{attrs:{title:e.dialogTitle,visible:e.toggle,width:"600px","close-on-click-modal":!1},on:{"update:visible":function(t){e.toggle=t},close:e.cancle}},[a("el-form",{ref:"refuseForm",attrs:{rules:e.ruleValidate,model:e.refuseModel}},[a("el-form-item",{attrs:{label:"拒绝原因：",prop:"message"}},[a("el-input",{staticStyle:{width:"400px"},attrs:{placeholder:"请输入原因"},model:{value:e.refuseModel.message,callback:function(t){e.$set(e.refuseModel,"message",t)},expression:"refuseModel.message"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:e.cancle}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.confirm}},[e._v("确认")])],1)],1)],1)},Dt=[],wt={name:"ShelveResonDialog",props:{dialogVisible:{type:Boolean,default:!1}},data:function(){return{dialogTitle:"审核不通过",refuseModel:{message:""},ruleValidate:{message:[{required:!0,trigger:"blur",message:"请输入原因"}]},confirmVisible:!1,confirmDialogTitle:"",confirmDialogText:""}},components:{},computed:{toggle:{get:function(){return this.dialogVisible},set:function(){}}},methods:{reset:function(){this.$refs.refuseForm.resetFields()},cancle:function(){this.$emit("on-cancle"),this.reset()},confirm:function(){var e=this;console.log(this.refuseModel),this.$refs.refuseForm.validate((function(t){t&&e.$emit("on-confirm",e.refuseModel)}))}}},_t=wt,Lt=(a("9f81"),Object(g["a"])(_t,Ot,Dt,!1,null,null,null)),xt=Lt.exports,Rt={name:"ProductEdit",data:function(){return{activeName:"1",editType:"add",checkPass:!1,submitLoading:!1,updateLoading:!1,productId:"",step:1,categoryLink:[],categoryLinkStr:"",disabledStartCreate:!0,countryList:[],languageList:[],baseInfo:{cateId:null,productSaleCountry:[],productType:null,brandId:null,nature:null,supplierId:null,title:{},subTitle:{},orgUrl:"",categoryLinkStr:""},countryShelveMap:{},brandInfo:{nameCn:"-",nameEn:"-"},productTitle:"",orgUrl:"",levelThreeCateId:null,paramAttrIdList:[],operateAreaWidth:1400,productParams:{productType:{}},mediaInfo:{},videoInfo:{},allServiceInfoItemForm:{},selectedStandardModel:[],standardAttrIdList:[],attrValueModelList:[],supplyCurrencyObj:{MY:null,TH:null,SG:null},allCountryTableDataModel:{},draftId:"",orgId:"",source:null,loading:!1,draftType:0,refuseDraftDialogVisible:!1,draftStatus:"",productSourceInfo:{source:"",deliveryWay:""}}},components:{BackCategory:c["default"],ProductBaseInfo:y,ProductParams:N,ProductMedia:fe,ProductServiceInfo:De,ProductStandardAttr:Tt,RefuseDraftDialog:xt},computed:{saleCountryList:function(){var e=this.$store.state.dict.saleCountryList;return e}},watch:{categoryLink:function(e,t){var a=this;this.categoryLinkStr=[],3===e.length?this.disabledStartCreate=!1:this.disabledStartCreate=!0,n.a.forEach(e,(function(t,r){t.cateName&&(r===e.length-1?a.categoryLinkStr+=t.cateName:a.categoryLinkStr+=t.cateName+" >> ")}))},saleCountryList:function(e){var t=this;n.a.forEach(e,(function(e){var a={afterSalePledge:null,arrivalPledge:null,freightId:null,freightType:2};t.allServiceInfoItemForm[e.shortCode]||t.$set(t.allServiceInfoItemForm,e.shortCode,n.a.cloneDeep(a)),console.log("运费模版",t.allServiceInfoItemForm)}))}},created:function(){this.languageList=JSON.parse(this.getStore("languageList")),this.countryList=JSON.parse(this.getStore("countryList")),this.initCountryShelveMap(),this.initMediaData()},mounted:function(){window.addEventListener("resize",n.a.throttle(this.onResize,100)),this.$route.query.productId?(this.step=2,this.editType="edit",this.productId=this.$route.query.productId,this.currentProductId=this.$route.query.productId,this.getProductDetailById(this.productId),this.calculateWidth()):this.$route.query.draftId?(this.step=2,this.editType="check",this.draftId=this.$route.query.draftId,"supplier"===this.$route.query.source?this.getSupplierProductDraftById(this.draftId):this.getProductDraftById(this.draftId),this.calculateWidth()):this.$route.query.copyId?(this.step=2,this.editType="copy",this.productId=this.$route.query.copyId,this.currentProductId=this.$route.query.copyId,this.getProductDetailById(this.productId),this.calculateWidth()):(this.step=1,this.editType="add")},methods:{changeType:function(e){this.activeName=e},initCountryShelveMap:function(){var e=this;n.a.forEach(this.countryList,(function(t){var a={disabled:!1,show:!1,shelveStatus:null};e.$set(e.countryShelveMap,t.shortCode,a)}))},initMediaData:function(){var e=this;n.a.forEach(this.languageList,(function(t){var a={src:""},r={rotationPics:[],detailPics:[],desc:""};e.$set(e.mediaInfo,t.code,r),e.$set(e.videoInfo,t.code,a)}))},calculateWidth:function(){var e=this;this.$nextTick((function(){e.$refs.productInfo&&(e.operateAreaWidth=e.$refs.productInfo.clientWidth)}))},onResize:function(){this.calculateWidth()},startCreat:function(){this.step=2,this.baseInfo.categoryLinkStr=this.categoryLinkStr,this.levelThreeCateId=this.categoryLink[2].cateId,this.baseInfo.cateId=this.categoryLink[2].cateId,this.getUpperRelatedCategoryById(this.levelThreeCateId),this.calculateWidth()},handleModifyCategory:function(){this.step=1,"add"===this.editType&&this.resetProductData(),console.log(this.baseInfo)},resetProductData:function(){this.baseInfo={cateId:null,productSaleCountry:[],productType:null,brandId:null,nature:null,supplierId:null,title:{},subTitle:{},orgUrl:"",categoryLinkStr:""},this.initCountryShelveMap(),this.brandInfo={nameCn:"-",nameEn:"-"},this.paramAttrIdList=[],this.productParams={productType:{}},this.mediaInfo={},this.videoInfo={},this.initMediaData(),this.allServiceInfoItemForm={},this.selectedStandardModel=[]},handleBrandChange:function(e){this.brandInfo=e},handleProductTitleChange:function(e){this.productTitle=e},handleOrgUrlChange:function(e){this.orgUrl=e},onCategoryLinkChange:function(e){this.categoryLink=e},getUpperRelatedCategoryById:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i={cateId:e,productId:a,draftId:r};Object(d["zb"])(this.filterData(i)).then((function(e){var a=[],r=[];1===e.ret.errcode&&(t.baseInfo.categoryLinkStr=t.productCateStr(e.categoryUnit),n.a.forEach(e.categoryUnit,(function(e){e.paramAttrId&&""!==e.paramAttrId&&a.push(e.paramAttrId.split(",")),e.standardAttrId&&""!==e.standardAttrId&&r.push(e.standardAttrId.split(","))})),a=n.a.uniq(n.a.flattenDeep(a)),r=n.a.uniq(n.a.flattenDeep(r)),t.getBatchProductAttr(a,r))})).catch((function(e){console.error(e)}))},getBatchProductAttr:function(e,t){var a=this,r={paramAttrId:e,standardAttrId:t};Object(d["Mb"])(this.filterData(r)).then((function(e){if(1===e.ret.errcode){var t=e.paramAttr,r=e.standardAttr,i=[],o=[];n.a.forEach(t,(function(e){var t={};t.attrId=e.attrId,t.customize=e.customize,n.a.forEach(e.attrName,(function(e,a){t[e.languageCode]=e.name})),i.push(t)})),a.paramAttrIdList=i,n.a.forEach(r,(function(e){var t={};t.attrId=e.attrId,t.customize=e.customize,n.a.forEach(e.attrName,(function(e,a){t[e.languageCode]=e.name})),o.push(t)})),a.standardAttrIdList=o}}))},submitProduct:function(){var e=null,t=null,a=null,r=null,i=null;if(this.$refs.productBaseInfo.getBaseInfoData(),this.$refs.productBaseInfo.dataValid&&(e=this.$refs.productBaseInfo.baseInfoResult,this.$refs.productParams.getParamsData(),t=this.$refs.productParams.attrValueInfo,this.$refs.productMedia.getAllMediaFormData(),this.$refs.productMedia.dataValid&&(a=this.$refs.productMedia.allMediaFormData,this.$refs.serviceInfo.getAllServiceInfoData(),this.$refs.serviceInfo.dataValid))){if(r=this.$refs.serviceInfo.allServiceInfoData,this.$refs.standardAttr.getSKUData(),i=this.$refs.standardAttr.standardAttrData,""!=this.productId&&(e.productId=this.productId),10===e.productType){var o=i[0].skuBase.specification.split(",");if(o.indexOf("0")>=0)return void this.$message.error("批发商品必须填写好单品体积")}e&&this.formatProductData(e,t,a,r,i)}},formatProductData:function(e,t,a,r,i){var o={};this.productId&&"copy"!==this.editType&&(o.productId=this.productId),o.cateId=e.cateId+"",o.saleCountry=e.saleCountry,o.productType=e.productType,o.nature=e.nature,o.brandId=e.brandId,o.supplierId=e.supplierId,o.title=e.title,o.subTitle=e.subTitle,o.productParams=t,"copy"!==this.editType&&(o.orgId=this.orgId,o.orgUrl=e.orgUrl);var c=[];n.a.forEach(this.saleCountryList,(function(t){n.a.forEach(e.saleCountry,(function(e){var t={};t.countryCode=e.countryCode,t.shelveStatus=e.shelveStatus,n.a.forEach(r,(function(a,r){e.countryCode===r&&(t.freightType=a.freightType,2===a.freightType?t.freightId=a.freightId:t.freightId="0")})),c.push(t)}))}));var s=[];n.a.forEach(a,(function(e,t){var a={},r=[];n.a.forEach(e.rotationPics,(function(e){r.push(e.originalLink)}));var i=[];n.a.forEach(e.detailPics,(function(e){i.push(e.originalLink)})),a.languageCode=t,a.cover=r[0],a.rotation=r.toString(),a.video=e.video,a.detail=i.toString(),a.form=i.toString(),a.desc=e.desc,s.push(a)}));var l=[];n.a.forEach(r,(function(e,t){var a={};a.countryCode=t,a.afterSalePledge={pledgeId:e.afterSalePledge},a.arrivalPledge={pledgeId:e.arrivalPledge},l.push(a)})),o.productCountry=c,o.pledgeInfo=l,o.sku=i,o.picVideo=s,"add"===this.editType||"copy"===this.editType?this.addProduct(o):"edit"===this.editType?this.editProduct(o):"check"===this.editType&&(this.checkPass?this.handleDraftMediaData(o):this.updateDraft(o))},addProduct:function(e){var t=this;this.submitLoading=!0,e.productCountry=this.objectArrReduce(e.productCountry),Object(d["Ab"])(this.filterData(e)).then((function(e){console.log(e),t.submitLoading=!1,1===e.ret.errcode&&(t.$message.success("恭喜，商品创建成功！"),t.$router.push({name:"productListNew"}))})).catch((function(e){t.submitLoading=!1,console.log(e)}))},editProduct:function(e){var t=this;this.submitLoading=!0,e.productCountry=this.objectArrReduce(e.productCountry),Object(d["ic"])(this.filterData(e)).then((function(e){t.submitLoading=!1,1===e.ret.errcode&&(t.$message.success("恭喜，商品更新成功！"),t.$router.push({name:"productListNew"}))})).catch((function(e){t.submitLoading=!1,console.log(e)}))},getProductDetailById:function(e){var t=this,a={productId:e};Object(d["mc"])(a).then((function(a){1===a.ret.errcode&&(console.log("viewProductInfo",a),t.getUpperRelatedCategoryById(a.cateId,e),t.editBaseInfo(a),t.editParamsInfo(a.productParams),t.editMediaInfo(a.picVideo),t.editService(a.pledgeInfo,a.productCountry),t.editStandardAttr(a.skuBase,a.skuCountry),t.orgId=a.orgId,t.productSourceInfo.source=a.source,a.deliveryWay&&(t.productSourceInfo.deliveryWay=a.deliveryWay))})).catch((function(e){console.log(e)}))},getProductDraftById:function(e){var t=this,a={draftId:e};Object(d["pb"])(a).then((function(a){if(1===a.ret.errcode){console.log("getDraftById",a);var r=a.draftUnit;t.source=r.source,t.orgId=r.orgId,t.getUpperRelatedCategoryById(r.cateId,null,e),t.editBaseInfo(r),t.editParamsInfo(r.productParams),t.editMediaInfo(r.picVideo),t.editService(r.pledgeInfo,r.productCountry),t.editStandardAttr(r.skuBase,r.skuCountry)}})).catch((function(e){console.log(e)}))},getSupplierProductDraftById:function(e){var t=this,a={draftId:e};Object(d["xb"])(a).then((function(a){if(1===a.ret.errcode){console.log("getSupplierDraftById",a);var r=a.draftUnit;t.draftType=r.draftType,t.draftStatus=r.draftStatus,t.source=r.source,t.orgId=r.orgId,t.getUpperRelatedCategoryById(r.cateId,null,e),t.editBaseInfo(r),t.editParamsInfo(r.productParams),t.editMediaInfo(r.picVideo),t.editService(r.pledgeInfo,r.productCountry),t.editStandardAttr(r.skuBase,r.skuCountry),t.productSourceInfo.source=a.draftUnit.source,a.draftUnit.deliveryWay&&(t.productSourceInfo.deliveryWay=a.draftUnit.deliveryWay),r.productId&&(t.productId=r.productId)}})).catch((function(e){console.log(e)}))},editBaseInfo:function(e){var t=this;console.log(111,e);n.a.forEach(e.title,(function(e){t.$set(t.baseInfo.title,e.languageCode,e.name)}));n.a.forEach(e.subTitle,(function(e){t.$set(t.baseInfo.subTitle,e.languageCode,e.name)})),n.a.forEach(this.languageList,(function(e){t.baseInfo.title.hasOwnProperty(e.code)||t.$set(t.baseInfo.title,e.code,""),t.baseInfo.subTitle.hasOwnProperty(e.code)||t.$set(t.baseInfo.subTitle,e.code,"")}));var a=[],r=[];n.a.forEach(e.saleCountry,(function(e){a.push(e.countryCode);var t={};t.countryCode=e.countryCode,t.shelveStatus=e.shelveStatus,t.show=!0,r.push(t)})),n.a.forEach(e.saleCountry,(function(e){var a={disabled:!0,show:!0,shelveStatus:e.shelveStatus};t.countryShelveMap[e.countryCode]=a}));var i=[],o=[];n.a.forEach(this.countryShelveMap,(function(e,t){e.show&&i.push(t)})),n.a.forEach(i,(function(e){n.a.forEach(t.countryList,(function(t){e===t.shortCode&&o.push(t)}))})),this.$store.commit("SET_SALE_COUNTRY_LIST",o),this.baseInfo.cateId=e.cateId,this.baseInfo.productSaleCountry=a,this.baseInfo.productType=e.productType?e.productType:0,this.baseInfo.nature=e.nature,this.baseInfo.orgUrl=e.orgUrl,this.baseInfo.supplierId=e.supplierId,e.brandInfo&&(this.baseInfo.brandId=e.brandInfo.brandId,this.brandInfo.nameCn=e.brandInfo.brandNameCn,this.brandInfo.nameEn=e.brandInfo.brandNameEn),console.log(this.baseInfo)},productCateStr:function(e){var t="";return n.a.forEach(e,(function(a,r){a.cateNameValue[0].name&&(r===e.length-1?t+=a.cateNameValue[0].name:t+=a.cateNameValue[0].name+" >> ")})),this.baseInfo.categoryLinkStr=t,t},editParamsInfo:function(e){var t=this,a=[];n.a.forEach(e,(function(e){a.push(e.attrId)}));var r={};n.a.forEach(a,(function(t){var a=[];n.a.forEach(e,(function(e){t===e.attrId&&a.push(e.valueId)})),r[t]=a})),n.a.forEach(r,(function(e,a){t.$set(t.productParams.productType,a,e)})),console.log("【this.productParams】",this.productParams)},editMediaInfo:function(e){var t=this,a={},r={};n.a.forEach(this.languageList,(function(i){var o,c=i.code;o=n.a.findIndex(e,{languageCode:c})>-1?n.a.find(e,{languageCode:c}):{cover:"",detail:"",form:"",languageCode:c,rotation:""};var s={},l=[];""!=o.rotation&&(l=o.rotation.split(","));var u=[];n.a.forEach(l,(function(e,a){var r={};r.id=a,r.originalLink=e,-1===e.indexOf("http")?r.src=t.dealShowFileSrc(e):r.src=e,u.push(r)}));var d=[];o.detail&&(d=o.detail.split(","));var p=[];""!=d[0]&&d.length>0&&n.a.forEach(d,(function(e,a){var r={};r.id=a,r.originalLink=e,-1===e.indexOf("http")?r.src=t.dealShowFileSrc(e):r.src=e,p.push(r)})),s.detailPics=p,s.rotationPics=u,s.desc=o.desc,a[c]=s;var f={};o.video?(-1===o.video.indexOf("http")?f.src=t.dealShowFileSrc(o.video):f.src=o.video,f.originalLink=o.video):(f.src="",f.originalLink=""),r[c]=f})),this.mediaInfo=a,this.videoInfo=r},editService:function(e,t){var a=this;n.a.forEach(this.saleCountryList,(function(r){var i={afterSalePledge:null,arrivalPledge:null,freightId:null,freightType:null};n.a.forEach(e,(function(e){e.countryCode===r.shortCode&&(i.afterSalePledge=e.afterSalePledge.pledgeId,e.arrivalPledge&&(i.arrivalPledge=e.arrivalPledge.pledgeId))})),n.a.forEach(t,(function(e){e.countryCode===r.shortCode&&("0"===e.freightId?i.freightId=null:i.freightId=e.freightId,i.freightType=e.freightType)})),console.log(a.allServiceInfoItemForm),a.$set(a.allServiceInfoItemForm,r.shortCode,n.a.cloneDeep(i))}))},editStandardAttr:function(e,t){var a=this,r=[];n.a.forEach(e[0].skuAttrValue,(function(e){r.push(e.attrId);var t={};t.attrId=e.attrId,t.cn=e.attrName,t.customize=e.customize,a.selectedStandardModel.push(t),console.log(a.selectedStandardModel)}));var i=[];n.a.forEach(e,(function(e){i=n.a.concat(i,e.skuAttrValue)})),n.a.forEach(this.selectedStandardModel,(function(e,t){var r=[],o=[];n.a.forEach(i,(function(t){e.attrId===t.attrId&&o.push(t)}));var c=n.a.sortBy(o,(function(e){return e.sort}));n.a.forEach(c,(function(e){r.push(e.valueId)})),a.$set(a.attrValueModelList,t,n.a.uniq(r))}));var o={},c=[];n.a.forEach(e,(function(e){var t={};t.skuCode=e.skuCode,t.skuId=e.skuId,t.weight=e.weight/1e3,t.qrCode=e.qrCode,t.currencyCode=e.currencyCode,n.a.forEach(a.supplyCurrencyObj,(function(t,r){a.$set(a.supplyCurrencyObj,r,e.currencyCode)})),t.boxSpecification=a.convertSpecificationData(e.boxSpecification),t.specification=a.convertSpecificationData(e.specification),t.supplierCode=e.supplierCode,t.supplyPrice=e.supplyPrice,e.supplierSkuId&&(t.supplierSkuId=e.supplierSkuId),("check"==a.editType||e.inventory)&&(t.inventory=e.inventory);var r=a.createSkuSpecData(e.skuAttrValue);t=Object.assign(t,r),c.push(t)})),n.a.forEach(this.saleCountryList,(function(e){var a=n.a.filter(t,{countryCode:e.shortCode});o[e.shortCode]=a})),n.a.forEach(o,(function(e,t){n.a.forEach(e,(function(e){var t=n.a.find(c,{skuId:e.skuId});e=Object.assign(e,t)}))})),this.allCountryTableDataModel=o,console.log("selectedStandardModel: ",this.selectedStandardModel),console.log("standardAttrIdList: ",this.standardAttrIdList),console.log("attrValueModelList: ",this.attrValueModelList),console.log("allCountryTableDataModel: ",this.allCountryTableDataModel)},convertSpecificationData:function(e){var t=e.split(",");return{l:t[0],w:t[1],h:t[2],v:t[3]}},createSkuSpecData:function(e){var t={};return n.a.forEach(e,(function(e){t[e.attrId]=e.valueName,t[e.attrId+"_value"]=e.valueId})),t},cancleSubmit:function(){this.$router.push({name:"productListNew"})},submitCheckDraft:function(){this.checkPass=!0,this.submitProduct()},updateDraftData:function(){this.checkPass=!1;var e=null,t=null,a=null,r=null,i=null;this.$refs.productBaseInfo.getBaseInfoData(),e=this.$refs.productBaseInfo.baseInfoResult,this.$refs.productParams.getParamsData(),t=this.$refs.productParams.attrValueInfo,this.$refs.productMedia.getAllMediaFormData(),a=this.$refs.productMedia.allMediaFormData,this.$refs.serviceInfo.getAllServiceInfoData(),r=this.$refs.serviceInfo.allServiceInfoData,this.$refs.standardAttr.getSKUData(),i=this.$refs.standardAttr.standardAttrData,this.formatProductData(e,t,a,r,i)},updateDraft:function(e){var t=this;this.updateLoading=!0;var a={draftId:this.draftId,updateDraftUnit:e};Object(d["hc"])(this.filterData(a)).then((function(e){console.log(e),t.updateLoading=!1,1===e.ret.errcode&&(t.$message.success("恭喜，商品草稿更新成功！"),t.$router.push({name:"productCheck"}))})).catch((function(e){t.updateLoading=!1,console.log(e)}))},handleDraftMediaData:function(e){var t=this;console.log(e),e.source=this.source,e.orgId=this.orgId,e.draftId=this.draftId,this.submitLoading=!0;var a=this,r=e.picVideo[0],i=r.rotation.split(","),o=r.detail.split(","),c="",s=e.sku;if(c=n.a.startsWith(r.video,"http")?r.video:this.dealShowFileSrc(r.video),this.verifyDriftData(e)){var l=[],u=[],d="",p=[];n.a.forEach(i,(function(e){var a={type:"product"};a.fileName=t.getFileNameByUrl(e),n.a.startsWith(e,"http")?a.url=e:a.url=t.dealShowFileSrc(e),p.push(a)}));var f=[];n.a.forEach(o,(function(e){var a={type:"product"};a.fileName=t.getFileNameByUrl(e),n.a.startsWith(e,"http")?a.url=e:a.url=t.dealShowFileSrc(e),""!=a.url&&f.push(a)}));var h=[],m=[];n.a.forEach(s,(function(e){n.a.forEach(e.skuCountry,(function(e){m.push(e.cover)}))})),n.a.forEach(n.a.uniq(m),(function(e){var a={type:"product"};a.fileName=t.getFileNameByUrl(e),n.a.startsWith(e,"http")?a.url=e:a.url=t.dealShowFileSrc(e),h.push(a)})),axios.all([this.uploadVideo(c),this.uploadImg(p,"rotation"),this.uploadImg(f,"detail"),this.uploadImg(h,"skuCover")]).then(axios.spread((function(t,r,i,o){if(d="600"===t.status?t.original_link:"","600"===r.status){var c=r.resultMap,h=[];n.a.forEach(p,(function(e){c[e.url]&&h.push(c[e.url].original_link)})),l=h}if("600"===i.status){var m=i.resultMap,g=[];n.a.forEach(f,(function(e){m[e.url]&&g.push(m[e.url].original_link)})),u=g}if("600"===o.status){var v=o.resultMap;n.a.forEach(v,(function(e,t){n.a.forEach(s,(function(a){n.a.forEach(a.skuCountry,(function(a){a.cover===t&&(a.cover=e.original_link)}))}))}))}n.a.forEach(e.picVideo,(function(e){e.cover=l[0],e.rotation=l.join(","),e.detail=u.join(","),e.form=u.join(","),e.video=d})),"supplier"===a.$route.query.source?1===a.draftType?a.addProduct(e):2===a.draftType&&a.editProduct(e):a.addProduct(e)})))}else a.submitLoading=!1},uploadImg:function(e,t){if(!(e.length<0)){var a=new FormData;a.append("urlParam",JSON.stringify(e));var r="/file/rest/uploadservices/uploadfileByUrlBatch";return Object(M["b"])(r,a)}},uploadVideo:function(e){var t=this.getFileNameByUrl(e),a=new FormData,r={fileName:t,type:"video"};a.append("url",e),a.append("param",JSON.stringify(r));var i="/file/rest/uploadservices/uploadfileByUrl";return Object(M["b"])(i,a)},getFileNameByUrl:function(e){var t="",a=e.lastIndexOf("/");return a>0&&(t=e.substring(a+1,e.length)),t},verifyDriftData:function(e){var t=[];return""===e.productType&&t.push("请选择商品类型"),""===e.brandId&&t.push("请选择商品品牌"),""===e.supplierId&&t.push("请选择供应商"),n.a.forEach(e.title,(function(e){"cn"===e.languageCode&&""===e.name&&t.push("商品中文标题不能为空"),"en"===e.languageCode&&""===e.name&&t.push("商品英文标题不能为空")})),n.a.forEach(e.picVideo,(function(e){"cn"===e.languageCode&&e.rotation.split(",").length<3&&t.push("商品中文商品主图不能少于3张"),"en"===e.languageCode&&e.rotation.split(",").length<3&&t.push("商品英文商品主图不能少于3张")})),n.a.forEach(e.pledgeInfo,(function(e){null!==e.afterSalePledge.pledgeId&&""!==e.afterSalePledge.pledgeId||t.push(e.countryCode+"售后政策不能为空")})),t.length>0&&this.$message({type:"warning",duration:5e3,dangerouslyUseHTMLString:!0,message:t.join("<br>")}),!(t.length>0)},objectArrReduce:function(e){for(var t=[],a={},r=0;r<e.length;r++)a[e[r].countryCode]||(t.push(e[r]),a[e[r].countryCode]=!0);return t},handleGetMediaData:function(){this.$refs.productMedia.getAllMediaFormData()},getcategoryLink:function(){console.log(this.baseInfo)},refuseCheckSupplierDraft:function(){this.refuseDraftDialogVisible=!0},handleConfirmRefuse:function(e){var t=this;console.log(e);var a={draftId:this.draftId,message:e.message};Object(d["Sb"])(a).then((function(e){1===e.ret.errcode&&(t.refuseDraftDialogVisible=!1,t.$message.success("操作成功！"),t.$router.push({name:"productCheck"}))}))},handleCancleRefuse:function(){this.refuseDraftDialogVisible=!1}},beforeDestroy:function(){this.$EventBus.$off("queryTableData")}},At=Rt,Et=(a("ad55"),a("d376"),Object(g["a"])(At,r,i,!1,null,"7f2dc40f",null));t["default"]=Et.exports},ea16:function(e,t,a){"use strict";var r=a("0375"),i=a.n(r);i.a},ebe2:function(e,t,a){"use strict";var r=a("6047"),i=a.n(r);i.a},eef9:function(e,t,a){"use strict";var r=a("03a5"),i=a.n(r);i.a},f144:function(e,t,a){"use strict";var r=a("9c1e"),i=a.n(r);i.a},f559:function(e,t,a){"use strict";var r=a("5ca1"),i=a("9def"),o=a("d2c8"),n="startsWith",c=""[n];r(r.P+r.F*a("5147")(n),"String",{startsWith:function(e){var t=o(this,e,n),a=i(Math.min(arguments.length>1?arguments[1]:void 0,t.length)),r=String(e);return c?c.call(t,r,a):t.slice(a,a+r.length)===r}})},f6ee:function(e,t,a){}}]);