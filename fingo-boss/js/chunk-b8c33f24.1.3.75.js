(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b8c33f24"],{1255:function(t,e,a){},"19f4":function(t,e,a){"use strict";var n=a("482e"),i=a.n(n);i.a},3423:function(t,e,a){},"3cbe":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticClass:"time-dialog",attrs:{title:"提示",visible:t.toggle,width:"30%","before-close":t.cancle},on:{"update:visible":function(e){t.toggle=e}}},["miss"===t.timeMark?a("div",[a("el-date-picker",{staticClass:"statistic-time",attrs:{type:"datetimerange",align:"right",size:"small","unlink-panels":"","range-separator":"~","start-placeholder":"开始日期","end-placeholder":"结束日期",clearable:!1,"picker-options":t.pickerOptions,disabledDate:"disabledDate"},on:{change:t.handelDateTimeChange},model:{value:t.dateRangeTwo,callback:function(e){t.dateRangeTwo=e},expression:"dateRangeTwo"}})],1):a("div",[a("el-date-picker",{staticClass:"statistic-time",attrs:{type:"daterange",align:"right",size:"small","unlink-panels":"","range-separator":"~","start-placeholder":"开始日期","end-placeholder":"结束日期",clearable:!1,"picker-options":t.pickerOptions,disabledDate:"disabledDate"},on:{change:t.handelDateChange},model:{value:t.dateRange,callback:function(e){t.dateRange=e},expression:"dateRange"}})],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.cancle}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.confirm}},[t._v("确 定")])],1)])},i=[],o={data:function(){return{dateRange:"add"===this.timeMark||"returns"===this.timeMark||"cancles"===this.timeMark?[moment("2020-04-18").format("YYYY-MM-DD"),moment().subtract("days",1).format("YYYY-MM-DD")]:[moment().subtract("days",30).format("YYYY-MM-DD"),moment().subtract("days",1).format("YYYY-MM-DD")],dateRangeTwo:[moment().subtract("days",30).format("YYYY-MM-DD HH:mm:ss"),moment().subtract("days",1).format("YYYY-MM-DD HH:mm:ss")],dateRangeTimeStamp:"add"===this.timeMark||"returns"===this.timeMark||"cancles"===this.timeMark?[moment("2020-04-18").format("YYYY-MM-DD").valueOf(),moment().subtract("days",1).format("YYYY-MM-DD").valueOf()]:[moment(moment().subtract("days",30).format("YYYY-MM-DD")).valueOf(),moment(moment().subtract("days",1).format("YYYY-MM-DD")).valueOf()],pickerOptions:{disabledDate:this.disabledDate,shortcuts:[{text:"昨日",onClick:function(t){var e=moment(new Date).add(-1,"days").format("YYYY-MM-DD"),a=moment(new Date).add(-1,"days").format("YYYY-MM-DD");console.log(e),t.$emit("pick",[a,e])}},{text:"今日",onClick:function(t){var e=moment(new Date).format("YYYY-MM-DD"),a=moment(new Date).format("YYYY-MM-DD");t.$emit("pick",[a,e])}},{text:"上周",onClick:function(t){var e=parseInt(moment().format("d")),a=moment().subtract(e+7,"days").format("YYYY-MM-DD"),n=moment().subtract(e+1,"days").format("YYYY-MM-DD");t.$emit("pick",[a,n])}},{text:"本周",onClick:function(t){var e=parseInt(moment().format("d")),a=moment().subtract(e-1,"days").format("YYYY-MM-DD"),n=moment().add(7-e,"days").format("YYYY-MM-DD");t.$emit("pick",[a,n])}},{text:"上月",onClick:function(t){var e=moment().subtract("month",1).format("YYYY-MM")+"-01",a=moment(e).subtract("month",-1).add("days",-1).format("YYYY-MM-DD");t.$emit("pick",[e,a])}},{text:"本月",onClick:function(t){var e=moment().add("month",0).format("YYYY-MM")+"-01",a=moment(e).add("month",1).add("days",-1).format("YYYY-MM-DD");t.$emit("pick",[e,a])}},{text:"去年",onClick:function(t){var e=moment().year(moment().year()-1).startOf("year"),a=moment().year(moment().year()-1).endOf("year");t.$emit("pick",[e,a])}},{text:"今年",onClick:function(t){var e=moment().startOf("year"),a=moment().endOf("year");t.$emit("pick",[e,a])}},{text:"过去7天",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-5184e5),t.$emit("pick",[a,e])}},{text:"过去30天",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-25056e5),t.$emit("pick",[a,e])}},{text:"上线至今",onClick:function(t){var e=new Date,a=moment("2018-12-26 00:00:00");t.$emit("pick",[a,e])}}]}}},props:{dialogVisible:{type:Boolean,default:!1},timeMark:String},computed:{toggle:{get:function(){return this.dialogVisible},set:function(){}}},methods:{disabledDate:function(t){return("add"===this.timeMark||"returns"===this.timeMark||"cancles"===this.timeMark)&&moment(t).format("YYYY-MM-DD")<moment("2020-04-18").format("YYYY-MM-DD")||moment(t).format("YYYY-MM-DD")>moment(new Date).add(-1,"days").format("YYYY-MM-DD")},cancle:function(){this.$emit("on-cancle")},confirm:function(){console.log(this.dateRangeTimeStamp),console.log(this.timeMark),"miss"===this.timeMark?(console.log("====>"),this.$emit("on-confirms",this.timeMark,this.dateRangeTwo,this.dateRangeTimeStamp)):this.$emit("on-confirm",this.timeMark,this.dateRange,this.dateRangeTimeStamp)},handelDateChange:function(t){console.log(t),t[0]=moment(t[0]).format("YYYY-MM-DD"),t[1]=moment(t[1]).format("YYYY-MM-DD"),this.dateRange=t;var e=t[0]+" 00:00:00",a=t[1]+" 23:59:59";this.dateRangeTimeStamp[0]=moment(e,"YYYY-MM-DD HH:mm:ss").valueOf(),this.dateRangeTimeStamp[1]=moment(a,"YYYY-MM-DD HH:mm:ss").valueOf(),console.log(this.dateRangeTimeStamp)},handelDateTimeChange:function(t){console.log(t),this.dateRangeTwo=[moment(t[0]).format("YYYY-MM-DD HH:mm:ss"),moment(t[1]).format("YYYY-MM-DD HH:mm:ss")],console.log(this.dateRangeTwo),this.dateRangeTimeStamp[0]=this.dateRangeTwo[0].valueOf(),this.dateRangeTimeStamp[1]=this.dateRangeTwo[1].valueOf(),console.log(this.dateRangeTimeStamp)}}},s=o,r=(a("9eee"),a("525e"),a("2877")),l=Object(r["a"])(s,n,i,!1,null,"422ce234",null);e["a"]=l.exports},"45f1":function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"a",(function(){return o})),a.d(e,"c",(function(){return s}));var n=a("284b");function i(t){console.log(t);var e=n["a"].create("ListExportRecordByPageReq",t);return Object(n["a"])("datahouse","ExportRecordBossService.ListExportRecordByPage",e,"ListExportRecordByPageResp")}function o(t){console.log(t);var e=n["a"].create("DeleteExportByIdReq",t);return Object(n["a"])("datahouse","ExportRecordBossService.DeleteExportTask",e,"BooleanResp")}function s(t){console.log(t);var e=n["a"].create("CommonExportReq",t);return Object(n["a"])("datahouse","CommonExportBossService.RouteAndExport",e,"ExportResultResp")}},"482e":function(t,e,a){},4909:function(t,e,a){},"525e":function(t,e,a){"use strict";var n=a("a5b4"),i=a.n(n);i.a},5594:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"customer-service"},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.onlineLoading,expression:"onlineLoading"}],attrs:{"element-loading-background":"rgb(237,239,242)","element-loading-text":"数据加载中"}},[a("div",{staticClass:"statue-title"},[t._v("实时客服在线状态")]),a("div",[a("el-row",{staticClass:"num-row",attrs:{gutter:8}},t._l(t.onLineStatus,(function(e,n){return a("el-col",{key:n,attrs:{span:4}},[a("el-card",{staticClass:"increase-num",attrs:{shadow:"always"}},[a("div",{staticClass:"member-title"},[a("div",[t._v(t._s(e.type))]),a("el-tooltip",{staticClass:"item-icon",attrs:{effect:"dark",content:t.cardInfo[e.type],placement:"top"}},[a("i",{staticClass:"el-icon-warning-outline"})])],1),a("div",{staticClass:"member-time"},[t._v("实时刷新")]),a("div",[a("span",{staticClass:"human-num",on:{click:function(a){return t.staffClick(e.staffNickName,e.type)}}},[t._v(t._s(e.value))])])])],1)})),1)],1),a("div",{staticClass:"user-data"},[a("div",{staticClass:"statue-title"},[t._v("用户实时在线数据")]),a("el-select",{attrs:{size:"medium"},on:{change:t.countryChange},model:{value:t.countryCode,callback:function(e){t.countryCode=e},expression:"countryCode"}},t._l(t.countryList,(function(t,e){return a("el-option",{key:e,attrs:{label:t.nameCn,value:t.shortCode}})})),1)],1),a("div",[a("el-row",{staticClass:"num-row",attrs:{gutter:10}},t._l(t.userRealTimeOnLineInfo,(function(e,n){return a("el-col",{key:n,attrs:{span:5}},[a("el-card",{staticClass:"increase-num",attrs:{shadow:"always"}},[a("div",{staticClass:"member-title"},[a("div",[t._v(t._s(e.type))]),a("el-tooltip",{staticClass:"item-icon",attrs:{effect:"dark",content:t.cardInfo[e.type],placement:"top"}},[a("i",{staticClass:"el-icon-warning-outline"})])],1),a("div",{staticClass:"member-time"},[t._v("实时刷新")]),a("div",[a("span",{staticClass:"num"},[t._v(t._s(e.value))])])])],1)})),1)],1),a("div",{staticClass:"customer-data"},[a("div",{staticClass:"statue-title"},[t._v("客服个人数据")]),a("el-select",{attrs:{size:"medium",filterable:"",clearable:""},on:{change:t.customerChange},model:{value:t.customerId,callback:function(e){t.customerId=e},expression:"customerId"}},t._l(t.csStaffInfo,(function(t){return a("el-option",{key:t.staffId,attrs:{label:t.staffNickName,value:t.staffId}})})),1)],1),a("div",[a("el-row",{staticClass:"num-row",attrs:{gutter:10}},t._l(t.csStaffPersonalData,(function(e,n){return a("el-col",{key:n,attrs:{span:4}},[a("el-card",{staticClass:"increase-num",attrs:{shadow:"always"}},[a("div",{staticClass:"member-title"},[a("div",[t._v(t._s(e.type))]),a("el-tooltip",{staticClass:"item-icon",attrs:{effect:"dark",content:t.cardInfo[e.type],placement:"top"}},[a("i",{staticClass:"el-icon-warning-outline"})])],1),a("div",{staticClass:"member-time"},[t._v("实时刷新")]),a("div",[a("span",{staticClass:"num"},[t._v(t._s(e.value))])])])],1)})),1)],1),a("el-card",{staticClass:"increase-num",attrs:{shadow:"always"}},[a("div",{staticClass:"statue-title"},[t._v("每日咨询量趋势")]),t.lineDataMap.series?a("line-chart",{attrs:{dataLenged:t.dataLenged,lineData:t.lineDataMap}}):t._e()],1),a("el-card",{staticClass:"increase-num",attrs:{shadow:"always"}},[a("div",{staticClass:"statue-title"},[t._v("用户在线报表")]),a("user-online",{attrs:{countryList:t.countryList,languageList:t.languageList}})],1),a("el-card",{staticClass:"increase-num",attrs:{shadow:"always"}},[a("div",{staticClass:"statue-title"},[t._v("客服数据报表")]),a("customer-data",{attrs:{csStaffInfo:t.csStaffInfo}})],1),a("el-card",{staticClass:"increase-num",attrs:{shadow:"always"}},[a("div",{staticClass:"statue-title"},[t._v("客服聊天详情报表")]),a("chat-detail",{attrs:{csStaffInfo:t.csStaffInfo,countryList:t.countryList,languageList:t.languageList}})],1),a("el-card",{staticClass:"increase-num",attrs:{shadow:"always"}},[a("div",{staticClass:"statue-title"},[t._v("未接起聊天详情报表")]),a("missed-chat",{attrs:{countryList:t.countryList,languageList:t.languageList}})],1),t.staffDialog?a("staff-dialog",{attrs:{dialogVisible:t.staffDialog,title:t.title,nameList:t.nameList},on:{"on-cancle":t.cancleDialog}}):t._e()],1)])},i=[],o=(a("7514"),a("284b"));function s(t){var e=o["a"].create("RealTimeCsStaffOnLineInfoReq",t);return Object(o["a"])("datahouse","CustomerServiceDataService.RealTimeCsStaffOnLineInfo",e,"RealTimeCsStaffOnLineInfoResp")}function r(t){var e=o["a"].create("UserRealTimeOnLineInfoReq",t);return Object(o["a"])("datahouse","CustomerServiceDataService.UserRealTimeOnLineInfo",e,"UserRealTimeOnLineInfoResp")}function l(t){var e=o["a"].create("CsStaffPersonalDataReq",t);return Object(o["a"])("datahouse","CustomerServiceDataService.CsStaffPersonalData",e,"CsStaffPersonalDataResp")}function c(t){var e=o["a"].create("CsStaffListReq",t);return Object(o["a"])("datahouse","CustomerServiceDataService.CsStaffList",e,"CsStaffListResp")}function u(t){var e=o["a"].create("DayConsultationVolumeReq",t);return Object(o["a"])("datahouse","CustomerServiceDataService.DayConsultationVolume",e,"DayConsultationVolumeResp")}function m(t){var e=o["a"].create("CustomerServiceUserOnLineDataReq",t);return Object(o["a"])("datahouse","CustomerServiceDataService.CustomerServiceUserOnLineData",e,"CustomerServiceUserOnLineDataResp")}function d(t){var e=o["a"].create("CustomerServiceEachDetailDataReq",t);return Object(o["a"])("datahouse","CustomerServiceDataService.CustomerServiceEachDetailData",e,"CustomerServiceEachDetailDataResp")}function f(t){var e=o["a"].create("CustomerServiceUnPickDetailDataReq",t);return Object(o["a"])("datahouse","CustomerServiceDataService.CustomerServiceUnPickDetailData",e,"CustomerServiceUnPickDetailDataResp")}function g(t){var e=o["a"].create("CustomerServiceAllDataDetailToExcelReq",t);return Object(o["a"])("datahouse","CustomerServiceDataService.CustomerServiceAllDataDetailToExcel",e,"CustomerServiceAllDataDetailToExcelResp")}function h(t){var e=o["a"].create("GetDataCenterTypeDataReq",t);return Object(o["a"])("datahouse","DataCenterTypeService.GetDataCenterTypeData",e,"GetDataCenterTypeDataResp")}function v(t){var e=o["a"].create("CustomerChatDetailDataReq",t);return Object(o["a"])("datahouse","CustomerServiceDataService.CustomerChatDetailData",e,"CustomerChatDetailDataResp")}var p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"line-chart"},[a("div",{staticClass:"title"},[t._v("\n        "+t._s(t.title)+"\n    ")]),a("div",{ref:"lineChart",staticStyle:{height:"400px",width:"100%"}})])},D=[],y=(a("ac6a"),a("ac4d"),a("8a81"),a("5df3"),a("1c4c"),a("6b54"),a("7f7f"),a("c5f6"),a("313e")),b=a.n(y);function C(t,e){var a;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(a=S(t))||e&&t&&"number"===typeof t.length){a&&(t=a);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,r=!1;return{s:function(){a=t[Symbol.iterator]()},n:function(){var t=a.next();return s=t.done,t},e:function(t){r=!0,o=t},f:function(){try{s||null==a.return||a.return()}finally{if(r)throw o}}}}function S(t,e){if(t){if("string"===typeof t)return k(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?k(t,e):void 0}}function k(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,n=new Array(e);a<e;a++)n[a]=t[a];return n}var Y={props:{title:{type:String,default:""},lineData:{type:Object,default:function(){}},unit:{type:String,default:""},yMin:{type:Number,default:0},dataLenged:Array},data:function(){return{chart:null}},watch:{lineData:{handler:function(t,e){console.log(t,e),this.setOption()},deep:!0}},methods:{initChart:function(){this.chart=b.a.init(this.$refs.lineChart),this.resize=_.throttle(this.chart.resize,100),window.addEventListener("resize",this.resize)},resizeChart:function(){var t=this;setTimeout((function(){t.chart.resize()}),10)},setOption:function(t){console.log(this.lineData);var e=this.seriesData();console.log(e);var a=this,n={animation:!1,tooltip:{trigger:"axis",axisPointer:{type:"line"},formatter:function(t){var e,a=t[0].name+"</br>",n=C(t);try{for(n.s();!(e=n.n()).done;){var i=e.value;a+=i.marker+""+i.seriesName+": "+i.value+"</br>"}}catch(o){n.e(o)}finally{n.f()}return a}},legend:{data:this.dataLenged},grid:{top:30,left:60,bottom:70,right:60},label:{show:!0,position:"top",textStyle:{color:"#00ca95"}},xAxis:{type:"category",boundaryGap:!1,data:this.lineData.xAxis},yAxis:{type:"value",axisLabel:{formatter:function(t){var e="";return e="%"===a.unit?t+a.unit:t,e}},min:a.yMin},dataZoom:[{type:"inside",start:0,end:100,zoomOnMouseWheel:"ctrl"},{show:!0,type:"slider",y:"90%",start:50,end:100}],series:e};this.chart.setOption(n,!0)},seriesData:function(){for(var t=[],e=0;e<this.lineData.series.length;e++)t.push({name:this.dataLenged[e],type:"line",stack:this.dataLenged[e],data:this.lineData.series[e]});return console.log(t),t}},mounted:function(){this.initChart(),this.setOption()}},T=Y,w=(a("6ff2"),a("2877")),M=Object(w["a"])(T,p,D,!1,null,"b3087a52",null),R=M.exports,q=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticClass:"staff-dialog",attrs:{title:t.title,visible:t.toggle,width:"30%","before-close":t.cancle},on:{"update:visible":function(e){t.toggle=e}}},[0!==t.nameList.length?a("div",{staticClass:"staff-btn-box"},t._l(t.nameList,(function(e,n){return a("div",{key:n,staticClass:"staff-btn"},[a("el-button",{attrs:{type:"primary",plain:""}},[t._v(t._s(e))])],1)})),0):a("div",{staticClass:"none"},[t._v("暂无")]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.cancle}},[t._v("关 闭")])],1)])},I=[],x={data:function(){return{}},props:{title:String,nameList:Array,dialogVisible:Boolean},computed:{toggle:{get:function(){return this.dialogVisible},set:function(){}}},methods:{cancle:function(){this.$emit("on-cancle")}}},L=x,O=(a("6786"),Object(w["a"])(L,q,I,!1,null,"c4f4049e",null)),V=O.exports,z=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"user-online"},[a("div",{staticClass:"box-title"},[a("div",{staticClass:"line-chart-time",on:{click:function(e){return t.timeChange()}}},[t._v("\n            "+t._s(t.dateRangeVariousTimeStamp[0])+"~"+t._s(t.dateRangeVariousTimeStamp[1])+"\n            "),a("i",{staticClass:"iconfont"},[t._v("")])]),a("div",{staticClass:"lang"},[a("div",[t._v("用户选择语言：")]),a("el-select",{attrs:{placeholder:"请选择",filterable:"",clearable:"",size:"mini"},on:{change:t.change},model:{value:t.queryData.language,callback:function(e){t.$set(t.queryData,"language",e)},expression:"queryData.language"}},t._l(t.languageList,(function(t){return a("el-option",{key:t.code,attrs:{label:t.desc,value:t.code}})})),1)],1),a("div",{staticClass:"country"},[a("div",[t._v("用户所属国家：")]),a("el-select",{attrs:{placeholder:"请选择",filterable:"",clearable:"",size:"mini"},model:{value:t.queryData.countryCode,callback:function(e){t.$set(t.queryData,"countryCode",e)},expression:"queryData.countryCode"}},t._l(t.countryList,(function(t){return a("el-option",{key:t.shortCode,attrs:{label:t.nameCn,value:t.shortCode}})})),1)],1),a("div",{staticClass:"btn-box"},[a("el-button",{staticClass:"btn",attrs:{type:"primary"},on:{click:t.search}},[t._v("搜索")]),a("el-button",{staticClass:"btn",on:{click:t.research}},[t._v("重置")]),a("el-button",{staticClass:"btn",attrs:{type:"primary"},on:{click:t.exportData}},[t._v("导出数据")])],1)]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""}},[a("el-table-column",{attrs:{label:"日期时间",width:"180",align:"center",fixed:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.dateDay))])]}}])}),a("el-table-column",{attrs:{label:"转人工客服聊天数",width:"180",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.humanChat))])]}}])}),a("el-table-column",{attrs:{label:"人工接起量",width:"180",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.humanPick))])]}}])}),a("el-table-column",{attrs:{label:"接起率",width:"180",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.pickRate))])]}}])}),a("el-table-column",{attrs:{label:"放弃量",width:"180",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.notPickUp))])]}}])}),a("el-table-column",{attrs:{label:"平均等待时长",width:"180",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.averageWaitTime))])]}}])}),a("el-table-column",{attrs:{label:"总聊天时长",width:"180",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.totalChatTime))])]}}])}),a("el-table-column",{attrs:{label:"平均聊天时长",width:"180",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.averageChatTime))])]}}])}),a("el-table-column",{attrs:{label:"评价量",width:"180",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.commentTotal))])]}}])}),a("el-table-column",{attrs:{label:"参评率",width:"180",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.commentRate))])]}}])}),a("el-table-column",{attrs:{label:"好评量",width:"180",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.goodCommentTotal))])]}}])}),a("el-table-column",{attrs:{label:"好评率",width:"180",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.goodCommentRate))])]}}])}),a("el-table-column",{attrs:{label:"差评量",width:"180",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.badCommentTotal))])]}}])}),a("el-table-column",{attrs:{label:"差评率",width:"180",align:"center",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.badCommentRate))])]}}])})],1),a("div",{staticClass:"pagenation-box"},[a("el-pagination",{staticClass:"pagination",attrs:{"page-sizes":[5,10,15,20],"current-page":t.queryData.page.pageNum,"page-size":t.queryData.page.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"current-change":t.handleCurrentChange,"size-change":t.handleSizeChange}})],1),a("time-chose",{attrs:{dialogVisible:t.dialogVisible,timeMark:t.timeMark},on:{"on-cancle":t.cancleTime,"on-confirm":t.confirmTime}})],1)},N=[],$=a("3cbe"),E={data:function(){return{dateRangeVariousTimeStamp:[moment().subtract("days",30).format("YYYY-MM-DD"),moment().subtract("days",1).format("YYYY-MM-DD")],queryData:{language:"",countryCode:"",page:{pageNum:1,pageSize:10,pagingSwitch:!0}},total:0,tableData:[],loading:!0,dialogVisible:!1,reportName:"",timeMark:"user"}},props:{countryList:Array,languageList:Array},components:{timeChose:$["a"]},mounted:function(){this.getDataCenterTypeData(),this.getCustomerServiceUserOnLineData()},methods:{getDataCenterTypeData:function(){var t=this;h({}).then((function(e){1===e.ret.errcode&&(console.log(e),t.reportName="7")}))},timeChange:function(){this.dialogVisible=!0},getCustomerServiceUserOnLineData:function(){var t=this;this.loading=!0;var e={startTime:moment(this.dateRangeVariousTimeStamp[0]).valueOf().toString(),endTime:moment(this.dateRangeVariousTimeStamp[1]).valueOf().toString(),language:this.queryData.language,countryCode:this.queryData.countryCode,page:this.queryData.page};m(e).then((function(e){1===e.ret.errcode&&(console.log(e),t.loading=!1,t.tableData=e.customerServiceUserOnLineDataList,t.total=Number(e.total))}))},handleCurrentChange:function(t){this.queryData.page.pageNum=t,this.getCustomerServiceUserOnLineData()},handleSizeChange:function(t){this.queryData.page.pageSize=t,this.getCustomerServiceUserOnLineData()},search:function(){this.getCustomerServiceUserOnLineData()},research:function(){this.queryData.language="",this.queryData.countryCode="",this.queryData.page.pageNum=1,this.queryData.page.pageSize=10},exportData:function(){var t=this,e={startTime:moment(this.dateRangeVariousTimeStamp[0]).valueOf().toString(),endTime:moment(this.dateRangeVariousTimeStamp[1]).valueOf().toString(),reportName:this.reportName,customerServiceName:"",chatTotal:"",chatId:"",userId:"",comment:"",language:this.queryData.language,countryCode:this.queryData.countryCode,operationSystem:"",chatSource:"",customerServiceGroup:"",commentTag:"",waitTimeTotal:""};g(e).then((function(e){1===e.ret.errcode&&(console.log(t.dealShowFileSrc(e.excelUrl)),window.open(t.dealShowFileSrc(e.excelUrl)))}))},cancleTime:function(){this.dialogVisible=!1},confirmTime:function(t,e,a){console.log(t,e,a),"user"===t&&(this.dateRangeVariousTimeStamp=e,console.log(this.dateRangeVariousTimeStamp)),this.dialogVisible=!1,this.getCustomerServiceUserOnLineData()}}},H=E,U=(a("a116"),Object(w["a"])(H,z,N,!1,null,"b5f94ad6",null)),j=U.exports,A=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"customer-data-card"},[a("div",{staticClass:"box-title"},[a("div",{staticClass:"line-chart-time",on:{click:function(e){return t.timeChange()}}},[t._v("\n            "+t._s(t.dateRangeVariousTimeStamp[0])+"~"+t._s(t.dateRangeVariousTimeStamp[1])+"\n            "),a("i",{staticClass:"iconfont"},[t._v("")])]),a("div",{staticClass:"lang"},[a("div",[t._v("客服姓名：")]),a("el-select",{attrs:{size:"mini",filterable:"",clearable:""},on:{change:t.customerChange},model:{value:t.queryData.customerServiceName,callback:function(e){t.$set(t.queryData,"customerServiceName",e)},expression:"queryData.customerServiceName"}},t._l(t.csStaffInfo,(function(t){return a("el-option",{key:t.staffId,attrs:{label:t.staffNickName,value:t.staffId}})})),1)],1),a("div",{staticClass:"btn-box"},[a("el-button",{staticClass:"btn",attrs:{type:"primary"},on:{click:t.search}},[t._v("搜索")]),a("el-button",{staticClass:"btn",on:{click:t.research}},[t._v("重置")]),a("el-button",{staticClass:"btn",attrs:{type:"primary"},on:{click:t.exportData}},[t._v("导出数据")])],1)]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""}},[a("el-table-column",{attrs:{label:"日期时间",width:"180",align:"center",fixed:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.dateDay))])]}}])}),a("el-table-column",{attrs:{label:"客服",width:"180",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.customerServiceName))])]}}])}),a("el-table-column",{attrs:{label:"登陆时间",width:"180",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.loginTime))])]}}])}),a("el-table-column",{attrs:{label:"退出时间",width:"180",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.logoutTime))])]}}])}),a("el-table-column",{attrs:{label:"登陆时长",width:"180",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.loginTimeTotal))])]}}])}),a("el-table-column",{attrs:{label:"接线量",width:"180",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.pickTotal))])]}}])}),a("el-table-column",{attrs:{label:"在线时长",width:"180",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.onLineTotal))])]}}])}),a("el-table-column",{attrs:{label:"忙绿时长",width:"180",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.busyTotl))])]}}])}),a("el-table-column",{attrs:{label:"置忙次数",width:"180",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.busyStatusTotal))])]}}])}),a("el-table-column",{attrs:{label:"客服利用率",width:"180",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.customerServiceRate))])]}}])}),a("el-table-column",{attrs:{label:"总聊天时长",width:"180",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.chatTotal))])]}}])}),a("el-table-column",{attrs:{label:"平均聊天时长",width:"180",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.averageChatTotal))])]}}])}),a("el-table-column",{attrs:{label:"评价量",width:"180",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.commentTotal))])]}}])}),a("el-table-column",{attrs:{label:"评价率",width:"180",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.commentRate))])]}}])}),a("el-table-column",{attrs:{label:"好评量",width:"180",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.goodComment))])]}}])}),a("el-table-column",{attrs:{label:"好评率",width:"180",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.goodCommentRate))])]}}])}),a("el-table-column",{attrs:{label:"差评量",width:"180",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.badComment))])]}}])}),a("el-table-column",{attrs:{label:"差评率",width:"180",align:"center",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.badCommentRate))])]}}])})],1),a("div",{staticClass:"pagenation"},[a("el-pagination",{staticClass:"pagination",attrs:{"page-sizes":[5,10,15,20],"current-page":t.queryData.page.pageNum,"page-size":t.queryData.page.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"current-change":t.handleCurrentChange,"size-change":t.handleSizeChange}})],1),a("time-chose",{attrs:{dialogVisible:t.dialogVisible,timeMark:t.timeMark},on:{"on-cancle":t.cancleTime,"on-confirm":t.confirmTime}})],1)},P=[],B={data:function(){return{dialogVisible:!1,dateRangeVariousTimeStamp:[moment().subtract("days",30).format("YYYY-MM-DD"),moment().subtract("days",1).format("YYYY-MM-DD")],queryData:{customerServiceName:"",page:{pageNum:1,pageSize:10,pagingSwitch:!0}},total:0,tableData:[],loading:!0,reportName:"",timeMark:"user"}},props:{csStaffInfo:Array},components:{timeChose:$["a"]},mounted:function(){this.getCustomerServiceEachDetailData()},methods:{customerChange:function(t){console.log(t)},timeChange:function(){this.dialogVisible=!0},getCustomerServiceEachDetailData:function(){var t=this;this.loading=!0;var e={startTime:moment(this.dateRangeVariousTimeStamp[0]).valueOf().toString(),endTime:moment(this.dateRangeVariousTimeStamp[1]).valueOf().toString(),customerServiceName:this.queryData.customerServiceName,page:this.queryData.page};d(e).then((function(e){1===e.ret.errcode&&(console.log(e),t.loading=!1,t.tableData=e.customerServiceEachDetailDataList,t.total=Number(e.total))}))},handleCurrentChange:function(t){console.log(t),this.queryData.page.pageNum=t,this.getCustomerServiceEachDetailData()},handleSizeChange:function(t){console.log(t),this.queryData.page.pageSize=t,this.getCustomerServiceEachDetailData()},search:function(){this.getCustomerServiceEachDetailData()},research:function(){this.queryData.customerServiceName="",this.queryData.page.pageNum=1,this.queryData.page.pageSize=10},exportData:function(){var t=this,e={startTime:moment(this.dateRangeVariousTimeStamp[0]).valueOf().toString(),endTime:moment(this.dateRangeVariousTimeStamp[1]).valueOf().toString(),reportName:"8",customerServiceName:this.queryData.customerServiceName,chatTotal:"",chatId:"",userId:"",comment:"",language:"",countryCode:"",operationSystem:"",chatSource:"",customerServiceGroup:"",commentTag:"",waitTimeTotal:""};g(e).then((function(e){1===e.ret.errcode&&(console.log(t.dealShowFileSrc(e.excelUrl)),window.open(t.dealShowFileSrc(e.excelUrl)))}))},cancleTime:function(){this.dialogVisible=!1},confirmTime:function(t,e,a){console.log(t,e,a),"user"===t&&(this.dateRangeVariousTimeStamp=e,console.log(this.dateRangeVariousTimeStamp)),this.dialogVisible=!1,this.getCustomerServiceEachDetailData()}}},F=B,G=(a("c8c3"),Object(w["a"])(F,A,P,!1,null,"6bc0647a",null)),J=G.exports,W=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"missed-chat"},[a("div",{staticClass:"box-title"},[a("div",{staticClass:"line-chart-time",on:{click:function(e){return t.timeChange()}}},[t._v("\n            "+t._s(t.dateRangeVariousTimeStamp[0])+"~"+t._s(t.dateRangeVariousTimeStamp[1])+"\n            "),a("i",{staticClass:"iconfont"},[t._v("")])]),a("div",{staticClass:"lang"},[a("div",{staticClass:"user-id"},[t._v("用户userID：")]),a("el-input",{attrs:{placeholder:"请输入",size:"mini"},model:{value:t.queryData.userId,callback:function(e){t.$set(t.queryData,"userId",e)},expression:"queryData.userId"}})],1),a("div",{staticClass:"lang"},[a("div",[t._v("客户终端语言：")]),a("el-select",{attrs:{placeholder:"请选择",size:"mini"},model:{value:t.queryData.language,callback:function(e){t.$set(t.queryData,"language",e)},expression:"queryData.language"}},t._l(t.languageList,(function(t,e){return a("el-option",{key:e,attrs:{label:t.desc,value:t.code}})})),1)],1),a("div",{staticClass:"country"},[a("div",[t._v("客户国家：")]),a("el-select",{attrs:{placeholder:"请选择",filterable:"",clearable:"",size:"mini"},model:{value:t.queryData.countryCode,callback:function(e){t.$set(t.queryData,"countryCode",e)},expression:"queryData.countryCode"}},t._l(t.countryList,(function(t){return a("el-option",{key:t.shortCode,attrs:{label:t.nameCn,value:t.shortCode}})})),1)],1),a("div",{staticClass:"lang"},[a("div",[t._v("等待时长：")]),a("el-select",{attrs:{placeholder:"请选择",filterable:"",clearable:"",size:"mini"},model:{value:t.queryData.waitTimeTotal,callback:function(e){t.$set(t.queryData,"waitTimeTotal",e)},expression:"queryData.waitTimeTotal"}},t._l(t.waitingTime,(function(t){return a("el-option",{key:t.itemCode,attrs:{label:t.itemName,value:t.itemCode}})})),1)],1),a("div",{staticClass:"btn-box"},[a("el-button",{staticClass:"btn",attrs:{type:"primary"},on:{click:t.searcher}},[t._v("搜索")]),a("el-button",{staticClass:"btn",on:{click:t.research}},[t._v("重置")]),a("el-button",{staticClass:"btn",attrs:{type:"primary"},on:{click:t.exportData}},[t._v("导出数据")])],1)]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""}},[a("el-table-column",{attrs:{label:"用户userId",width:"180",align:"center",fixed:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.userId))])]}}])}),a("el-table-column",{attrs:{label:"等待开始时间",width:"180",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.waitStartTime))])]}}])}),a("el-table-column",{attrs:{label:"等待结束时间",width:"180",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.waitEndTime))])]}}])}),a("el-table-column",{attrs:{label:"等待时长",width:"180",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.waitTimeTotal))])]}}])}),a("el-table-column",{attrs:{label:"客户终端选择语言",width:"180",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.language))])]}}])}),a("el-table-column",{attrs:{label:"客户国家",width:"180",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.countryCode))])]}}])})],1),a("div",{staticClass:"pagenation"},[a("el-pagination",{staticClass:"pagination",attrs:{"page-sizes":[5,10,15,20],"current-page":t.queryData.page.pageNum,"page-size":t.queryData.page.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"current-change":t.handleCurrentChange,"size-change":t.handleSizeChange}})],1),t.dialogVisible?a("time-chose",{attrs:{dialogVisible:t.dialogVisible,timeMark:t.timeMark},on:{"on-cancle":t.cancleTime,"on-confirms":t.confirmTime}}):t._e()],1)},Q=[],Z={data:function(){return{dateRangeVariousTimeStamp:[moment().subtract("days",30).format("YYYY-MM-DD HH:mm:ss"),moment().subtract("days",1).format("YYYY-MM-DD HH:mm:ss")],queryData:{userId:"",language:"",countryCode:"",waitTimeTotal:"",page:{pageNum:1,pageSize:10,pagingSwitch:!0}},total:0,dialogVisible:!1,reportName:"",waitingTime:[],tableData:[],loading:!0,timeMark:"miss"}},props:{countryList:Array,languageList:Array},components:{timeChose:$["a"]},mounted:function(){this.getDataCenterTypeData(),this.getCustomerServiceUnPickDetailData()},methods:{timeChange:function(){this.dialogVisible=!0},getDataCenterTypeData:function(){var t=this;h({}).then((function(e){1===e.ret.errcode&&(console.log(e),t.reportName="10",t.waitingTime=e.dataHouseConfig[1].dataHouseComponent[7].dataHouseItemConfig[0].dataHouseItemConfig)}))},getCustomerServiceUnPickDetailData:function(){var t=this;this.loading=!0;var e={page:this.queryData.page,startTime:moment(this.dateRangeVariousTimeStamp[0]).valueOf().toString(),endTime:moment(this.dateRangeVariousTimeStamp[1]).valueOf().toString(),language:this.queryData.language,countryCode:this.queryData.countryCode,userId:this.queryData.userId,waitTimeTotal:this.queryData.waitTimeTotal,chatSource:"",operationSystem:""};f(e).then((function(e){1===e.ret.errcode&&(console.log(e),t.loading=!1,t.tableData=e.customerServiceUnPickDetailDataList,t.total=Number(e.total))}))},handleCurrentChange:function(t){console.log(t),this.queryData.page.pageNum=t,this.getCustomerServiceUnPickDetailData()},handleSizeChange:function(t){console.log(t),this.queryData.page.pageSize=t,this.getCustomerServiceUnPickDetailData()},searcher:function(){this.getCustomerServiceUnPickDetailData()},research:function(){this.queryData.userId="",this.queryData.language="",this.queryData.countryCode="",this.queryData.waitTimeTotal="",this.queryData.page.pageNum=1,this.queryData.page.pageSize=10},exportData:function(){var t=this,e={startTime:moment(this.dateRangeVariousTimeStamp[0]).valueOf().toString(),endTime:moment(this.dateRangeVariousTimeStamp[1]).valueOf().toString(),reportName:this.reportName,customerServiceName:"",chatTotal:"",chatId:"",userId:this.queryData.userId,comment:"",language:this.queryData.language,countryCode:this.queryData.countryCode,operationSystem:"",chatSource:"",customerServiceGroup:"",commentTag:"",waitTimeTotal:this.queryData.waitTimeTotal};g(e).then((function(e){1===e.ret.errcode&&(console.log(t.dealShowFileSrc(e.excelUrl)),window.open(t.dealShowFileSrc(e.excelUrl)))}))},cancleTime:function(){this.dialogVisible=!1},confirmTime:function(t,e,a){console.log(t,e,a),"miss"===t&&(this.dateRangeVariousTimeStamp=e,console.log(this.dateRangeVariousTimeStamp)),this.dialogVisible=!1,this.getCustomerServiceUnPickDetailData()}}},K=Z,X=(a("19f4"),Object(w["a"])(K,W,Q,!1,null,"6d2f13fc",null)),tt=X.exports,et=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"chat-detail"},[a("div",{staticClass:"box-title"},[a("div",{staticClass:"line-chart-time",on:{click:function(e){return t.timeChange()}}},[t._v("\n            "+t._s(t.dateRangeVariousTimeStamp[0])+"~"+t._s(t.dateRangeVariousTimeStamp[1])+"\n            "),a("i",{staticClass:"iconfont"},[t._v("")])]),a("div",{staticClass:"lang"},[a("div",[t._v("客服姓名：")]),a("el-select",{attrs:{size:"mini",filterable:"",clearable:""},on:{change:t.customerChange},model:{value:t.queryData.staffId,callback:function(e){t.$set(t.queryData,"staffId",e)},expression:"queryData.staffId"}},t._l(t.csStaffInfo,(function(t){return a("el-option",{key:t.staffId,attrs:{label:t.staffNickName,value:t.staffId}})})),1)],1),a("div",{staticClass:"lang"},[a("div",{staticClass:"user-id"},[t._v("用户userID：")]),a("el-input",{attrs:{placeholder:"请输入",size:"mini"},model:{value:t.queryData.userId,callback:function(e){t.$set(t.queryData,"userId",e)},expression:"queryData.userId"}})],1),a("div",{staticClass:"lang"},[a("div",{staticClass:"user-id"},[t._v("聊天记录ID：")]),a("el-input",{attrs:{placeholder:"请输入",size:"mini"},model:{value:t.queryData.chatRecordId,callback:function(e){t.$set(t.queryData,"chatRecordId",e)},expression:"queryData.chatRecordId"}})],1),a("div",{staticClass:"lang"},[a("div",[t._v("聊天时长：")]),a("el-select",{attrs:{placeholder:"请选择",size:"mini"},model:{value:t.queryData.duration,callback:function(e){t.$set(t.queryData,"duration",e)},expression:"queryData.duration"}},t._l(t.chatTime,(function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.val}})})),1)],1),a("div",{staticClass:"lang"},[a("div",[t._v("客户终端语言：")]),a("el-select",{attrs:{placeholder:"请选择",size:"mini"},model:{value:t.queryData.language,callback:function(e){t.$set(t.queryData,"language",e)},expression:"queryData.language"}},t._l(t.languageList,(function(t,e){return a("el-option",{key:e,attrs:{label:t.desc,value:t.code}})})),1)],1),a("div",{staticClass:"country"},[a("div",[t._v("客户国家：")]),a("el-select",{attrs:{placeholder:"请选择",filterable:"",clearable:"",size:"mini"},model:{value:t.queryData.countryCode,callback:function(e){t.$set(t.queryData,"countryCode",e)},expression:"queryData.countryCode"}},t._l(t.countryList,(function(t){return a("el-option",{key:t.shortCode,attrs:{label:t.nameCn,value:t.shortCode}})})),1)],1),a("div",{staticClass:"country"},[a("div",[t._v("客户评价：")]),a("el-select",{attrs:{placeholder:"请选择",filterable:"",clearable:"",size:"mini"},model:{value:t.queryData.userEvaluation,callback:function(e){t.$set(t.queryData,"userEvaluation",e)},expression:"queryData.userEvaluation"}},t._l(t.reviews,(function(t){return a("el-option",{key:t.itemCode,attrs:{label:t.itemName,value:t.itemCode}})})),1)],1),""!==t.queryData.userEvaluation&&"SATISFIED"===t.queryData.userEvaluation?a("div",{staticClass:"country"},[a("div",[t._v("评价标签：")]),a("el-select",{attrs:{placeholder:"请选择",filterable:"",clearable:"",size:"mini"},model:{value:t.queryData.evaluationTag,callback:function(e){t.$set(t.queryData,"evaluationTag",e)},expression:"queryData.evaluationTag"}},t._l(t.goodList,(function(t){return a("el-option",{key:t.itemCode,attrs:{label:t.itemName,value:t.itemCode}})})),1)],1):t._e(),""!==t.queryData.userEvaluation&&"DISSATISFIED"===t.queryData.userEvaluation?a("div",{staticClass:"country"},[a("div",[t._v("评价标签：")]),a("el-select",{attrs:{placeholder:"请选择",filterable:"",clearable:"",size:"mini"},model:{value:t.queryData.evaluationTag,callback:function(e){t.$set(t.queryData,"evaluationTag",e)},expression:"queryData.evaluationTag"}},t._l(t.badList,(function(t){return a("el-option",{key:t.itemCode,attrs:{label:t.itemName,value:t.itemCode}})})),1)],1):t._e(),a("div",{staticClass:"btn-box"},[a("el-button",{staticClass:"btn",attrs:{type:"primary",size:"small"},on:{click:t.searcher}},[t._v("搜索")]),a("el-button",{staticClass:"btn",attrs:{size:"small"},on:{click:t.research}},[t._v("重置")]),a("el-button",{staticClass:"btn",attrs:{type:"primary",size:"small"},on:{click:t.exportData}},[t._v("导出数据")])],1)]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""}},[a("el-table-column",{attrs:{label:"聊天记录Id",width:"180",align:"center",fixed:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.chatRecordId))])]}}])}),a("el-table-column",{attrs:{label:"客服",prop:"csStaffName",width:"180",align:"center"}}),a("el-table-column",{attrs:{label:"客户userId",width:"180",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.userId))])]}}])}),a("el-table-column",{attrs:{label:"客户终端选择语言",width:"180",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.appLanguage))])]}}])}),a("el-table-column",{attrs:{label:"App版本",width:"180",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.appVersion||"-"))])]}}])}),a("el-table-column",{attrs:{label:"客户国家",width:"180",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.userCountry||"-"))])]}}])}),a("el-table-column",{attrs:{label:"排队等待时间",width:"180",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(t.formatSecondsTo(e.row.queueWaitTime,0)||"-"))])]}}])}),a("el-table-column",{attrs:{label:"聊天开始时间",width:"180",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(t._f("formatTime")(e.row.chatStartTime)))])]}}])}),a("el-table-column",{attrs:{label:"聊天结束时间",width:"180",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(t._f("formatTime")(e.row.chatEndTime)))])]}}])}),a("el-table-column",{attrs:{label:"聊天时长",width:"180",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(t.formatSecondsTo(e.row.chatEndTime,e.row.chatStartTime)))])]}}])}),a("el-table-column",{attrs:{label:"首次响应时长",width:"180",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(t.formatSecondsTo(e.row.firstResptTime,0)))])]}}])}),a("el-table-column",{attrs:{label:"平均响应时长",width:"180",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(t.formatSecondsTo(e.row.averageResptTime,0)))])]}}])}),a("el-table-column",{attrs:{label:"评价",width:"180",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.evaluation||"-"))])]}}])}),a("el-table-column",{attrs:{label:"评价标签",width:"180",align:"center",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.evaluationTag||"-"))])]}}])})],1),a("div",{staticClass:"pagenation"},[a("el-pagination",{staticClass:"pagination",attrs:{"page-sizes":[5,10,15,20],"current-page":t.queryData.page.pageNum,"page-size":t.queryData.page.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"current-change":t.handleCurrentChange,"size-change":t.handleSizeChange}})],1),t.dialogVisible?a("time-chose",{attrs:{dialogVisible:t.dialogVisible,timeMark:t.timeMark,dateRangeVariousTimeStamp:t.dateRangeVariousTimeStamp},on:{"on-cancle":t.cancleTime,"on-confirms":t.confirmTime}}):t._e()],1)},at=[],nt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticClass:"time-dialog",attrs:{title:"提示",visible:t.toggle,width:"30%","before-close":t.cancle},on:{"update:visible":function(e){t.toggle=e}}},[a("div",[a("el-date-picker",{staticClass:"statistic-time",attrs:{type:"datetimerange",align:"right",size:"small","unlink-panels":"","range-separator":"~","start-placeholder":"开始日期","end-placeholder":"结束日期",clearable:!1,"picker-options":t.pickerOptions,disabledDate:"disabledDate"},on:{change:t.handelDateTimeChange},model:{value:t.dateRangeTwo,callback:function(e){t.dateRangeTwo=e},expression:"dateRangeTwo"}})],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.cancle}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.confirm}},[t._v("确 定")])],1)])},it=[],ot={data:function(){return{dateRangeTwo:[],dateRangeTimeStamp:[moment(moment().subtract("days",1).startOf("day").format("YYYY-MM-DD HH:mm:ss")).valueOf(),moment(moment().subtract("days",1).endOf("day").format("YYYY-MM-DD HH:mm:ss")).valueOf()],pickerOptions:{disabledDate:this.disabledDate,shortcuts:[{text:"昨日",onClick:function(t){var e=moment(new Date).add(-1,"days").format("YYYY-MM-DD"),a=moment(new Date).add(-1,"days").format("YYYY-MM-DD");console.log(e),t.$emit("pick",[a,e])}},{text:"今日",onClick:function(t){var e=moment(new Date).format("YYYY-MM-DD"),a=moment(new Date).format("YYYY-MM-DD");t.$emit("pick",[a,e])}},{text:"上周",onClick:function(t){var e=parseInt(moment().format("d")),a=moment().subtract(e+7,"days").format("YYYY-MM-DD"),n=moment().subtract(e+1,"days").format("YYYY-MM-DD");t.$emit("pick",[a,n])}},{text:"本周",onClick:function(t){var e=parseInt(moment().format("d")),a=moment().subtract(e-1,"days").format("YYYY-MM-DD"),n=moment().add(7-e,"days").format("YYYY-MM-DD");t.$emit("pick",[a,n])}},{text:"上月",onClick:function(t){var e=moment().subtract("month",1).format("YYYY-MM")+"-01",a=moment(e).subtract("month",-1).add("days",-1).format("YYYY-MM-DD");t.$emit("pick",[e,a])}},{text:"本月",onClick:function(t){var e=moment().add("month",0).format("YYYY-MM")+"-01",a=moment(e).add("month",1).add("days",-1).format("YYYY-MM-DD");t.$emit("pick",[e,a])}},{text:"去年",onClick:function(t){var e=moment().year(moment().year()-1).startOf("year"),a=moment().year(moment().year()-1).endOf("year");t.$emit("pick",[e,a])}},{text:"今年",onClick:function(t){var e=moment().startOf("year"),a=moment().endOf("year");t.$emit("pick",[e,a])}},{text:"过去7天",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-5184e5),t.$emit("pick",[a,e])}},{text:"过去30天",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-25056e5),t.$emit("pick",[a,e])}},{text:"上线至今",onClick:function(t){var e=new Date,a=moment("2018-12-26 00:00:00");t.$emit("pick",[a,e])}}]}}},props:{dialogVisible:{type:Boolean,default:!1},timeMark:String,dateRangeVariousTimeStamp:Array},created:function(){this.dateRangeTwo=this.dateRangeVariousTimeStamp},computed:{toggle:{get:function(){return this.dialogVisible},set:function(){}}},methods:{disabledDate:function(t){return("add"===this.timeMark||"returns"===this.timeMark||"cancles"===this.timeMark)&&moment(t).format("YYYY-MM-DD")<moment("2020-04-18").format("YYYY-MM-DD")||moment(t).format("YYYY-MM-DD")>moment(new Date).add(-1,"days").format("YYYY-MM-DD")},cancle:function(){this.$emit("on-cancle")},confirm:function(){console.log(this.dateRangeTimeStamp),console.log(this.timeMark),this.$emit("on-confirms",this.timeMark,this.dateRangeTwo,this.dateRangeTimeStamp)},handelDateTimeChange:function(t){console.log(t),this.dateRangeTwo=[moment(t[0]).format("YYYY-MM-DD HH:mm:ss"),moment(t[1]).format("YYYY-MM-DD HH:mm:ss")],console.log(this.dateRangeTwo),this.dateRangeTimeStamp[0]=this.dateRangeTwo[0].valueOf(),this.dateRangeTimeStamp[1]=this.dateRangeTwo[1].valueOf(),console.log(this.dateRangeTimeStamp)}}},st=ot,rt=(a("ba19"),a("5e61"),Object(w["a"])(st,nt,it,!1,null,"e24436d8",null)),lt=rt.exports,ct=a("45f1"),ut={data:function(){return{dateRangeVariousTimeStamp:[moment().subtract("days",1).startOf("day").format("YYYY-MM-DD HH:mm:ss"),moment().subtract("days",1).endOf("day").format("YYYY-MM-DD HH:mm:ss")],queryData:{userId:"",language:"",countryCode:"",chatRecordId:"",staffId:"",duration:"",userEvaluation:"",evaluationTag:"",page:{pageNum:1,pageSize:10,pagingSwitch:!0}},total:0,dialogVisible:!1,tableData:[],loading:!0,timeMark:"miss",chatTime:[{val:1,label:"全选"},{val:2,label:"1分钟内"},{val:3,label:"1～5分钟"},{val:4,label:"5～15分钟"},{val:5,label:"15～60分钟"},{val:6,label:"60分钟以上"}],reviews:[],goodList:[],badList:[]}},props:{csStaffInfo:Array,countryList:Array,languageList:Array},components:{timeChose:lt},mounted:function(){this.getDataCenterTypeData(),this.getCustomerChatDetailData()},methods:{handleCurrentChange:function(t){this.queryData.page.pageNum=t,this.getCustomerChatDetailData()},handleSizeChange:function(t){this.queryData.page.pageSize=t,this.getCustomerChatDetailData()},formatSecondsTo:function(t,e){var a,n=Number(t)-Number(e),i=parseInt(n/864e5),o=parseInt(n%864e5/36e5),s=parseInt(n%36e5/6e4),r=parseInt(n%6e4/1e3);return i>0?a=i+"天"+o+"小时"+s+"分"+r+"秒":o>0?a=o+"小时"+s+"分"+r+"秒":s>0?a=s+"分"+r+"秒":r>0&&(a=r+"秒"),a},getDataCenterTypeData:function(){var t=this;h({}).then((function(e){if(1===e.ret.errcode){console.log(e),t.reviews=e.dataHouseConfig[1].dataHouseComponent[6].dataHouseItemConfig[0].dataHouseItemConfig;for(var a=e.dataHouseConfig[1].dataHouseComponent[6].dataHouseItemConfig[1].dataHouseItemConfig,n=0;n<a.length;n++)n<=2?t.goodList.push(a[n]):t.badList.push(a[n])}}))},timeChange:function(){this.dialogVisible=!0},cancleTime:function(){this.dialogVisible=!1},confirmTime:function(t,e,a){"miss"===t&&(this.dateRangeVariousTimeStamp=e,console.log(this.dateRangeVariousTimeStamp)),this.dialogVisible=!1,this.getCustomerChatDetailData()},getCustomerChatDetailData:function(t){var e=this;1===t&&(this.queryData.page.pageNum=1),this.loading=!0;var a="",n="";switch(this.queryData.duration){case 2:a=0,n=6e4;break;case 3:a=6e4,n=3e5;break;case 4:a=3e5,n=9e5;break;case 5:a=9e5,n=36e5;break;case 6:a=36e5,n="";break}var i={chatStartTime:moment(this.dateRangeVariousTimeStamp[0]).valueOf().toString(),chatEndTime:moment(this.dateRangeVariousTimeStamp[1]).valueOf().toString(),staffId:this.queryData.staffId,userId:this.queryData.userId,chatRecordId:this.queryData.chatRecordId,appLanguage:this.queryData.language,userCountry:this.queryData.countryCode,userEvaluation:this.queryData.userEvaluation,evaluationTag:this.queryData.evaluationTag,chatTimeStart:a,chatTimeEnd:n,page:this.queryData.page};v(this.filterData(i)).then((function(t){1===t.ret.errcode&&(console.log(t),e.loading=!1,e.tableData=t.data,e.total=t.total)}))},searcher:function(){this.getCustomerChatDetailData(1)},research:function(){this.queryData.userId="",this.queryData.language="",this.queryData.countryCode="",this.queryData.chatRecordId="",this.queryData.staffId="",this.queryData.duration="",this.queryData.userEvaluation="",this.queryData.evaluationTag="",this.queryData.page.pageNum=1,this.queryData.page.pageSize=10,this.getCustomerChatDetailData()},exportData:function(){var t=this,e="",a="";switch(this.queryData.duration){case 2:e=0,a=6e4;break;case 3:e=6e4,a=3e5;break;case 4:e=3e5,a=9e5;break;case 5:e=9e5,a=36e5;break;case 6:e=36e5,a="";break}var n={chatStartTime:moment(this.dateRangeVariousTimeStamp[0]).valueOf().toString(),chatEndTime:moment(this.dateRangeVariousTimeStamp[1]).valueOf().toString(),staffId:this.queryData.staffId,userId:this.queryData.userId,chatRecordId:this.queryData.chatRecordId,appLanguage:this.queryData.language,userCountry:this.queryData.countryCode,userEvaluation:this.queryData.userEvaluation,evaluationTag:this.queryData.evaluationTag,chatTimeStart:e,chatTimeEnd:a};Object(ct["c"])({type:4,param:JSON.stringify(this.filterData(n))}).then((function(e){if(1==e.ret.errcode)switch(e.code){case 1:case 2:case 3:t.$notify({title:"生成导出任务成功",message:"导出的数据文件正在生成中，请至文件中心查看进度并下载",type:"success",onClose:function(){t.$router.push("/fileCenter/exportList")},duration:1500});break;case 4:t.$notify({title:"生成导出任务失败",message:"任务生成失败，请稍后再试",type:"info"});break;case 5:t.$notify({title:"导出限制",message:"相同参数的导出任务，同个用户15分钟内只允许导出一次",type:"info"});break;case 6:t.$notify({title:"请勿反复提及导出任务",message:"请勿重复提交，30秒后再尝试",type:"info"});default:break}})).catch((function(t){console.error(t)}))}}},mt=ut,dt=(a("edb3"),Object(w["a"])(mt,et,at,!1,null,"29f4f3cc",null)),ft=dt.exports,gt={data:function(){return{onlineLoading:!0,timeLoading:!0,onLineStatus:[],nameList:[],cardInfo:{"在线中":"当前登陆im后台的客服数量，包括在线/忙碌状态","空闲中":"当前登陆im后台且状态为「在线」且无服务中工单","聊天中":"当前登陆im后台且状态为「在线」且有服务中工单","忙碌中":"当前登陆im后台且状态为「忙碌」","已离线":"当前未登陆im后台的有效客服账号数量","用户在线访问UV":"当天进入客服页面的访问量，用户id去重","用户在线转人工UV":"当天点击转接人工客服的量，按用户id计算未成功(排队结束)的算一次，成功建立会话的算多次 =（放弃量+接起量）","客服接线量":"当天客服接起的工单总数，用户id不去重","离线消息池余量":"当前离线消息池中待分配的消息总数量","用户放弃量":"当天排队结束等待的次数，同一天用户id去重","客服接起率":"客服接线量/用户在线转人工量","当前等待在线数":"当前还在排队中的在线用户数量","当前在线满意度":"当天受理在线客户给予好评的量/当天受理在线客户给予评价的量","在线处理工单量":"当天共处理完成咨询数量（结束服务时间为准）","当天在线时长":"所有客服当天累计在线总时长（包括在线、忙碌、小憩 状态）","当日忙碌时长":"所有客服当天累计忙碌状态总时长","平均聊天时长":"所有客服当天累计聊天总时长/当天完成服务的工单数量","当前满意度":"客服当天受理在线客户给予好评的量/客服当天受理在线客户给予评价的量"},countryCode:"",userRealTimeOnLineInfo:[],customerId:"",csStaffInfo:[],csStaffPersonalData:[],dataLenged:["用户访问量","转人工客服量","人工接线量","放弃量"],lineDataMap:{},staffDialog:!1,title:""}},components:{lineChart:R,staffDialog:V,userOnline:j,customerData:J,missedChat:tt,chatDetail:ft},mounted:function(){this.getRealTimeCsStaffOnLineInfo(),this.getUserRealTimeOnLineInfo(),this.getCsStaffList(),this.getCsStaffPersonalData(),this.getDayConsultationVolume()},computed:{countryList:function(){var t=[].concat(this.$store.state.dict.countryList),e=t.find((function(t){return""==t.shortCode}));e||t.unshift({nameCn:"合计",nameLocal:"合计",shortCode:""});var a=t.find((function(t){return"ID"==t.shortCode}));return a||t.push({nameCn:"印度尼西亚",nameLocal:"印度尼西亚",shortCode:"ID"}),t},languageList:function(){var t=this.$store.state.dict.languageList;return t.unshift({code:"",desc:"全选"}),t}},methods:{getRealTimeCsStaffOnLineInfo:function(){var t=this;this.onlineLoading=!0,s({}).then((function(e){1===e.ret.errcode&&(console.log(e),t.onLineStatus=e.staffOnLineInfos,t.onlineLoading=!1)}))},staffClick:function(t,e){this.nameList=t,this.title=e,this.staffDialog=!0},cancleDialog:function(){this.staffDialog=!1},getUserRealTimeOnLineInfo:function(){var t=this;this.timeLoading=!0;var e={country:this.countryCode};r(e).then((function(e){1===e.ret.errcode&&(console.log(e),t.timeLoading=!1,t.userRealTimeOnLineInfo=e.userRealTimeOnLineInfo)}))},countryChange:function(t){console.log(t),this.countryCode=t,this.getUserRealTimeOnLineInfo()},getCsStaffList:function(){var t=this,e={selectParam:this.customerId};c(e).then((function(e){if(1===e.ret.errcode){console.log(e);var a=e.csStaffInfo;a.unshift({staffId:"",staffNickName:"总计"}),t.csStaffInfo=a}}))},customerChange:function(t){console.log(t),this.customerId=t,this.getCsStaffPersonalData()},getCsStaffPersonalData:function(){var t=this,e={staffId:this.customerId};l(e).then((function(e){1===e.ret.errcode&&(console.log(e),t.csStaffPersonalData=e.csStaffPersonalData)}))},getDayConsultationVolume:function(){var t=this;u({}).then((function(e){if(1===e.ret.errcode){console.log(e);for(var a=[],n=[],i=e.dayConsultationVolumeInfo,o=0;o<i.length;o++)n.push(i[o].dateTime);var s=[];for(var r in i[0])s.push(r);s.splice("dateTime",1);for(var l=0;l<s.length;l++)a.push([]);for(var c=0;c<i.length;c++)a[0].push(i[c].userReqNum),a[1].push(i[c].transferLaborNum),a[2].push(i[c].csPickUpNum),a[3].push(i[c].abandonmentQuantity);t.lineDataMap={series:a,xAxis:n},console.log(t.lineDataMap)}}))}}},ht=gt,vt=(a("d2df"),Object(w["a"])(ht,n,i,!1,null,"42168f44",null));e["default"]=vt.exports},"5e61":function(t,e,a){"use strict";var n=a("b568"),i=a.n(n);i.a},6786:function(t,e,a){"use strict";var n=a("3423"),i=a.n(n);i.a},"6ff2":function(t,e,a){"use strict";var n=a("1255"),i=a.n(n);i.a},"8f2b":function(t,e,a){},"97ce":function(t,e,a){},"9eee":function(t,e,a){"use strict";var n=a("8f2b"),i=a.n(n);i.a},a116:function(t,e,a){"use strict";var n=a("d544"),i=a.n(n);i.a},a5b4:function(t,e,a){},b568:function(t,e,a){},ba19:function(t,e,a){"use strict";var n=a("97ce"),i=a.n(n);i.a},c8c3:function(t,e,a){"use strict";var n=a("4909"),i=a.n(n);i.a},d2df:function(t,e,a){"use strict";var n=a("e4fe"),i=a.n(n);i.a},d544:function(t,e,a){},e4fe:function(t,e,a){},edb3:function(t,e,a){"use strict";var n=a("f0a4"),i=a.n(n);i.a},f0a4:function(t,e,a){}}]);