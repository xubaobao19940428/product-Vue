(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6cf730a2"],{"088b":function(e,t,r){"use strict";var a=r("a94f"),i=r.n(a);i.a},1047:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container forward-receive-wrapper"},[r("el-form",{ref:"sockInFilterForm",attrs:{inline:"",model:e.queryData,"label-width":"80px",size:"medium"}},[r("el-form-item",{staticClass:"filter-item",attrs:{label:"物流单号："}},[r("el-input",{attrs:{clearable:"",placeholder:"请输入物流单号",size:"medium"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(1)}},model:{value:e.queryData.logisticsNo,callback:function(t){e.$set(e.queryData,"logisticsNo",t)},expression:"queryData.logisticsNo"}})],1),r("el-form-item",{staticClass:"filter-item",attrs:{label:"出库单号："}},[r("el-input",{attrs:{clearable:"",placeholder:"请输入出库单号",size:"medium"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(1)}},model:{value:e.queryData.outNo,callback:function(t){e.$set(e.queryData,"outNo",t)},expression:"queryData.outNo"}})],1),r("el-form-item",{staticClass:"filter-item",attrs:{label:"状态："}},[r("el-select",{attrs:{clearable:"",size:"medium"},on:{change:function(t){return e.search(1)}},model:{value:e.queryData.status,callback:function(t){e.$set(e.queryData,"status",t)},expression:"queryData.status"}},e._l(e.signForStatus,(function(e,t){return r("el-option",{key:t,attrs:{label:e,value:Number(t)}})})),1)],1),r("el-form-item",{staticClass:"filter-item",attrs:{label:"物流公司："}},[r("el-select",{attrs:{clearable:"",size:"medium"},on:{change:function(t){return e.search(1)}},model:{value:e.queryData.logisticsCompanyNo,callback:function(t){e.$set(e.queryData,"logisticsCompanyNo",t)},expression:"queryData.logisticsCompanyNo"}},e._l(e.wareCompanyLists,(function(e,t){return r("el-option",{key:t,attrs:{label:e,value:Number(t)}})})),1)],1),r("el-form-item",{staticClass:"filter-item",attrs:{label:"运输方式："}},[r("el-select",{attrs:{clearable:"",size:"medium"},on:{change:function(t){return e.search(1)}},model:{value:e.queryData.transportWay,callback:function(t){e.$set(e.queryData,"transportWay",t)},expression:"queryData.transportWay"}},e._l(e.transportLists,(function(e,t){return r("el-option",{key:t,attrs:{label:e,value:Number(t)}})})),1)],1),r("el-form-item",{staticClass:"filter-item",attrs:{label:"目的地："}},[r("el-select",{attrs:{clearable:"",size:"medium"},on:{change:function(t){return e.search(1)}},model:{value:e.queryData.toPlace,callback:function(t){e.$set(e.queryData,"toPlace",t)},expression:"queryData.toPlace"}},e._l(e.destinationLists,(function(e,t){return r("el-option",{key:t,attrs:{label:e,value:Number(t)}})})),1)],1),r("el-form-item",{staticClass:"filter-item",attrs:{label:"异常类型："}},[r("el-select",{attrs:{clearable:"",size:"medium"},on:{change:function(t){return e.search(1)}},model:{value:e.queryData.exceptionType,callback:function(t){e.$set(e.queryData,"exceptionType",t)},expression:"queryData.exceptionType"}},e._l(e.exceptionTypeList,(function(e,t){return r("el-option",{key:t,attrs:{label:e,value:Number(t)}})})),1)],1),r("el-form-item",{staticClass:"filter-item",attrs:{label:"时间类型：",prop:"timeList"}},[r("el-select",{staticStyle:{width:"100px"},attrs:{clearable:"",size:"medium"},model:{value:e.queryData.timeType,callback:function(t){e.$set(e.queryData,"timeType",t)},expression:"queryData.timeType"}},e._l(e.timeTypeLists,(function(e,t){return r("el-option",{key:t,attrs:{label:e,value:Number(t)}})})),1),r("el-date-picker",{attrs:{"value-format":"timestamp",type:"daterange",size:"medium","default-time":["00:00:00","23:59:59"],"start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.queryData.timeList,callback:function(t){e.$set(e.queryData,"timeList",t)},expression:"queryData.timeList"}})],1),r("div",[r("el-form-item",{staticClass:"filter-item",staticStyle:{"margin-left":"20px"}},[r("el-button",{attrs:{icon:"el-icon-search",type:"primary",size:"medium"},on:{click:function(t){return e.search(1)}}},[e._v("搜索")]),r("el-button",{attrs:{icon:"el-icon-refresh-left",size:"medium"},on:{click:e.resetSearch}},[e._v("重置")]),r("el-button",{attrs:{type:"primary",size:"medium"},on:{click:e.batchConfirm}},[e._v("批量确认到达")]),r("el-button",{attrs:{type:"primary",size:"medium"},on:{click:e.exportData}},[e._v("\n          导出\n          "),r("el-tooltip",{attrs:{content:"导出的最大数量默认5000,可修改 Apollo配置项:ERP_CROSS_BORDER_EXPORT_LIMIT 调整",placement:"top"}},[r("i",{staticClass:"el-icon-question"})])],1)],1)],1)],1),r("div",{staticClass:"main-content-wrapper"},[r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{height:"100%",data:e.dataList,border:""},on:{"selection-change":e.handleSelectionChange}},[r("el-table-column",{attrs:{type:"selection",width:"55"}}),r("el-table-column",{attrs:{label:"物流单号",width:"200",align:"center",prop:"logisticsNo"}}),r("el-table-column",{attrs:{label:"第三方物流单号",width:"200",align:"center",prop:"thridLogisticsNo"}}),r("el-table-column",{attrs:{label:"",width:"1",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(e.setTimeInter(Number(t.row.deadlineTime),t.$index)))])]}}])}),r("el-table-column",{attrs:{label:"出库单号",width:"200",align:"center",prop:"outNo"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-link",{attrs:{underline:!1,type:"primary"},on:{click:function(r){return e.detailPurchase(t.row)}}},[e._v(e._s(t.row.outNo))])]}}])}),r("el-table-column",{attrs:{label:"物流公司",width:"200",align:"center",prop:"logisticsCompanyName"}}),r("el-table-column",{attrs:{label:"运输方式",width:"200",align:"center",prop:"transportWayName"}}),r("el-table-column",{attrs:{label:"目的地",width:"100",align:"center",prop:"toPlace"}}),r("el-table-column",{attrs:{label:"状态|物流时效",width:"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",[e._v("\n            "+e._s(t.row.statusName+"|")+"\n            "),r("span",{staticStyle:{color:"red"}},[e._v(e._s(t.row.timeOutDetail))])])]}}])}),r("el-table-column",{attrs:{label:"异常类型",width:"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[""!=t.row.exceptionTypeName?r("div",{staticStyle:{color:"red"}},[e._v(e._s(t.row.exceptionTypeName))]):e._e(),""!=t.row.exceptionRecordTime?r("div",{staticStyle:{color:"red"}},[e._v(e._s(e.timestampToTime(Number(t.row.exceptionRecordTime))))]):e._e()]}}])}),r("el-table-column",{attrs:{label:"物流信息",width:"200",align:"center",prop:"logisticsInfo"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.logisticsInfo.split(";"),(function(t,a){return r("div",{key:a},[e._v("\n              "+e._s(t)+"\n            ")])}))}}])}),r("el-table-column",{attrs:{label:"申报价值",width:"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",[e._v("申报价值:"+e._s(t.row.declaredAmount))]),r("div",[e._v("重量:"+e._s(t.row.declaredWeight))])]}}])}),r("el-table-column",{attrs:{label:"时间信息",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",{staticStyle:{padding:"10px 0"},domProps:{innerHTML:e._s(e.timeInfoListRep(t.row.timeInfoList))}})]}}])}),r("el-table-column",{attrs:{label:"操作",width:"300",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[7==t.row.status?r("el-link",{staticStyle:{"margin-right":"20px"},attrs:{underline:!1,type:"primary"},on:{click:function(r){return e.manualConfirmOrder(t.row,t.$index)}}},[e._v("手动下单")]):e._e(),"1"!=t.row.logisticsCompanyNo&&5!=t.row.status?r("el-link",{attrs:{underline:!1,type:"primary"},on:{click:function(r){return e.confirmArriveRight(t.row,t.$index)}}},[e._v("确认到达")]):e._e(),r("el-link",{staticStyle:{margin:"0 20px"},attrs:{underline:!1,type:"primary",disabled:1!=t.row.status&&2!=t.row.status},on:{click:function(r){return e.cancelLogi(t.row,t.$index)}}},[e._v("取消")]),r("el-link",{attrs:{underline:!1,type:"primary"},on:{click:function(r){return e.updateLogiDetail(t.row,t.$index)}}},[e._v("同步物流信息")])]}}])})],1)],1),r("div",{staticClass:"pagination-box"},[r("el-pagination",{attrs:{"current-page":e.queryData.page.pageNum,"page-size":e.queryData.page.pageSize,"page-sizes":[10,20,30,50],layout:"total, sizes, prev, pager, next",total:e.totals},on:{"size-change":e.handleSizeChanges,"current-change":e.handleCurrentChanges}})],1)],1)},i=[],n=(r("6b54"),r("ac6a"),r("386d"),r("2ef0")),o=r.n(n),s=r("137c"),c={data:function(){return{dialogTableVisible:!1,outNo:"",queryData:{logisticsNo:"",outNo:"",status:"",logisticsCompanyNo:"",transportWay:"",toPlace:"",timeType:"",startTime:"",endTime:"",exceptionType:"",timeList:[],page:{pageNum:1,pageSize:20}},totals:0,statusListMap:{1:"已入库",2:"未入库"},signForStatus:{},wareCompanyLists:{},transportLists:{},outTimeLists:{},exceptionTypeList:{},destinationLists:{},timeTypeLists:{},signStatusList:[{value:1,label:"已签收"},{value:2,label:"未签收"}],dataList:[],loading:!1,selectLogiNo:[]}},components:{},created:function(){},mounted:function(){this.search(),this.getEnumConfig()},methods:{timestampToTime:function(e){var t=new Date(e),r=t.getFullYear()+"-",a=(t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-",i=(t.getDate()+1<=10?"0"+t.getDate():t.getDate())+" ",n=(t.getHours()+1<=10?"0"+t.getHours():t.getHours())+":",o=(t.getMinutes()+1<=10?"0"+t.getMinutes():t.getMinutes())+":",s=t.getSeconds()+1<=10?"0"+t.getSeconds():t.getSeconds();return r+a+i+n+o+s},resetSearch:function(){this.queryData={logisticsNo:"",outNo:"",status:"",logisticsCompanyNo:"",transportWay:"",toPlace:"",timeType:"",startTime:"",endTime:"",exceptionType:"",timeList:[],page:{pageNum:1,pageSize:20}},this.search()},getEnumConfig:function(){var e=this;Object(s["j"])({}).then((function(t){if(1==t.ret.errcode){var r=JSON.parse(t.enumJson);e.exceptionTypeList=r.exceptionType,e.destinationLists=r.countryCode,e.wareCompanyLists=r.logisticsCompany,e.signForStatus=r.orderStatus,e.timeTypeLists=r.timeType,e.transportLists=r.transportWay}})).catch((function(e){console.log(e)}))},updateLogiDetail:function(e,t){var r=this,a={thridLogisticsNo:e.thridLogisticsNo};Object(s["q"])(a).then((function(e){1==e.ret.errcode&&(r.$set(r.dataList,t,e.data),r.$message.success("同步物流信息成功"))})).catch((function(e){}))},cancelLogi:function(e,t){var r=this,a={thridLogisticsNo:e.thridLogisticsNo};Object(s["c"])(a).then((function(e){1==e.ret.errcode&&(r.$set(r.dataList,t,e.data),r.$message.success("取消成功"))})).catch((function(e){}))},confirmArriveRight:function(e,t){var r=this,a={thridLogisticsNo:e.thridLogisticsNo};Object(s["d"])(a).then((function(e){1==e.ret.errcode&&(r.$set(r.dataList,t,e.data),r.$message.success("确认到达成功"))})).catch((function(e){}))},manualConfirmOrder:function(e,t){var r=this,a={thridLogisticsNo:e.thridLogisticsNo};Object(s["o"])(a).then((function(e){1==e.ret.errcode&&(r.$set(r.dataList,t,e.data),r.$message.success("手动下单成功"))})).catch((function(e){}))},returnStatus:function(e){var t="";return o.a.forEach(this.signForStatus,(function(r){r.value==e&&(t=r.label)})),t},exportData:function(){var e=this;this.queryData.timeList&&this.queryData.timeList.length?(this.queryData.startTime=this.queryData.timeList[0].toString(),this.queryData.endTime=this.queryData.timeList[1].toString()):(this.queryData.startTime="",this.queryData.endTime="");var t=Object.assign(this.queryData,{});Object(s["f"])(this.filterData(t)).then((function(t){if(1==t.ret.errcode){var r=e.dealShowFileSrc(t.fileUrl);window.open(r)}})).catch((function(e){console.log(e)}))},search:function(e){var t=this;this.loading=!0,this.queryData.timeList&&this.queryData.timeList.length?(this.queryData.startTime=this.queryData.timeList[0].toString(),this.queryData.endTime=this.queryData.timeList[1].toString()):(this.queryData.startTime="",this.queryData.endTime=""),1==e&&(this.queryData.page.pageNum=1);var r=Object.assign(this.queryData,{});Object(s["g"])(this.filterData(r)).then((function(e){1==e.ret.errcode?(o.a.forEach(e.dataList,(function(e){e.timeOutDetail=e.deadlineTime})),t.dataList=e.dataList,t.totals=e.totalCount,t.loading=!1):t.loading=!1})).catch((function(e){console.log(e),t.loading=!1}))},timeInfoListRep:function(e){var t="";return o.a.forEach(e,(function(e){t+="".concat(e,"<br/>")})),t},setTimeInter:function(e,t){var r,a,i,n,o=(new Date).getTime(),s=e,c=s-o,l=this;c>=0?(a=Math.floor(c/1e3/60/60),i=Math.floor(c/1e3/60%60),n=Math.floor(c/1e3%60),a=a<10?"0"+a:a,i=i<10?"0"+i:i,n=n<10?"0"+n:n,r=a+":"+i+":"+n,r&&t>=0&&(l.dataList[t].timeOutDetail=r)):(r="00:00:00",l.dataList[t].timeOutDetail=r)},detailPurchase:function(e){var t="".concat(window.location.origin,"/#/warehouseManage/sockOutOrder?outNo=").concat(e.outNo);window.open(t)},handleSizeChanges:function(e){this.queryData.page.pageSize=e,this.search()},handleCurrentChanges:function(e){this.queryData.page.pageNum=e,this.search()},handleSelectionChange:function(e){this.selectLogiNo=e},batchConfirm:function(){var e=this;if(0==this.selectLogiNo.length)this.$message.warning("确认到达的订单数不能为0");else{var t={thridLogisticsNos:[]};o.a.forEach(this.selectLogiNo,(function(e){t.thridLogisticsNos.push(e.thridLogisticsNo)})),Object(s["e"])(t).then((function(t){1==t.ret.errcode&&(e.$message.success("批量确认到达成功"),e.search())}))}}}},l=c,u=(r("088b"),r("2877")),d=Object(u["a"])(l,a,i,!1,null,"62847516",null);t["default"]=d.exports},"137c":function(e,t,r){"use strict";r.d(t,"t",(function(){return i})),r.d(t,"y",(function(){return n})),r.d(t,"r",(function(){return o})),r.d(t,"u",(function(){return s})),r.d(t,"z",(function(){return c})),r.d(t,"s",(function(){return l})),r.d(t,"v",(function(){return u})),r.d(t,"w",(function(){return d})),r.d(t,"x",(function(){return p})),r.d(t,"l",(function(){return m})),r.d(t,"k",(function(){return f})),r.d(t,"n",(function(){return g})),r.d(t,"m",(function(){return h})),r.d(t,"p",(function(){return y})),r.d(t,"h",(function(){return v})),r.d(t,"b",(function(){return b})),r.d(t,"a",(function(){return L})),r.d(t,"i",(function(){return w})),r.d(t,"g",(function(){return S})),r.d(t,"f",(function(){return C})),r.d(t,"q",(function(){return q})),r.d(t,"c",(function(){return B})),r.d(t,"d",(function(){return D})),r.d(t,"o",(function(){return F})),r.d(t,"j",(function(){return R})),r.d(t,"e",(function(){return O}));var a=r("284b");function i(e){console.log(e);var t=a["a"].create("GetAddressReq",e);return Object(a["a"])("erp","AddressBossService.GetAddress",t,"GetAddressResp")}function n(e){console.log(e);var t=a["a"].create("UpdateAddressReq",e);return Object(a["a"])("erp","AddressBossService.UpdateAddress",t,"UpdateAddressResp")}function o(e){console.log(e);var t=a["a"].create("DeleteAddressReq",e);return Object(a["a"])("erp","AddressBossService.DeleteAddress",t,"DeleteAddressResp")}function s(e){console.log(e);var t=a["a"].create("GetAddressLogiReq",e);return Object(a["a"])("erp","AddressLogiBossService.GetAddressLogi",t,"GetAddressLogiResp")}function c(e){console.log(e);var t=a["a"].create("UpdateAddressLogiReq",e);return Object(a["a"])("erp","AddressLogiBossService.UpdateAddressLogi",t,"UpdateAddressLogiResp")}function l(e){console.log(e);var t=a["a"].create("DeleteAddressLogiReq",e);return Object(a["a"])("erp","AddressLogiBossService.DeleteAddressLogi",t,"DeleteAddressLogiResp")}function u(e){console.log(e);var t=a["a"].create("LogiCompanyListReq",e);return Object(a["a"])("erp","LogiCompanyBossService.GetLogiCompanyList",t,"LogiCompanyListResp")}function d(e){console.log(e);var t=a["a"].create("SaveLogiCompanyReq",e);return Object(a["a"])("erp","LogiCompanyBossService.SaveLogiCompany",t,"SaveLogiCompanyResp")}function p(e){console.log(e);var t=a["a"].create("SyncAddressLogiReq",e);return Object(a["a"])("erp","AddressLogiBossService.SyncAddressLogi",t,"SyncAddressLogiResp")}function m(e){var t=a["a"].create("FreightForwarderListReq",e);return Object(a["a"])("erp","B2BFreightForwarderService.GetB2BFreightForwarderList",t,"FreightForwarderListResp")}function f(e){var t=a["a"].create("FreightForwarderListReq",e);return Object(a["a"])("erp","B2BFreightForwarderService.ExportCostGoFreightForwarder",t,"ImportB2BFreightForwarderResp")}function g(e){var t=a["a"].create("ImportB2BFreightForwarderReq",e);return Object(a["a"])("erp","B2BFreightForwarderService.ImportPurchaseFreightForwarder",t,"ImportB2BFreightForwarderResp")}function h(e){var t=a["a"].create("ImportB2BFreightForwarderReq",e);return Object(a["a"])("erp","B2BFreightForwarderService.ImportCostGoFreightForwarder",t,"ImportB2BFreightForwarderResp")}function y(e){var t=a["a"].create("QueryFreightForwarderInfoReq",e);return Object(a["a"])("erp","B2BFreightForwarderService.QueryFreightForwarderInfo",t,"FreightForwarderInfoResp")}function v(e){var t=a["a"].create("EditFreightForwarderReq",e);return Object(a["a"])("erp","B2BFreightForwarderService.EditFreightForwarderInfo",t,"FreightForwarderInfoResp")}function b(e){var t=a["a"].create("B2BOutOrderInfoReq",e);return Object(a["a"])("erp","B2BFreightForwarderService.B2BFreightForwarderSkuInfo",t,"B2BOutOrderInfoResp")}function L(e){var t=a["a"].create("B2BImportTemplateReq",e);return Object(a["a"])("erp","B2BFreightForwarderService.B2BImportTemplates",t,"B2BImportTemplateResp")}function w(e){var t=a["a"].create("EditFreightForwarderReq",e);return Object(a["a"])("erp","B2BFreightForwarderService.EditOutNoFreightForwarder",t,"FreightForwarderInfoResp")}function S(e){var t=a["a"].create("CrossBorderListReq",e);return Object(a["a"])("erp","CrossBorderService.CrossBorderList",t,"CrossBorderListResp")}function C(e){var t=a["a"].create("CrossBorderListReq",e);return Object(a["a"])("erp","CrossBorderService.ExportCrossBorderData",t,"CrossBorderExportResp")}function q(e){var t=a["a"].create("SingleCrossBorderReq",e);return Object(a["a"])("erp","CrossBorderService.SyncCrossBorderLogisticsInfo",t,"SingleCrossBorderResp")}function B(e){var t=a["a"].create("SingleCrossBorderReq",e);return Object(a["a"])("erp","CrossBorderService.CancelCrossBorder",t,"SingleCrossBorderResp")}function D(e){var t=a["a"].create("SingleCrossBorderReq",e);return Object(a["a"])("erp","CrossBorderService.ConfirmArrive",t,"SingleCrossBorderResp")}function F(e){var t=a["a"].create("SingleCrossBorderReq",e);return Object(a["a"])("erp","CrossBorderService.ManualOrder",t,"SingleCrossBorderResp")}function R(e){var t=a["a"].create("EnumConfigReq",e);return Object(a["a"])("erp","CrossBorderService.GetSelectEnum",t,"EnumConfigResp")}function O(e){var t=a["a"].create("ConfirmArriveBatchReq",e);return Object(a["a"])("erp","CrossBorderService.ConfirmArriveBatch",t,"ConfirmArriveBatchResp")}},"386d":function(e,t,r){"use strict";var a=r("cb7c"),i=r("83a1"),n=r("5f1b");r("214f")("search",1,(function(e,t,r,o){return[function(r){var a=e(this),i=void 0==r?void 0:r[t];return void 0!==i?i.call(r,a):new RegExp(r)[t](String(a))},function(e){var t=o(r,e,this);if(t.done)return t.value;var s=a(e),c=String(this),l=s.lastIndex;i(l,0)||(s.lastIndex=0);var u=n(s,c);return i(s.lastIndex,l)||(s.lastIndex=l),null===u?-1:u.index}]}))},"83a1":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},a94f:function(e,t,r){}}]);