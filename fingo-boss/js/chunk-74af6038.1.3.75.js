(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-74af6038"],{"0899":function(t,e,a){"use strict";var n=a("dc33"),i=a.n(n);i.a},"09d4":function(t,e,a){"use strict";var n=a("a4be"),i=a.n(n);i.a},"0c95":function(t,e,a){},"0e45":function(t,e,a){},"3ab2":function(t,e,a){"use strict";a("7f7f"),a("28a5"),a("7514");e["a"]={data:function(){return{}},methods:{getMultiLangShowInfo:function(t,e){if(!t)return"";var a=t.find((function(t){return"cn"==t.languageCode}));switch(e){case"image":return a?this.dealShowFileSrc(a.name.split(",")):"";default:return a?a.name:""}}}}},5289:function(t,e,a){"use strict";var n=a("0c95"),i=a.n(n);i.a},"72ff":function(t,e,a){"use strict";var n=a("ad23"),i=a.n(n);i.a},"7bf4":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"multi-upload-box"},[a("div",{staticClass:"multi-upload-show",on:{click:function(e){t.showDialog=!0}}},[a("div",[a("i",{staticClass:"el-icon-plus"}),a("img",{attrs:{src:t.getCnImgCover()}})])]),a("el-dialog",{attrs:{title:"添加多语言图片",width:"700px","append-to-body":"",visible:t.showDialog},on:{"update:visible":function(e){t.showDialog=e},close:function(e){t.showDialog=!1}}},[a("div",{staticClass:"multi-upload-wrapper"},[a("div",{staticClass:"all-tip"},[a("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:t.handleSameAll}},[t._v("同步所有")]),t._v(" *将当前图片同步到其他所有语言项（已上传的会被覆盖）\n            ")],1),a("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":t.handleTabChange},model:{value:t.curLanguage,callback:function(e){t.curLanguage=e},expression:"curLanguage"}},t._l(t.languageList,(function(e,n){return a("el-tab-pane",{key:n,attrs:{name:e.code}},[a("span",{attrs:{slot:"label"},slot:"label"},["cn"==e.code||"en"==e.code?a("i",{staticClass:"required"},[t._v("*")]):t._e(),t._v(" "+t._s(e.desc))]),a("div",{staticClass:"upload-tips"},[a("span",[t._v("上传图片：")]),a("em",[t._v("支持上传.jpg/.png/.gif格式的文件，请保持各语言版本一致")])]),t.showDialog&&t.curLanguage===e.code?a("c-upload",{attrs:{limit:t.limit,accept:t.accept,refsName:e.code+"fileUpload",fileList:t.curImgUrl,getType:t.getType,signCode:e.code},on:{setData:t.setFileList}}):t._e(),a("div",{staticClass:"all-tip"},[a("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:t.handleSameEmpty}},[t._v("同步至未上传图片项")]),t._v(" *将当前图片同步到其他未上传图片的语言项\n                    ")],1)],1)})),1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:t.handleClose}},[t._v("取 消")]),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.confirm}},[t._v("确 定")])],1)])],1)},i=[],r=(a("20d6"),a("ac6a"),a("28a5"),a("7f7f"),a("7514"),a("c5f6"),a("f09b")),o={props:{propFileList:{type:Array,default:function(){return[]}},limit:{type:Number,default:1},accept:String,getType:String},data:function(){return{param:{name:""},showDialog:!1,rules:{name:[{required:!0,message:"不能为空",trigger:"change"}]},fileList:[],curLanguage:"cn",curImgUrl:""}},watch:{propFileList:{handler:function(t){var e=this;console.log(t),t&&this.$nextTick((function(){e.fileList=JSON.parse(JSON.stringify(t)),e.handleTabChange()}))},deep:!0}},components:{cUpload:r["a"]},computed:{languageList:function(){return this.$store.state.dict.languageList}},created:function(){this.fileList=JSON.parse(JSON.stringify(this.propFileList)),this.handleTabChange()},methods:{handleTabChange:function(){var t=this,e=this.fileList.find((function(e){return e.languageCode===t.curLanguage}));this.curImgUrl=e?e.name:""},getCnImgCover:function(){var t=this.propFileList.find((function(t){return"cn"==t.languageCode}));return t?this.dealShowFileSrc(t.name.split(",")[0]):""},handleSameAll:function(){var t=this;this.curImgUrl?(this.fileList=[],this.languageList.forEach((function(e){t.fileList.push({languageCode:e.code,name:t.curImgUrl})})),this.$message.success("同步成功")):this.$message.warning("请先上传当前项的图片")},handleSameEmpty:function(){var t=this;this.curImgUrl?(this.languageList.forEach((function(e){var a=t.fileList.findIndex((function(t){return t.languageCode==e.code}));-1===a&&t.fileList.push({languageCode:e.code,name:t.curImgUrl})})),this.$message.success("同步成功")):this.$message.warning("请先上传当前项的图片")},setFileList:function(t){console.log(t);var e=this.fileList.findIndex((function(e){return e.languageCode==t.signCode}));-1!=e?this.fileList[e].name=t.data:this.fileList.push({languageCode:t.signCode,name:t.data}),this.handleTabChange()},getCurrentLangFile:function(t){var e=this.fileList.find((function(e){return e.languageCode==t}));return e?e.name:""},handleClose:function(){this.fileList=JSON.parse(JSON.stringify(this.propFileList)),this.curLanguage="cn",this.handleTabChange(),this.showDialog=!1},confirm:function(){var t=this.fileList.filter((function(t){return"cn"==t.languageCode&&t.name||"en"==t.languageCode&&t.name}));if(t.length<2)return this.$message.warning("中文和英文图片不能为空");this.showDialog=!1,this.$emit("setData",this.fileList)}}},s=o,c=(a("ce00"),a("2877")),l=Object(c["a"])(s,n,i,!1,null,"423ff198",null);e["a"]=l.exports},"834a":function(t,e,a){"use strict";var n=a("e45c"),i=a.n(n);i.a},"9b06":function(t,e,a){"use strict";var n=a("ec8b"),i=a.n(n);i.a},a4be:function(t,e,a){},ac61:function(t,e,a){},ad23:function(t,e,a){},b54a:function(t,e,a){"use strict";a("386b")("link",(function(t){return function(e){return t(this,"a","href",e)}}))},b6da:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"shake-page app-container"},[a("el-tabs",{on:{"tab-click":t.handleCountryChange},model:{value:t.countryCode,callback:function(e){t.countryCode=e},expression:"countryCode"}},t._l(t.countryList,(function(t){return a("el-tab-pane",{key:t.shortCode,attrs:{label:t.nameLocal,name:t.shortCode}})})),1),a("el-form",{attrs:{inline:""}},[a("el-form-item",{attrs:{label:"金币兑换："}},[a("div",{staticClass:"flex"},[a("el-input",{staticStyle:{width:"300px"},model:{value:t.shakeGoldExchange,callback:function(e){t.shakeGoldExchange=e},expression:"shakeGoldExchange"}}),a("el-button",{staticClass:"mar-l-10",on:{click:t.saveShakeGoldExchange}},[t._v("保存")])],1)]),a("el-form-item",{attrs:{label:""}},[a("el-button",{staticClass:"operator-item",attrs:{icon:"el-icon-refresh",loading:t.updateLoading,type:"primary",plain:""},on:{click:t.updatePrizePool}},[t._v("\n                更新数据\n            ")])],1)],1),a("el-form",{attrs:{inline:""}},[a("el-form-item",{attrs:{label:"shop跳转："}},[a("div",{staticClass:"flex"},[a("el-input",{staticStyle:{width:"300px"},model:{value:t.pointsUrl,callback:function(e){t.pointsUrl=e},expression:"pointsUrl"}}),a("el-button",{staticClass:"mar-l-10",on:{click:t.savePointsUrl}},[t._v("保存")])],1)])],1),a("el-form",{attrs:{inline:""}},[a("el-form-item",{attrs:{label:"withdraw跳转："}},[a("div",{staticClass:"flex"},[a("el-input",{staticStyle:{width:"300px"},model:{value:t.shakeWithdraw,callback:function(e){t.shakeWithdraw=e},expression:"shakeWithdraw"}}),a("el-button",{staticClass:"mar-l-10",on:{click:t.saveShakeWithdraw}},[t._v("保存")])],1)])],1),a("div",{staticClass:"mar-b-10"},[a("span",[t._v("摇一摇开关：")]),a("el-switch",{staticStyle:{"margin-right":"10px"},attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-value":"open","inactive-value":"close"},on:{change:t.changeSwitchState},model:{value:t.switchStatus,callback:function(e){t.switchStatus=e},expression:"switchStatus"}})],1),a("el-tabs",{attrs:{type:"card"},on:{"tab-click":t.handleTabChange},model:{value:t.curView,callback:function(e){t.curView=e},expression:"curView"}},[t._l(t.tabList,(function(t){return a("el-tab-pane",{key:t.value,attrs:{label:t.name,name:t.value}})})),"showProduct"==t.curView?a("show-product",{ref:"showProduct",attrs:{countryCode:t.countryCode}}):"goldExchange"==t.curView?a("gold-exchange",{ref:"goldExchange",attrs:{countryCode:t.countryCode}}):"prizeProduct"==t.curView?a("prize-product",{ref:"prizeProduct",attrs:{countryCode:t.countryCode}}):"resultSetting"==t.curView?a("result-setting",{ref:"resultSetting",attrs:{countryCode:t.countryCode}}):"matchSetting"==t.curView?a("match-setting",{ref:"matchSetting",attrs:{countryCode:t.countryCode}}):a("diversion",{ref:"diversion",attrs:{countryCode:t.countryCode,propShow:t.propShow}})],2)],1)},i=[],r=a("dc82"),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"show-product-share-wrapper"},[a("div",{staticClass:"operator-container mar-t-10"},[a("div",{staticClass:"mar-b-10"},[t._v("展示商品（只展示抽不中）")]),a("el-button",{staticClass:"operator-item",attrs:{icon:"el-icon-plus",type:"primary",size:"medium"},on:{click:t.handleAdd}},[t._v("\n            新增\n        ")])],1),a("div",{staticClass:"main-content-wrapper"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.load,expression:"load"}],attrs:{data:t.dataList}},[a("el-table-column",{attrs:{label:"序号",type:"index",align:"center",width:"100px"}}),a("el-table-column",{attrs:{label:"奖品名称",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.formatItem(e.row.name)))])]}}])}),a("el-table-column",{attrs:{label:"图片",align:"center","min-width":"100px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-popover",{attrs:{placement:"top-start",trigger:"hover"}},[a("img",{staticClass:"previewImage",attrs:{src:t.dealShowFileSrc(t.formatItem(e.row.icon))}}),a("img",{staticClass:"thumbnail",attrs:{slot:"reference",src:t.dealShowFileSrc(t.formatItem(e.row.icon))},slot:"reference"})])]}}])}),a("el-table-column",{attrs:{label:"商品价值",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(t.getText(e.row.type))+"\n                ")]}}])}),a("el-table-column",{attrs:{label:"更新人",align:"center",width:"100px"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(e.row.operation||"-")+"\n                ")]}}])}),a("el-table-column",{attrs:{label:"操作",align:"center",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.handleEdit(e.row)}}},[t._v("修改")]),a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.handleDel(e.row)}}},[t._v("删除")])]}}])})],1)],1),a("div",{staticClass:"pagination-box"},[a("el-pagination",{attrs:{"current-page":t.page.pageNum,"page-size":t.page.pageSize,layout:"sizes, total, prev, pager, next, jumper","page-sizes":[5,10,15,20],total:t.totals},on:{"current-change":t.getList,"size-change":t.handleSizeChange}})],1),t.showProductDialog?a("show-product-dialog",{attrs:{showProductDialog:t.showProductDialog,propParam:t.propParam,countryCode:t.countryCode,priceList:t.priceList},on:{close:function(e){t.showProductDialog=!1},confirm:t.handleConfirm}}):t._e()],1)},s=[],c=(a("7514"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticClass:"show-product-dialog",attrs:{title:"展示商品设置",visible:t.showProductDialog,"close-on-click-modal":!1},on:{close:t.handleClose}},[a("el-form",{attrs:{rules:t.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"奖品名称：",prop:"nameList"}},[a("ul",{staticClass:"lang-list"},t._l(t.nameList,(function(e,n){return a("li",{key:n},[a("span",{staticClass:"text"},[t._v(t._s(t.getLangName(n))+"：")]),a("el-input",{model:{value:t.nameList[n],callback:function(e){t.$set(t.nameList,n,e)},expression:"nameList[key]"}})],1)})),0)]),a("el-form-item",{attrs:{label:"图片：",prop:"iconList"}},[a("multi-lang-file-upload",{attrs:{propFileList:t.iconList},on:{setData:t.setData}})],1),a("el-form-item",{attrs:{label:"商品价值："}},[a("el-select",{model:{value:t.param.type,callback:function(e){t.$set(t.param,"type",e)},expression:"param.type"}},t._l(t.priceList,(function(t){return a("el-option",{key:t.key,attrs:{value:t.key,label:t.label}})})),1)],1)],1),a("div",{staticClass:"footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"medium"},on:{click:t.handleClose}},[t._v("取消")]),a("el-button",{attrs:{size:"medium",type:"primary",loading:t.loading},on:{click:t.handleConfirm}},[t._v("确定")])],1)],1)}),l=[],u=(a("7f7f"),a("7bf4")),d={props:{showProductDialog:Boolean,priceList:Array,propParam:Object,countryCode:String},data:function(){return{param:{icon:"",name:"",type:1},loading:!1,nameList:{},iconList:[]}},components:{multiLangFileUpload:u["a"]},computed:{languageList:function(){return this.$store.state.dict.languageList}},mounted:function(){if(this.propParam&&(Object.assign(this.param,this.propParam),this.propParam.name&&(this.nameList=JSON.parse(this.propParam.name)),this.propParam.icon)){var t=JSON.parse(this.propParam.icon);for(var e in t)this.iconList.push({languageCode:e,name:t[e]})}this.init()},methods:{init:function(){for(var t=0;t<this.languageList.length;t++){var e=this.languageList[t].code,a=this.nameList[e];a||this.$set(this.nameList,e,"")}},getLangName:function(t){var e=this.languageList.find((function(e){return e.code==t}));return e?e.desc:""},setData:function(t){this.iconList=t},handleClose:function(){this.$emit("close")},handleConfirm:function(){var t=this;if(!this.nameList["cn"]||!this.nameList["en"])return this.$message.warning("中英文奖品名称不能为空");var e=this.iconList.filter((function(t){return"cn"==t.languageCode&&t.name||"en"==t.languageCode&&t.name}));if(e.length<2)return this.$message.warning("中英文图片不能为空");for(var a={},n=0;n<this.iconList.length;n++)a[this.iconList[n].languageCode]=this.iconList[n].name;var i=JSON.parse(JSON.stringify(this.param));this.loading=!0,i.icon=JSON.stringify(this.filterData(a)),i.name=JSON.stringify(this.filterData(this.nameList)),i.countryCode=this.countryCode;var o=r["d"];i.id&&(o=r["l"]),o(i).then((function(e){t.loading=!1,0===e.ret.errCode&&t.$emit("confirm")})).catch((function(){t.loading=!1}))}}},m=d,h=(a("c62a"),a("2877")),p=Object(h["a"])(m,c,l,!1,null,"bf5370c8",null),f=p.exports,g=a("3ab2"),v={props:{countryCode:String},mixins:[g["a"]],data:function(){return{showProductDialog:!1,load:!1,priceList:[{key:3,label:"高价值"},{key:2,label:"中价值"},{key:1,label:"低价值"}],dataList:[],page:{pageNum:1,pageSize:10,pagingSwitch:!0},totals:0,propParam:{}}},components:{showProductDialog:f},methods:{handleSizeChange:function(t){Object.assign(this.page,{pageSize:t,pageNum:1}),this.getList()},formatItem:function(t){var e=JSON.parse(t);return e["cn"]?e["cn"]:e["en"]},getList:function(t){var e=this;this.load=!0,this.page.pageNum=t||1,console.log(this.page),Object(r["B"])(Object.assign({countryCode:this.countryCode},this.page)).then((function(t){console.log(t),e.load=!1,0===t.ret.errCode&&(e.dataList=t.data.list,e.totals=t.data.total)})).catch((function(){e.load=!1}))},handleDel:function(t){var e=this;this.$confirm("确认删除该商品?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(r["w"])({id:t.id}).then((function(t){0===t.ret.errCode&&e.getList()}))})).catch((function(){}))},getText:function(t){var e=this.priceList.find((function(e){return e.key==t}));return e?e.label:""},handleEdit:function(t){this.propParam=t,this.showProductDialog=!0},handleAdd:function(){this.propParam={},this.showProductDialog=!0},handleConfirm:function(){this.showProductDialog=!1,this.getList()}}},b=v,y=Object(h["a"])(b,o,s,!1,null,"582b6616",null),w=y.exports,C=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"result-setting-shake-wrapper app-container"},[a("div",{staticClass:"mar-b-10"},[t._v("用户获奖条件与中奖结果配置")]),a("div",{staticClass:"operator-container"},[a("el-button",{staticClass:"operator-item",attrs:{icon:"el-icon-plus",type:"primary",size:"medium"},on:{click:t.handleAdd}},[t._v("\n            新增\n        ")])],1),a("div",{staticClass:"main-content-wrapper"},[a("div",{staticClass:"box"},[a("div",{staticClass:"l"},[a("el-button",{staticClass:"m-b-10",attrs:{type:"primary",size:"medium",loading:t.saving},on:{click:t.handleSave}},[t._v("保存积分配置")]),a("div",{staticClass:"tip"},[t._v("*当前新增的数据并未保存下来，需要自行点击“保存积分配置”按钮进行保存")])],1),a("el-tooltip",{attrs:{effect:"dark",content:"刷新页面",placement:"top"}},[a("el-button",{attrs:{icon:"el-icon-refresh-right",size:"medium"},on:{click:function(e){return t.getList(1)}}})],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.load,expression:"load"}],attrs:{data:t.dataList}},[a("el-table-column",{attrs:{label:"序号",width:"120px",align:"center",prop:"name"}}),a("el-table-column",{attrs:{label:"累计获得积分（左闭右开）",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"config-common"},[a("el-input-number",{attrs:{controls:!1,min:0,precision:0,disabled:""},model:{value:e.row.start,callback:function(a){t.$set(e.row,"start",a)},expression:"scope.row.start"}}),t._v(" \n                        - \n                        "),a("el-input-number",{attrs:{controls:!1,min:0,precision:0},on:{change:function(a){return t.handleEditChange(e.row,e.$index)}},model:{value:e.row.end,callback:function(a){t.$set(e.row,"end",a)},expression:"scope.row.end"}})],1)]}}])}),a("el-table-column",{attrs:{label:"更新人",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(e.row.operation||"-")+"\n                ")]}}])}),a("el-table-column",{attrs:{label:"操作",align:"center",width:"160px"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.id?a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.handleEdit(e.row)}}},[t._v("编辑")]):t._e(),e.$index===t.dataList.length-1?a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.handleDel(e.row,e.$index)}}},[t._v("删除")]):t._e()]}}])})],1)],1),a("div",{staticClass:"pagination-box"}),t.pointResultDialogShow?a("point-result-dialog",{attrs:{pointResultDialog:t.pointResultDialogShow,propParam:t.propParam,countryCode:t.countryCode,curId:t.curId},on:{close:function(e){t.pointResultDialogShow=!1}}}):t._e()],1)},k=[],S=a("75fc"),x=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticClass:"point-result-dialog",attrs:{visible:t.pointResultDialog,"close-on-click-modal":!1,width:"740px"},on:{close:t.handleClose}},[a("el-form",{attrs:{model:t.param}},[a("el-tabs",{attrs:{type:"card"},model:{value:t.newUser,callback:function(e){t.newUser=e},expression:"newUser"}},[a("el-tab-pane",{attrs:{label:"老用户",name:2}},[a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:function(e){return t.handleAdd(t.param.oldDataList)}}},[t._v("新增")]),a("el-table",{attrs:{data:t.param.oldDataList}},[a("el-table-column",{attrs:{label:"邀请人数",fixed:"left",width:"190px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"config-common"},[a("el-form-item",[a("el-input-number",{staticClass:"config-common-input",attrs:{controls:!1,min:0,precision:0,disabled:""},model:{value:e.row.start,callback:function(a){t.$set(e.row,"start",a)},expression:"scope.row.start"}})],1),t._v("\n                                -\n                                "),a("el-form-item",[a("el-input-number",{staticClass:"config-common-input",attrs:{controls:!1,min:0,precision:0},on:{change:function(a){return t.handleEditChange(t.param.oldDataList,e.row,e.$index)}},model:{value:e.row.end,callback:function(a){t.$set(e.row,"end",a)},expression:"scope.row.end"}})],1)],1)]}}])}),t._l(t.allBoxList,(function(e,n){return a("el-table-column",{key:n,attrs:{label:e.name,width:"120px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(n){return[a("el-form-item",[a("el-input-number",{staticClass:"config-common-input",attrs:{min:0,precision:0,controls:!1},model:{value:n.row.boxJson[e.id],callback:function(a){t.$set(n.row.boxJson,e.id,a)},expression:"scope.row.boxJson[item.id]"}})],1)]}}],null,!0)})})),a("el-table-column",{attrs:{label:"操作",fixed:"right",width:"90px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.$index===t.param.oldDataList.length-1?a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.handleDel(t.param.oldDataList,e.$index)}}},[t._v("删除")]):t._e()]}}])})],2),a("el-button",{attrs:{size:"medium",type:"primary",loading:t.saving},on:{click:t.handleConfirm}},[t._v("保存老用户配置")])],1),a("el-tab-pane",{attrs:{label:"新用户",name:1}},[a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:function(e){return t.handleAdd(t.param.newDataList)}}},[t._v("新增")]),a("el-table",{attrs:{data:t.param.newDataList}},[a("el-table-column",{attrs:{label:"邀请人数",width:"190px",align:"center",fixed:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"config-common"},[a("el-form-item",[a("el-input-number",{staticClass:"config-common-input",attrs:{controls:!1,min:0,precision:0,disabled:""},model:{value:e.row.start,callback:function(a){t.$set(e.row,"start",a)},expression:"scope.row.start"}})],1),t._v("\n                                -\n                                "),a("el-form-item",[a("el-input-number",{staticClass:"config-common-input",attrs:{controls:!1,min:0,precision:0},on:{change:function(a){return t.handleEditChange(t.param.newDataList,e.row,e.$index)}},model:{value:e.row.end,callback:function(a){t.$set(e.row,"end",a)},expression:"scope.row.end"}})],1)],1)]}}])}),t._l(t.allBoxList,(function(e,n){return a("el-table-column",{key:n,attrs:{label:e.name,width:"120px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(n){return[a("el-form-item",[a("el-input-number",{staticClass:"config-common-input",attrs:{min:0,precision:0,controls:!1},model:{value:n.row.boxJson[e.id],callback:function(a){t.$set(n.row.boxJson,e.id,a)},expression:"scope.row.boxJson[item.id]"}})],1)]}}],null,!0)})})),a("el-table-column",{attrs:{label:"操作",fixed:"right",align:"center",width:"90px"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.$index===t.param.newDataList.length-1?a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.handleDel(t.param.newDataList,e.$index)}}},[t._v("删除")]):t._e()]}}])})],2),a("el-button",{attrs:{size:"medium",type:"primary",loading:t.saving},on:{click:t.handleConfirm}},[t._v("保存新用户配置")])],1)],1)],1),a("div",{staticClass:"footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"medium"},on:{click:t.handleClose}},[t._v("关闭")])],1)],1)},L=[],O=(a("8e6e"),a("6762"),a("2fdb"),a("ac6a"),a("456d"),a("bd86")),N=a("7618");function j(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function $(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?j(Object(a),!0).forEach((function(e){Object(O["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):j(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var D={props:{pointResultDialog:Boolean,countryCode:String,curId:String},data:function(){return{allBoxList:[],newUser:2,param:{newDataList:[],oldDataList:[]},tempBoxJson:0,saving:!1}},created:function(){this.getAllBox(),this.getNewData(),this.getOldData()},methods:{handleClose:function(){this.$emit("close")},handleConfirm:function(){var t=this,e={newUser:this.newUser,integralRuleId:this.curId};if(2==this.newUser){for(var a=JSON.parse(JSON.stringify(this.param.oldDataList)),n=function(e){var n=a[e];if(!n.end)return t.$message.warning("第".concat(e+1,"档的邀请人数右边界须大于0")),{v:void 0};if(n.start>=n.end)return t.$message.warning("第".concat(e+1,"档的邀请人数右边界须大于左边界")),{v:void 0};var i=$({},n.boxJson),r=Object.keys(i),o=Object.keys(t.tempBoxJson);if(r.forEach((function(t){(i[t]||0===i[t])&&o.includes(t)||delete i[t]})),o.length!==Object.keys(i).length)return t.$message.warning("第".concat(e+1,"档的箱子数存在为空的情况")),{v:void 0};n.boxJson=JSON.stringify(i)},i=0;i<a.length;i++){var r=n(i);if("object"===Object(N["a"])(r))return r.v}e.dataJson=a,this.confirmSave(e)}else{for(var o=JSON.parse(JSON.stringify(this.param.newDataList)),s=function(e){var a=o[e];if(!a.end)return t.$message.warning("第".concat(e+1,"档的邀请人数右边界须大于0")),{v:void 0};if(a.start>=a.end)return t.$message.warning("第".concat(e+1,"档的邀请人数右边界须大于左边界")),{v:void 0};var n=$({},a.boxJson),i=Object.keys(n),r=Object.keys(t.tempBoxJson);if(i.forEach((function(t){(n[t]||0===n[t])&&r.includes(t)||delete n[t]})),r.length!==Object.keys(n).length)return t.$message.warning("第".concat(e+1,"档的箱子数存在为空的情况")),{v:void 0};a.boxJson=JSON.stringify(n)},c=0;c<o.length;c++){var l=s(c);if("object"===Object(N["a"])(l))return l.v}e.dataJson=o,this.confirmSave(e)}},confirmSave:function(t){var e=this;this.saving=!0,Object(r["y"])(t).then((function(t){0===t.ret.errCode?(e.$message.success("保存成功"),2==e.newUser?e.getOldData():e.getNewData()):e.saving=!1})).catch((function(){e.saving=!1}))},getAllBox:function(){var t=this;Object(r["n"])({countryCode:this.countryCode}).then((function(e){if(0===e.ret.errCode){t.allBoxList=e.data;var a={};e.data.forEach((function(t){a[t.id]=0})),t.tempBoxJson=a}}))},handleDel:function(t,e){this.$confirm("确认删除该条设置吗？","提示").then((function(){t.splice(e,1)})).catch((function(){}))},handleAdd:function(t){var e=t.length,a={start:e?t[e-1].end:0,end:0,boxJson:JSON.parse(JSON.stringify(this.tempBoxJson))};t.push(a)},handleEditChange:function(t,e,a){if(!(a+1>=t.length)){var n=Object.assign(t[a+1],{start:e.end});t.splice(a+1,1,n)}},getNewData:function(){var t=this;Object(r["s"])({integralRuleId:this.curId,newUser:1}).then((function(e){if(t.saving=!1,0===e.ret.errCode){var a=[];e.data&&e.data.length&&(a=e.data.map((function(t){return t.boxJson=JSON.parse(t.boxJson),t}))),Object.assign(t.param,{newDataList:a})}})).catch((function(){t.saving=!1}))},getOldData:function(){var t=this;Object(r["s"])({integralRuleId:this.curId,newUser:2}).then((function(e){if(t.saving=!1,0===e.ret.errCode){var a=[];e.data&&e.data.length&&(a=e.data.map((function(t){return t.boxJson=JSON.parse(t.boxJson),t}))),Object.assign(t.param,{oldDataList:a})}})).catch((function(){t.saving=!1}))}}},z=D,I=(a("0899"),Object(h["a"])(z,x,L,!1,null,"0c7684e5",null)),P=I.exports,E={props:{countryCode:String},data:function(){return{dataList:[],load:!1,pointResultDialogShow:!1,propParam:{},curId:"",saving:!1}},components:{pointResultDialog:P},created:function(){this.getList()},methods:{getList:function(){var t=this;this.load=!0,Object(r["r"])({type:2,countryCode:this.countryCode}).then((function(e){t.load=!1,0===e.ret.errCode&&(t.dataList=e.data)})).catch((function(){t.load=!1}))},handleEdit:function(t){this.curId=t.id,this.pointResultDialogShow=!0},handleDel:function(t,e){var a=this;this.$confirm("确认删除该条设置吗？","提示").then((function(){t.id?Object(r["v"])({id:t.id}).then((function(t){0===t.ret.errCode&&(a.$message.success("删除成功"),a.getList())})):a.dataList.splice(e,1)})).catch((function(){}))},handleAdd:function(){var t=Object(S["a"])(this.dataList),e=t.length,a={start:e?t[e-1].end:0,end:0,countryCode:this.countryCode,name:"第".concat(e+1,"档"),type:2};this.dataList.push(a)},handleEditChange:function(t,e){var a=Object(S["a"])(this.dataList);if(!(e+1>=a.length)){var n=Object.assign(a[e+1],{start:t.end});this.dataList.splice(e+1,1,n)}},handleSave:function(){for(var t=this,e=0;e<this.dataList.length;e++){var a=this.dataList[e];if(!a.end)return void this.$message.error("序号".concat(e+1,"的右边界值须大于0"));if(a.start>=a.end)return void this.$message.error("序号".concat(e+1,"的右边界须大于左边界"))}this.saving=!0;var n=JSON.stringify(this.dataList);Object(r["x"])({dataJson:n}).then((function(e){t.saving=!1,0===e.ret.errCode&&(t.$message.success("保存成功"),t.getList())})).catch((function(){t.saving=!1}))}}},F=E,J=(a("834a"),Object(h["a"])(F,C,k,!1,null,"41957f1a",null)),T=J.exports,B=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"prize-product-shake-wrapper"},[a("div",{staticClass:"operator-container mar-t-10"},[a("div",{staticClass:"mar-b-10"},[t._v("中奖商品合集箱子设置")]),a("el-button",{staticClass:"operator-item",attrs:{icon:"el-icon-plus",type:"primary",size:"medium"},on:{click:t.handleAdd}},[t._v("\n            新增\n        ")])],1),a("div",{staticClass:"main-content-wrapper"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.load,expression:"load"}],attrs:{data:t.dataList}},[a("el-table-column",{attrs:{label:"抽奖名称",align:"center",prop:"name"}}),a("el-table-column",{attrs:{label:"创建时间",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(t._f("formatTime")(e.row.created))+"\n                ")]}}])}),a("el-table-column",{attrs:{label:"更新人",align:"center",width:"100px"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(e.row.operation||"-")+"\n                ")]}}])}),a("el-table-column",{attrs:{label:"操作",align:"center",fixed:"right","min-width":"130px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.handleEditPrizePool(e.row)}}},[t._v("奖池设置")]),a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.handleEdit(e.row)}}},[t._v("编辑")]),a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.handleDelete(e.row)}}},[t._v("删除")])]}}])})],1)],1),a("div",{staticClass:"pagination-box"},[a("el-pagination",{attrs:{"current-page":t.page.pageNum,"page-size":t.page.pageSize,layout:"sizes, total, prev, pager, next, jumper","page-sizes":[5,10,15,20],total:t.totals},on:{"current-change":t.getList,"size-change":t.handleSizeChange}})],1),t.showDialog?a("prize-product-dialog",{attrs:{showDialog:t.showDialog,propParam:t.propParam,countryCode:t.countryCode},on:{close:function(e){t.showDialog=!1},confirm:t.confirmEdit}}):t._e()],1)},U=[],A=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticClass:"show-product-dialog",attrs:{title:"展示商品设置",visible:t.showDialog,"close-on-click-modal":!1},on:{close:t.handleClose}},[a("el-form",{attrs:{model:t.param,rules:t.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"奖品名称：",prop:"name"}},[a("el-input",{model:{value:t.param.name,callback:function(e){t.$set(t.param,"name",e)},expression:"param.name"}})],1)],1),a("div",{staticClass:"footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"medium"},on:{click:t.handleClose}},[t._v("取消")]),a("el-button",{attrs:{size:"medium",type:"primary"},on:{click:t.handleConfirm}},[t._v("确定")])],1)],1)},R=[],q={props:{showDialog:Boolean,propParam:Object,countryCode:String},data:function(){return{param:{name:"",countryCode:""},rules:{name:[{required:!0,message:"必填",trigger:"change"}]}}},mounted:function(){this.propParam&&Object.assign(this.param,this.propParam)},methods:{handleClose:function(){this.$emit("close")},handleConfirm:function(){var t=this;this.param.countryCode=this.countryCode;var e=r["a"];this.param.id&&(e=r["j"]),e(this.param).then((function(e){0===e.ret.errCode&&t.$emit("confirm")}))}}},G=q,W=(a("9b06"),Object(h["a"])(G,A,R,!1,null,"0a2d1d08",null)),V=W.exports,Q={props:{countryCode:String},data:function(){return{load:!1,showDialog:!1,dataList:[],propParam:{},page:{pageNum:1,pageSize:10,pagingSwitch:!0},totals:0}},components:{prizeProductDialog:V},methods:{handleSizeChange:function(t){Object.assign(this.page,{pageSize:t,pageNum:1}),this.getList()},getList:function(t){var e=this;this.page.pageNum=t||1,this.load=!0,Object(r["o"])(Object.assign({countryCode:this.countryCode},this.page)).then((function(t){e.load=!1,0===t.ret.errCode&&(e.dataList=t.data.list,e.totals=t.data.total)})).catch((function(){e.load=!1}))},handleAdd:function(){this.showDialog=!0,this.propParam={}},handleEdit:function(t){this.showDialog=!0,this.propParam=t},handleDelete:function(t){var e=this;this.$confirm("确认删除该盒子?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(r["g"])({id:t.id}).then((function(t){0===t.ret.errCode&&e.getList()}))})).catch((function(){}))},confirmEdit:function(){this.getList(),this.showDialog=!1},handleEditPrizePool:function(t){this.$router.push({name:"shakePrize",query:{id:t.id,countryCode:this.countryCode}})}}},M=Q,Y=Object(h["a"])(M,B,U,!1,null,"9f362c0e",null),H=Y.exports,K=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"match-setting-wrapper app-container"},[a("div",{staticClass:"operator-container"},[a("el-button",{staticClass:"operator-item",attrs:{icon:"el-icon-plus",type:"primary",size:"medium"},on:{click:t.handleAdd}},[t._v("\n            新增\n        ")])],1),a("div",{staticClass:"main-content-wrapper"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.load,expression:"load"}],attrs:{data:t.dataList}},[a("el-table-column",{attrs:{label:"序号",type:"index",width:"120px",align:"center"}}),a("el-table-column",{attrs:{label:"活动ID",align:"center",prop:"id"}}),a("el-table-column",{attrs:{label:"活动开始时间",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("secondTimeFormat")(e.row.startTime)))]}}])}),a("el-table-column",{attrs:{align:"center",label:"更新人"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(e.row.operation||"-")+"\n                ")]}}])}),a("el-table-column",{attrs:{label:"操作","min-width":"180px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.handleBatch(e.row)}}},[t._v("一键同步")]),a("el-button",{attrs:{type:"text",disabled:t.notStart(e.row.startTime)},on:{click:function(a){return t.handleEdit(e.row)}}},[t._v("编辑")]),a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.handleDel(e.row,e.$index)}}},[t._v("删除")])]}}])})],1)],1),a("div",{staticClass:"pagination-box"},[a("el-pagination",{attrs:{"current-page":t.page.pageNum,"page-size":t.page.pageSize,layout:"sizes, total, prev, pager, next, jumper","page-sizes":[5,10,15,20],total:t.totals},on:{"current-change":t.getList,"size-change":t.handleSizeChange}})],1),a("el-dialog",{attrs:{visible:t.editShow,title:"修改活动开始时间","close-on-click-modal":!1,width:"600px"},on:{close:function(e){t.editShow=!1}}},[a("el-date-picker",{staticClass:"m8",staticStyle:{width:"90%"},attrs:{type:"datetime","value-format":"timestamp",placeholder:"请输入活动开始时间"},model:{value:t.curStartTime,callback:function(e){t.curStartTime=e},expression:"curStartTime"}}),a("div",{staticClass:"footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.editShow=!1}}},[t._v("取消")]),a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:t.handleConfirm}},[t._v("确定")])],1)],1),a("el-dialog",{attrs:{visible:t.batchEditTime,title:"同步时间",width:"540px"}},[t._v("\n        同步至未来 "),a("el-input-number",{attrs:{precision:0,min:1,controls:!1},model:{value:t.sizeNum,callback:function(e){t.sizeNum=e},expression:"sizeNum"}}),t._v("天\n        "),a("div",{staticClass:"footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.batchEditTime=!1}}},[t._v("取消")]),a("el-button",{attrs:{type:"primary",size:"medium",loading:t.batching},on:{click:t.handleBatchConfirm}},[t._v("确定")])],1)],1)],1)},X=[],Z=a("c32d"),tt={props:{countryCode:String},data:function(){return{dataList:[],curStartTime:"",curId:"",editShow:!1,batchEditTime:!1,sizeNum:1,page:{pageNum:1,pageSize:10,pagingSwitch:!0},totals:0,load:!1,batching:!1}},methods:{notStart:function(t){return!!Z().isAfter(parseInt(t))},handleSizeChange:function(t){Object.assign(this.page,{pageSize:t,pageNum:1}),this.getList()},getList:function(t){var e=this;this.page.pageNum=t||1,this.load=!0,Object(r["q"])(Object.assign({countryCode:this.countryCode,sortField:"start_time",sortType:"desc"},this.page)).then((function(t){e.load=!1,0===t.ret.errCode&&(e.dataList=t.data.list,e.totals=t.data.total)})).catch((function(){e.load=!1}))},handleDel:function(t,e){var a=this;this.$confirm("确认删除该条设置吗？","提示").then((function(){t.id?Object(r["u"])({id:t.id}).then((function(t){0===t.ret.errCode&&(a.$message.success("删除成功"),a.getList())})):(a.dataList.splice(e,1),a.$message.success("删除成功"))})).catch((function(){}))},handleEdit:function(t){this.curId=t.id,this.curStartTime=t.startTime,this.editShow=!0},handleBatch:function(t){this.curId=t.id,this.sizeNum=1,this.batchEditTime=!0},handleBatchConfirm:function(){var t=this;this.sizeNum?(this.batching=!0,Object(r["z"])({size:this.sizeNum,id:this.curId}).then((function(e){t.batching=!1,0===e.ret.errCode&&(t.batchEditTime=!1,t.$message.success("同步时间成功"),t.getList())})).catch((function(){t.batching=!1}))):this.$message.warning("同步天数必填且需大于0")},handleConfirm:function(){var t=this;this.curStartTime?this.curId?Object(r["D"])({countryCode:this.countryCode,startTime:this.curStartTime,id:this.curId}).then((function(e){0===e.ret.errCode&&(t.editShow=!1,t.$message.success("修改成功"),t.getList())})):Object(r["A"])({countryCode:this.countryCode,startTime:this.curStartTime}).then((function(e){0===e.ret.errCode&&(t.editShow=!1,t.$message.success("保存成功"),t.getList())})):this.$message.warning("活动开始时间必填")},handleAdd:function(){this.dataList.push({startTime:""}),this.handleEdit({startTime:""})}}},et=tt,at=(a("72ff"),Object(h["a"])(et,K,X,!1,null,"52d2bf87",null)),nt=at.exports,it=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"match-setting-wrapper app-container"},[a("div",{staticClass:"operator-container"},[a("el-button",{staticClass:"operator-item",attrs:{icon:"el-icon-plus",type:"primary",size:"medium"},on:{click:function(e){return t.handleEdit("add")}}},[t._v("\n            新增\n        ")])],1),a("div",{staticClass:"main-content-wrapper"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.load,expression:"load"}],attrs:{data:t.dataList}},[a("el-table-column",{attrs:{label:"序号",type:"index",width:"100px",align:"center",fixed:"left"}}),a("el-table-column",{attrs:{label:"金币兑换内容",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(t.getContentShow(e.row))+"\n                ")]}}])}),a("el-table-column",{attrs:{label:"创建时间",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("secondTimeFormat")(e.row.created)))]}}])}),a("el-table-column",{attrs:{label:"修改时间",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("secondTimeFormat")(e.row.updated)))]}}])}),a("el-table-column",{attrs:{label:"排序",align:"center",prop:"sort"}}),a("el-table-column",{attrs:{align:"center",label:"更新人"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(e.row.operation||"-")+"\n                ")]}}])}),a("el-table-column",{attrs:{label:"操作",width:"180px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.handleEdit("edit",e.row)}}},[t._v("编辑")]),a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.handleDel(e.row,e.$index)}}},[t._v("删除")])]}}])})],1)],1),a("div",{staticClass:"pagination-box"},[a("el-pagination",{attrs:{"current-page":t.page.pageNum,"page-size":t.page.pageSize,layout:"sizes, total, prev, pager, next, jumper","page-sizes":[5,10,15,20],total:t.totals},on:{"current-change":t.getList,"size-change":t.handleSizeChange}})],1),a("el-dialog",{attrs:{visible:t.editShow,title:"金币兑换","close-on-click-modal":!1,width:"600px"},on:{close:function(e){t.editShow=!1}}},[a("el-form",{ref:"editDialog",attrs:{"label-width":"120px",rules:t.rules,model:t.param}},[a("el-form-item",{attrs:{label:"金币：",prop:"number"}},[a("el-input-number",{attrs:{size:"medium",placeholder:"请输入",min:1,controls:!1,precision:0},model:{value:t.param.number,callback:function(e){t.$set(t.param,"number",e)},expression:"param.number"}})],1),a("el-form-item",{attrs:{label:"兑换选择：",prop:"type"}},[a("el-radio-group",{model:{value:t.param.type,callback:function(e){t.$set(t.param,"type",e)},expression:"param.type"}},t._l(t.typeEnum,(function(e){return a("el-radio",{key:e.key,attrs:{label:parseInt(e.key)}},[t._v(t._s(e.text))])})),1)],1),a("el-form-item",{attrs:{label:"兑换图片："}},[a("multi-lang-file-upload",{attrs:{propFileList:t.imgList},on:{setData:t.setImg}})],1),1==t.param.type?[a("el-form-item",{attrs:{label:"优惠券ID：",prop:"content"}},[a("el-input",{attrs:{size:"medium",placeholder:"请输入"},model:{value:t.param.content,callback:function(e){t.$set(t.param,"content",e)},expression:"param.content"}})],1),a("el-form-item",{attrs:{label:"奖品名称：",prop:"name"}},[a("ul",{staticClass:"lang-list"},t._l(t.param.name,(function(e,n){return a("li",{key:n,staticClass:"flex mar-b-10"},[a("span",{staticClass:"text label-title"},[t._v(t._s(t.getLangName(n))+"：")]),a("el-input",{staticClass:"flex1",model:{value:t.param.name[n],callback:function(e){t.$set(t.param.name,n,e)},expression:"param.name[key]"}})],1)})),0)])]:2==t.param.type?a("el-form-item",{attrs:{label:"积分值：",prop:"content"}},[a("el-input-number",{attrs:{size:"medium",placeholder:"请输入",min:.01,precision:2,controls:!1},model:{value:t.param.content,callback:function(e){t.$set(t.param,"content",e)},expression:"param.content"}})],1):t._e(),a("el-form-item",{attrs:{label:"排序：",prop:"sort"}},[a("el-input-number",{attrs:{size:"medium",placeholder:"请输入",controls:!1,min:1,precision:0},model:{value:t.param.sort,callback:function(e){t.$set(t.param,"sort",e)},expression:"param.sort"}})],1)],2),a("div",{staticClass:"footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.editShow=!1}}},[t._v("取消")]),a("el-button",{attrs:{type:"primary",size:"medium",loading:t.saving},on:{click:t.handleConfirm}},[t._v("确定")])],1)],1)],1)},rt=[],ot=(a("55dd"),{props:{countryCode:String},data:function(){return{dataList:[],sizeNum:1,page:{pageNum:1,pageSize:10,pagingSwitch:!0},totals:0,load:!1,editShow:!1,saving:!1,rules:{type:{required:!0,trigger:"change",message:"请选择"},number:{required:!0,trigger:"change",message:"请输入"},content:{required:!0,trigger:"change",message:"请输入"},sort:{required:!0,trigger:"change",message:"请输入"},name:[{required:!0,message:"必填",trigger:"change"}]},typeEnum:[{key:2,text:"积分"},{key:1,text:"优惠券"}],curType:"add",param:{type:2,number:1,content:"",sort:100,name:{}},imgList:[]}},components:{multiLangFileUpload:u["a"]},computed:{languageList:function(){return this.$store.state.dict.languageList}},methods:{handleSizeChange:function(t){Object.assign(this.page,{pageSize:t,pageNum:1}),this.getList()},getContentShow:function(t){var e="".concat(t.number,"金币兑换");return 2===t.type?e+="".concat(t.content,"个积分"):e+="优惠券",e},handleEdit:function(t,e){if(this.curType=t,this.imgList=[],"edit"==t){for(var a=JSON.parse(e.name),n=0,i=this.languageList.length;n<i;n++){var r=this.languageList[n].code,o=a[r];o||(a[r]="")}Object.assign(this.param,{type:e.type,number:e.number,content:e.content,sort:e.sort,id:e.id,name:a});var s=JSON.parse(e.icon);for(var c in s)this.imgList.push({languageCode:c,name:s[c]})}else{for(var l={},u=0,d=this.languageList.length;u<d;u++){var m=this.languageList[u].code;l[m]=""}Object.assign(this.param,{type:2,number:1,content:"",sort:100,name:l})}this.editShow=!0},getLangName:function(t){var e=this.languageList.find((function(e){return e.code==t}));return e?e.desc:""},setImg:function(t){this.imgList=t},getList:function(t){var e=this;this.page.pageNum=t||1,this.load=!0,Object(r["p"])(Object.assign({countryCode:this.countryCode,channel:1},this.page)).then((function(t){e.load=!1,0===t.ret.errCode&&(e.dataList=t.data.list,e.totals=t.data.total)})).catch((function(){e.load=!1}))},handleDel:function(t,e){var a=this;this.$confirm("确认删除该条设置吗？","提示").then((function(){Object(r["h"])({id:t.id}).then((function(t){0===t.ret.errCode&&(a.$message.success("删除成功"),a.getList())}))})).catch((function(){}))},handleConfirm:function(){var t=this,e=JSON.parse(JSON.stringify(this.param));if(1==e.type&&(!e.name["cn"]||!e.name["en"]))return this.$message.warning("中英文奖品名称不能为空");if(2==e.type&&e.content>e.number)return this.$message.warning("金币须大于或等于积分值");var a=this.imgList.filter((function(t){return"cn"==t.languageCode&&t.name||"en"==t.languageCode&&t.name}));if(a.length<2)return this.$message.warning("中英文图片不能为空");for(var n={},i=0;i<this.imgList.length;i++)this.imgList[i].name&&(n[this.imgList[i].languageCode]=this.imgList[i].name);e.icon=JSON.stringify(this.filterData(n)),e.name=this.filterData(e.name),e.countryCode=this.countryCode,e.channel=1,this.$refs["editDialog"].validate((function(a){if(a){t.saving=!0;var n=r["b"];"edit"===t.curType&&(n=r["C"]),n(t.filterData(e)).then((function(e){t.saving=!1,0===e.ret.errCode&&(t.editShow=!1,t.$message.success("保存成功"),t.getList())})).catch((function(){t.saving=!1}))}}))}}}),st=ot,ct=Object(h["a"])(st,it,rt,!1,null,"2f542ffd",null),lt=ct.exports,ut=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.propShow?a("div",{staticClass:"diversion"},[a("el-form",{ref:"diversionForm",attrs:{model:t.diversionForm,"label-width":"120px",rules:t.divisionRules}},[a("el-form-item",{attrs:{label:"开关",prop:"switch"}},[a("el-switch",{staticStyle:{"margin-left":"25px"},attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:t.diversionForm.switch,callback:function(e){t.$set(t.diversionForm,"switch",e)},expression:"diversionForm.switch"}})],1),a("el-form-item",{attrs:{label:"标题",required:""}},[a("el-form-item",{attrs:{label:"中文:","label-width":"50px",prop:"title.cn"}},[a("el-input",{staticClass:"title",model:{value:t.diversionForm.title.cn,callback:function(e){t.$set(t.diversionForm.title,"cn",e)},expression:"diversionForm.title.cn"}})],1),a("el-form-item",{attrs:{label:"英文:","label-width":"50px",prop:"title.en"}},[a("el-input",{staticClass:"title",model:{value:t.diversionForm.title.en,callback:function(e){t.$set(t.diversionForm.title,"en",e)},expression:"diversionForm.title.en"}})],1),a("el-form-item",{attrs:{label:"马来:","label-width":"50px"}},[a("el-input",{staticClass:"title",model:{value:t.diversionForm.title.ms,callback:function(e){t.$set(t.diversionForm.title,"ms",e)},expression:"diversionForm.title.ms"}})],1),a("el-form-item",{attrs:{label:"泰国:","label-width":"50px"}},[a("el-input",{staticClass:"title",model:{value:t.diversionForm.title.th,callback:function(e){t.$set(t.diversionForm.title,"th",e)},expression:"diversionForm.title.th"}})],1),a("el-form-item",{attrs:{label:"印尼:","label-width":"50px"}},[a("el-input",{staticClass:"title",model:{value:t.diversionForm.title.id,callback:function(e){t.$set(t.diversionForm.title,"id",e)},expression:"diversionForm.title.id"}})],1)],1),a("el-form-item",{attrs:{label:"　"}},[a("el-form-item",{attrs:{label:"图片:","label-width":"50px",prop:"imgSrc"}},[t.propShow?a("multi-lang-file-upload",{attrs:{propFileList:t.diversionForm.imgSrc,accept:"image/jpeg, image/jpg, image/png, image/gif"},on:{setData:t.setActiveBaseCover}}):t._e()],1)],1),a("el-form-item",{attrs:{label:"链接"}},[a("el-form-item",{attrs:{label:"MY"==t.countryCode?"马来:":"TH"==t.countryCode?"泰国:":"新加坡:","label-width":"60px",prop:"link"}},[a("el-input",{staticClass:"title",model:{value:t.diversionForm.link,callback:function(e){t.$set(t.diversionForm,"link",e)},expression:"diversionForm.link"}})],1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitDevision("diversionForm")}}},[t._v("保存")])],1)],1)],1):t._e()},dt=[],mt=(a("b54a"),a("f09b")),ht={name:"",props:{propShow:{type:Boolean,default:!1},countryCode:{type:String,default:"MY"}},data:function(){var t=this,e=function(e,a,n){t.hasImg?n():n(new Error("导流图片不能为空"))};return{diversionForm:{switch:!0,title:{cn:"",en:"",ms:"",th:"",id:""},imgSrc:[],link:""},hasImg:!1,divisionRules:{switch:[{required:!0,message:"请挑选导流开关设置",trigger:"change"}],"title.cn":[{required:!0,message:"中文标题不能为空",trigger:"blur"}],"title.en":[{required:!0,message:"英文标题不能为空",trigger:"blur"}],link:[{required:!0,message:"导流链接不能为空",trigger:"blur"}],imgSrc:[{required:!0,validator:e,trigger:"change"}]}}},components:{cUpload:mt["a"],multiLangFileUpload:u["a"]},computed:{},watch:{countryCode:{handler:function(t,e){t&&(this.diversionForm.title.th="",this.diversionForm.title.ms="",this.diversionForm.title.id="",this.$refs.diversionForm.resetFields())},deep:!0}},methods:{setActiveBaseCover:function(t){0!=t.length&&(this.hasImg=!0,this.$refs["diversionForm"].validateField("imgSrc")),this.diversionForm.imgSrc=t},submitDevision:function(t){var e=this;""!=this.diversionForm.imgSrc?this.hasImg=!0:this.hasImg=!1,this.$refs[t].validate((function(t){if(!t)return e.$message.error("有必填项未填写"),!1;var a={};e.diversionForm.link=e.diversionForm.link.trim();var n=JSON.parse(JSON.stringify(e.diversionForm));n.title=e.filterData(e.diversionForm.title),_.forEach(n.imgSrc,(function(t){a[t.languageCode]=t.name})),n.imgSrc=a;var i={keyword:"advertising_"+e.countryCode,value:JSON.stringify(n)};Object(r["e"])(i).then((function(t){0===t.ret.errCode&&e.$message.success("保存成功")}))}))},getData:function(){var t=this;this.pointsUrl="",Object(r["m"])({keyword:"advertising_"+this.countryCode}).then((function(e){if(0===e.ret.errCode&&e.data){var a=JSON.parse(e.data.value);t.diversionForm.switch=a.switch,t.diversionForm.title=Object.assign(t.diversionForm.title,a.title),t.diversionForm.link=a.link;var n=[];_.forEach(a.imgSrc,(function(t,e){n.push({languageCode:e,name:t})})),t.diversionForm.imgSrc=n}}))}}},pt=ht,ft=(a("5289"),Object(h["a"])(pt,ut,dt,!1,null,"64d6a4f4",null)),gt=ft.exports,vt={data:function(){return{propShow:!1,curView:"showProduct",tabList:[{value:"showProduct",name:"展示商品"},{value:"goldExchange",name:"商城设置"},{value:"prizeProduct",name:"中奖商品"},{value:"resultSetting",name:"奖励配置"},{value:"matchSetting",name:"比赛配置"},{value:"diversion",name:"导流"}],countryCode:"MY",updateLoading:!1,pointsUrl:"",shakeGoldExchange:"",shakeWithdraw:"",switchStatus:"close",threshold:0}},computed:{countryList:function(){return this.$store.state.dict.countryList}},components:{showProduct:w,resultSetting:T,prizeProduct:H,matchSetting:nt,goldExchange:lt,diversion:gt},mounted:function(){this.handleCountryChange()},created:function(){var t=this.$route.query||{};t.curTab&&(this.curView=t.curTab)},methods:{handleCountryChange:function(t){this.handleTabChange(),this.getTriggerUrl(),this.getGoldExchangeUrl(),this.getShakeWithdraw(),this.getSwitchState()},updatePrizePool:function(){var t=this;this.updateLoading=!0,Object(r["f"])({countryCode:this.countryCode}).then((function(e){t.updateLoading=!1,0===e.ret.errCode&&t.$message.success("更新成功")})).catch((function(){t.updateLoading=!1}))},handleTabChange:function(){var t=this;this.$nextTick((function(){switch(t.curView){case"showProduct":t.$refs.showProduct.getList();break;case"goldExchange":t.$refs.goldExchange.getList();break;case"prizeProduct":t.$refs.prizeProduct.getList();break;case"resultSetting":t.$refs.resultSetting.getList();break;case"matchSetting":t.$refs.matchSetting.getList();break;case"diversion":t.propShow=!0,t.$refs.diversion.getData()}}))},getTriggerUrl:function(){var t=this;this.pointsUrl="",Object(r["m"])({keyword:"shakePointsUrl"+this.countryCode}).then((function(e){0===e.ret.errCode&&(t.pointsUrl=e.data.value)}))},savePointsUrl:function(){var t=this;Object(r["e"])({keyword:"shakePointsUrl"+this.countryCode,value:this.pointsUrl}).then((function(e){0===e.ret.errCode&&t.$message.success("保存成功")}))},getGoldExchangeUrl:function(){var t=this;this.shakeGoldExchange="",Object(r["m"])({keyword:"shakeGoldExchange"+this.countryCode}).then((function(e){0===e.ret.errCode&&(t.shakeGoldExchange=e.data.value)}))},saveShakeGoldExchange:function(){var t=this;Object(r["e"])({keyword:"shakeGoldExchange"+this.countryCode,value:this.shakeGoldExchange}).then((function(e){0===e.ret.errCode&&t.$message.success("保存成功")}))},changeSwitchState:function(){var t=this;Object(r["e"])({keyword:"shakeSwitch"+this.countryCode,value:this.switchStatus}).then((function(e){0===e.ret.errCode&&t.$message.success("保存成功")}))},getSwitchState:function(){var t=this;Object(r["m"])({keyword:"shakeSwitch"+this.countryCode}).then((function(e){0===e.ret.errCode&&(t.switchStatus=e.data.value)}))},getShakeWithdraw:function(){var t=this;this.shakeWithdraw="",Object(r["m"])({keyword:"shakeWithdraw"+this.countryCode}).then((function(e){0===e.ret.errCode&&(t.shakeWithdraw=e.data.value)}))},saveShakeWithdraw:function(){var t=this;Object(r["e"])({keyword:"shakeWithdraw"+this.countryCode,value:this.shakeWithdraw}).then((function(e){0===e.ret.errCode&&t.$message.success("保存成功")}))}}},bt=vt,yt=(a("09d4"),Object(h["a"])(bt,n,i,!1,null,"cd465bda",null));e["default"]=yt.exports},c62a:function(t,e,a){"use strict";var n=a("ac61"),i=a.n(n);i.a},ce00:function(t,e,a){"use strict";var n=a("0e45"),i=a.n(n);i.a},da71:function(t,e,a){"use strict";a("6762"),a("ac6a"),a("456d"),a("55dd");var n=a("ed08"),i=a("5c96"),r=a("8237"),o="https://shg.fingo.shop/api/proxyboss",s=[],c=window.axios.create({timeout:45e3});function l(t){var e=t.method,a=t.serverName,l=t.interfaceName,u=t.data,d=t.$header,m=t.baseUrl,h=t.noToast,p=t.timeoutNoToast,f=u?JSON.parse(JSON.stringify(u)):{},g=(new Date).getTime();Object.assign(f,{timestamp:g});var v=r(Object(n["d"])(Object.keys(f).sort())),b=localStorage.adminUserInfo?JSON.parse(localStorage.adminUserInfo):null,y={"Content-Type":"application/json;charset=utf-8","Language-Code":"cn","Operator-ID":b?b.id:null,"Device-Type":"boss",Signature:v,serverName:a,interfaceName:l,"Country-Code":"MY"};return d&&Object.assign(y,d),Object.assign(u,{sign:v,operationId:b?b.id:null,timestamp:g,operation:b?b.account:""}),console.log("".concat(l)),console.log(u),c({url:m||o,method:e||"post",data:u,headers:y}).then((function(t){if(console.log("".concat(l)),console.log(t.data),200!==t.status){var e=new Error("服务器异常");throw e}var a=t.data;if(0===a.ret.errCode)return a;if(s.includes(a.ret.errCode))console.log("errcode, 特殊处理");else{var n=a.ret.msg?a.ret.msg:a.ret.errName;if(p&&-1===a.ret.errCode)return a;h||i["Message"].warning(n||"哇哦，服务器出错啦，请稍候再试~")}return a})).catch((function(t){throw i["Message"].warning("哇哦，服务器出错啦，请稍候再试~"),t}))}e["a"]=l},dc33:function(t,e,a){},dc82:function(t,e,a){"use strict";a.d(e,"e",(function(){return i})),a.d(e,"m",(function(){return r})),a.d(e,"B",(function(){return o})),a.d(e,"d",(function(){return s})),a.d(e,"l",(function(){return c})),a.d(e,"w",(function(){return l})),a.d(e,"a",(function(){return u})),a.d(e,"j",(function(){return d})),a.d(e,"g",(function(){return m})),a.d(e,"o",(function(){return h})),a.d(e,"t",(function(){return p})),a.d(e,"c",(function(){return f})),a.d(e,"k",(function(){return g})),a.d(e,"i",(function(){return v})),a.d(e,"f",(function(){return b})),a.d(e,"n",(function(){return y})),a.d(e,"p",(function(){return w})),a.d(e,"b",(function(){return C})),a.d(e,"h",(function(){return k})),a.d(e,"C",(function(){return S})),a.d(e,"r",(function(){return x})),a.d(e,"v",(function(){return L})),a.d(e,"x",(function(){return _})),a.d(e,"s",(function(){return O})),a.d(e,"y",(function(){return N})),a.d(e,"q",(function(){return j})),a.d(e,"z",(function(){return $})),a.d(e,"A",(function(){return D})),a.d(e,"D",(function(){return z})),a.d(e,"u",(function(){return I}));var n=a("da71");function i(t){return Object(n["a"])({serverName:"market-center",interfaceName:"IConfigService.AddOrEdit",data:t})}function r(t){return Object(n["a"])({serverName:"market-center",interfaceName:"IConfigService.GetByKeyword",data:t})}function o(t){return Object(n["a"])({serverName:"market-center",interfaceName:"IProductService.QueryByPage",data:t})}function s(t){return Object(n["a"])({serverName:"market-center",interfaceName:"IProductService.Add",data:t})}function c(t){return Object(n["a"])({serverName:"market-center",interfaceName:"IProductService.Edit",data:t})}function l(t){return Object(n["a"])({serverName:"market-center",interfaceName:"IProductService.RemoveById",data:t})}function u(t){return Object(n["a"])({serverName:"market-center",interfaceName:"IBoxService.Add",data:t})}function d(t){return Object(n["a"])({serverName:"market-center",interfaceName:"IBoxService.Edit",data:t})}function m(t){return Object(n["a"])({serverName:"market-center",interfaceName:"IBoxService.RemoveById",data:t})}function h(t){return Object(n["a"])({serverName:"market-center",interfaceName:"IBoxService.QueryByPage",data:t})}function p(t){return Object(n["a"])({serverName:"market-center",interfaceName:"IPrizeService.Query",data:t})}function f(t){return Object(n["a"])({serverName:"market-center",interfaceName:"IPrizeService.Add",data:t})}function g(t){return Object(n["a"])({serverName:"market-center",interfaceName:"IPrizeService.Edit",data:t})}function v(t){return Object(n["a"])({serverName:"market-center",interfaceName:"IPrizeService.RemoveById",data:t})}function b(t){return Object(n["a"])({serverName:"market-center",interfaceName:"IRuleBoxService.BonusPoolsUpdate",data:t,noToast:!0})}function y(t){return Object(n["a"])({serverName:"market-center",interfaceName:"IBoxService.Query",data:t})}function w(t){return Object(n["a"])({serverName:"market-gold",interfaceName:"IRuleService.QueryByPage",data:t})}function C(t){return Object(n["a"])({serverName:"market-gold",interfaceName:"IRuleService.Add",data:t})}function k(t){return Object(n["a"])({serverName:"market-gold",interfaceName:"IRuleService.RemoveById",data:t})}function S(t){return Object(n["a"])({serverName:"market-gold",interfaceName:"IRuleService.Edit",data:t})}function x(t){return Object(n["a"])({serverName:"market-center",interfaceName:"IRuleService.Query",data:t})}function L(t){return Object(n["a"])({serverName:"market-center",interfaceName:"IRuleService.RemoveById",data:t})}function _(t){return Object(n["a"])({serverName:"market-center",interfaceName:"IRuleService.BathAdd",data:t})}function O(t){return Object(n["a"])({serverName:"market-center",interfaceName:"IRuleBoxService.QueryBath",data:t})}function N(t){return Object(n["a"])({serverName:"market-center",interfaceName:"IRuleBoxService.BathAdd",data:t,timeoutNoToast:!0})}function j(t){return Object(n["a"])({serverName:"market-center",interfaceName:"IActivityService.QueryByPage",data:t})}function $(t){return Object(n["a"])({serverName:"market-center",interfaceName:"IActivityService.BathAdd",data:t})}function D(t){return Object(n["a"])({serverName:"market-center",interfaceName:"IActivityService.Add",data:t})}function z(t){return Object(n["a"])({serverName:"market-center",interfaceName:"IActivityService.Edit",data:t})}function I(t){return Object(n["a"])({serverName:"market-center",interfaceName:"IActivityService.RemoveById",data:t})}},e45c:function(t,e,a){},ec8b:function(t,e,a){}}]);