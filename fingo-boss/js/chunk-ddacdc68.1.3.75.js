(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ddacdc68"],{ac2c:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("el-form",{attrs:{inline:""}},[a("el-form-item",{staticClass:"filter-item",attrs:{label:"风险时间："}},[a("el-select",{attrs:{size:"medium"},model:{value:t.searchParam.unIncomeDay,callback:function(e){t.$set(t.searchParam,"unIncomeDay",e)},expression:"searchParam.unIncomeDay"}},t._l(t.timeList,(function(t,e){return a("el-option",{key:e,attrs:{label:t,value:t}})})),1)],1),a("el-form-item",{attrs:{label:"订单号："}},[a("el-input",{staticStyle:{"min-width":"240px"},attrs:{placeholder:"请输入订单号",clearable:"",size:"medium"},model:{value:t.searchParam.orderNo,callback:function(e){t.$set(t.searchParam,"orderNo",e)},expression:"searchParam.orderNo"}})],1),a("el-form-item",{staticClass:"filter-item",staticStyle:{"margin-left":"20px"}},[a("el-button",{attrs:{icon:"el-icon-search",type:"primary",size:"medium"},on:{click:function(e){return t.getList(1)}}},[t._v("搜索\n            ")]),a("el-button",{attrs:{icon:"el-icon-refresh-left",size:"medium"},on:{click:t.resetSearch}},[t._v("重置\n            ")])],1)],1),a("div",{staticClass:"main-content-wrapper"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.load,expression:"load"}],staticStyle:{width:"100%"},attrs:{data:t.dataList,border:"",height:"100%","span-method":t.arraySpanMethod}},[a("el-table-column",{attrs:{label:"订单号",fixed:"left",align:"center",width:"200px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"pointer blue",on:{click:function(a){return t.handleShowDetail(e.row)}}},[t._v(t._s(e.row.orderNo))])]}}])}),a("el-table-column",{attrs:{label:"采购订单号",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{class:1==e.row.warning?"warning-status":""},[t._v(t._s(e.row.purchaseOrderNo))])]}}])}),a("el-table-column",{attrs:{label:"商品编码",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{class:1==e.row.warning?"warning-status":""},[t._v(t._s(e.row.skuCode))])]}}])}),a("el-table-column",{attrs:{label:"数量",align:"center",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{class:1==e.row.warning?"warning-status":""},[t._v(t._s(e.row.num))])]}}])}),a("el-table-column",{attrs:{label:"创建时间",align:"center",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{class:1==e.row.warning?"warning-status":""},[t._v(t._s(t._f("formatTime")(e.row.createTime)))])]}}])})],1)],1),a("div",{staticClass:"pagination-box"},[a("el-pagination",{attrs:{"current-page":t.searchParam.page.pageNum,"page-size":t.searchParam.page.pageSize,layout:"sizes, total, prev, pager, next, jumper","page-sizes":[5,10,15,20],total:t.totals},on:{"current-change":t.getList,"size-change":t.handleSizeChange}})],1),t.trackInfo.show?a("purchase-track",{attrs:{propShowDialog:t.trackInfo.show,trackInfo:t.trackInfo},on:{close:t.handleCloseDetail}}):t._e()],1)},n=[],o=(a("7514"),a("ac6a"),a("284b"));function s(t){console.log(t);var e=o["a"].create("RiskPoReq",t);return Object(o["a"])("datacenter","ErpBossService.GetRiskPo",e,"RiskPoResp")}var i=a("d209"),c={components:{purchaseTrack:i["a"]},data:function(){return{dataList:[],load:!1,searchParam:{unIncomeDay:5,orderNo:"",page:{pageNum:1,pageSize:10,pagingSwitch:!0}},totals:0,trackInfo:{show:!1,orderNo:""},timeList:[1,2,3,4,5,6,7,8,9,10]}},created:function(){this.getList()},methods:{resetSearch:function(){this.searchParam={unIncomeDay:5,orderNo:"",page:{pageNum:1,pageSize:10,pagingSwitch:!0}}},getList:function(t){var e=this;this.load=!0,this.searchParam.page.pageNum=t||this.searchParam.page.pageNum,s(this.filterData(this.searchParam)).then((function(t){if(console.log(t),1===t.ret.errcode){var a=t.riskOrderInfos||[],r=[];a.forEach((function(t){var e=t.riskPoInfos.map((function(e,a){return 0===a&&(e.rowspan=t.riskPoInfos.length),e.orderNo=t.orderNo,e}));r=r.concat(e)})),e.dataList=r,e.totals=t.total}e.load=!1})).catch((function(t){console.error(t),e.load=!1}))},handleSizeChange:function(t){this.searchParam.page.pageSize=t,this.getList(1)},handleShowDetail:function(t){var e=t.orderNo;Object.assign(this.trackInfo,{show:!0,orderNo:e})},handleCloseDetail:function(){Object.assign(this.trackInfo,{show:!1,orderNo:""})},arraySpanMethod:function(t){var e=t.row,a=(t.column,t.rowIndex,t.columnIndex),r=[0],n=r.find((function(t){return t==a}));if(n||0==a)return e.rowspan?{rowspan:e.rowspan,colspan:1}:{rowspan:0,colspan:0}}}},l=c,u=(a("feea"),a("2877")),d=Object(u["a"])(l,r,n,!1,null,"3455c6e2",null);e["default"]=d.exports},b898:function(t,e,a){},d209:function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:"采购追踪",width:"700px","append-to-body":"",visible:t.propShowDialog},on:{close:t.close}},[a("div",[Object.keys(t.trackInfo).length>0?[t.trackInfo.receiverName?a("div",[t._v("收货人姓名："+t._s(t.trackInfo.receiverName))]):t._e(),t.trackInfo.receiverPhone?a("div",{staticClass:"mar-t-10"},[t._v("收货手机号："+t._s(t.trackInfo.receiverPhone))]):t._e(),t.trackInfo.status?a("div",{staticClass:"mar-t-10"},[t._v("订单状态："+t._s(t._f("statusFilter")(t.trackInfo.status)))]):t._e(),t.trackInfo.createTime?a("div",{staticClass:"mar-t-10"},[t._v("创建时间： "+t._s(t._f("formatTime")(t.trackInfo.createTime)))]):t._e(),t.trackInfo.payTime?a("div",{staticClass:"mar-t-10"},[t._v("支付时间： "+t._s(t._f("formatTime")(t.trackInfo.payTime)))]):t._e()]:t._e(),t._l(t.orderDetail,(function(e,r){return a("div",{key:r},[a("div",{staticClass:"mar-b-20 mar-t-10"},[t._v("订单号："+t._s(t.trackInfo.orderNo))]),a("div",{staticClass:"mar-b-10 mar-t-40"},[t._v("采购单号："+t._s(e.purchaseOrderNo)+"（\n                    "),t._l(e.skuCodes,(function(e,r){return a("span",{key:e.skuCode+r,staticStyle:{fontWeight:"500"}},[t._v("\n                        "+t._s(e.skuCode+": "+e.count+"; ")+" \n                    ")])})),t._v("    \n                ）")],2),a("el-steps",{attrs:{"align-center":"",active:t.getActiveStep(e.trackInfos),"process-status":"success",space:150}},t._l(e.trackInfos,(function(e){return a("el-step",{key:e.poStatus,attrs:{title:e.statusName,description:t.getText(e)}})})),1)],1)}))],2),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.close}},[t._v("确 定")])],1)])},n=[],o=(a("7514"),a("98a9")),s=a("c32d"),i={props:{trackInfo:Object,propShowDialog:Boolean},data:function(){return{orderDetail:[],status:{STORAGED:3,SHIPPED:2,PART_SHIPPED:2,PURCHASED:1,WAIT_PURCHASE:0}}},created:function(){this.getDetail()},methods:{getText:function(t){var e=this.formatTime(t.time);return e+=t.abnormalNum>0?"异常数量".concat(t.abnormalNum):"",e+=t.normalNum>0?"正常数量".concat(t.normalNum):"",e},close:function(){this.$emit("close")},getActiveStep:function(t){var e=t.find((function(t){return 1==t.curr}));return e?this.status[e.poStatus]:""},formatTime:function(t,e){return e||(e="YYYY-MM-DD HH:mm:ss"),t&&parseInt(t)?s(parseInt(t)).format(e):""},getDetail:function(){var t=this;Object(o["l"])({orderNo:this.trackInfo.orderNo}).then((function(e){1===e.ret.errcode&&(e.poInfos?t.orderDetail=e.poInfos:t.$message.warning("未生成采购单"))}))}}},c=i,l=a("2877"),u=Object(l["a"])(c,r,n,!1,null,null,null);e["a"]=u.exports},feea:function(t,e,a){"use strict";var r=a("b898"),n=a.n(r);n.a}}]);