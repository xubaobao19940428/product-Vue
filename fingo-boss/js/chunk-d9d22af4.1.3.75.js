(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d9d22af4"],{"0b21":function(e,r,t){"use strict";var a=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"image-upload-wrapper"},[e._l(e.imageList,(function(r,a){return t("div",{key:r,staticClass:"image-box"},[t("div",{staticClass:"image-item-area"},[t("el-image",{staticClass:"image-item",attrs:{src:e.dealShowFileSrc(r)}}),t("div",{staticClass:"operate-area"},[t("i",{staticClass:"el-icon-delete",on:{click:function(r){return r.stopPropagation(),e.delImgItem(a)}}})])],1)])})),t("div",{staticClass:"image-box upload-box"},[t("el-upload",{attrs:{action:"","list-type":"picture-card",multiple:"",accept:".jpg,.jpeg,.png,.gif,.bmp,.JPG,.JPEG,.PBG,.GIF,.BMP","http-request":e.uploadImage,"show-file-list":!1,"before-upload":e.onImgBeforeUpload}},[t("i",{staticClass:"el-icon-plus"})])],1)],2)},o=[],n=(t("7f7f"),t("c5f6"),t("60fb")),i={props:{index:{type:Number}},data:function(){return{imageList:[]}},methods:{uploadImage:function(e){var r=this,t=new FormData,a={fileName:e.file.name,type:"product"};t.append("file",e.file),t.append("param",JSON.stringify(a));var o="/file/rest/uploadservices/uploadfile";Object(n["a"])(o,t).then((function(e){if("600"===e.status){r.imageList.push(e.original_link);var t={index:r.index,imgs:r.imageList.join(",")};r.$emit("update-image",t)}})).catch((function(e){console.log(e)}))},delImgItem:function(e){this.imageList.splice(e,1)},reset:function(){this.imageList=[]}}},c=i,s=(t("7d37"),t("2877")),u=Object(s["a"])(c,a,o,!1,null,"53b2649e",null);r["a"]=u.exports},"0cd8":function(e,r,t){"use strict";t.d(r,"O",(function(){return o})),t.d(r,"N",(function(){return n})),t.d(r,"Q",(function(){return i})),t.d(r,"P",(function(){return c})),t.d(r,"M",(function(){return s})),t.d(r,"A",(function(){return u})),t.d(r,"C",(function(){return l})),t.d(r,"R",(function(){return p})),t.d(r,"B",(function(){return d})),t.d(r,"L",(function(){return f})),t.d(r,"E",(function(){return m})),t.d(r,"G",(function(){return h})),t.d(r,"I",(function(){return g})),t.d(r,"K",(function(){return v})),t.d(r,"J",(function(){return b})),t.d(r,"H",(function(){return O})),t.d(r,"F",(function(){return P})),t.d(r,"D",(function(){return R})),t.d(r,"z",(function(){return S})),t.d(r,"l",(function(){return I})),t.d(r,"y",(function(){return C})),t.d(r,"x",(function(){return k})),t.d(r,"m",(function(){return y})),t.d(r,"j",(function(){return x})),t.d(r,"v",(function(){return j})),t.d(r,"w",(function(){return w})),t.d(r,"u",(function(){return A})),t.d(r,"n",(function(){return L})),t.d(r,"r",(function(){return q})),t.d(r,"p",(function(){return B})),t.d(r,"s",(function(){return D})),t.d(r,"q",(function(){return E})),t.d(r,"o",(function(){return G})),t.d(r,"t",(function(){return _})),t.d(r,"i",(function(){return T})),t.d(r,"d",(function(){return N})),t.d(r,"b",(function(){return U})),t.d(r,"h",(function(){return $})),t.d(r,"k",(function(){return F})),t.d(r,"e",(function(){return M})),t.d(r,"f",(function(){return z})),t.d(r,"g",(function(){return V})),t.d(r,"c",(function(){return W})),t.d(r,"a",(function(){return H}));var a=t("284b");function o(e){console.log(e);var r=a["a"].create("PurchaseOrderSavePbReq",e);return Object(a["a"])("erp","PurchaseOrderHandleService.SavePo",r,"purchase.PurchaseOrderSavePbResp")}function n(e){console.log(e);var r=a["a"].create("PurchaseOrderReq",e);return Object(a["a"])("erp","PurchaseOrderService.PurchaseOrderPage",r,"purchase.PurchaseOrderResp")}function i(e){console.log(e);var r=a["a"].create("PoSingleEditReq",e);return Object(a["a"])("erp","PurchaseOrderHandleService.SinglePoEdit",r,"purchase.PoSingleEditResp")}function c(e){console.log(e);var r=a["a"].create("PurchaseOrderSingleMakeupReq",e);return Object(a["a"])("erp","PurchaseOrderHandleService.SingleMakeup",r,"purchase.PurchaseOrderSingleMakeupResp")}function s(e){console.log(e);var r=a["a"].create("PurchasePartCancelReq",e);return Object(a["a"])("erp","PurchaseOrderHandleService.PartCancel",r,"purchase.PurchasePartCancelResp")}function u(e){console.log(e);var r=a["a"].create("PurchaseOrderCancelReq",e);return Object(a["a"])("erp","PurchaseOrderHandleService.AllCancel",r,"purchase.PurchaseOrderCancelResp")}function l(e){console.log(e);var r=a["a"].create("EnsurePurchaseReq",e);return Object(a["a"])("erp","PurchaseOrderHandleService.EnsurePurchase",r,"purchase.EnsurePurchaseResp")}function p(e){console.log(e);var r=a["a"].create("StockOutReq",e);return Object(a["a"])("erp","PurchaseOrderHandleService.Stockout",r,"purchase.StockOutResp")}function d(e){console.log(e);var r=a["a"].create("DeliverReq",e);return Object(a["a"])("erp","PurchaseOrderHandleService.Deliver",r,"purchase.DeliverResp")}function f(e){console.log(e);var r=a["a"].create("ImportShipReq",e);return Object(a["a"])("erp","PurchaseOrderHandleService.ImportShip",r,"purchase.ImportShipResp")}function m(e){console.log(e);var r=a["a"].create("PoDetailReq",e);return Object(a["a"])("erp","PurchaseOrderService.ExportoPo",r,"purchase.ExportPoResp")}function h(e){console.log(e);var r=a["a"].create("PoDetailReq",e);return Object(a["a"])("erp","PurchaseOrderService.GetPurchaseOrder",r,"purchase.PoDetailResp")}function g(e){console.log(e);var r=a["a"].create("PurchaseStatusRateReq",e);return Object(a["a"])("erp","PurchaseOrderService.PurchaseStatusRate",r,"purchase.PurchaseStatusRateResp")}function v(e){console.log(e);var r=a["a"].create("SkuDeliveryDetailReq",e);return Object(a["a"])("erp","PurchaseOrderService.SkuDeliveryDetail",r,"purchase.SkuDeliveryDetailResp")}function b(e){console.log(e);var r=a["a"].create("SkuAbnormalDetailReq",e);return Object(a["a"])("erp","PurchaseOrderService.SkuAbnormalDetail",r,"purchase.SkuAbnormalDetailResp")}function O(e){console.log(e);var r=a["a"].create("PurchaseRelationOrderReq",e);return Object(a["a"])("erp","PurchaseOrderService.PurchaseRelationOrder",r,"purchase.PurchaseRelationOrderResp")}function P(e){var r=a["a"].create("PurchaseOrderReq",e);return Object(a["a"])("erp","PurchaseOrderService.ExportoPos",r,"purchase.ExportPoResp")}function R(e){var r=a["a"].create("PurchaseOrderReq",e);return Object(a["a"])("erp","PurchaseOrderService.ExportShipOrder",r,"purchase.ExportPoResp")}function S(e){var r=a["a"].create("PurchaseStockoutReq",e);return Object(a["a"])("erp","PurchaseOrderHandleService.PurchaseStockout",r,"purchase.PurchaseStockoutResp")}function I(e){var r=a["a"].create("GetStockoutDataReq",e);return Object(a["a"])("erp","PurchaseOrderService.GetStockoutData",r,"purchase.GetStockoutDataResp")}function C(e){var r=a["a"].create("PurchaseSkuOrderPageReq",e);return Object(a["a"])("erp","PurchaseOrderService.PurchaseSkuOrderPage",r,"purchase.PurchaseSkuOrderPageResp")}function k(e){var r=a["a"].create("PurchaseSkuOrderExportReq",e);return Object(a["a"])("erp","PurchaseOrderService.PurchaseSkuOrderExport",r,"purchase.PurchaseSkuOrderExportResp")}function y(e){var r=a["a"].create("ImportBatchPurchaseReq",e);return Object(a["a"])("erp","PurchaseOrderHandleService.ImportBatchPurchase",r,"purchase.ImportBatchPurchaseResp")}function x(e){var r=a["a"].create("ExportPurEnsureTemplateReq",e);return Object(a["a"])("erp","PurchaseOrderService.ExportPurEnsureTemplate",r,"purchase.ExportPurEnsureTemplateResp")}function j(e){var r=a["a"].create("PurEnsureImportPageReq",e);return Object(a["a"])("erp","PurchaseOrderService.PurEnsureImportPage",r,"purchase.PurEnsureImportPageResp")}function w(e){var r=a["a"].create("PurExportTaskPageReq",e);return Object(a["a"])("erp","PurchaseOrderService.PurExportTaskPage",r,"purchase.PurExportTaskPageResp")}function A(e){var r=a["a"].create("PurEnsureImportDetailPageReq",e);return Object(a["a"])("erp","PurchaseOrderService.PurEnsureImportDetailPage",r,"purchase.PurEnsureImportDetailPageResp")}function L(e){var r=a["a"].create("PurCateGroupAddReq",e);return Object(a["a"])("erp","PurCateGroupService.SaveAndUpdate",r,"purchase.PurCateGroupAddResp")}function q(e){var r=a["a"].create("PurCateGroupQueryReq",e);return Object(a["a"])("erp","PurCateGroupService.GetPurCateGroupList",r,"purchase.PurCateGroupListResp")}function B(e){var r=a["a"].create("PurCateGroupDetailReq",e);return Object(a["a"])("erp","PurCateGroupService.PurCateGroupDetail",r,"purchase.PurCateGroupDetailResp")}function D(e){var r=a["a"].create("PurCateGroupQueryReq",e);return Object(a["a"])("erp","PurCateGroupService.GetPurCateGroupBuyerList",r,"purchase.PurCateGroupBuyerListResp")}function E(e){var r=a["a"].create("PurCateGroupEditBuyerReq",e);return Object(a["a"])("erp","PurCateGroupService.EditBuyerGroup",r,"purchase.PurCateGroupEditBuyerResp")}function G(e){var r=a["a"].create("PurCateGroupBuyerDetailReq",e);return Object(a["a"])("erp","PurCateGroupService.PurCateGroupBuyerDetail",r,"purchase.PurCateGroupBuyerDetailResp")}function _(e){var r=a["a"].create("PurCateGroupSelectReq",e);return Object(a["a"])("erp","PurCateGroupService.GetPurCateGroupSelect",r,"purchase.PurCateGroupSelectResp")}function T(e){var r=a["a"].create("DeletePurCateGroupBuyerReq",e);return Object(a["a"])("erp","PurCateGroupService.DeletePurCateGroupBuyer",r,"purchase.DeletePurCateGroupBuyerResp")}function N(e){var r=a["a"].create("AutoPurchaseOrderListReq",e);return Object(a["a"])("erp","PurchaseAutoService.AutoPurchaseList",r,"purchase.AutoPurchaseOrderListResp")}function U(e){var r=a["a"].create("AutoPayCheckReq",e);return Object(a["a"])("erp","PurchaseAutoService.AutoPayCheck",r,"purchase.AutoPayCheckResp")}function $(e){var r=a["a"].create("CanPayBatchReq",e);return Object(a["a"])("erp","PurchaseAutoService.CanPayBatch",r,"purchase.CanPayBatchResp")}function F(e){var r=a["a"].create("GeneratePayUrlReq",e);return Object(a["a"])("erp","PurchaseAutoService.GeneratePayUrl",r,"purchase.GeneratePayUrlResp")}function M(e){var r=a["a"].create("AutoPurchaseSkuCancelReq",e);return Object(a["a"])("erp","PurchaseAutoService.AutoPurchaseSkuCancel",r,"purchase.AutoPurchaseSkuCancelResp")}function z(e){var r=a["a"].create("AutoPurchaseSkuPriceReq",e);return Object(a["a"])("erp","PurchaseAutoService.AutoPurchaseSkuPrice",r,"purchase.AutoPurchaseSkuPriceResp")}function V(e){var r=a["a"].create("AutoPurchaseUpdateReq",e);return Object(a["a"])("erp","PurchaseAutoService.AutoPurchaseUpdate",r,"purchase.AutoPurchaseUpdateResp")}function W(e){var r=a["a"].create("AutoPurchaseDetailReq",e);return Object(a["a"])("erp","PurchaseAutoService.AutoPurchaseDetail",r,"purchase.AutoPurchaseDetailResp")}function H(e){var r=a["a"].create("AutoBatchPurchaseReq",e);return Object(a["a"])("erp","PurchaseAutoService.AutoBatchPurchase",r,"purchase.AutoBatchPurchaseResp")}},"0e7e":function(e,r,t){"use strict";var a=t("aa0a"),o=t.n(a);o.a},"1d60":function(e,r,t){},"245b":function(e,r,t){},2595:function(e,r,t){},"29d8":function(e,r,t){"use strict";var a=t("e924"),o=t.n(a);o.a},"3a74":function(e,r,t){"use strict";t.r(r);var a,o=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"app-container"},[t("el-form",[t("el-form-item",{attrs:{label:"物流单号：",fixed:"left"}},[t("el-input",{ref:"logiCode",staticStyle:{width:"300px","margin-right":"10px"},attrs:{autofocus:"true",clearable:"",size:"medium"},nativeOn:{keydown:function(r){return e.keydownEvent(r)}},model:{value:e.logiCode,callback:function(r){e.logiCode=r},expression:"logiCode"}}),t("el-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick",value:300,expression:"300"}],attrs:{type:"primary",disabled:""===e.logiCode,size:"medium"},on:{click:e.signSockInOrder1}},[e._v("确认")])],1),t("el-form-item")],1),t("ul",{staticClass:"results-list"},e._l(e.resultInfoList,(function(r,a){return t("li",{key:a},[e._v(e._s(r))])})),0),t("upload-exception-info",{attrs:{dialogVisible:e.uploadInfoDialog,sockInData:e.sockInData,dialogTitle:e.uploadDialogTitle,exception:e.exceptionInfo},on:{"on-cancle":e.handleCancle1,"on-confirm":e.handleConfirmProduct}}),t("abnormal-exception",{attrs:{dialogVisible:e.abnormalInfoDialog,dialogTitle:e.abnormalInfoTitle,exception:e.exceptionInfo},on:{"on-cancle":e.handleCancleAbnormal,"on-confirm":e.handleConfirm}})],1)},n=[],i=(t("7514"),t("bd86")),c=t("84a3"),s=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"upload-info-dialog"},[t("el-dialog",{attrs:{title:e.dialogTitle,visible:e.toggle,width:"700px","close-on-click-modal":!1},on:{"update:visible":function(r){e.toggle=r},close:e.cancle}},[t("el-form",{ref:"exceptionInfo",attrs:{"label-position":"right","label-width":"100px",rules:e.exceptionInfoRules,model:e.exceptionInfo}},[t("el-form-item",{attrs:{label:"异常信息："}},[t("span",[e._v(e._s(e.exceptionInfo.abnormalReason))])]),t("el-form-item",{staticClass:"photo",attrs:{label:"请拍照快递面单发货人信息："}},[t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.localUpload}},[e._v("本地上传")]),t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.photoUpload}},[e._v("拍照上传")]),e.local?t("div",{staticClass:"image-upload-wrapper"},[e._l(e.imageList,(function(r,a){return t("div",{key:r,staticClass:"image-box"},[t("div",{staticClass:"image-item-area"},[t("el-image",{staticClass:"image-item",attrs:{src:e.dealShowFileSrc(r)}}),t("div",{staticClass:"operate-area"},[t("i",{staticClass:"el-icon-delete",on:{click:function(r){return r.stopPropagation(),e.delImgItem(a)}}})])],1)])})),t("div",{staticClass:"image-box upload-box"},[t("el-upload",{attrs:{action:"","list-type":"picture-card",multiple:"",accept:".jpg,.jpeg,.png,.gif,.bmp,.JPG,.JPEG,.PBG,.GIF,.BMP","http-request":e.uploadImage,"show-file-list":!1,"before-upload":e.onImgBeforeUpload}},[t("i",{staticClass:"el-icon-plus"})])],1)],2):e._e(),e.photo?t("photo-upload",{ref:"photo",attrs:{index:0,mark:"scan"},on:{imgBase:e.imgBaseTo}}):e._e()],1),t("el-form-item",{attrs:{label:"类目分组:",prop:"groupName"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请录入物流单上收货人姓名后面拼接的内容",clearable:""},model:{value:e.exceptionInfo.groupName,callback:function(r){e.$set(e.exceptionInfo,"groupName",r)},expression:"exceptionInfo.groupName"}},e._l(e.groupNameList,(function(e,r){return t("el-option",{key:r,attrs:{label:e.name,value:e.value}})})),1)],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{size:"small"},on:{click:e.cancle}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(r){return e.confirm("exceptionInfo")}}},[e._v("确 定")])],1)],1)],1)},u=[],l=(t("7f7f"),t("ac6a"),t("60fb")),p=t("ff5d"),d=t("0cd8"),f={name:"UploadExceptionInfoDialog",data:function(){return{exceptionInfo:this.exception,imageList:[],local:!1,photo:!1,groupNameList:[],exceptionInfoRules:{groupName:[{required:!0,message:"请录入物流单上收货人姓名后面拼接的内容",trigger:"change"}]}}},props:{dialogVisible:{type:Boolean,default:!1},dialogTitle:{type:String,default:""},exception:{type:Object,default:function(){return{}}}},components:{photoUpload:p["a"]},computed:{toggle:{get:function(){return this.dialogVisible},set:function(){}}},methods:{getPurCateGroupSelect:function(){var e=this;Object(d["t"])({}).then((function(r){1==r.ret.errcode&&(_.forEach(r.groupList,(function(e){e.value=e.groupName})),e.groupNameList=r.groupList,e.groupNameList.unshift({value:"无对应类目",groupName:"无对应类目"}),console.log(e.groupNameList))}))},localUpload:function(){this.local=!0,this.photo=!1},photoUpload:function(){this.local=!1,this.photo=!0},cancle:function(){this.reset(),this.$emit("on-cancle")},reset:function(){console.log(this.$refs),_.forEach(this.$refs,(function(e){e[0]&&e[0].reset()}))},confirm:function(e){var r=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;r.exceptionInfo.imgs=r.imageList.join(","),r.$emit("on-confirm",r.exceptionInfo)}))},imgBaseTo:function(e){this.imageList=e},uploadImage:function(e){var r=this,t=new FormData,a={fileName:e.file.name,type:"product"};t.append("file",e.file),t.append("param",JSON.stringify(a));var o="/file/rest/uploadservices/uploadfile";Object(l["a"])(o,t).then((function(e){"600"===e.status&&r.imageList.push(e.original_link)})).catch((function(e){console.log(e)}))},delImgItem:function(e){this.imageList.splice(e,1)},querySearch:function(e,r){var t=this.groupNameList,a=e?t.filter(this.createFilter(e)):t;r(a)},createFilter:function(e){return function(r){return 0===r.value.toLowerCase().indexOf(e.toLowerCase())}},handleSelect:function(e){console.log(this.exceptionInfo)}},mounted:function(){this.getPurCateGroupSelect()}},m=f,h=(t("29d8"),t("9532"),t("2877")),g=Object(h["a"])(m,s,u,!1,null,"4e0808ba",null),v=g.exports,b=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"confirm-sockin-dialog"},[t("el-dialog",{attrs:{title:e.dialogTitle,visible:e.toggle,width:"1000px","close-on-click-modal":!1},on:{"update:visible":function(r){e.toggle=r},close:e.cancle}},[e._l(e.sockInData.scokInSkuList,(function(r,a){return t("el-card",{key:a,staticClass:"box-card"},[t("el-form",{attrs:{"label-position":"right","label-width":"120px"}},[t("el-form-item",{attrs:{label:"商品名称："}},[t("span",[e._v(e._s(r.nameCn))])]),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"商品名称："}},[t("span",[e._v(e._s(r.skuCode))])]),t("el-form-item",{attrs:{label:"skuCode："}},[t("span",[e._v(e._s(r.skuCode))])]),t("el-form-item",{attrs:{label:"商品规格："}},[t("span",[e._v(e._s(r.standardAttr))])]),t("el-form-item",{attrs:{label:"商品图片："}},[t("img",{staticClass:"previewImage",attrs:{src:e.dealShowFileSrc(r.skuCover)}})])],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"异常类型："}},[t("el-select",{attrs:{clearable:"",size:"medium"},model:{value:r.abnormalType,callback:function(t){e.$set(r,"abnormalType",t)},expression:"item.abnormalType"}},e._l(e.skuAbnormalTypeList,(function(e){return t("el-option",{key:e.type,attrs:{label:e.remark,value:e.type}})})),1)],1),t("el-form-item",{attrs:{label:"异常数量："}},[t("el-input-number",{attrs:{min:0,max:999999999,size:"medium",precision:0},model:{value:r.abnormalCount,callback:function(t){e.$set(r,"abnormalCount",t)},expression:"item.abnormalCount"}})],1),t("el-form-item",{attrs:{label:"异常商品上传："}},[t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.localUpload}},[e._v("本地上传")]),t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.photoUpload}},[e._v("拍照上传")]),e.local?t("upload-multi-pic",{ref:"upload"+a,refInFor:!0,attrs:{index:a},on:{"update-image":e.handleUpdateImage}}):e._e(),e.photo?t("photo-upload",{ref:"photo"+a,refInFor:!0,attrs:{index:a,mark:"scan"},on:{imgBase:e.imgBaseTo}}):e._e()],1)],1)],1)],1)],1)})),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{size:"small"},on:{click:e.cancle}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.confirm}},[e._v("确 定")])],1)],2)],1)},O=[],P=t("0b21"),R={name:"uploadExceptionInfo",props:{dialogVisible:{type:Boolean,default:!1},sockInData:{type:Object,default:function(){return{}}},dialogTitle:{type:String,default:"异常商品信息"}},data:function(){return{skuAbnormalTypeList:[],local:!1,photo:!1}},components:{UploadMultiPic:P["a"],photoUpload:p["a"]},computed:{toggle:{get:function(){return this.dialogVisible},set:function(){}}},watch:{sockInData:{handler:function(e,r){console.log(e)},deep:!0}},created:function(){this.getSkuAbnormalTypeList()},methods:{imgBaseTo:function(e){this.sockInData.scokInSkuList[e.index]["imgs"]=e.imgs},localUpload:function(){this.local=!0,this.photo=!1},photoUpload:function(){this.local=!1,this.photo=!0},getSkuAbnormalTypeList:function(){var e=this;Object(c["T"])().then((function(r){1===r.ret.errcode&&(r.type.map((function(e,t){"SHORTAGE"==e.type&&r.type.splice(t,1)})),e.skuAbnormalTypeList=r.type,console.log(e.skuAbnormalTypeList))})).catch((function(e){console.log(e)}))},cancle:function(){this.reset(),this.$emit("on-cancle")},confirm:function(){var e=0;console.log(this.sockInData),_.forEach(this.sockInData.scokInSkuList,(function(r){r.abnormalCount>0&&(null!==r.abnormalType&&""!==r.abnormalType||(e+=1))})),e>0?this.$message.error("异常数量大于0，请选择异常类型"):this.$emit("on-confirm",this.sockInData)},handleUpdateImage:function(e){this.sockInData.scokInSkuList[e.index]["imgs"]=e.imgs},reset:function(){_.forEach(this.$refs,(function(e){e[0]&&e[0].reset()}))}}},S=R,I=(t("7338"),t("560b"),Object(h["a"])(S,b,O,!1,null,"5390f925",null)),C=I.exports,k=t("8866"),y=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"upload_expection"},[t("el-dialog",{attrs:{title:"异常包裹信息",visible:e.toggle,width:"900px","close-on-click-modal":!1},on:{"update:visible":function(r){e.toggle=r},close:e.cancle}},[t("el-form",{ref:"abnormalDetail",attrs:{"label-position":"right","label-width":"100px",model:e.exceptionInfo,size:"small",rules:e.exceptionInfoRules}},[t("el-form-item",{attrs:{label:"包裹号："}},[t("span",[e._v(e._s(e.exceptionInfo.logiCode))])]),t("el-form-item",{attrs:{label:"异常类型："}},[t("span",[e._v(e._s(e.exceptionInfo.abnormalReason))])]),t("el-form-item",{attrs:{label:"异常商品上传："}},[t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.localUpload}},[e._v("本地上传")]),t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.photoUpload}},[e._v("拍照上传")]),e.local?t("div",{staticClass:"image-upload-wrapper"},[e._l(e.imageList,(function(r,a){return t("div",{key:r,staticClass:"image-box"},[t("div",{staticClass:"image-item-area"},[t("el-image",{staticClass:"image-item",attrs:{src:e.dealShowFileSrc(r)}}),t("div",{staticClass:"operate-area"},[t("i",{staticClass:"el-icon-delete",on:{click:function(r){return r.stopPropagation(),e.delImgItem(a)}}})])],1)])})),t("div",{staticClass:"image-box upload-box"},[t("el-upload",{attrs:{action:"","list-type":"picture-card",multiple:"",accept:".jpg, .jpeg, .png, .gif, .bmp, .JPG, .JPEG, .PBG, .GIF, .BMP","http-request":e.uploadImage,"show-file-list":!1,"before-upload":e.onImgBeforeUpload}},[t("i",{staticClass:"el-icon-plus"})])],1)],2):e._e(),e.photo?t("photo-upload",{ref:"photo",attrs:{index:0,mark:"scan"},on:{imgBase:e.imgBaseTo}}):e._e()],1),t("el-form-item",{attrs:{label:"类目分组:",prop:"groupName"}},[t("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请录入物流单上收货人姓名后面拼接的内容",clearable:""},model:{value:e.exceptionInfo.groupName,callback:function(r){e.$set(e.exceptionInfo,"groupName",r)},expression:"exceptionInfo.groupName"}},e._l(e.groupNameList,(function(e,r){return t("el-option",{key:r,attrs:{label:e.name,value:e.value}})})),1)],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{size:"small"},on:{click:e.cancle}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(r){return e.confirm("abnormalDetail")}}},[e._v("确 定")])],1)],1)],1)},x=[],j=(a={name:"abnormalException",props:{logiCode:{type:String,default:""},errMessage:{type:String,default:""}},data:function(){return{exceptionInfo:this.exception,imageList:[],local:!1,photo:!1,groupNameList:[],exceptionInfoRules:{groupName:[{required:!0,message:"请录入物流单上收货人姓名后面拼接的内容",trigger:"change"}]}}}},Object(i["a"])(a,"props",{dialogVisible:{type:Boolean,default:!1},dialogTitle:{type:String,default:""},exception:{type:Object,default:function(){return{}}}}),Object(i["a"])(a,"components",{photoUpload:p["a"]}),Object(i["a"])(a,"computed",{toggle:{get:function(){return this.dialogVisible},set:function(){}}}),Object(i["a"])(a,"methods",{localUpload:function(){this.local=!0,this.photo=!1},photoUpload:function(){this.local=!1,this.photo=!0},cancle:function(){this.reset(),this.$emit("on-cancle")},reset:function(){_.forEach(this.$refs,(function(e){e[0]&&e[0].reset()}))},confirm:function(e){var r=this;this.$refs[e].validate((function(e){if(!e)return!1;r.exceptionInfo.imgs=r.imageList.join(","),r.$emit("on-confirm",r.exceptionInfo)}))},imgBaseTo:function(e){this.imageList=e},uploadImage:function(e){var r=this,t=new FormData,a={fileName:e.file.name,type:"product"};t.append("file",e.file),t.append("param",JSON.stringify(a));var o="/file/rest/uploadservices/uploadfile";Object(l["a"])(o,t).then((function(e){"600"===e.status&&r.imageList.push(e.original_link)})).catch((function(e){console.log(e)}))},delImgItem:function(e){this.imageList.splice(e,1)},getPurCateGroupSelect:function(){var e=this;Object(d["t"])({}).then((function(r){1==r.ret.errcode&&(_.forEach(r.groupList,(function(e){e.value=e.groupName})),e.groupNameList=r.groupList,e.groupNameList.unshift({value:"无对应类目",groupName:"无对应类目"}),console.log(e.groupNameList))}))}}),Object(i["a"])(a,"mounted",(function(){this.getPurCateGroupSelect()})),a),w=j,A=(t("ba88"),t("e201"),Object(h["a"])(w,y,x,!1,null,"61b56034",null)),L=A.exports,q={data:function(){return Object(i["a"])({sockInData:[],abnormalInfoDialog:!1,abnormalInfoTitle:"异常包裹信息",uploadInfoDialog:!1,uploadDialogVisible:!1,uploadDialogTitle:"异常商品信息",exceptionInfo:{logiCode:"",abnormalReason:"",content:"",imgs:"",groupName:""},logiCode:"",lastTime:null,nextTime:null,resultInfoList:[],loading:!1,dialog:{param:{imgs:"",errorMessage:"",remark:"",logisticsCompany:"",logiCode:"",companyId:"",type:""},show:!0,imgList:[]},uploadFileUrl:"".concat("https://temp.fingo.shop/fingo/product_manage/ImageUpload"),uploadFileName:"".concat("file"),headers:this.$headers,defaultLogi:""},"sockInData",{})},components:{UploadExceptionInfoDialog:v,UploadExceptionInfo:C,abnormalException:L},methods:{signSockInOrder:function(){var e=this;if(this.logiCode){var r={logiCode:this.logiCode};Object(c["K"])(r).then((function(r){var t="";1===r.ret.errcode?(t=e.logiCode+": 签收成功！",e.resultInfoList.unshift(t)):20001!==r.ret.errcode&&-1!==r.ret.errcode&&(t=e.logiCode+": "+r.message,e.defaultLogi=e.logiCode,e.resultInfoList.unshift(t),e.uploadDialogVisible=!0,e.exceptionInfo.logiCode=e.logiCode,e.exceptionInfo.abnormalReason=r.message),e.logiCode=""})).catch((function(e){console.log(e)}))}},signSockInOrder1:function(){var e=this;if(this.logiCode){var r={logiCode:this.logiCode};Object(c["K"])(r).then((function(r){var t="";1===r.ret.errcode?(t=e.logiCode+": 签收成功！",e.resultInfoList.unshift(t)):20002===r.ret.errcode?(t=e.logiCode+": "+r.message,e.resultInfoList.unshift(t),e.abnormalInfoDialog=!0,e.exceptionInfo.logiCode=e.logiCode,e.exceptionInfo.abnormalReason=r.message):(t=e.logiCode+": "+r.message,e.resultInfoList.unshift(t)),e.logiCode=""})).catch((function(e){console.log(e)}))}},keydownEvent:function(e){var r=e.keyCode||e.which||e.charCode;this.nextTime=new Date,13===r?(this.lastTime&&this.nextTime-this.lastTime<30?console.log("扫码枪"):console.log("键盘"),this.signSockInOrder1(),console.log(this.logiCode),e.preventDefault()):(this.lastTime&&this.nextTime-this.lastTime<30?console.log("扫码枪1"):console.log("键盘1"),this.lastTime=this.nextTime)},handleUploaderRemove:function(e,r,t){var a=r.map((function(e){return void 0!==e.response&&(e.url=e.response.data),e}));this.dialog.imgList=a,this.dialog.param[t]=Object(k["a"])(a)},handleUploadSuccess:function(e,r,t,a){if(e.data){console.log(t);var o=t.map((function(e){return void 0!==e.response&&(e.url=e.response.data),e}));this.dialog.imgList=o,this.dialog.param[a]=Object(k["a"])(o)}else{var n=t.find((function(e){return e==r}));-1!=n&&t.splice(n,1)}},handleCancle:function(){this.exceptionInfo.groupName="",this.uploadDialogVisible=!1},handleCancle1:function(){this.uploadInfoDialog=!1},handleCancleAbnormal:function(e){this.abnormalInfoDialog=!1,this.exceptionInfo.logiCode="",this.exceptionInfo.addSignAbnormal=""},handleConfirm:function(e){var r=this;console.log(e),Object(c["G"])(this.filterData(e)).then((function(e){1===e.ret.errcode?(r.$message.success("异常提交成功！"),r.abnormalInfoDialog=!1):r.$message.error(e.message)})).catch((function(e){console.log(e)}))},handleConfirmProduct:function(e){var r=this;console.log(e);var t={logiCode:e.logiCode,abnormalIncomeSku:e.scokInSkuList};Object(c["i"])(t).then((function(e){1==e.ret.errcode&&(r.uploadInfoDialog=!1,r.$message.success("异常商品录入成功"))})).catch((function(e){console.log(e)}))}}},B=q,D=(t("0e7e"),Object(h["a"])(B,o,n,!1,null,"158000c2",null));r["default"]=D.exports},"3b8c":function(e,r,t){},"3c9e":function(e,r,t){},"560b":function(e,r,t){"use strict";var a=t("b1b5"),o=t.n(a);o.a},"57b5":function(e,r,t){"use strict";var a=t("3b8c"),o=t.n(a);o.a},"60fb":function(e,r,t){"use strict";t.d(r,"a",(function(){return n})),t.d(r,"b",(function(){return i}));var a=t("5c96"),o="https://file.fingo.shop";axios.defaults.timeout=45e3,axios.interceptors.request.use((function(e){return e}),(function(e){return a["Message"].error("请求超时"),Promise.resolve(e)}));var n=function(e,r){var t={headers:{"Content-Type":"multipart/form-data"}};return axios.post("".concat(o).concat(e),r,t).then((function(e){return e.data}))},i=function(e,r){var t={headers:{"Content-Type":"multipart/form-data"}};return axios.post("".concat(o).concat(e),r,t).then((function(e){return e.data}))}},7338:function(e,r,t){"use strict";var a=t("3c9e"),o=t.n(a);o.a},"7d37":function(e,r,t){"use strict";var a=t("9afd"),o=t.n(a);o.a},"84a3":function(e,r,t){"use strict";t.d(r,"U",(function(){return o})),t.d(r,"Q",(function(){return n})),t.d(r,"K",(function(){return i})),t.d(r,"M",(function(){return c})),t.d(r,"N",(function(){return s})),t.d(r,"G",(function(){return u})),t.d(r,"E",(function(){return l})),t.d(r,"F",(function(){return p})),t.d(r,"P",(function(){return d})),t.d(r,"T",(function(){return f})),t.d(r,"S",(function(){return m})),t.d(r,"v",(function(){return h})),t.d(r,"l",(function(){return g})),t.d(r,"O",(function(){return v})),t.d(r,"u",(function(){return b})),t.d(r,"R",(function(){return O})),t.d(r,"H",(function(){return P})),t.d(r,"I",(function(){return R})),t.d(r,"o",(function(){return S})),t.d(r,"C",(function(){return I})),t.d(r,"L",(function(){return C})),t.d(r,"c",(function(){return k})),t.d(r,"a",(function(){return y})),t.d(r,"w",(function(){return x})),t.d(r,"b",(function(){return j})),t.d(r,"j",(function(){return w})),t.d(r,"k",(function(){return A})),t.d(r,"n",(function(){return L})),t.d(r,"J",(function(){return q})),t.d(r,"z",(function(){return B})),t.d(r,"y",(function(){return D})),t.d(r,"m",(function(){return E})),t.d(r,"x",(function(){return G})),t.d(r,"d",(function(){return _})),t.d(r,"h",(function(){return T})),t.d(r,"e",(function(){return N})),t.d(r,"g",(function(){return U})),t.d(r,"f",(function(){return $})),t.d(r,"D",(function(){return F})),t.d(r,"r",(function(){return M})),t.d(r,"q",(function(){return z})),t.d(r,"B",(function(){return V})),t.d(r,"A",(function(){return W})),t.d(r,"p",(function(){return H})),t.d(r,"t",(function(){return J})),t.d(r,"s",(function(){return K})),t.d(r,"i",(function(){return Q}));var a=t("284b");function o(e){console.log(e);var r=a["a"].create("WarehousePageReq",e);return Object(a["a"])("erp","WarehouseBossService.WarehousePage",r,"warehouse.WarehousePageResp")}function n(e){console.log(e);var r=a["a"].create("PurchaseLogiListReq",e);return Object(a["a"])("erp","IncomeOrderBossService.PurchaseLogiList",r,"warehouse.PurchaseLogiListResp")}function i(e){console.log(e);var r=a["a"].create("IncomeOrderSignReq",e);return Object(a["a"])("erp","IncomeOrderBossService.IncomeOrderSign",r,"warehouse.IncomeOrderSignResp")}function c(e){console.log(e);var r=a["a"].create("IncomeOrderPageReq",e);return Object(a["a"])("erp","IncomeOrderBossService.LogiOrderPage",r,"warehouse.IncomeOrderPageResp")}function s(e){console.log(e);var r=a["a"].create("ModifyIncomeOrderLogiReq",e);return Object(a["a"])("erp","IncomeOrderBossService.ModifyIncomeOrderLogi",r,"warehouse.ModifyIncomeOrderLogiResp")}function u(e){console.log(e);var r=a["a"].create("AddSignAbnormalReq",e);return Object(a["a"])("erp","AbnormalBossService.AddSignAbnormal",r,"warehouse.AddSignAbnormalResp")}function l(e){console.log(e);var r=a["a"].create("AbnormalLogiPageReq",e);return Object(a["a"])("erp","AbnormalBossService.AbnormalLogiPage",r,"warehouse.AbnormalLogiPageResp")}function p(e){console.log(e);var r=a["a"].create("AbnormalSkuPageReq",e);return Object(a["a"])("erp","AbnormalBossService.AbnormalSkuPage",r,"warehouse.AbnormalSkuPageResp")}function d(e){console.log(e);var r=a["a"].create("PurchaseDealAbnormalReq",e);return Object(a["a"])("erp","AbnormalBossService.PurchaseDealAbnormal",r,"warehouse.PurchaseDealAbnormalResp")}function f(e){console.log(e);var r=a["a"].create("SkuAbnormalTypeReq",e);return Object(a["a"])("erp","AbnormalBossService.SkuAbnormalType",r,"warehouse.SkuAbnormalTypeResp")}function m(e){console.log(e);var r=a["a"].create("SignAbnormalTypeReq",e);return Object(a["a"])("erp","AbnormalBossService.SignAbnormalType",r,"warehouse.SignAbnormalTypeResp")}function h(e){console.log(e);var r=a["a"].create("OutOrderNewPageReq",e);return Object(a["a"])("erp","OutOrderBossService.OutOrderNewPage",r,"warehouse.OutOrderNewPageResp")}function g(e){console.log(e);var r=a["a"].create("OutOrderNewPageReq",e);return Object(a["a"])("erp","OutOrderBossService.ExportList",r,"warehouse.ExportPoResp")}function v(e){console.log(e);var r=a["a"].create("OutOrderDetailReq",e);return Object(a["a"])("erp","OutOrderBossService.OutOrderDetail",r,"warehouse.OutOrderDetailResp")}function b(e){console.log(e);var r=a["a"].create("OutOrderNewDetailReq",e);return Object(a["a"])("erp","OutOrderBossService.OutOrderNewDetail",r,"warehouse.OutOrderNewDetailResp")}function O(e){console.log(e);var r=a["a"].create("RepushOutOrderReq",e);return Object(a["a"])("erp","OutOrderBossService.RepushOutOrder",r,"warehouse.RepushOutOrderResp")}function P(e){console.log(e);var r=a["a"].create("CannelOutOrderReq",e);return Object(a["a"])("erp","OutOrderBossService.CannelOutOrder",r,"warehouse.CannelOutOrderResp")}function R(e){console.log(e);var r=a["a"].create("CreateOutOrderReq",e);return Object(a["a"])("erp","OutOrderBossService.CreateOutOrder",r,"warehouse.CreateOutOrderResp")}function S(e){console.log(e);var r=a["a"].create("GetTransferWarehouseReq",e);return Object(a["a"])("erp","OutOrderBossService.GetTransferWarehouse",r,"warehouse.GetTransferWarehouseResp")}function I(e){console.log(e);var r=a["a"].create("TransferOutOrderReq",e);return Object(a["a"])("erp","OutOrderBossService.TransferOutOrder",r,"warehouse.TransferOutOrderResp")}function C(e){var r=a["a"].create("LogiCompanyReq",e);return Object(a["a"])("erp","WarehouseBossService.LogiCompany",r,"warehouse.LogiCompanyResp")}function k(e){var r=a["a"].create("AbnormalPurchaseOrderReq",e);return Object(a["a"])("erp","AbnormalBossService.AbnormalPurchaseOrder",r,"warehouse.AbnormalPurchaseOrderResp")}function y(e){var r=a["a"].create("AbnormalMakeupReq",e);return Object(a["a"])("erp","AbnormalBossService.AbnormalMakeup",r,"warehouse.AbnormalMakeupResp")}function x(e){var r=a["a"].create("OverAbnormalReq",e);return Object(a["a"])("erp","AbnormalBossService.OverAbnormal",r,"warehouse.OverAbnormalResp")}function j(e){var r=a["a"].create("AbnormalProcessReq",e);return Object(a["a"])("erp","AbnormalBossService.AbnormalProcess",r,"warehouse.AbnormalProcessResp")}function w(e){var r=a["a"].create("AbnormalLogiPageReq",e);return Object(a["a"])("erp","AbnormalBossService.ExportAbnormalLogi",r,"warehouse.ExportAbnormalLogiResp")}function A(e){var r=a["a"].create("AbnormalSkuPageReq",e);return Object(a["a"])("erp","AbnormalBossService.ExportAbnormalSku",r,"warehouse.ExportAbnormalSkuResp")}function L(e){var r=a["a"].create("GetTransferAddressReq",e);return Object(a["a"])("erp","WarehouseBossService.GetTransferAddress",r,"warehouse.GetTransferAddressResp")}function q(e){var r=a["a"].create("GetSkuBarCodeReq",e);return Object(a["a"])("erp","WarehouseBossService.GetSkuBarCode",r,"warehouse.GetSkuBarCodeResp")}function B(e){var r=a["a"].create("SpiltOutOrderReq",e);return Object(a["a"])("erp","OutOrderBossService.SpiltOutOrder",r,"warehouse.SpiltOutOrderResp")}function D(e){var r=a["a"].create("RevokeSpiltOutOrderReq",e);return Object(a["a"])("erp","OutOrderBossService.RevokeSpiltOutOrder",r,"warehouse.RevokeSpiltOutOrderResp")}function E(e){var r=a["a"].create("GetReissueWarehouseReq",e);return Object(a["a"])("erp","OutOrderBossService.GetReissueWarehouse",r,"warehouse.GetReissueWarehouseResp")}function G(e){var r=a["a"].create("ReissueOutOrderReq",e);return Object(a["a"])("erp","OutOrderBossService.ReissueOutOrder",r,"warehouse.ReissueOutOrderResp")}function _(e){var r=a["a"].create("BarterOutOrderReq",e);return Object(a["a"])("erp","OutOrderBossService.BarterOutOrder",r,"warehouse.BarterOutOrderResp")}function T(e){var r=a["a"].create("EditOutOrderReq",e);return Object(a["a"])("erp","OutOrderBossService.EditOutOrder",r,"warehouse.EditOutOrderResp")}function N(e){var r=a["a"].create("CancelOutOrderReq",e);return Object(a["a"])("erp","OutOrderBossService.CancelOutOrder",r,"warehouse.CancelOutOrderResp")}function U(e){var r=a["a"].create("DiffInventoryRecordPageReq",e);return Object(a["a"])("erp","DiffInventoryRecordBossService.DiffInventoryRecordPage",r,"warehouse.DiffInventoryRecordPageResp")}function $(e){var r=a["a"].create("DiffInventoryRecordPageReq",e);return Object(a["a"])("erp","DiffInventoryRecordBossService.DiffInventoryRecordExport",r,"warehouse.DiffInventoryRecordExportResp")}function F(e){var r=a["a"].create("ValidateWarehouseInventoryReq",e);return Object(a["a"])("erp","DiffInventoryRecordBossService.ValidateWarehouseInventory",r,"warehouse.ValidateWarehouseInventoryResp")}function M(e){var r=a["a"].create("NewIncomeOrderPageReq",e);return Object(a["a"])("erp","IncomeOrderBossService.NewIncomeOrderPage",r,"warehouse.NewIncomeOrderPageResp")}function z(e){var r=a["a"].create("NewIncomeOrderPageReq",e);return Object(a["a"])("erp","IncomeOrderBossService.NewIncomeOrderExport",r,"warehouse.NewIncomeOrderExportResp")}function V(e){var r=a["a"].create("SyncLogicDetailReq",e);return Object(a["a"])("erp","IncomeOrderBossService.SyncLogicDetail",r,"warehouse.SyncLogicDetailResp")}function W(e){var r=a["a"].create("SyncIncomeReq",e);return Object(a["a"])("erp","IncomeOrderBossService.SyncIncome",r,"warehouse.SyncIncomeResp")}function H(e){var r=a["a"].create("IncomeProductDetailReq",e);return Object(a["a"])("erp","IncomeOrderBossService.IncomeProductDetail",r,"warehouse.IncomeProductDetailResp")}function J(e){var r=a["a"].create("OrderIncomeCheckReq",e);return Object(a["a"])("erp","IncomeOrderBossService.OrderIncomeCheck",r,"warehouse.OrderIncomeCheckResp")}function K(e){var r=a["a"].create("OrderIncomeReq",e);return Object(a["a"])("erp","IncomeOrderBossService.OrderIncome",r,"warehouse.OrderIncomeResp")}function Q(e){var r=a["a"].create("EnterAbnormalProductReq",e);return Object(a["a"])("erp","AbnormalBossService.EnterAbnormalProduct",r,"warehouse.EnterAbnormalProductResp")}},9532:function(e,r,t){"use strict";var a=t("2595"),o=t.n(a);o.a},"9afd":function(e,r,t){},aa0a:function(e,r,t){},b1b5:function(e,r,t){},ba88:function(e,r,t){"use strict";var a=t("245b"),o=t.n(a);o.a},e201:function(e,r,t){"use strict";var a=t("1d60"),o=t.n(a);o.a},e924:function(e,r,t){},ff5d:function(e,r,t){"use strict";var a=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"content-holder"},[e._l(e.canvasList,(function(r,a){return t("div",{key:a,staticClass:"image-box"},[t("div",{staticClass:"btn-box"},[t("el-button",{staticClass:"btn",attrs:{type:"primary",size:"mini"},on:{click:function(r){return e.readyPhoto(a)}}},[e._v("开始拍照")]),t("el-button",{staticClass:"btn",attrs:{type:"primary",size:"mini"},on:{click:function(r){return e.startPhoto(a)}}},[e._v("拍照")])],1),t("div",{staticClass:"image-item-area"},[t("canvas",{ref:"canvas"+a,refInFor:!0,staticClass:"image-item",attrs:{width:"1280",height:"720"}})])])})),e.show?t("div",[t("video",{attrs:{id:"video",width:"300",height:"300",autoplay:""}})]):e._e()],2)},o=[],n=(t("34ef"),t("4917"),t("28a5"),t("7f7f"),t("c5f6"),t("60fb")),i={data:function(){return{show:!1,track:null,canvasList:[0],imageList:[],dialogVisible:!1,choseIndex:0}},props:{index:{type:Number},mark:String},methods:{cancle:function(){this.dialogVisible=!1},confirm:function(){this.dialogVisible=!1,this.startPhoto()},readyPhoto:function(e){this.show=!0;var r=this;this.choseIndex=e,this.dialogVisible=!0,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia,navigator.getUserMedia&&navigator.getUserMedia({video:!0},(function(e){r.track=e.getTracks()[0],video.srcObject=e,video.onloadedmetadata=function(e){video.play()}}),(function(e){console.log(e.name)})),-1!==this.canvasList.indexOf(e)&&this.canvasList.length>1&&this.canvasList.pop()},startPhoto:function(e){var r=this;this.show=!1;var t="",a="";console.log(video);var o=this.$refs["canvas".concat(e)][0].getContext("2d");o.fillStyle="#ffffff",o.fillRect(0,0,1280,720),o.drawImage(video,0,0,1280,720),t=this.$refs["canvas".concat(e)][0].toDataURL("image/png"),a=this.dataURLtoFile(t,e),console.log(a),this.$nextTick((function(){r.canvasList.push(e)})),console.log(this.canvasList),this.track.stop(),this.uploadImage(a,this.choseIndex)},uploadImage:function(e,r){var t=this;console.log(e);var a=new FormData,o={fileName:e.name,type:"other"};a.append("file",e),a.append("param",JSON.stringify(o));var i="/file/rest/uploadservices/uploadfile";Object(n["a"])(i,a).then((function(e){if("600"===e.status)if(console.log(e),console.log(t.dealShowFileSrc(e.original_link)),"scan"===t.mark)t.imageList.push(e.original_link),t.$emit("imgBase",t.imageList);else{t.imageList.push(e.original_link);var r={index:t.index,imgs:t.imageList.join(",")};console.log(r),t.$emit("imgBase",r)}})).catch((function(e){console.log(e)}))},dataURLtoFile:function(e,r){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"file",a=e.split(","),o=a[0].match(/:(.*?);/)[1],n=o.split("/")[1],i=atob(a[1]),c=i.length,s=new Uint8Array(c);while(c--)s[c]=i.charCodeAt(c);return new File([s],"".concat(t).concat(r,".").concat(n),{type:o})},delImgItem:function(e){this.imageList.splice(e,1),this.canvasList.splice(e,1)},reset:function(){this.imageList=[],this.canvasList=[0]}}},c=i,s=(t("57b5"),t("2877")),u=Object(s["a"])(c,a,o,!1,null,"1f8f98f2",null);r["a"]=u.exports}}]);