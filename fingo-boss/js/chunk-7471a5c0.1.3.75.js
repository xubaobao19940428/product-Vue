(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7471a5c0"],{7774:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"customer-manage"},[a("el-form",{ref:"customerManageFilter",attrs:{inline:"",model:e.queryData,"label-position":"left"}},[a("el-form-item",{staticClass:"filter-item",attrs:{label:"客服名称："}},[a("el-select",{attrs:{filterable:"",clearable:"",remote:"","reserve-keyword":"","remote-method":e.getlistSysUserByPage,size:"medium",placeholder:"按名称模糊匹配"},model:{value:e.queryData.csName,callback:function(t){e.$set(e.queryData,"csName",t)},expression:"queryData.csName"}},e._l(e.customerList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.nickName,value:e.nickName}})})),1)],1),a("el-form-item",{staticClass:"filter-item",attrs:{prop:"importType",label:"客服国家："}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择",size:"medium"},model:{value:e.queryData.csCountryCode,callback:function(t){e.$set(e.queryData,"csCountryCode",t)},expression:"queryData.csCountryCode"}},e._l(e.countryList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.nameCn,value:e.shortCode}})})),1)],1),a("el-form-item",{staticClass:"filter-item",attrs:{label:"服务语言技能："}},[a("el-select",{attrs:{multiple:"",size:"medium"},model:{value:e.queryData.csLanguage,callback:function(t){e.$set(e.queryData,"csLanguage",t)},expression:"queryData.csLanguage"}},e._l(e.languageList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.desc,value:e.code}})})),1)],1),a("el-form-item",{staticClass:"filter-item",staticStyle:{"margin-left":"20px"}},[a("el-button",{attrs:{icon:"el-icon-search",type:"primary",size:"medium"},on:{click:e.search}},[e._v("搜索")]),a("el-button",{attrs:{icon:"el-icon-refresh-left",size:"medium"},on:{click:e.resetSearch}},[e._v("重置")]),a("el-button",{attrs:{icon:"el-icon-plus",type:"primary",size:"medium"},on:{click:e.addClick}},[e._v("新增客服")])],1)],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[a("el-table-column",{attrs:{label:"排序",width:"100",align:"center",type:"index",index:e.indexMethod,fixed:"left"}}),a("el-table-column",{attrs:{label:"客服昵称",width:"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.row.csName))])]}}])}),a("el-table-column",{attrs:{label:"客服国家",width:"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.row.csCountryCode))])]}}])}),a("el-table-column",{attrs:{label:"服务语言技能",width:"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.row.csLanguage))])]}}])}),a("el-table-column",{attrs:{label:"创建时间",width:"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(e._f("formatTime")(t.row.createTime)))])]}}])}),a("el-table-column",{attrs:{label:"操作人",width:"130",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(t.row.operationName)+"\n            ")]}}])}),a("el-table-column",{attrs:{label:"操作",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.editClick(t.row)}}},[e._v("编辑")]),a("el-button",{staticClass:"delete-btn",attrs:{type:"text"},on:{click:function(a){return e.deleteClick(t.row.csId)}}},[e._v("删除")])]}}])})],1),a("div",{staticClass:"page-wrapper"},[a("el-pagination",{attrs:{"current-page":e.queryData.page.pageNum,"page-sizes":[10,20,30,50],"page-size":e.queryData.page.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChanges,"current-change":e.handleCurrentChanges}})],1),e.dialogVisible?a("cusromer-dialog",{attrs:{dialogVisible:e.dialogVisible,editType:e.editType,countryList:e.countryList,languageList:e.languageList,editModule:e.editModule},on:{"on-cancel":e.cancelDialog,"on-confirm":e.confirmDialog}}):e._e()],1)},i=[],n=(a("96cf"),a("3b8d")),r=(a("7514"),a("284b"));function o(e){var t=r["a"].create("CsStaffAddOrUpdateReq",e);return Object(r["a"])("chat","CsStaffBossService.AddCsStaff",t,"BooleanResp")}function c(e){var t=r["a"].create("ListCsStaffByPageReq",e);return Object(r["a"])("chat","CsStaffBossService.ListCsStaffByPage",t,"ListCsStaffByPageResp")}function l(e){var t=r["a"].create("CsStaffAddOrUpdateReq",e);return Object(r["a"])("chat","CsStaffBossService.UpdateCsStaff",t,"BooleanResp")}function u(e){var t=r["a"].create("DeleteCsStaffReq",e);return Object(r["a"])("chat","CsStaffBossService.DeleteCsStaff",t,"BooleanResp")}var d=a("e7c2"),g=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"customer-dialog",attrs:{title:"add"===e.editType?"添加客服":"编辑客服",visible:e.toggle,width:"30%","before-close":e.cancel},on:{"update:visible":function(t){e.toggle=t}}},[a("el-form",{attrs:{"label-position":"left","label-width":"110px",model:e.queryData,rules:e.rules}},[a("el-form-item",{staticClass:"filter-item",attrs:{label:"客服人员：",prop:"csName"}},[a("el-select",{attrs:{disabled:"edit"===e.editType,filterable:"",clearable:"",remote:"","reserve-keyword":"","remote-method":e.getlistSysUserByPage,size:"medium",placeholder:"按名称模糊匹配"},on:{change:e.getlistSysUserByPage},model:{value:e.queryData.csName,callback:function(t){e.$set(e.queryData,"csName",t)},expression:"queryData.csName"}},e._l(e.customerList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.nickName,value:e.nickName}})})),1)],1),a("el-form-item",{staticClass:"filter-item",attrs:{label:"客服国家：",prop:"csCountryCode"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择",size:"medium"},model:{value:e.queryData.csCountryCode,callback:function(t){e.$set(e.queryData,"csCountryCode",t)},expression:"queryData.csCountryCode"}},e._l(e.countryList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.nameCn,value:e.shortCode}})})),1)],1),a("el-form-item",{staticClass:"filter-item",attrs:{label:"服务语言技能：",prop:"csLanguage"}},[a("el-select",{attrs:{multiple:"",size:"medium",laceholder:"请选择"},model:{value:e.queryData.csLanguage,callback:function(t){e.$set(e.queryData,"csLanguage",t)},expression:"queryData.csLanguage"}},e._l(e.languageList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.desc,value:e.code}})})),1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.cancel}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.comfirm}},[e._v("保 存")])],1)],1)},f=[],m=(a("28a5"),{props:{dialogVisible:Boolean,editType:String,languageList:Array,countryList:Array,editModule:Object},data:function(){return{queryData:{csName:"",csCountryCode:"",csLanguage:[],page:{pageNum:1,pageSize:10}},customerList:[],rules:{csName:[{required:!0,message:"请至少选择一个",trigger:"change"}],csCountryCode:[{required:!0,message:"请至少选择一个",trigger:"change"}],csLanguage:[{required:!0,message:"请至少选择一个",trigger:"change"}]},csId:null}},mounted:function(){"edit"===this.editType?(this.queryData.csName=this.editModule.csName,this.queryData.csCountryCode=this.editModule.csCountryCode.toLocaleUpperCase(),this.queryData.csLanguage=this.editModule.csLanguage.split("|"),this.csId=this.editModule.csId):this.getlistSysUserByPage()},computed:{toggle:{get:function(){return this.dialogVisible},set:function(){}}},methods:{getlistSysUserByPage:function(e){var t=this,a={nickName:e||this.queryData.csName,page:{pageNum:1,pageSize:10,pagingSwitch:!0}};Object(d["l"])(a).then((function(e){1===e.ret.errcode&&(console.log(e),t.customerList=e.sysUserPb,t.csId=e.sysUserPb[0].id)}))},cancel:function(){this.$emit("on-cancel")},comfirm:function(){var e=this;if(""!==this.queryData.csName&&""!==this.queryData.csCountryCode&&0!==this.queryData.csLanguage.length){var t={csId:this.csId,csName:this.queryData.csName,csCountryCode:this.queryData.csCountryCode,csLanguage:this.queryData.csLanguage.join("|")};"add"===this.editType?o(t).then((function(t){1===t.ret.errcode&&e.$emit("on-confirm")})):l(t).then((function(t){1===t.ret.errcode&&e.$emit("on-confirm")}))}else this.$message.error("请输入必填项！")}}}),y=m,p=a("2877"),h=Object(p["a"])(y,g,f,!1,null,null,null),C=h.exports,b={data:function(){return{queryData:{csName:"",csCountryCode:"",csLanguage:[],page:{pageNum:1,pageSize:10}},total:0,tableData:[],editType:"add",dialogVisible:!1,customerList:[],editModule:{csId:null,csLanguage:"",csName:"",csCountryCode:""}}},components:{cusromerDialog:C},mounted:function(){this.getListCsStaffByPage(),this.getlistSysUserByPage()},computed:{countryList:function(){var e=[].concat(this.$store.state.dict.countryList),t=e.find((function(e){return"ID"==e.shortCode}));return t||e.push({nameCn:"印度尼西亚",nameLocal:"印度尼西亚",shortCode:"ID"}),e},languageList:function(){return this.$store.state.dict.languageList}},methods:{indexMethod:function(e){return e+1},getlistSysUserByPage:function(e){var t=this,a={nickName:e||this.queryData.csName,page:{pageNum:1,pageSize:10,pagingSwitch:!0}};Object(d["l"])(a).then((function(e){1===e.ret.errcode&&(console.log(e),t.customerList=e.sysUserPb)}))},getListCsStaffByPage:function(){var e=this,t={csName:this.queryData.csName,csCountryCode:this.queryData.csCountryCode,csLanguage:0===this.queryData.csLanguage.length?"":this.queryData.csLanguage.join("|"),page:this.queryData.page};c(t).then((function(t){1===t.ret.errcode&&(console.log(t),e.tableData=t.csStaffPb,e.total=t.total)}))},handleSizeChanges:function(e){this.queryData.page.pageSize=e,this.getListCsStaffByPage()},handleCurrentChanges:function(e){this.queryData.page.pageNum=e,this.getListCsStaffByPage()},search:function(){this.getListCsStaffByPage()},resetSearch:function(){Object.assign(this.queryData,{csName:"",csCountryCode:"",csLanguage:"",page:{pageNum:1,pageSize:10}}),this.getListCsStaffByPage()},addClick:function(){this.editType="add",this.dialogVisible=!0},editClick:function(e){console.log(e),Object.assign(this.editModule,{csId:e.csId,csLanguage:e.csLanguageCode,csName:e.csName,csCountryCode:e.csCountryCode}),console.log(this.editModule),this.editType="edit",this.dialogVisible=!0},deleteClick:function(e){var t=this;this.$confirm("删除后不可恢复，需要重新添加","确认删除此客服",{confirmButtonText:"继续",cancelButtonText:"取消",type:"warning"}).then(Object(n["a"])(regeneratorRuntime.mark((function a(){var s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:s={csId:e},u(s).then((function(e){1===e.ret.errcode&&(console.log(e),t.$message.success("删除成功！"),t.getListCsStaffByPage())}));case 2:case"end":return a.stop()}}),a)}))))},cancelDialog:function(){this.dialogVisible=!1},confirmDialog:function(){this.dialogVisible=!1,"add"===this.editType?(this.$message.success("添加成功！"),this.getListCsStaffByPage()):(this.$message.success("修改成功！"),this.getListCsStaffByPage())}}},v=b,L=(a("f6ba"),Object(p["a"])(v,s,i,!1,null,"de07c6f2",null));t["default"]=L.exports},b306:function(e,t,a){},f6ba:function(e,t,a){"use strict";var s=a("b306"),i=a.n(s);i.a}}]);